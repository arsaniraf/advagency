(()=>{var CE=Object.create;var rc=Object.defineProperty;var EE=Object.getOwnPropertyDescriptor;var ME=Object.getOwnPropertyNames;var PE=Object.getPrototypeOf,AE=Object.prototype.hasOwnProperty;var c_=r=>rc(r,"__esModule",{value:!0});var f_=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var mi=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),IE=(r,t)=>{c_(r);for(var e in t)rc(r,e,{get:t[e],enumerable:!0})},DE=(r,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ME(t))!AE.call(r,i)&&i!=="default"&&rc(r,i,{get:()=>t[i],enumerable:!(e=EE(t,i))||e.enumerable});return r},Vi=r=>DE(c_(rc(r!=null?CE(PE(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var e1=mi(ml=>{(function(r){var t=r.Promise,e=t&&"resolve"in t&&"reject"in t&&"all"in t&&"race"in t&&function(){var D;return new t(function(X){D=X}),typeof D=="function"}();typeof ml!="undefined"&&ml?(ml.Promise=e?t:N,ml.Polyfill=N):typeof define=="function"&&define.amd?define(function(){return e?t:N}):e||(r.Promise=N);var i="pending",n="sealed",s="fulfilled",a="rejected",o=function(){};function h(D){return Object.prototype.toString.call(D)==="[object Array]"}var u=typeof setImmediate!="undefined"?setImmediate:setTimeout,d=[],g;function f(){for(var D=0;D<d.length;D++)d[D][0](d[D][1]);d=[],g=!1}function m(D,X){d.push([D,X]),g||(g=!0,u(f,0))}function _(D,X){function at(gt){C(X,gt)}function ft(gt){E(X,gt)}try{D(at,ft)}catch(gt){ft(gt)}}function v(D){var X=D.owner,at=X.state_,ft=X.data_,gt=D[at],ut=D.then;if(typeof gt=="function"){at=s;try{ft=gt(ft)}catch(xt){E(ut,xt)}}b(ut,ft)||(at===s&&C(ut,ft),at===a&&E(ut,ft))}function b(D,X){var at;try{if(D===X)throw new TypeError("A promises callback cannot return that same promise.");if(X&&(typeof X=="function"||typeof X=="object")){var ft=X.then;if(typeof ft=="function")return ft.call(X,function(gt){at||(at=!0,X!==gt?C(D,gt):M(D,gt))},function(gt){at||(at=!0,E(D,gt))}),!0}}catch(gt){return at||E(D,gt),!0}return!1}function C(D,X){(D===X||!b(D,X))&&M(D,X)}function M(D,X){D.state_===i&&(D.state_=n,D.data_=X,m(A,D))}function E(D,X){D.state_===i&&(D.state_=n,D.data_=X,m(R,D))}function w(D){var X=D.then_;D.then_=void 0;for(var at=0;at<X.length;at++)v(X[at])}function A(D){D.state_=s,w(D)}function R(D){D.state_=a,w(D)}function N(D){if(typeof D!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof N))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],_(D,this)}N.prototype={constructor:N,state_:i,then_:null,data_:void 0,then:function(D,X){var at={owner:this,then:new this.constructor(o),fulfilled:D,rejected:X};return this.state_===s||this.state_===a?m(v,at):this.then_.push(at),at.then},catch:function(D){return this.then(null,D)}},N.all=function(D){var X=this;if(!h(D))throw new TypeError("You must pass an array to Promise.all().");return new X(function(at,ft){var gt=[],ut=0;function xt(tt){return ut++,function(W){gt[tt]=W,--ut||at(gt)}}for(var nt=0,it;nt<D.length;nt++)it=D[nt],it&&typeof it.then=="function"?it.then(xt(nt),ft):gt[nt]=it;ut||at(gt)})},N.race=function(D){var X=this;if(!h(D))throw new TypeError("You must pass an array to Promise.race().");return new X(function(at,ft){for(var gt=0,ut;gt<D.length;gt++)ut=D[gt],ut&&typeof ut.then=="function"?ut.then(at,ft):at(ut)})},N.resolve=function(D){var X=this;return D&&typeof D=="object"&&D.constructor===X?D:new X(function(at){at(D)})},N.reject=function(D){var X=this;return new X(function(at,ft){ft(D)})}})(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:ml)});var n1=mi((RN,r1)=>{"use strict";var i1=Object.getOwnPropertySymbols,v2=Object.prototype.hasOwnProperty,_2=Object.prototype.propertyIsEnumerable;function y2(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function x2(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}r1.exports=x2()?Object.assign:function(r,t){for(var e,i=y2(r),n,s=1;s<arguments.length;s++){e=Object(arguments[s]);for(var a in e)v2.call(e,a)&&(i[a]=e[a]);if(i1){n=i1(e);for(var o=0;o<n.length;o++)_2.call(e,n[o])&&(i[n[o]]=e[n[o]])}}return i}});var b1=mi((UN,Nm)=>{"use strict";var C2=Object.prototype.hasOwnProperty,lr="~";function su(){}Object.create&&(su.prototype=Object.create(null),new su().__proto__||(lr=!1));function E2(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function x1(r,t,e,i,n){if(typeof e!="function")throw new TypeError("The listener must be a function");var s=new E2(e,i||r,n),a=lr?lr+t:t;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],s]:r._events[a].push(s):(r._events[a]=s,r._eventsCount++),r}function lf(r,t){--r._eventsCount==0?r._events=new su:delete r._events[t]}function Ki(){this._events=new su,this._eventsCount=0}Ki.prototype.eventNames=function(){var t=[],e,i;if(this._eventsCount===0)return t;for(i in e=this._events)C2.call(e,i)&&t.push(lr?i.slice(1):i);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};Ki.prototype.listeners=function(t){var e=lr?lr+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a};Ki.prototype.listenerCount=function(t){var e=lr?lr+t:t,i=this._events[e];return i?i.fn?1:i.length:0};Ki.prototype.emit=function(t,e,i,n,s,a){var o=lr?lr+t:t;if(!this._events[o])return!1;var h=this._events[o],u=arguments.length,d,g;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,s),!0;case 6:return h.fn.call(h.context,e,i,n,s,a),!0}for(g=1,d=new Array(u-1);g<u;g++)d[g-1]=arguments[g];h.fn.apply(h.context,d)}else{var f=h.length,m;for(g=0;g<f;g++)switch(h[g].once&&this.removeListener(t,h[g].fn,void 0,!0),u){case 1:h[g].fn.call(h[g].context);break;case 2:h[g].fn.call(h[g].context,e);break;case 3:h[g].fn.call(h[g].context,e,i);break;case 4:h[g].fn.call(h[g].context,e,i,n);break;default:if(!d)for(m=1,d=new Array(u-1);m<u;m++)d[m-1]=arguments[m];h[g].fn.apply(h[g].context,d)}}return!0};Ki.prototype.on=function(t,e,i){return x1(this,t,e,i,!1)};Ki.prototype.once=function(t,e,i){return x1(this,t,e,i,!0)};Ki.prototype.removeListener=function(t,e,i,n){var s=lr?lr+t:t;if(!this._events[s])return this;if(!e)return lf(this,s),this;var a=this._events[s];if(a.fn)a.fn===e&&(!n||a.once)&&(!i||a.context===i)&&lf(this,s);else{for(var o=0,h=[],u=a.length;o<u;o++)(a[o].fn!==e||n&&!a[o].once||i&&a[o].context!==i)&&h.push(a[o]);h.length?this._events[s]=h.length===1?h[0]:h:lf(this,s)}return this};Ki.prototype.removeAllListeners=function(t){var e;return t?(e=lr?lr+t:t,this._events[e]&&lf(this,e)):(this._events=new su,this._eventsCount=0),this};Ki.prototype.off=Ki.prototype.removeListener;Ki.prototype.addListener=Ki.prototype.on;Ki.prefixed=lr;Ki.EventEmitter=Ki;typeof Nm!="undefined"&&(Nm.exports=Ki)});var E1=mi((GN,Um)=>{"use strict";Um.exports=hf;Um.exports.default=hf;function hf(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=w1(r,0,n,e,!0),a=[];if(!s||s.next===s.prev)return a;var o,h,u,d,g,f,m;if(i&&(s=D2(r,t,s,e)),r.length>80*e){o=u=r[0],h=d=r[1];for(var _=e;_<n;_+=e)g=r[_],f=r[_+1],g<o&&(o=g),f<h&&(h=f),g>u&&(u=g),f>d&&(d=f);m=Math.max(u-o,d-h),m=m!==0?1/m:0}return au(s,a,e,o,h,m),a}function w1(r,t,e,i,n){var s,a;if(n===Vm(r,t,e,i)>0)for(s=t;s<e;s+=i)a=C1(s,r[s],r[s+1],a);else for(s=e-i;s>=t;s-=i)a=C1(s,r[s],r[s+1],a);return a&&uf(a,a.next)&&(lu(a),a=a.next),a}function ia(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(uf(e,e.next)||oi(e.prev,e,e.next)===0)){if(lu(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function au(r,t,e,i,n,s,a){if(!!r){!a&&s&&O2(r,i,n,s);for(var o=r,h,u;r.prev!==r.next;){if(h=r.prev,u=r.next,s?P2(r,i,n,s):M2(r)){t.push(h.i/e),t.push(r.i/e),t.push(u.i/e),lu(r),r=u.next,o=u.next;continue}if(r=u,r===o){a?a===1?(r=A2(ia(r),t,e),au(r,t,e,i,n,s,2)):a===2&&I2(r,t,e,i,n,s):au(ia(r),t,e,i,n,s,1);break}}}}function M2(r){var t=r.prev,e=r,i=r.next;if(oi(t,e,i)>=0)return!1;for(var n=r.next.next;n!==r.prev;){if(vl(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)&&oi(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function P2(r,t,e,i){var n=r.prev,s=r,a=r.next;if(oi(n,s,a)>=0)return!1;for(var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,h=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,u=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,d=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,g=Bm(o,h,t,e,i),f=Bm(u,d,t,e,i),m=r.prevZ,_=r.nextZ;m&&m.z>=g&&_&&_.z<=f;){if(m!==r.prev&&m!==r.next&&vl(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&oi(m.prev,m,m.next)>=0||(m=m.prevZ,_!==r.prev&&_!==r.next&&vl(n.x,n.y,s.x,s.y,a.x,a.y,_.x,_.y)&&oi(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;m&&m.z>=g;){if(m!==r.prev&&m!==r.next&&vl(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&oi(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=f;){if(_!==r.prev&&_!==r.next&&vl(n.x,n.y,s.x,s.y,a.x,a.y,_.x,_.y)&&oi(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function A2(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!uf(n,s)&&S1(n,i,i.next,s)&&ou(n,s)&&ou(s,n)&&(t.push(n.i/e),t.push(i.i/e),t.push(s.i/e),lu(i),lu(i.next),i=r=s),i=i.next}while(i!==r);return ia(i)}function I2(r,t,e,i,n,s){var a=r;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&z2(a,o)){var h=T1(a,o);a=ia(a,a.next),h=ia(h,h.next),au(a,t,e,i,n,s),au(h,t,e,i,n,s);return}o=o.next}a=a.next}while(a!==r)}function D2(r,t,e,i){var n=[],s,a,o,h,u;for(s=0,a=t.length;s<a;s++)o=t[s]*i,h=s<a-1?t[s+1]*i:r.length,u=w1(r,o,h,i,!1),u===u.next&&(u.steiner=!0),n.push(B2(u));for(n.sort(L2),s=0;s<n.length;s++)R2(n[s],e),e=ia(e,e.next);return e}function L2(r,t){return r.x-t.x}function R2(r,t){if(t=F2(r,t),t){var e=T1(t,r);ia(t,t.next),ia(e,e.next)}}function F2(r,t){var e=t,i=r.x,n=r.y,s=-1/0,a;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var o=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=i&&o>s){if(s=o,o===i){if(n===e.y)return e;if(n===e.next.y)return e.next}a=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!a)return null;if(i===s)return a;var h=a,u=a.x,d=a.y,g=1/0,f;e=a;do i>=e.x&&e.x>=u&&i!==e.x&&vl(n<d?i:s,n,u,d,n<d?s:i,n,e.x,e.y)&&(f=Math.abs(n-e.y)/(i-e.x),ou(e,r)&&(f<g||f===g&&(e.x>a.x||e.x===a.x&&k2(a,e)))&&(a=e,g=f)),e=e.next;while(e!==h);return a}function k2(r,t){return oi(r.prev,r,t.prev)<0&&oi(t.next,r,r.next)<0}function O2(r,t,e,i){var n=r;do n.z===null&&(n.z=Bm(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,N2(n)}function N2(r){var t,e,i,n,s,a,o,h,u=1;do{for(e=r,r=null,s=null,a=0;e;){for(a++,i=e,o=0,t=0;t<u&&(o++,i=i.nextZ,!!i);t++);for(h=u;o>0||h>0&&i;)o!==0&&(h===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,o--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,u*=2}while(a>1);return r}function Bm(r,t,e,i,n){return r=32767*(r-e)*n,t=32767*(t-i)*n,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function B2(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function vl(r,t,e,i,n,s,a,o){return(n-a)*(t-o)-(r-a)*(s-o)>=0&&(r-a)*(i-o)-(e-a)*(t-o)>=0&&(e-a)*(s-o)-(n-a)*(i-o)>=0}function z2(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!V2(r,t)&&(ou(r,t)&&ou(t,r)&&U2(r,t)&&(oi(r.prev,r,t.prev)||oi(r,t.prev,t))||uf(r,t)&&oi(r.prev,r,r.next)>0&&oi(t.prev,t,t.next)>0)}function oi(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function uf(r,t){return r.x===t.x&&r.y===t.y}function S1(r,t,e,i){var n=ff(oi(r,t,e)),s=ff(oi(r,t,i)),a=ff(oi(e,i,r)),o=ff(oi(e,i,t));return!!(n!==s&&a!==o||n===0&&cf(r,e,t)||s===0&&cf(r,i,t)||a===0&&cf(e,r,i)||o===0&&cf(e,t,i))}function cf(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function ff(r){return r>0?1:r<0?-1:0}function V2(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&S1(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function ou(r,t){return oi(r.prev,r,r.next)<0?oi(r,t,r.next)>=0&&oi(r,r.prev,t)>=0:oi(r,t,r.prev)<0||oi(r,r.next,t)<0}function U2(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function T1(r,t){var e=new zm(r.i,r.x,r.y),i=new zm(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function C1(r,t,e,i){var n=new zm(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function lu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function zm(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}hf.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,a=Math.abs(Vm(r,0,s,e));if(n)for(var o=0,h=t.length;o<h;o++){var u=t[o]*e,d=o<h-1?t[o+1]*e:r.length;a-=Math.abs(Vm(r,u,d,e))}var g=0;for(o=0;o<i.length;o+=3){var f=i[o]*e,m=i[o+1]*e,_=i[o+2]*e;g+=Math.abs((r[f]-r[_])*(r[m+1]-r[f+1])-(r[f]-r[m])*(r[_+1]-r[f+1]))}return a===0&&g===0?0:Math.abs((g-a)/a)};function Vm(r,t,e,i){for(var n=0,s=t,a=e-i;s<e;s+=i)n+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return n}hf.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var a=0;a<t;a++)e.vertices.push(r[n][s][a]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e}});var M1=mi((_l,yl)=>{(function(r){var t=typeof _l=="object"&&_l&&!_l.nodeType&&_l,e=typeof yl=="object"&&yl&&!yl.nodeType&&yl,i=typeof global=="object"&&global;(i.global===i||i.window===i||i.self===i)&&(r=i);var n,s=2147483647,a=36,o=1,h=26,u=38,d=700,g=72,f=128,m="-",_=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=a-o,E=Math.floor,w=String.fromCharCode,A;function R(W){throw RangeError(C[W])}function N(W,Q){for(var ot=W.length,ct=[];ot--;)ct[ot]=Q(W[ot]);return ct}function D(W,Q){var ot=W.split("@"),ct="";ot.length>1&&(ct=ot[0]+"@",W=ot[1]),W=W.replace(b,".");var Tt=W.split("."),Rt=N(Tt,Q).join(".");return ct+Rt}function X(W){for(var Q=[],ot=0,ct=W.length,Tt,Rt;ot<ct;)Tt=W.charCodeAt(ot++),Tt>=55296&&Tt<=56319&&ot<ct?(Rt=W.charCodeAt(ot++),(Rt&64512)==56320?Q.push(((Tt&1023)<<10)+(Rt&1023)+65536):(Q.push(Tt),ot--)):Q.push(Tt);return Q}function at(W){return N(W,function(Q){var ot="";return Q>65535&&(Q-=65536,ot+=w(Q>>>10&1023|55296),Q=56320|Q&1023),ot+=w(Q),ot}).join("")}function ft(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:a}function gt(W,Q){return W+22+75*(W<26)-((Q!=0)<<5)}function ut(W,Q,ot){var ct=0;for(W=ot?E(W/d):W>>1,W+=E(W/Q);W>M*h>>1;ct+=a)W=E(W/M);return E(ct+(M+1)*W/(W+u))}function xt(W){var Q=[],ot=W.length,ct,Tt=0,Rt=f,Pt=g,Nt,At,Qt,Vt,Yt,Xt,re,qt,Ut;for(Nt=W.lastIndexOf(m),Nt<0&&(Nt=0),At=0;At<Nt;++At)W.charCodeAt(At)>=128&&R("not-basic"),Q.push(W.charCodeAt(At));for(Qt=Nt>0?Nt+1:0;Qt<ot;){for(Vt=Tt,Yt=1,Xt=a;Qt>=ot&&R("invalid-input"),re=ft(W.charCodeAt(Qt++)),(re>=a||re>E((s-Tt)/Yt))&&R("overflow"),Tt+=re*Yt,qt=Xt<=Pt?o:Xt>=Pt+h?h:Xt-Pt,!(re<qt);Xt+=a)Ut=a-qt,Yt>E(s/Ut)&&R("overflow"),Yt*=Ut;ct=Q.length+1,Pt=ut(Tt-Vt,ct,Vt==0),E(Tt/ct)>s-Rt&&R("overflow"),Rt+=E(Tt/ct),Tt%=ct,Q.splice(Tt++,0,Rt)}return at(Q)}function nt(W){var Q,ot,ct,Tt,Rt,Pt,Nt,At,Qt,Vt,Yt,Xt=[],re,qt,Ut,Lt;for(W=X(W),re=W.length,Q=f,ot=0,Rt=g,Pt=0;Pt<re;++Pt)Yt=W[Pt],Yt<128&&Xt.push(w(Yt));for(ct=Tt=Xt.length,Tt&&Xt.push(m);ct<re;){for(Nt=s,Pt=0;Pt<re;++Pt)Yt=W[Pt],Yt>=Q&&Yt<Nt&&(Nt=Yt);for(qt=ct+1,Nt-Q>E((s-ot)/qt)&&R("overflow"),ot+=(Nt-Q)*qt,Q=Nt,Pt=0;Pt<re;++Pt)if(Yt=W[Pt],Yt<Q&&++ot>s&&R("overflow"),Yt==Q){for(At=ot,Qt=a;Vt=Qt<=Rt?o:Qt>=Rt+h?h:Qt-Rt,!(At<Vt);Qt+=a)Lt=At-Vt,Ut=a-Vt,Xt.push(w(gt(Vt+Lt%Ut,0))),At=E(Lt/Ut);Xt.push(w(gt(At,0))),Rt=ut(ot,qt,ct==Tt),ot=0,++ct}++ot,++Q}return Xt.join("")}function it(W){return D(W,function(Q){return _.test(Q)?xt(Q.slice(4).toLowerCase()):Q})}function tt(W){return D(W,function(Q){return v.test(Q)?"xn--"+nt(Q):Q})}if(n={version:"1.3.2",ucs2:{decode:X,encode:at},decode:xt,encode:nt,toASCII:tt,toUnicode:it},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return n});else if(t&&e)if(yl.exports==t)e.exports=n;else for(A in n)n.hasOwnProperty(A)&&(t[A]=n[A]);else r.punycode=n})(_l)});var A1=mi((HN,P1)=>{"use strict";P1.exports={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}}});var D1=mi((WN,I1)=>{"use strict";function G2(r,t){return Object.prototype.hasOwnProperty.call(r,t)}I1.exports=function(r,t,e,i){t=t||"&",e=e||"=";var n={};if(typeof r!="string"||r.length===0)return n;var s=/\+/g;r=r.split(t);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var o=r.length;a>0&&o>a&&(o=a);for(var h=0;h<o;++h){var u=r[h].replace(s,"%20"),d=u.indexOf(e),g,f,m,_;d>=0?(g=u.substr(0,d),f=u.substr(d+1)):(g=u,f=""),m=decodeURIComponent(g),_=decodeURIComponent(f),G2(n,m)?Array.isArray(n[m])?n[m].push(_):n[m]=[n[m],_]:n[m]=_}return n}});var R1=mi((XN,L1)=>{"use strict";var hu=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};L1.exports=function(r,t,e,i){return t=t||"&",e=e||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(n){var s=encodeURIComponent(hu(n))+e;return Array.isArray(r[n])?r[n].map(function(a){return s+encodeURIComponent(hu(a))}).join(t):s+encodeURIComponent(hu(r[n]))}).join(t):i?encodeURIComponent(hu(i))+e+encodeURIComponent(hu(r)):""}});var F1=mi(uu=>{"use strict";uu.decode=uu.parse=D1();uu.encode=uu.stringify=R1()});var Xm=mi(bl=>{"use strict";var H2=M1(),Gn=A1();bl.parse=cu;bl.resolve=Q2;bl.resolveObject=tA;bl.format=K2;bl.Url=tn;function tn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var W2=/^([a-z0-9.+-]+:)/i,X2=/:[0-9]*$/,q2=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Y2=["<",">",'"',"`"," ","\r",`
`,"	"],j2=["{","}","|","\\","^","`"].concat(Y2),Gm=["'"].concat(j2),k1=["%","/","?",";","#"].concat(Gm),O1=["/","?","#"],Z2=255,N1=/^[+a-z0-9A-Z_-]{0,63}$/,$2=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,J2={javascript:!0,"javascript:":!0},Hm={javascript:!0,"javascript:":!0},xl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Wm=F1();function cu(r,t,e){if(r&&Gn.isObject(r)&&r instanceof tn)return r;var i=new tn;return i.parse(r,t,e),i}tn.prototype.parse=function(r,t,e){if(!Gn.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),a=/\\/g;s[0]=s[0].replace(a,"/"),r=s.join(n);var o=r;if(o=o.trim(),!e&&r.split("#").length===1){var h=q2.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=Wm.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=W2.exec(o);if(u){u=u[0];var d=u.toLowerCase();this.protocol=d,o=o.substr(u.length)}if(e||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var g=o.substr(0,2)==="//";g&&!(u&&Hm[u])&&(o=o.substr(2),this.slashes=!0)}if(!Hm[u]&&(g||u&&!xl[u])){for(var f=-1,m=0;m<O1.length;m++){var _=o.indexOf(O1[m]);_!==-1&&(f===-1||_<f)&&(f=_)}var v,b;f===-1?b=o.lastIndexOf("@"):b=o.lastIndexOf("@",f),b!==-1&&(v=o.slice(0,b),o=o.slice(b+1),this.auth=decodeURIComponent(v)),f=-1;for(var m=0;m<k1.length;m++){var _=o.indexOf(k1[m]);_!==-1&&(f===-1||_<f)&&(f=_)}f===-1&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var C=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!C)for(var M=this.hostname.split(/\./),m=0,E=M.length;m<E;m++){var w=M[m];if(!!w&&!w.match(N1)){for(var A="",R=0,N=w.length;R<N;R++)w.charCodeAt(R)>127?A+="x":A+=w[R];if(!A.match(N1)){var D=M.slice(0,m),X=M.slice(m+1),at=w.match($2);at&&(D.push(at[1]),X.unshift(at[2])),X.length&&(o="/"+X.join(".")+o),this.hostname=D.join(".");break}}}this.hostname.length>Z2?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=H2.toASCII(this.hostname));var ft=this.port?":"+this.port:"",gt=this.hostname||"";this.host=gt+ft,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!J2[d])for(var m=0,E=Gm.length;m<E;m++){var ut=Gm[m];if(o.indexOf(ut)!==-1){var xt=encodeURIComponent(ut);xt===ut&&(xt=escape(ut)),o=o.split(ut).join(xt)}}var nt=o.indexOf("#");nt!==-1&&(this.hash=o.substr(nt),o=o.slice(0,nt));var it=o.indexOf("?");if(it!==-1?(this.search=o.substr(it),this.query=o.substr(it+1),t&&(this.query=Wm.parse(this.query)),o=o.slice(0,it)):t&&(this.search="",this.query={}),o&&(this.pathname=o),xl[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ft=this.pathname||"",tt=this.search||"";this.path=ft+tt}return this.href=this.format(),this};function K2(r){return Gn.isString(r)&&(r=cu(r)),r instanceof tn?r.format():tn.prototype.format.call(r)}tn.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Gn.isObject(this.query)&&Object.keys(this.query).length&&(s=Wm.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||xl[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),e=e.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),t+n+e+a+i};function Q2(r,t){return cu(r,!1,!0).resolve(t)}tn.prototype.resolve=function(r){return this.resolveObject(cu(r,!1,!0)).format()};function tA(r,t){return r?cu(r,!1,!0).resolveObject(t):t}tn.prototype.resolveObject=function(r){if(Gn.isString(r)){var t=new tn;t.parse(r,!1,!0),r=t}for(var e=new tn,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),o=0;o<a.length;o++){var h=a[o];h!=="protocol"&&(e[h]=r[h])}return xl[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!xl[r.protocol]){for(var u=Object.keys(r),d=0;d<u.length;d++){var g=u[d];e[g]=r[g]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!Hm[r.protocol]){for(var E=(r.pathname||"").split("/");E.length&&!(r.host=E.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),E[0]!==""&&E.unshift(""),E.length<2&&E.unshift(""),e.pathname=E.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var _=e.pathname&&e.pathname.charAt(0)==="/",v=r.host||r.pathname&&r.pathname.charAt(0)==="/",b=v||_||e.host&&r.pathname,C=b,M=e.pathname&&e.pathname.split("/")||[],E=r.pathname&&r.pathname.split("/")||[],w=e.protocol&&!xl[e.protocol];if(w&&(e.hostname="",e.port=null,e.host&&(M[0]===""?M[0]=e.host:M.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(E[0]===""?E[0]=r.host:E.unshift(r.host)),r.host=null),b=b&&(E[0]===""||M[0]==="")),v)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,M=E;else if(E.length)M||(M=[]),M.pop(),M=M.concat(E),e.search=r.search,e.query=r.query;else if(!Gn.isNullOrUndefined(r.search)){if(w){e.hostname=e.host=M.shift();var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return e.search=r.search,e.query=r.query,(!Gn.isNull(e.pathname)||!Gn.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!M.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var R=M.slice(-1)[0],N=(e.host||r.host||M.length>1)&&(R==="."||R==="..")||R==="",D=0,X=M.length;X>=0;X--)R=M[X],R==="."?M.splice(X,1):R===".."?(M.splice(X,1),D++):D&&(M.splice(X,1),D--);if(!b&&!C)for(;D--;D)M.unshift("..");b&&M[0]!==""&&(!M[0]||M[0].charAt(0)!=="/")&&M.unshift(""),N&&M.join("/").substr(-1)!=="/"&&M.push("");var at=M[0]===""||M[0]&&M[0].charAt(0)==="/";if(w){e.hostname=e.host=at?"":M.length?M.shift():"";var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return b=b||e.host&&M.length,b&&!at&&M.unshift(""),M.length?e.pathname=M.join("/"):(e.pathname=null,e.path=null),(!Gn.isNull(e.pathname)||!Gn.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};tn.prototype.parseHost=function(){var r=this.host,t=X2.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)}});var Lb=mi((A5,Db)=>{"use strict";function OI(r,t){if(!!r){t=t||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=e.parser[t.strictMode?"strict":"loose"].exec(r),n={},s=14;s--;)n[e.key[s]]=i[s]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(a,o,h){o&&(n[e.q.name][o]=h)}),n}}Db.exports=OI});var Bb=mi((kf,Nb)=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var Rb=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function Fb(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Eu=function(){function r(t,e,i){e===void 0&&(e=!1),Fb(this,r),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return Rb(r,[{key:"detach",value:function(){return this._owner===null?!1:(this._owner.detach(this),!0)}}]),r}();function kb(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}var Ob=function(){function r(){Fb(this,r),this._head=this._tail=void 0}return Rb(r,[{key:"handlers",value:function(){var e=arguments.length<=0||arguments[0]===void 0?!1:arguments[0],i=this._head;if(e)return!!i;for(var n=[];i;)n.push(i),i=i._next;return n}},{key:"has",value:function(e){if(!(e instanceof Eu))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var i=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return kb(this,new Eu(e,!1,i))}},{key:"once",value:function(e){var i=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return kb(this,new Eu(e,!0,i))}},{key:"detach",value:function(e){if(!(e instanceof Eu))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),r}();Ob.MiniSignalBinding=Eu;kf.default=Ob;Nb.exports=kf.default});var Ol=mi((exports,module)=>{typeof navigator!="undefined"&&function(r,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis!="undefined"?globalThis:r||self,r.lottie=t())}(exports,function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(r){return document.createElement(r)}function extendPrototype(r,t){var e,i=r.length,n;for(e=0;e<i;e+=1){n=r[e].prototype;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t.prototype[s]=n[s])}}function getDescriptor(r,t){return Object.getOwnPropertyDescriptor(r,t)}function createProxyFunction(r){function t(){}return t.prototype=r,t}var audioControllerFactory=function(){function r(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return r.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].pause()},resume:function(){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].resume()},setRate:function(e){var i,n=this.audios.length;for(i=0;i<n;i+=1)this.audios[i].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new r}}(),createTypedArray=function(){function r(e,i){var n=0,s=[],a;switch(e){case"int16":case"uint8c":a=1;break;default:a=1.1;break}for(n=0;n<i;n+=1)s.push(a);return s}function t(e,i){return e==="float32"?new Float32Array(i):e==="int16"?new Int16Array(i):e==="uint8c"?new Uint8ClampedArray(i):r(e,i)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?t:r}();function createSizedArray(r){return Array.apply(null,{length:r})}function _typeof$6(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(e){return typeof e}:_typeof$6=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(r)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var r=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t,e=r.length;for(t=0;t<e;t+=1)BMMath[r[t]]=Math[r[t]]})();function ProjectInterface$1(){return{}}BMMath.random=Math.random,BMMath.abs=function(r){var t=_typeof$6(r);if(t==="object"&&r.length){var e=createSizedArray(r.length),i,n=r.length;for(i=0;i<n;i+=1)e[i]=Math.abs(r[i]);return e}return Math.abs(r)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(r){_shouldRoundValues=!!r}function bmRnd(r){return _shouldRoundValues?Math.round(r):r}function styleDiv(r){r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.display="block",r.style.transformOrigin="0 0",r.style.webkitTransformOrigin="0 0",r.style.backfaceVisibility="visible",r.style.webkitBackfaceVisibility="visible",r.style.transformStyle="preserve-3d",r.style.webkitTransformStyle="preserve-3d",r.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(r,t,e,i){this.type=r,this.currentTime=t,this.totalTime=e,this.direction=i<0?-1:1}function BMCompleteEvent(r,t){this.type=r,this.direction=t<0?-1:1}function BMCompleteLoopEvent(r,t,e,i){this.type=r,this.currentLoop=e,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(r,t,e){this.type=r,this.firstFrame=t,this.totalFrames=e}function BMDestroyEvent(r,t){this.type=r,this.target=t}function BMRenderFrameErrorEvent(r,t){this.type="renderFrameError",this.nativeError=r,this.currentTime=t}function BMConfigErrorEvent(r){this.type="configError",this.nativeError=r}function BMAnimationConfigErrorEvent(r,t){this.type=r,this.nativeError=t}var createElementID=function(){var r=0;return function(){return r+=1,idPrefix$1+"__lottie_element_"+r}}();function HSVtoRGB(r,t,e){var i,n,s,a,o,h,u,d;switch(a=Math.floor(r*6),o=r*6-a,h=e*(1-t),u=e*(1-o*t),d=e*(1-(1-o)*t),a%6){case 0:i=e,n=d,s=h;break;case 1:i=u,n=e,s=h;break;case 2:i=h,n=e,s=d;break;case 3:i=h,n=u,s=e;break;case 4:i=d,n=h,s=e;break;case 5:i=e,n=h,s=u;break;default:break}return[i,n,s]}function RGBtoHSV(r,t,e){var i=Math.max(r,t,e),n=Math.min(r,t,e),s=i-n,a,o=i===0?0:s/i,h=i/255;switch(i){case n:a=0;break;case r:a=t-e+s*(t<e?6:0),a/=6*s;break;case t:a=e-r+s*2,a/=6*s;break;case e:a=r-t+s*4,a/=6*s;break;default:break}return[a,o,h]}function addSaturationToRGB(r,t){var e=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return e[1]+=t,e[1]>1?e[1]=1:e[1]<=0&&(e[1]=0),HSVtoRGB(e[0],e[1],e[2])}function addBrightnessToRGB(r,t){var e=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return e[2]+=t,e[2]>1?e[2]=1:e[2]<0&&(e[2]=0),HSVtoRGB(e[0],e[1],e[2])}function addHueToRGB(r,t){var e=RGBtoHSV(r[0]*255,r[1]*255,r[2]*255);return e[0]+=t/360,e[0]>1?e[0]-=1:e[0]<0&&(e[0]+=1),HSVtoRGB(e[0],e[1],e[2])}var rgbToHex=function(){var r=[],t,e;for(t=0;t<256;t+=1)e=t.toString(16),r[t]=e.length===1?"0"+e:e;return function(i,n,s){return i<0&&(i=0),n<0&&(n=0),s<0&&(s=0),"#"+r[i]+r[n]+r[s]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(r){return document.createElementNS(svgNS,r)}function _typeof$5(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(e){return typeof e}:_typeof$5=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(r)}var dataManager=function(){var r=1,t=[],e,i,n={onmessage:function(){},postMessage:function(m){e({data:m})}},s={postMessage:function(m){n.onmessage({data:m})}};function a(f){if(window.Worker&&window.Blob&&getWebWorker()){var m=new Blob(["var _workerSelf = self; self.onmessage = ",f.toString()],{type:"text/javascript"}),_=URL.createObjectURL(m);return new Worker(_)}return e=f,n}function o(){i||(i=a(function(m){function _(){function b(nt,it){var tt,W,Q=nt.length,ot,ct,Tt,Rt;for(W=0;W<Q;W+=1)if(tt=nt[W],"ks"in tt&&!tt.completed){if(tt.completed=!0,tt.hasMask){var Pt=tt.masksProperties;for(ct=Pt.length,ot=0;ot<ct;ot+=1)if(Pt[ot].pt.k.i)A(Pt[ot].pt.k);else for(Rt=Pt[ot].pt.k.length,Tt=0;Tt<Rt;Tt+=1)Pt[ot].pt.k[Tt].s&&A(Pt[ot].pt.k[Tt].s[0]),Pt[ot].pt.k[Tt].e&&A(Pt[ot].pt.k[Tt].e[0])}tt.ty===0?(tt.layers=E(tt.refId,it),b(tt.layers,it)):tt.ty===4?w(tt.shapes):tt.ty===5&&ut(tt)}}function C(nt,it){if(nt){var tt=0,W=nt.length;for(tt=0;tt<W;tt+=1)nt[tt].t===1&&(nt[tt].data.layers=E(nt[tt].data.refId,it),b(nt[tt].data.layers,it))}}function M(nt,it){for(var tt=0,W=it.length;tt<W;){if(it[tt].id===nt)return it[tt];tt+=1}return null}function E(nt,it){var tt=M(nt,it);return tt?tt.layers.__used?JSON.parse(JSON.stringify(tt.layers)):(tt.layers.__used=!0,tt.layers):null}function w(nt){var it,tt=nt.length,W,Q;for(it=tt-1;it>=0;it-=1)if(nt[it].ty==="sh")if(nt[it].ks.k.i)A(nt[it].ks.k);else for(Q=nt[it].ks.k.length,W=0;W<Q;W+=1)nt[it].ks.k[W].s&&A(nt[it].ks.k[W].s[0]),nt[it].ks.k[W].e&&A(nt[it].ks.k[W].e[0]);else nt[it].ty==="gr"&&w(nt[it].it)}function A(nt){var it,tt=nt.i.length;for(it=0;it<tt;it+=1)nt.i[it][0]+=nt.v[it][0],nt.i[it][1]+=nt.v[it][1],nt.o[it][0]+=nt.v[it][0],nt.o[it][1]+=nt.v[it][1]}function R(nt,it){var tt=it?it.split("."):[100,100,100];return nt[0]>tt[0]?!0:tt[0]>nt[0]?!1:nt[1]>tt[1]?!0:tt[1]>nt[1]?!1:nt[2]>tt[2]?!0:tt[2]>nt[2]?!1:null}var N=function(){var nt=[4,4,14];function it(W){var Q=W.t.d;W.t.d={k:[{s:Q,t:0}]}}function tt(W){var Q,ot=W.length;for(Q=0;Q<ot;Q+=1)W[Q].ty===5&&it(W[Q])}return function(W){if(R(nt,W.v)&&(tt(W.layers),W.assets)){var Q,ot=W.assets.length;for(Q=0;Q<ot;Q+=1)W.assets[Q].layers&&tt(W.assets[Q].layers)}}}(),D=function(){var nt=[4,7,99];return function(it){if(it.chars&&!R(nt,it.v)){var tt,W=it.chars.length;for(tt=0;tt<W;tt+=1){var Q=it.chars[tt];Q.data&&Q.data.shapes&&(w(Q.data.shapes),Q.data.ip=0,Q.data.op=99999,Q.data.st=0,Q.data.sr=1,Q.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},it.chars[tt].t||(Q.data.shapes.push({ty:"no"}),Q.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),X=function(){var nt=[5,7,15];function it(W){var Q=W.t.p;typeof Q.a=="number"&&(Q.a={a:0,k:Q.a}),typeof Q.p=="number"&&(Q.p={a:0,k:Q.p}),typeof Q.r=="number"&&(Q.r={a:0,k:Q.r})}function tt(W){var Q,ot=W.length;for(Q=0;Q<ot;Q+=1)W[Q].ty===5&&it(W[Q])}return function(W){if(R(nt,W.v)&&(tt(W.layers),W.assets)){var Q,ot=W.assets.length;for(Q=0;Q<ot;Q+=1)W.assets[Q].layers&&tt(W.assets[Q].layers)}}}(),at=function(){var nt=[4,1,9];function it(W){var Q,ot=W.length,ct,Tt;for(Q=0;Q<ot;Q+=1)if(W[Q].ty==="gr")it(W[Q].it);else if(W[Q].ty==="fl"||W[Q].ty==="st")if(W[Q].c.k&&W[Q].c.k[0].i)for(Tt=W[Q].c.k.length,ct=0;ct<Tt;ct+=1)W[Q].c.k[ct].s&&(W[Q].c.k[ct].s[0]/=255,W[Q].c.k[ct].s[1]/=255,W[Q].c.k[ct].s[2]/=255,W[Q].c.k[ct].s[3]/=255),W[Q].c.k[ct].e&&(W[Q].c.k[ct].e[0]/=255,W[Q].c.k[ct].e[1]/=255,W[Q].c.k[ct].e[2]/=255,W[Q].c.k[ct].e[3]/=255);else W[Q].c.k[0]/=255,W[Q].c.k[1]/=255,W[Q].c.k[2]/=255,W[Q].c.k[3]/=255}function tt(W){var Q,ot=W.length;for(Q=0;Q<ot;Q+=1)W[Q].ty===4&&it(W[Q].shapes)}return function(W){if(R(nt,W.v)&&(tt(W.layers),W.assets)){var Q,ot=W.assets.length;for(Q=0;Q<ot;Q+=1)W.assets[Q].layers&&tt(W.assets[Q].layers)}}}(),ft=function(){var nt=[4,4,18];function it(W){var Q,ot=W.length,ct,Tt;for(Q=ot-1;Q>=0;Q-=1)if(W[Q].ty==="sh")if(W[Q].ks.k.i)W[Q].ks.k.c=W[Q].closed;else for(Tt=W[Q].ks.k.length,ct=0;ct<Tt;ct+=1)W[Q].ks.k[ct].s&&(W[Q].ks.k[ct].s[0].c=W[Q].closed),W[Q].ks.k[ct].e&&(W[Q].ks.k[ct].e[0].c=W[Q].closed);else W[Q].ty==="gr"&&it(W[Q].it)}function tt(W){var Q,ot,ct=W.length,Tt,Rt,Pt,Nt;for(ot=0;ot<ct;ot+=1){if(Q=W[ot],Q.hasMask){var At=Q.masksProperties;for(Rt=At.length,Tt=0;Tt<Rt;Tt+=1)if(At[Tt].pt.k.i)At[Tt].pt.k.c=At[Tt].cl;else for(Nt=At[Tt].pt.k.length,Pt=0;Pt<Nt;Pt+=1)At[Tt].pt.k[Pt].s&&(At[Tt].pt.k[Pt].s[0].c=At[Tt].cl),At[Tt].pt.k[Pt].e&&(At[Tt].pt.k[Pt].e[0].c=At[Tt].cl)}Q.ty===4&&it(Q.shapes)}}return function(W){if(R(nt,W.v)&&(tt(W.layers),W.assets)){var Q,ot=W.assets.length;for(Q=0;Q<ot;Q+=1)W.assets[Q].layers&&tt(W.assets[Q].layers)}}}();function gt(nt){nt.__complete||(at(nt),N(nt),D(nt),X(nt),ft(nt),b(nt.layers,nt.assets),C(nt.chars,nt.assets),nt.__complete=!0)}function ut(nt){nt.t.a.length===0&&!("m"in nt.t.p)}var xt={};return xt.completeData=gt,xt.checkColors=at,xt.checkChars=D,xt.checkPathProperties=X,xt.checkShapes=ft,xt.completeLayers=b,xt}if(s.dataManager||(s.dataManager=_()),s.assetLoader||(s.assetLoader=function(){function b(M){var E=M.getResponseHeader("content-type");return E&&M.responseType==="json"&&E.indexOf("json")!==-1||M.response&&_typeof$5(M.response)==="object"?M.response:M.response&&typeof M.response=="string"?JSON.parse(M.response):M.responseText?JSON.parse(M.responseText):null}function C(M,E,w,A){var R,N=new XMLHttpRequest;try{N.responseType="json"}catch{}N.onreadystatechange=function(){if(N.readyState===4)if(N.status===200)R=b(N),w(R);else try{R=b(N),w(R)}catch(D){A&&A(D)}};try{N.open(["G","E","T"].join(""),M,!0)}catch{N.open(["G","E","T"].join(""),E+"/"+M,!0)}N.send()}return{load:C}}()),m.data.type==="loadAnimation")s.assetLoader.load(m.data.path,m.data.fullPath,function(b){s.dataManager.completeData(b),s.postMessage({id:m.data.id,payload:b,status:"success"})},function(){s.postMessage({id:m.data.id,status:"error"})});else if(m.data.type==="complete"){var v=m.data.animation;s.dataManager.completeData(v),s.postMessage({id:m.data.id,payload:v,status:"success"})}else m.data.type==="loadData"&&s.assetLoader.load(m.data.path,m.data.fullPath,function(b){s.postMessage({id:m.data.id,payload:b,status:"success"})},function(){s.postMessage({id:m.data.id,status:"error"})})}),i.onmessage=function(f){var m=f.data,_=m.id,v=t[_];t[_]=null,m.status==="success"?v.onComplete(m.payload):v.onError&&v.onError()})}function h(f,m){r+=1;var _="processId_"+r;return t[_]={onComplete:f,onError:m},_}function u(f,m,_){o();var v=h(m,_);i.postMessage({type:"loadAnimation",path:f,fullPath:window.location.origin+window.location.pathname,id:v})}function d(f,m,_){o();var v=h(m,_);i.postMessage({type:"loadData",path:f,fullPath:window.location.origin+window.location.pathname,id:v})}function g(f,m,_){o();var v=h(m,_);i.postMessage({type:"complete",animation:f,id:v})}return{loadAnimation:u,loadData:d,completeAnimation:g}}(),ImagePreloader=function(){var r=function(){var C=createTag("canvas");C.width=1,C.height=1;var M=C.getContext("2d");return M.fillStyle="rgba(0,0,0,0)",M.fillRect(0,0,1,1),C}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function e(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(C,M,E){var w="";if(C.e)w=C.p;else if(M){var A=C.p;A.indexOf("images/")!==-1&&(A=A.split("/")[1]),w=M+A}else w=E,w+=C.u?C.u:"",w+=C.p;return w}function n(C){var M=0,E=setInterval(function(){var w=C.getBBox();(w.width||M>500)&&(this._imageLoaded(),clearInterval(E)),M+=1}.bind(this),50)}function s(C){var M=i(C,this.assetsPath,this.path),E=createNS("image");isSafari?this.testImageLoaded(E):E.addEventListener("load",this._imageLoaded,!1),E.addEventListener("error",function(){w.img=r,this._imageLoaded()}.bind(this),!1),E.setAttributeNS("http://www.w3.org/1999/xlink","href",M),this._elementHelper.append?this._elementHelper.append(E):this._elementHelper.appendChild(E);var w={img:E,assetData:C};return w}function a(C){var M=i(C,this.assetsPath,this.path),E=createTag("img");E.crossOrigin="anonymous",E.addEventListener("load",this._imageLoaded,!1),E.addEventListener("error",function(){w.img=r,this._imageLoaded()}.bind(this),!1),E.src=M;var w={img:E,assetData:C};return w}function o(C){var M={assetData:C},E=i(C,this.assetsPath,this.path);return dataManager.loadData(E,function(w){M.img=w,this._footageLoaded()}.bind(this),function(){M.img={},this._footageLoaded()}.bind(this)),M}function h(C,M){this.imagesLoadedCb=M;var E,w=C.length;for(E=0;E<w;E+=1)C[E].layers||(!C[E].t||C[E].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(C[E]))):C[E].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(C[E]))))}function u(C){this.path=C||""}function d(C){this.assetsPath=C||""}function g(C){for(var M=0,E=this.images.length;M<E;){if(this.images[M].assetData===C)return this.images[M].img;M+=1}return null}function f(){this.imagesLoadedCb=null,this.images.length=0}function m(){return this.totalImages===this.loadedAssets}function _(){return this.totalFootages===this.loadedFootagesCount}function v(C,M){C==="svg"?(this._elementHelper=M,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function b(){this._imageLoaded=t.bind(this),this._footageLoaded=e.bind(this),this.testImageLoaded=n.bind(this),this.createFootageData=o.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return b.prototype={loadAssets:h,setAssetsPath:d,setPath:u,loadedImages:m,loadedFootages:_,destroy:f,getAsset:g,createImgData:a,createImageData:s,imageLoaded:t,footageLoaded:e,setCacheType:v},b}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var i=this._cbs[t],n=0;n<i.length;n+=1)i[n](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(!e)this._cbs[t]=null;else if(this._cbs[t]){for(var i=0,n=this._cbs[t].length;i<n;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,n-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}};var markerParser=function(){function r(t){for(var e=t.split(`\r
`),i={},n,s=0,a=0;a<e.length;a+=1)n=e[a].split(":"),n.length===2&&(i[n[0]]=n[1].trim(),s+=1);if(s===0)throw new Error;return i}return function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t[i],s={time:n.tm,duration:n.dr};try{s.payload=JSON.parse(t[i].cm)}catch{try{s.payload=r(t[i].cm)}catch{s.payload={name:t[i].cm}}}e.push(s)}return e}}(),ProjectInterface=function(){function r(t){this.compositions.push(t)}return function(){function t(e){for(var i=0,n=this.compositions.length;i<n;){if(this.compositions[i].data&&this.compositions[i].data.nm===e)return this.compositions[i].prepareFrame&&this.compositions[i].data.xt&&this.compositions[i].prepareFrame(this.currentFrame),this.compositions[i].compInterface;i+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=r,t}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(r){return renderers[r]}function _typeof$4(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(e){return typeof e}:_typeof$4=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(r)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(r){(r.wrapper||r.container)&&(this.wrapper=r.wrapper||r.container);var t="svg";r.animType?t=r.animType:r.renderer&&(t=r.renderer);var e=getRenderer(t);this.renderer=new e(this,r.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,r.loop===""||r.loop===null||r.loop===void 0||r.loop===!0?this.loop=!0:r.loop===!1?this.loop=!1:this.loop=parseInt(r.loop,10),this.autoplay="autoplay"in r?r.autoplay:!0,this.name=r.name?r.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(r,"autoloadSegments")?r.autoloadSegments:!0,this.assetsPath=r.assetsPath,this.initialSegment=r.initialSegment,r.audioFactory&&this.audioController.setAudioFactory(r.audioFactory),r.animationData?this.setupAnimation(r.animationData):r.path&&(r.path.lastIndexOf("\\")!==-1?this.path=r.path.substr(0,r.path.lastIndexOf("\\")+1):this.path=r.path.substr(0,r.path.lastIndexOf("/")+1),this.fileName=r.path.substr(r.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(r.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(r){dataManager.completeAnimation(r,this.configAnimation)},AnimationItem.prototype.setData=function(r,t){t&&_typeof$4(t)!=="object"&&(t=JSON.parse(t));var e={wrapper:r,animationData:t},i=r.attributes;e.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",e.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:"canvas";var n=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";n==="false"?e.loop=!1:n==="true"?e.loop=!0:n!==""&&(e.loop=parseInt(n,10));var s=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:i.getNamedItem("bm-autoplay")?i.getNamedItem("bm-autoplay").value:!0;e.autoplay=s!=="false",e.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"";var a=i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"";a==="false"&&(e.prerender=!1),this.setParams(e)},AnimationItem.prototype.includeLayers=function(r){r.op>this.animationData.op&&(this.animationData.op=r.op,this.totalFrames=Math.floor(r.op-this.animationData.ip));var t=this.animationData.layers,e,i=t.length,n=r.layers,s,a=n.length;for(s=0;s<a;s+=1)for(e=0;e<i;){if(t[e].id===n[s].id){t[e]=n[s];break}e+=1}if((r.chars||r.fonts)&&(this.renderer.globalData.fontManager.addChars(r.chars),this.renderer.globalData.fontManager.addFonts(r.fonts,this.renderer.globalData.defs)),r.assets)for(i=r.assets.length,e=0;e<i;e+=1)this.animationData.assets.push(r.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(r){this.animationData=r;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var r=this.animationData.segments;if(!r||r.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var t=r.shift();this.timeCompleted=t.time*this.frameRate;var e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(e,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var r=this.animationData.segments;r||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(r){if(!!this.renderer)try{this.animationData=r,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(r),r.assets||(r.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(r.assets),this.markers=markerParser(r.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(r,t){var e=typeof r=="number"?r:void 0,i=typeof t=="number"?t:void 0;this.renderer.updateContainerSize(e,i)},AnimationItem.prototype.setSubframe=function(r){this.isSubframeEnabled=!!r},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(r){this.triggerRenderFrameError(r)}},AnimationItem.prototype.play=function(r){r&&this.name!==r||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(r){r&&this.name!==r||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(r){r&&this.name!==r||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(r){r&&this.name!==r||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(r){for(var t,e=0;e<this.markers.length;e+=1)if(t=this.markers[e],t.payload&&t.payload.name===r)return t;return null},AnimationItem.prototype.goToAndStop=function(r,t,e){if(!(e&&this.name!==e)){var i=Number(r);if(isNaN(i)){var n=this.getMarkerData(r);n&&this.goToAndStop(n.time,!0)}else t?this.setCurrentRawFrameValue(r):this.setCurrentRawFrameValue(r*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(r,t,e){if(!(e&&this.name!==e)){var i=Number(r);if(isNaN(i)){var n=this.getMarkerData(r);n&&(n.duration?this.playSegments([n.time,n.time+n.duration],!0):this.goToAndStop(n.time,!0))}else this.goToAndStop(i,t,e);this.play()}},AnimationItem.prototype.advanceTime=function(r){if(!(this.isPaused===!0||this.isLoaded===!1)){var t=this.currentRawFrame+r*this.frameModifier,e=!1;t>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(e=!0,t=this.totalFrames-1):t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):t<0?this.checkSegments(t%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(e=!0,t=0)):this.setCurrentRawFrameValue(t),e&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(r,t){this.playCount=0,r[1]<r[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=r[0]-r[1],this.timeCompleted=this.totalFrames,this.firstFrame=r[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):r[1]>r[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=r[1]-r[0],this.timeCompleted=this.totalFrames,this.firstFrame=r[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(r,t){var e=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<r?e=r:this.currentRawFrame+this.firstFrame>t&&(e=t-r)),this.firstFrame=r,this.totalFrames=t-r,this.timeCompleted=this.totalFrames,e!==-1&&this.goToAndStop(e,!0)},AnimationItem.prototype.playSegments=function(r,t){if(t&&(this.segments.length=0),_typeof$4(r[0])==="object"){var e,i=r.length;for(e=0;e<i;e+=1)this.segments.push(r[e])}else this.segments.push(r);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(r){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),r&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(r){return this.segments.length?(this.adjustSegment(this.segments.shift(),r),!0):!1},AnimationItem.prototype.destroy=function(r){r&&this.name!==r||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(r){this.currentRawFrame=r,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(r){this.playSpeed=r,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(r){this.playDirection=r<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(r,t){t&&this.name!==t||this.audioController.setVolume(r)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(r){r&&this.name!==r||this.audioController.mute()},AnimationItem.prototype.unmute=function(r){r&&this.name!==r||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(r){var t="";if(r.e)t=r.p;else if(this.assetsPath){var e=r.p;e.indexOf("images/")!==-1&&(e=e.split("/")[1]),t=this.assetsPath+e}else t=this.path,t+=r.u?r.u:"",t+=r.p;return t},AnimationItem.prototype.getAssetData=function(r){for(var t=0,e=this.assets.length;t<e;){if(r===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(r){return r?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(r,t,e){try{var i=this.renderer.getElementByPath(r);i.updateDocumentData(t,e)}catch{}},AnimationItem.prototype.trigger=function(r){if(this._cbs&&this._cbs[r])switch(r){case"enterFrame":this.triggerEvent(r,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(r,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(r,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(r,new BMCompleteEvent(r,this.frameMult));break;case"segmentStart":this.triggerEvent(r,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(r,new BMDestroyEvent(r,this));break;default:this.triggerEvent(r)}r==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameMult)),r==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult)),r==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(r,this.frameMult)),r==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames)),r==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(r,this))},AnimationItem.prototype.triggerRenderFrameError=function(r){var t=new BMRenderFrameErrorEvent(r,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(r){var t=new BMConfigErrorEvent(r,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var r={},t=[],e=0,i=0,n=0,s=!0,a=!1;function o(it){for(var tt=0,W=it.target;tt<i;)t[tt].animation===W&&(t.splice(tt,1),tt-=1,i-=1,W.isPaused||g()),tt+=1}function h(it,tt){if(!it)return null;for(var W=0;W<i;){if(t[W].elem===it&&t[W].elem!==null)return t[W].animation;W+=1}var Q=new AnimationItem;return f(Q,it),Q.setData(it,tt),Q}function u(){var it,tt=t.length,W=[];for(it=0;it<tt;it+=1)W.push(t[it].animation);return W}function d(){n+=1,at()}function g(){n-=1}function f(it,tt){it.addEventListener("destroy",o),it.addEventListener("_active",d),it.addEventListener("_idle",g),t.push({elem:tt,animation:it}),i+=1}function m(it){var tt=new AnimationItem;return f(tt,null),tt.setParams(it),tt}function _(it,tt){var W;for(W=0;W<i;W+=1)t[W].animation.setSpeed(it,tt)}function v(it,tt){var W;for(W=0;W<i;W+=1)t[W].animation.setDirection(it,tt)}function b(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.play(it)}function C(it){var tt=it-e,W;for(W=0;W<i;W+=1)t[W].animation.advanceTime(tt);e=it,n&&!a?window.requestAnimationFrame(C):s=!0}function M(it){e=it,window.requestAnimationFrame(C)}function E(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.pause(it)}function w(it,tt,W){var Q;for(Q=0;Q<i;Q+=1)t[Q].animation.goToAndStop(it,tt,W)}function A(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.stop(it)}function R(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.togglePause(it)}function N(it){var tt;for(tt=i-1;tt>=0;tt-=1)t[tt].animation.destroy(it)}function D(it,tt,W){var Q=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ot,ct=Q.length;for(ot=0;ot<ct;ot+=1)W&&Q[ot].setAttribute("data-bm-type",W),h(Q[ot],it);if(tt&&ct===0){W||(W="svg");var Tt=document.getElementsByTagName("body")[0];Tt.innerText="";var Rt=createTag("div");Rt.style.width="100%",Rt.style.height="100%",Rt.setAttribute("data-bm-type",W),Tt.appendChild(Rt),h(Rt,it)}}function X(){var it;for(it=0;it<i;it+=1)t[it].animation.resize()}function at(){!a&&n&&s&&(window.requestAnimationFrame(M),s=!1)}function ft(){a=!0}function gt(){a=!1,at()}function ut(it,tt){var W;for(W=0;W<i;W+=1)t[W].animation.setVolume(it,tt)}function xt(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.mute(it)}function nt(it){var tt;for(tt=0;tt<i;tt+=1)t[tt].animation.unmute(it)}return r.registerAnimation=h,r.loadAnimation=m,r.setSpeed=_,r.setDirection=v,r.play=b,r.pause=E,r.stop=A,r.togglePause=R,r.searchAnimations=D,r.resize=X,r.goToAndStop=w,r.destroy=N,r.freeze=ft,r.unfreeze=gt,r.setVolume=ut,r.mute=xt,r.unmute=nt,r.getRegisteredAnimations=u,r}(),BezierFactory=function(){var r={};r.getBezierEasing=e;var t={};function e(M,E,w,A,R){var N=R||("bez_"+M+"_"+E+"_"+w+"_"+A).replace(/\./g,"p");if(t[N])return t[N];var D=new C([M,E,w,A]);return t[N]=D,D}var i=4,n=.001,s=1e-7,a=10,o=11,h=1/(o-1),u=typeof Float32Array=="function";function d(M,E){return 1-3*E+3*M}function g(M,E){return 3*E-6*M}function f(M){return 3*M}function m(M,E,w){return((d(E,w)*M+g(E,w))*M+f(E))*M}function _(M,E,w){return 3*d(E,w)*M*M+2*g(E,w)*M+f(E)}function v(M,E,w,A,R){var N,D,X=0;do D=E+(w-E)/2,N=m(D,A,R)-M,N>0?w=D:E=D;while(Math.abs(N)>s&&++X<a);return D}function b(M,E,w,A){for(var R=0;R<i;++R){var N=_(E,w,A);if(N===0)return E;var D=m(E,w,A)-M;E-=D/N}return E}function C(M){this._p=M,this._mSampleValues=u?new Float32Array(o):new Array(o),this._precomputed=!1,this.get=this.get.bind(this)}return C.prototype={get:function(E){var w=this._p[0],A=this._p[1],R=this._p[2],N=this._p[3];return this._precomputed||this._precompute(),w===A&&R===N?E:E===0?0:E===1?1:m(this._getTForX(E),A,N)},_precompute:function(){var E=this._p[0],w=this._p[1],A=this._p[2],R=this._p[3];this._precomputed=!0,(E!==w||A!==R)&&this._calcSampleValues()},_calcSampleValues:function(){for(var E=this._p[0],w=this._p[2],A=0;A<o;++A)this._mSampleValues[A]=m(A*h,E,w)},_getTForX:function(E){for(var w=this._p[0],A=this._p[2],R=this._mSampleValues,N=0,D=1,X=o-1;D!==X&&R[D]<=E;++D)N+=h;--D;var at=(E-R[D])/(R[D+1]-R[D]),ft=N+at*h,gt=_(ft,w,A);return gt>=n?b(E,ft,w,A):gt===0?ft:v(E,N,N+h,w,A)}},r}(),pooling=function(){function r(t){return t.concat(createSizedArray(t.length))}return{double:r}}(),poolFactory=function(){return function(r,t,e){var i=0,n=r,s=createSizedArray(n),a={newElement:o,release:h};function o(){var u;return i?(i-=1,u=s[i]):u=t(),u}function h(u){i===n&&(s=pooling.double(s),n*=2),e&&e(u),s[i]=u,i+=1}return a}}(),bezierLengthPool=function(){function r(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,r)}(),segmentsLengthPool=function(){function r(){return{lengths:[],totalLength:0}}function t(e){var i,n=e.lengths.length;for(i=0;i<n;i+=1)bezierLengthPool.release(e.lengths[i]);e.lengths.length=0}return poolFactory(8,r,t)}();function bezFunction(){var r=Math;function t(f,m,_,v,b,C){var M=f*v+m*b+_*C-b*v-C*f-_*m;return M>-.001&&M<.001}function e(f,m,_,v,b,C,M,E,w){if(_===0&&C===0&&w===0)return t(f,m,v,b,M,E);var A=r.sqrt(r.pow(v-f,2)+r.pow(b-m,2)+r.pow(C-_,2)),R=r.sqrt(r.pow(M-f,2)+r.pow(E-m,2)+r.pow(w-_,2)),N=r.sqrt(r.pow(M-v,2)+r.pow(E-b,2)+r.pow(w-C,2)),D;return A>R?A>N?D=A-R-N:D=N-R-A:N>R?D=N-R-A:D=R-A-N,D>-1e-4&&D<1e-4}var i=function(){return function(f,m,_,v){var b=getDefaultCurveSegments(),C,M,E,w,A,R=0,N,D=[],X=[],at=bezierLengthPool.newElement();for(E=_.length,C=0;C<b;C+=1){for(A=C/(b-1),N=0,M=0;M<E;M+=1)w=bmPow(1-A,3)*f[M]+3*bmPow(1-A,2)*A*_[M]+3*(1-A)*bmPow(A,2)*v[M]+bmPow(A,3)*m[M],D[M]=w,X[M]!==null&&(N+=bmPow(D[M]-X[M],2)),X[M]=D[M];N&&(N=bmSqrt(N),R+=N),at.percents[C]=A,at.lengths[C]=R}return at.addedLength=R,at}}();function n(f){var m=segmentsLengthPool.newElement(),_=f.c,v=f.v,b=f.o,C=f.i,M,E=f._length,w=m.lengths,A=0;for(M=0;M<E-1;M+=1)w[M]=i(v[M],v[M+1],b[M],C[M+1]),A+=w[M].addedLength;return _&&E&&(w[M]=i(v[M],v[0],b[M],C[0]),A+=w[M].addedLength),m.totalLength=A,m}function s(f){this.segmentLength=0,this.points=new Array(f)}function a(f,m){this.partialLength=f,this.point=m}var o=function(){var f={};return function(m,_,v,b){var C=(m[0]+"_"+m[1]+"_"+_[0]+"_"+_[1]+"_"+v[0]+"_"+v[1]+"_"+b[0]+"_"+b[1]).replace(/\./g,"p");if(!f[C]){var M=getDefaultCurveSegments(),E,w,A,R,N,D=0,X,at,ft=null;m.length===2&&(m[0]!==_[0]||m[1]!==_[1])&&t(m[0],m[1],_[0],_[1],m[0]+v[0],m[1]+v[1])&&t(m[0],m[1],_[0],_[1],_[0]+b[0],_[1]+b[1])&&(M=2);var gt=new s(M);for(A=v.length,E=0;E<M;E+=1){for(at=createSizedArray(A),N=E/(M-1),X=0,w=0;w<A;w+=1)R=bmPow(1-N,3)*m[w]+3*bmPow(1-N,2)*N*(m[w]+v[w])+3*(1-N)*bmPow(N,2)*(_[w]+b[w])+bmPow(N,3)*_[w],at[w]=R,ft!==null&&(X+=bmPow(at[w]-ft[w],2));X=bmSqrt(X),D+=X,gt.points[E]=new a(X,at),ft=at}gt.segmentLength=D,f[C]=gt}return f[C]}}();function h(f,m){var _=m.percents,v=m.lengths,b=_.length,C=bmFloor((b-1)*f),M=f*m.addedLength,E=0;if(C===b-1||C===0||M===v[C])return _[C];for(var w=v[C]>M?-1:1,A=!0;A;)if(v[C]<=M&&v[C+1]>M?(E=(M-v[C])/(v[C+1]-v[C]),A=!1):C+=w,C<0||C>=b-1){if(C===b-1)return _[C];A=!1}return _[C]+(_[C+1]-_[C])*E}function u(f,m,_,v,b,C){var M=h(b,C),E=1-M,w=r.round((E*E*E*f[0]+(M*E*E+E*M*E+E*E*M)*_[0]+(M*M*E+E*M*M+M*E*M)*v[0]+M*M*M*m[0])*1e3)/1e3,A=r.round((E*E*E*f[1]+(M*E*E+E*M*E+E*E*M)*_[1]+(M*M*E+E*M*M+M*E*M)*v[1]+M*M*M*m[1])*1e3)/1e3;return[w,A]}var d=createTypedArray("float32",8);function g(f,m,_,v,b,C,M){b<0?b=0:b>1&&(b=1);var E=h(b,M);C=C>1?1:C;var w=h(C,M),A,R=f.length,N=1-E,D=1-w,X=N*N*N,at=E*N*N*3,ft=E*E*N*3,gt=E*E*E,ut=N*N*D,xt=E*N*D+N*E*D+N*N*w,nt=E*E*D+N*E*w+E*N*w,it=E*E*w,tt=N*D*D,W=E*D*D+N*w*D+N*D*w,Q=E*w*D+N*w*w+E*D*w,ot=E*w*w,ct=D*D*D,Tt=w*D*D+D*w*D+D*D*w,Rt=w*w*D+D*w*w+w*D*w,Pt=w*w*w;for(A=0;A<R;A+=1)d[A*4]=r.round((X*f[A]+at*_[A]+ft*v[A]+gt*m[A])*1e3)/1e3,d[A*4+1]=r.round((ut*f[A]+xt*_[A]+nt*v[A]+it*m[A])*1e3)/1e3,d[A*4+2]=r.round((tt*f[A]+W*_[A]+Q*v[A]+ot*m[A])*1e3)/1e3,d[A*4+3]=r.round((ct*f[A]+Tt*_[A]+Rt*v[A]+Pt*m[A])*1e3)/1e3;return d}return{getSegmentsLength:n,getNewSegment:g,getPointInSegment:u,buildBezierData:o,pointOnLine2D:t,pointOnLine3D:e}}var bez=bezFunction(),PropertyFactory=function(){var r=initialDefaultFrame,t=Math.abs;function e(b,C){var M=this.offsetTime,E;this.propType==="multidimensional"&&(E=createTypedArray("float32",this.pv.length));for(var w=C.lastIndex,A=w,R=this.keyframes.length-1,N=!0,D,X,at;N;){if(D=this.keyframes[A],X=this.keyframes[A+1],A===R-1&&b>=X.t-M){D.h&&(D=X),w=0;break}if(X.t-M>b){w=A;break}A<R-1?A+=1:(w=0,N=!1)}at=this.keyframesMetadata[A]||{};var ft,gt,ut,xt,nt,it,tt=X.t-M,W=D.t-M,Q;if(D.to){at.bezierData||(at.bezierData=bez.buildBezierData(D.s,X.s||D.e,D.to,D.ti));var ot=at.bezierData;if(b>=tt||b<W){var ct=b>=tt?ot.points.length-1:0;for(gt=ot.points[ct].point.length,ft=0;ft<gt;ft+=1)E[ft]=ot.points[ct].point[ft]}else{at.__fnct?it=at.__fnct:(it=BezierFactory.getBezierEasing(D.o.x,D.o.y,D.i.x,D.i.y,D.n).get,at.__fnct=it),ut=it((b-W)/(tt-W));var Tt=ot.segmentLength*ut,Rt,Pt=C.lastFrame<b&&C._lastKeyframeIndex===A?C._lastAddedLength:0;for(nt=C.lastFrame<b&&C._lastKeyframeIndex===A?C._lastPoint:0,N=!0,xt=ot.points.length;N;){if(Pt+=ot.points[nt].partialLength,Tt===0||ut===0||nt===ot.points.length-1){for(gt=ot.points[nt].point.length,ft=0;ft<gt;ft+=1)E[ft]=ot.points[nt].point[ft];break}else if(Tt>=Pt&&Tt<Pt+ot.points[nt+1].partialLength){for(Rt=(Tt-Pt)/ot.points[nt+1].partialLength,gt=ot.points[nt].point.length,ft=0;ft<gt;ft+=1)E[ft]=ot.points[nt].point[ft]+(ot.points[nt+1].point[ft]-ot.points[nt].point[ft])*Rt;break}nt<xt-1?nt+=1:N=!1}C._lastPoint=nt,C._lastAddedLength=Pt-ot.points[nt].partialLength,C._lastKeyframeIndex=A}}else{var Nt,At,Qt,Vt,Yt;if(R=D.s.length,Q=X.s||D.e,this.sh&&D.h!==1)if(b>=tt)E[0]=Q[0],E[1]=Q[1],E[2]=Q[2];else if(b<=W)E[0]=D.s[0],E[1]=D.s[1],E[2]=D.s[2];else{var Xt=s(D.s),re=s(Q),qt=(b-W)/(tt-W);n(E,i(Xt,re,qt))}else for(A=0;A<R;A+=1)D.h!==1&&(b>=tt?ut=1:b<W?ut=0:(D.o.x.constructor===Array?(at.__fnct||(at.__fnct=[]),at.__fnct[A]?it=at.__fnct[A]:(Nt=D.o.x[A]===void 0?D.o.x[0]:D.o.x[A],At=D.o.y[A]===void 0?D.o.y[0]:D.o.y[A],Qt=D.i.x[A]===void 0?D.i.x[0]:D.i.x[A],Vt=D.i.y[A]===void 0?D.i.y[0]:D.i.y[A],it=BezierFactory.getBezierEasing(Nt,At,Qt,Vt).get,at.__fnct[A]=it)):at.__fnct?it=at.__fnct:(Nt=D.o.x,At=D.o.y,Qt=D.i.x,Vt=D.i.y,it=BezierFactory.getBezierEasing(Nt,At,Qt,Vt).get,D.keyframeMetadata=it),ut=it((b-W)/(tt-W)))),Q=X.s||D.e,Yt=D.h===1?D.s[A]:D.s[A]+(Q[A]-D.s[A])*ut,this.propType==="multidimensional"?E[A]=Yt:E=Yt}return C.lastIndex=w,E}function i(b,C,M){var E=[],w=b[0],A=b[1],R=b[2],N=b[3],D=C[0],X=C[1],at=C[2],ft=C[3],gt,ut,xt,nt,it;return ut=w*D+A*X+R*at+N*ft,ut<0&&(ut=-ut,D=-D,X=-X,at=-at,ft=-ft),1-ut>1e-6?(gt=Math.acos(ut),xt=Math.sin(gt),nt=Math.sin((1-M)*gt)/xt,it=Math.sin(M*gt)/xt):(nt=1-M,it=M),E[0]=nt*w+it*D,E[1]=nt*A+it*X,E[2]=nt*R+it*at,E[3]=nt*N+it*ft,E}function n(b,C){var M=C[0],E=C[1],w=C[2],A=C[3],R=Math.atan2(2*E*A-2*M*w,1-2*E*E-2*w*w),N=Math.asin(2*M*E+2*w*A),D=Math.atan2(2*M*A-2*E*w,1-2*M*M-2*w*w);b[0]=R/degToRads,b[1]=N/degToRads,b[2]=D/degToRads}function s(b){var C=b[0]*degToRads,M=b[1]*degToRads,E=b[2]*degToRads,w=Math.cos(C/2),A=Math.cos(M/2),R=Math.cos(E/2),N=Math.sin(C/2),D=Math.sin(M/2),X=Math.sin(E/2),at=w*A*R-N*D*X,ft=N*D*R+w*A*X,gt=N*A*R+w*D*X,ut=w*D*R-N*A*X;return[ft,gt,ut,at]}function a(){var b=this.comp.renderedFrame-this.offsetTime,C=this.keyframes[0].t-this.offsetTime,M=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(b===this._caching.lastFrame||this._caching.lastFrame!==r&&(this._caching.lastFrame>=M&&b>=M||this._caching.lastFrame<C&&b<C))){this._caching.lastFrame>=b&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var E=this.interpolateValue(b,this._caching);this.pv=E}return this._caching.lastFrame=b,this.pv}function o(b){var C;if(this.propType==="unidimensional")C=b*this.mult,t(this.v-C)>1e-5&&(this.v=C,this._mdf=!0);else for(var M=0,E=this.v.length;M<E;)C=b[M]*this.mult,t(this.v[M]-C)>1e-5&&(this.v[M]=C,this._mdf=!0),M+=1}function h(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var b,C=this.effectsSequence.length,M=this.kf?this.pv:this.data.k;for(b=0;b<C;b+=1)M=this.effectsSequence[b](M);this.setVValue(M),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function u(b){this.effectsSequence.push(b),this.container.addDynamicProperty(this)}function d(b,C,M,E){this.propType="unidimensional",this.mult=M||1,this.data=C,this.v=M?C.k*M:C.k,this.pv=C.k,this._mdf=!1,this.elem=b,this.container=E,this.comp=b.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=h,this.setVValue=o,this.addEffect=u}function g(b,C,M,E){this.propType="multidimensional",this.mult=M||1,this.data=C,this._mdf=!1,this.elem=b,this.container=E,this.comp=b.comp,this.k=!1,this.kf=!1,this.frameId=-1;var w,A=C.k.length;for(this.v=createTypedArray("float32",A),this.pv=createTypedArray("float32",A),this.vel=createTypedArray("float32",A),w=0;w<A;w+=1)this.v[w]=C.k[w]*this.mult,this.pv[w]=C.k[w];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=h,this.setVValue=o,this.addEffect=u}function f(b,C,M,E){this.propType="unidimensional",this.keyframes=C.k,this.keyframesMetadata=[],this.offsetTime=b.data.st,this.frameId=-1,this._caching={lastFrame:r,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=C,this.mult=M||1,this.elem=b,this.container=E,this.comp=b.comp,this.v=r,this.pv=r,this._isFirstFrame=!0,this.getValue=h,this.setVValue=o,this.interpolateValue=e,this.effectsSequence=[a.bind(this)],this.addEffect=u}function m(b,C,M,E){this.propType="multidimensional";var w,A=C.k.length,R,N,D,X;for(w=0;w<A-1;w+=1)C.k[w].to&&C.k[w].s&&C.k[w+1]&&C.k[w+1].s&&(R=C.k[w].s,N=C.k[w+1].s,D=C.k[w].to,X=C.k[w].ti,(R.length===2&&!(R[0]===N[0]&&R[1]===N[1])&&bez.pointOnLine2D(R[0],R[1],N[0],N[1],R[0]+D[0],R[1]+D[1])&&bez.pointOnLine2D(R[0],R[1],N[0],N[1],N[0]+X[0],N[1]+X[1])||R.length===3&&!(R[0]===N[0]&&R[1]===N[1]&&R[2]===N[2])&&bez.pointOnLine3D(R[0],R[1],R[2],N[0],N[1],N[2],R[0]+D[0],R[1]+D[1],R[2]+D[2])&&bez.pointOnLine3D(R[0],R[1],R[2],N[0],N[1],N[2],N[0]+X[0],N[1]+X[1],N[2]+X[2]))&&(C.k[w].to=null,C.k[w].ti=null),R[0]===N[0]&&R[1]===N[1]&&D[0]===0&&D[1]===0&&X[0]===0&&X[1]===0&&(R.length===2||R[2]===N[2]&&D[2]===0&&X[2]===0)&&(C.k[w].to=null,C.k[w].ti=null));this.effectsSequence=[a.bind(this)],this.data=C,this.keyframes=C.k,this.keyframesMetadata=[],this.offsetTime=b.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=M||1,this.elem=b,this.container=E,this.comp=b.comp,this.getValue=h,this.setVValue=o,this.interpolateValue=e,this.frameId=-1;var at=C.k[0].s.length;for(this.v=createTypedArray("float32",at),this.pv=createTypedArray("float32",at),w=0;w<at;w+=1)this.v[w]=r,this.pv[w]=r;this._caching={lastFrame:r,lastIndex:0,value:createTypedArray("float32",at)},this.addEffect=u}function _(b,C,M,E,w){var A;if(!C.k.length)A=new d(b,C,E,w);else if(typeof C.k[0]=="number")A=new g(b,C,E,w);else switch(M){case 0:A=new f(b,C,E,w);break;case 1:A=new m(b,C,E,w);break;default:break}return A.effectsSequence.length&&w.addDynamicProperty(A),A}var v={getProp:_};return v}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function r(){return createTypedArray("float32",2)}return poolFactory(8,r)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(r,t){this.c=r,this.setLength(t);for(var e=0;e<t;)this.v[e]=pointPool.newElement(),this.o[e]=pointPool.newElement(),this.i[e]=pointPool.newElement(),e+=1},ShapePath.prototype.setLength=function(r){for(;this._maxLength<r;)this.doubleArrayLength();this._length=r},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(r,t,e,i,n){var s;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),e){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[];break}(!s[i]||s[i]&&!n)&&(s[i]=pointPool.newElement()),s[i][0]=r,s[i][1]=t},ShapePath.prototype.setTripleAt=function(r,t,e,i,n,s,a,o){this.setXYAt(r,t,"v",a,o),this.setXYAt(e,i,"o",a,o),this.setXYAt(n,s,"i",a,o)},ShapePath.prototype.reverse=function(){var r=new ShapePath;r.setPathData(this.c,this._length);var t=this.v,e=this.o,i=this.i,n=0;this.c&&(r.setTripleAt(t[0][0],t[0][1],i[0][0],i[0][1],e[0][0],e[0][1],0,!1),n=1);var s=this._length-1,a=this._length,o;for(o=n;o<a;o+=1)r.setTripleAt(t[s][0],t[s][1],i[s][0],i[s][1],e[s][0],e[s][1],o,!1),s-=1;return r},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function r(){return new ShapePath}function t(n){var s=n._length,a;for(a=0;a<s;a+=1)pointPool.release(n.v[a]),pointPool.release(n.i[a]),pointPool.release(n.o[a]),n.v[a]=null,n.i[a]=null,n.o[a]=null;n._length=0,n.c=!1}function e(n){var s=i.newElement(),a,o=n._length===void 0?n.v.length:n._length;for(s.setLength(o),s.c=n.c,a=0;a<o;a+=1)s.setTripleAt(n.v[a][0],n.v[a][1],n.o[a][0],n.o[a][1],n.i[a][0],n.i[a][1],a);return s}var i=poolFactory(4,r,t);return i.clone=e,i}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(r){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=r,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var r;for(r=0;r<this._length;r+=1)shapePool.release(this.shapes[r]);this._length=0};var shapeCollectionPool=function(){var r={newShapeCollection:n,release:s},t=0,e=4,i=createSizedArray(e);function n(){var a;return t?(t-=1,a=i[t]):a=new ShapeCollection,a}function s(a){var o,h=a._length;for(o=0;o<h;o+=1)shapePool.release(a.shapes[o]);a._length=0,t===e&&(i=pooling.double(i),e*=2),i[t]=a,t+=1}return r}(),ShapePropertyFactory=function(){var r=-999999;function t(C,M,E){var w=E.lastIndex,A,R,N,D,X,at,ft,gt,ut,xt=this.keyframes;if(C<xt[0].t-this.offsetTime)A=xt[0].s[0],N=!0,w=0;else if(C>=xt[xt.length-1].t-this.offsetTime)A=xt[xt.length-1].s?xt[xt.length-1].s[0]:xt[xt.length-2].e[0],N=!0;else{for(var nt=w,it=xt.length-1,tt=!0,W,Q,ot;tt&&(W=xt[nt],Q=xt[nt+1],!(Q.t-this.offsetTime>C));)nt<it-1?nt+=1:tt=!1;if(ot=this.keyframesMetadata[nt]||{},N=W.h===1,w=nt,!N){if(C>=Q.t-this.offsetTime)gt=1;else if(C<W.t-this.offsetTime)gt=0;else{var ct;ot.__fnct?ct=ot.__fnct:(ct=BezierFactory.getBezierEasing(W.o.x,W.o.y,W.i.x,W.i.y).get,ot.__fnct=ct),gt=ct((C-(W.t-this.offsetTime))/(Q.t-this.offsetTime-(W.t-this.offsetTime)))}R=Q.s?Q.s[0]:W.e[0]}A=W.s[0]}for(at=M._length,ft=A.i[0].length,E.lastIndex=w,D=0;D<at;D+=1)for(X=0;X<ft;X+=1)ut=N?A.i[D][X]:A.i[D][X]+(R.i[D][X]-A.i[D][X])*gt,M.i[D][X]=ut,ut=N?A.o[D][X]:A.o[D][X]+(R.o[D][X]-A.o[D][X])*gt,M.o[D][X]=ut,ut=N?A.v[D][X]:A.v[D][X]+(R.v[D][X]-A.v[D][X])*gt,M.v[D][X]=ut}function e(){var C=this.comp.renderedFrame-this.offsetTime,M=this.keyframes[0].t-this.offsetTime,E=this.keyframes[this.keyframes.length-1].t-this.offsetTime,w=this._caching.lastFrame;return w!==r&&(w<M&&C<M||w>E&&C>E)||(this._caching.lastIndex=w<C?this._caching.lastIndex:0,this.interpolateShape(C,this.pv,this._caching)),this._caching.lastFrame=C,this.pv}function i(){this.paths=this.localShapeCollection}function n(C,M){if(C._length!==M._length||C.c!==M.c)return!1;var E,w=C._length;for(E=0;E<w;E+=1)if(C.v[E][0]!==M.v[E][0]||C.v[E][1]!==M.v[E][1]||C.o[E][0]!==M.o[E][0]||C.o[E][1]!==M.o[E][1]||C.i[E][0]!==M.i[E][0]||C.i[E][1]!==M.i[E][1])return!1;return!0}function s(C){n(this.v,C)||(this.v=shapePool.clone(C),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var C;this.kf?C=this.pv:this.data.ks?C=this.data.ks.k:C=this.data.pt.k;var M,E=this.effectsSequence.length;for(M=0;M<E;M+=1)C=this.effectsSequence[M](C);this.setVValue(C),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function o(C,M,E){this.propType="shape",this.comp=C.comp,this.container=C,this.elem=C,this.data=M,this.k=!1,this.kf=!1,this._mdf=!1;var w=E===3?M.pt.k:M.ks.k;this.v=shapePool.clone(w),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function h(C){this.effectsSequence.push(C),this.container.addDynamicProperty(this)}o.prototype.interpolateShape=t,o.prototype.getValue=a,o.prototype.setVValue=s,o.prototype.addEffect=h;function u(C,M,E){this.propType="shape",this.comp=C.comp,this.elem=C,this.container=C,this.offsetTime=C.data.st,this.keyframes=E===3?M.pt.k:M.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var w=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,w),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=r,this.reset=i,this._caching={lastFrame:r,lastIndex:0},this.effectsSequence=[e.bind(this)]}u.prototype.getValue=a,u.prototype.interpolateShape=t,u.prototype.setVValue=s,u.prototype.addEffect=h;var d=function(){var C=roundCorner;function M(E,w){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=w.d,this.elem=E,this.comp=E.comp,this.frameId=-1,this.initDynamicPropertyContainer(E),this.p=PropertyFactory.getProp(E,w.p,1,0,this),this.s=PropertyFactory.getProp(E,w.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return M.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var w=this.p.v[0],A=this.p.v[1],R=this.s.v[0]/2,N=this.s.v[1]/2,D=this.d!==3,X=this.v;X.v[0][0]=w,X.v[0][1]=A-N,X.v[1][0]=D?w+R:w-R,X.v[1][1]=A,X.v[2][0]=w,X.v[2][1]=A+N,X.v[3][0]=D?w-R:w+R,X.v[3][1]=A,X.i[0][0]=D?w-R*C:w+R*C,X.i[0][1]=A-N,X.i[1][0]=D?w+R:w-R,X.i[1][1]=A-N*C,X.i[2][0]=D?w+R*C:w-R*C,X.i[2][1]=A+N,X.i[3][0]=D?w-R:w+R,X.i[3][1]=A+N*C,X.o[0][0]=D?w+R*C:w-R*C,X.o[0][1]=A-N,X.o[1][0]=D?w+R:w-R,X.o[1][1]=A+N*C,X.o[2][0]=D?w-R*C:w+R*C,X.o[2][1]=A+N,X.o[3][0]=D?w-R:w+R,X.o[3][1]=A-N*C}},extendPrototype([DynamicPropertyContainer],M),M}(),g=function(){function C(M,E){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=M,this.comp=M.comp,this.data=E,this.frameId=-1,this.d=E.d,this.initDynamicPropertyContainer(M),E.sy===1?(this.ir=PropertyFactory.getProp(M,E.ir,0,0,this),this.is=PropertyFactory.getProp(M,E.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(M,E.pt,0,0,this),this.p=PropertyFactory.getProp(M,E.p,1,0,this),this.r=PropertyFactory.getProp(M,E.r,0,degToRads,this),this.or=PropertyFactory.getProp(M,E.or,0,0,this),this.os=PropertyFactory.getProp(M,E.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return C.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var E=Math.floor(this.pt.v)*2,w=Math.PI*2/E,A=!0,R=this.or.v,N=this.ir.v,D=this.os.v,X=this.is.v,at=2*Math.PI*R/(E*2),ft=2*Math.PI*N/(E*2),gt,ut,xt,nt,it=-Math.PI/2;it+=this.r.v;var tt=this.data.d===3?-1:1;for(this.v._length=0,gt=0;gt<E;gt+=1){ut=A?R:N,xt=A?D:X,nt=A?at:ft;var W=ut*Math.cos(it),Q=ut*Math.sin(it),ot=W===0&&Q===0?0:Q/Math.sqrt(W*W+Q*Q),ct=W===0&&Q===0?0:-W/Math.sqrt(W*W+Q*Q);W+=+this.p.v[0],Q+=+this.p.v[1],this.v.setTripleAt(W,Q,W-ot*nt*xt*tt,Q-ct*nt*xt*tt,W+ot*nt*xt*tt,Q+ct*nt*xt*tt,gt,!0),A=!A,it+=w*tt}},convertPolygonToPath:function(){var E=Math.floor(this.pt.v),w=Math.PI*2/E,A=this.or.v,R=this.os.v,N=2*Math.PI*A/(E*4),D,X=-Math.PI*.5,at=this.data.d===3?-1:1;for(X+=this.r.v,this.v._length=0,D=0;D<E;D+=1){var ft=A*Math.cos(X),gt=A*Math.sin(X),ut=ft===0&&gt===0?0:gt/Math.sqrt(ft*ft+gt*gt),xt=ft===0&&gt===0?0:-ft/Math.sqrt(ft*ft+gt*gt);ft+=+this.p.v[0],gt+=+this.p.v[1],this.v.setTripleAt(ft,gt,ft-ut*N*R*at,gt-xt*N*R*at,ft+ut*N*R*at,gt+xt*N*R*at,D,!0),X+=w*at}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],C),C}(),f=function(){function C(M,E){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=M,this.comp=M.comp,this.frameId=-1,this.d=E.d,this.initDynamicPropertyContainer(M),this.p=PropertyFactory.getProp(M,E.p,1,0,this),this.s=PropertyFactory.getProp(M,E.s,1,0,this),this.r=PropertyFactory.getProp(M,E.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return C.prototype={convertRectToPath:function(){var E=this.p.v[0],w=this.p.v[1],A=this.s.v[0]/2,R=this.s.v[1]/2,N=bmMin(A,R,this.r.v),D=N*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(E+A,w-R+N,E+A,w-R+N,E+A,w-R+D,0,!0),this.v.setTripleAt(E+A,w+R-N,E+A,w+R-D,E+A,w+R-N,1,!0),N!==0?(this.v.setTripleAt(E+A-N,w+R,E+A-N,w+R,E+A-D,w+R,2,!0),this.v.setTripleAt(E-A+N,w+R,E-A+D,w+R,E-A+N,w+R,3,!0),this.v.setTripleAt(E-A,w+R-N,E-A,w+R-N,E-A,w+R-D,4,!0),this.v.setTripleAt(E-A,w-R+N,E-A,w-R+D,E-A,w-R+N,5,!0),this.v.setTripleAt(E-A+N,w-R,E-A+N,w-R,E-A+D,w-R,6,!0),this.v.setTripleAt(E+A-N,w-R,E+A-D,w-R,E+A-N,w-R,7,!0)):(this.v.setTripleAt(E-A,w+R,E-A+D,w+R,E-A,w+R,2),this.v.setTripleAt(E-A,w-R,E-A,w-R+D,E-A,w-R,3))):(this.v.setTripleAt(E+A,w-R+N,E+A,w-R+D,E+A,w-R+N,0,!0),N!==0?(this.v.setTripleAt(E+A-N,w-R,E+A-N,w-R,E+A-D,w-R,1,!0),this.v.setTripleAt(E-A+N,w-R,E-A+D,w-R,E-A+N,w-R,2,!0),this.v.setTripleAt(E-A,w-R+N,E-A,w-R+N,E-A,w-R+D,3,!0),this.v.setTripleAt(E-A,w+R-N,E-A,w+R-D,E-A,w+R-N,4,!0),this.v.setTripleAt(E-A+N,w+R,E-A+N,w+R,E-A+D,w+R,5,!0),this.v.setTripleAt(E+A-N,w+R,E+A-D,w+R,E+A-N,w+R,6,!0),this.v.setTripleAt(E+A,w+R-N,E+A,w+R-N,E+A,w+R-D,7,!0)):(this.v.setTripleAt(E-A,w-R,E-A+D,w-R,E-A,w-R,1,!0),this.v.setTripleAt(E-A,w+R,E-A,w+R-D,E-A,w+R,2,!0),this.v.setTripleAt(E+A,w+R,E+A-D,w+R,E+A,w+R,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],C),C}();function m(C,M,E){var w;if(E===3||E===4){var A=E===3?M.pt:M.ks,R=A.k;R.length?w=new u(C,M,E):w=new o(C,M,E)}else E===5?w=new f(C,M):E===6?w=new d(C,M):E===7&&(w=new g(C,M));return w.k&&C.addDynamicProperty(w),w}function _(){return o}function v(){return u}var b={};return b.getShapeProp=m,b.getConstructorFunction=_,b.getKeyframedConstructorFunction=v,b}();var Matrix=function(){var r=Math.cos,t=Math.sin,e=Math.tan,i=Math.round;function n(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(tt){if(tt===0)return this;var W=r(tt),Q=t(tt);return this._t(W,-Q,0,0,Q,W,0,0,0,0,1,0,0,0,0,1)}function a(tt){if(tt===0)return this;var W=r(tt),Q=t(tt);return this._t(1,0,0,0,0,W,-Q,0,0,Q,W,0,0,0,0,1)}function o(tt){if(tt===0)return this;var W=r(tt),Q=t(tt);return this._t(W,0,Q,0,0,1,0,0,-Q,0,W,0,0,0,0,1)}function h(tt){if(tt===0)return this;var W=r(tt),Q=t(tt);return this._t(W,-Q,0,0,Q,W,0,0,0,0,1,0,0,0,0,1)}function u(tt,W){return this._t(1,W,tt,1,0,0)}function d(tt,W){return this.shear(e(tt),e(W))}function g(tt,W){var Q=r(W),ot=t(W);return this._t(Q,ot,0,0,-ot,Q,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,e(tt),1,0,0,0,0,1,0,0,0,0,1)._t(Q,-ot,0,0,ot,Q,0,0,0,0,1,0,0,0,0,1)}function f(tt,W,Q){return!Q&&Q!==0&&(Q=1),tt===1&&W===1&&Q===1?this:this._t(tt,0,0,0,0,W,0,0,0,0,Q,0,0,0,0,1)}function m(tt,W,Q,ot,ct,Tt,Rt,Pt,Nt,At,Qt,Vt,Yt,Xt,re,qt){return this.props[0]=tt,this.props[1]=W,this.props[2]=Q,this.props[3]=ot,this.props[4]=ct,this.props[5]=Tt,this.props[6]=Rt,this.props[7]=Pt,this.props[8]=Nt,this.props[9]=At,this.props[10]=Qt,this.props[11]=Vt,this.props[12]=Yt,this.props[13]=Xt,this.props[14]=re,this.props[15]=qt,this}function _(tt,W,Q){return Q=Q||0,tt!==0||W!==0||Q!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,tt,W,Q,1):this}function v(tt,W,Q,ot,ct,Tt,Rt,Pt,Nt,At,Qt,Vt,Yt,Xt,re,qt){var Ut=this.props;if(tt===1&&W===0&&Q===0&&ot===0&&ct===0&&Tt===1&&Rt===0&&Pt===0&&Nt===0&&At===0&&Qt===1&&Vt===0)return Ut[12]=Ut[12]*tt+Ut[15]*Yt,Ut[13]=Ut[13]*Tt+Ut[15]*Xt,Ut[14]=Ut[14]*Qt+Ut[15]*re,Ut[15]*=qt,this._identityCalculated=!1,this;var Lt=Ut[0],te=Ut[1],ge=Ut[2],Bt=Ut[3],oe=Ut[4],le=Ut[5],de=Ut[6],Se=Ut[7],wt=Ut[8],mt=Ut[9],Ft=Ut[10],l=Ut[11],c=Ut[12],p=Ut[13],x=Ut[14],y=Ut[15];return Ut[0]=Lt*tt+te*ct+ge*Nt+Bt*Yt,Ut[1]=Lt*W+te*Tt+ge*At+Bt*Xt,Ut[2]=Lt*Q+te*Rt+ge*Qt+Bt*re,Ut[3]=Lt*ot+te*Pt+ge*Vt+Bt*qt,Ut[4]=oe*tt+le*ct+de*Nt+Se*Yt,Ut[5]=oe*W+le*Tt+de*At+Se*Xt,Ut[6]=oe*Q+le*Rt+de*Qt+Se*re,Ut[7]=oe*ot+le*Pt+de*Vt+Se*qt,Ut[8]=wt*tt+mt*ct+Ft*Nt+l*Yt,Ut[9]=wt*W+mt*Tt+Ft*At+l*Xt,Ut[10]=wt*Q+mt*Rt+Ft*Qt+l*re,Ut[11]=wt*ot+mt*Pt+Ft*Vt+l*qt,Ut[12]=c*tt+p*ct+x*Nt+y*Yt,Ut[13]=c*W+p*Tt+x*At+y*Xt,Ut[14]=c*Q+p*Rt+x*Qt+y*re,Ut[15]=c*ot+p*Pt+x*Vt+y*qt,this._identityCalculated=!1,this}function b(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function C(tt){for(var W=0;W<16;){if(tt.props[W]!==this.props[W])return!1;W+=1}return!0}function M(tt){var W;for(W=0;W<16;W+=1)tt.props[W]=this.props[W];return tt}function E(tt){var W;for(W=0;W<16;W+=1)this.props[W]=tt[W]}function w(tt,W,Q){return{x:tt*this.props[0]+W*this.props[4]+Q*this.props[8]+this.props[12],y:tt*this.props[1]+W*this.props[5]+Q*this.props[9]+this.props[13],z:tt*this.props[2]+W*this.props[6]+Q*this.props[10]+this.props[14]}}function A(tt,W,Q){return tt*this.props[0]+W*this.props[4]+Q*this.props[8]+this.props[12]}function R(tt,W,Q){return tt*this.props[1]+W*this.props[5]+Q*this.props[9]+this.props[13]}function N(tt,W,Q){return tt*this.props[2]+W*this.props[6]+Q*this.props[10]+this.props[14]}function D(){var tt=this.props[0]*this.props[5]-this.props[1]*this.props[4],W=this.props[5]/tt,Q=-this.props[1]/tt,ot=-this.props[4]/tt,ct=this.props[0]/tt,Tt=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/tt,Rt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/tt,Pt=new Matrix;return Pt.props[0]=W,Pt.props[1]=Q,Pt.props[4]=ot,Pt.props[5]=ct,Pt.props[12]=Tt,Pt.props[13]=Rt,Pt}function X(tt){var W=this.getInverseMatrix();return W.applyToPointArray(tt[0],tt[1],tt[2]||0)}function at(tt){var W,Q=tt.length,ot=[];for(W=0;W<Q;W+=1)ot[W]=X(tt[W]);return ot}function ft(tt,W,Q){var ot=createTypedArray("float32",6);if(this.isIdentity())ot[0]=tt[0],ot[1]=tt[1],ot[2]=W[0],ot[3]=W[1],ot[4]=Q[0],ot[5]=Q[1];else{var ct=this.props[0],Tt=this.props[1],Rt=this.props[4],Pt=this.props[5],Nt=this.props[12],At=this.props[13];ot[0]=tt[0]*ct+tt[1]*Rt+Nt,ot[1]=tt[0]*Tt+tt[1]*Pt+At,ot[2]=W[0]*ct+W[1]*Rt+Nt,ot[3]=W[0]*Tt+W[1]*Pt+At,ot[4]=Q[0]*ct+Q[1]*Rt+Nt,ot[5]=Q[0]*Tt+Q[1]*Pt+At}return ot}function gt(tt,W,Q){var ot;return this.isIdentity()?ot=[tt,W,Q]:ot=[tt*this.props[0]+W*this.props[4]+Q*this.props[8]+this.props[12],tt*this.props[1]+W*this.props[5]+Q*this.props[9]+this.props[13],tt*this.props[2]+W*this.props[6]+Q*this.props[10]+this.props[14]],ot}function ut(tt,W){if(this.isIdentity())return tt+","+W;var Q=this.props;return Math.round((tt*Q[0]+W*Q[4]+Q[12])*100)/100+","+Math.round((tt*Q[1]+W*Q[5]+Q[13])*100)/100}function xt(){for(var tt=0,W=this.props,Q="matrix3d(",ot=1e4;tt<16;)Q+=i(W[tt]*ot)/ot,Q+=tt===15?")":",",tt+=1;return Q}function nt(tt){var W=1e4;return tt<1e-6&&tt>0||tt>-1e-6&&tt<0?i(tt*W)/W:tt}function it(){var tt=this.props,W=nt(tt[0]),Q=nt(tt[1]),ot=nt(tt[4]),ct=nt(tt[5]),Tt=nt(tt[12]),Rt=nt(tt[13]);return"matrix("+W+","+Q+","+ot+","+ct+","+Tt+","+Rt+")"}return function(){this.reset=n,this.rotate=s,this.rotateX=a,this.rotateY=o,this.rotateZ=h,this.skew=d,this.skewFromAxis=g,this.shear=u,this.scale=f,this.setTransform=m,this.translate=_,this.transform=v,this.applyToPoint=w,this.applyToX=A,this.applyToY=R,this.applyToZ=N,this.applyToPointArray=gt,this.applyToTriplePoints=ft,this.applyToPointStringified=ut,this.toCSS=xt,this.to2dCSS=it,this.clone=M,this.cloneFromProps=E,this.equals=C,this.inversePoints=at,this.inversePoint=X,this.getInverseMatrix=D,this._t=this.transform,this.isIdentity=b,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(e){return typeof e}:_typeof$3=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(r)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(r){setLocationHref(r)}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(r){setSubframeEnabled(r)}function setPrefix(r){setIdPrefix(r)}function loadAnimation(r){return standalone===!0&&(r.animationData=JSON.parse(animationData)),animationManager.loadAnimation(r)}function setQuality(r){if(typeof r=="string")switch(r){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(r)&&r>1&&setDefaultCurveSegments(r);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator!="undefined"}function installPlugin(r,t){r==="expressions"&&setExpressionsPlugin(t)}function getFactory(r){switch(r){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(r){for(var t=queryString.split("&"),e=0;e<t.length;e+=1){var i=t[e].split("=");if(decodeURIComponent(i[0])==r)return decodeURIComponent(i[1])}return null}var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{!((typeof exports=="undefined"?"undefined":_typeof$3(exports))==="object"&&typeof module!="undefined")&&!(typeof define=="function"&&define.amd)&&(window.bodymovin=lottie)}catch(r){}var ShapeModifiers=function(){var r={},t={};r.registerModifier=e,r.getModifier=i;function e(n,s){t[n]||(t[n]=s)}function i(n,s,a){return new t[n](s,a)}return r}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(r){if(!this.closed){r.sh.container.addDynamicProperty(r.sh);var t={shape:r.sh,data:r,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&r.setAsAnimated()}},ShapeModifier.prototype.init=function(r,t){this.shapes=[],this.elem=r,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(r,t){this.s=PropertyFactory.getProp(r,t.s,0,.01,this),this.e=PropertyFactory.getProp(r,t.e,0,.01,this),this.o=PropertyFactory.getProp(r,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(r){r.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(r,t,e,i,n){var s=[];t<=1?s.push({s:r,e:t}):r>=1?s.push({s:r-1,e:t-1}):(s.push({s:r,e:1}),s.push({s:0,e:t-1}));var a=[],o,h=s.length,u;for(o=0;o<h;o+=1)if(u=s[o],!(u.e*n<i||u.s*n>i+e)){var d,g;u.s*n<=i?d=0:d=(u.s*n-i)/e,u.e*n>=i+e?g=1:g=(u.e*n-i)/e,a.push([d,g])}return a.length||a.push([0,0]),a},TrimModifier.prototype.releasePathsData=function(r){var t,e=r.length;for(t=0;t<e;t+=1)segmentsLengthPool.release(r[t]);return r.length=0,r},TrimModifier.prototype.processShapes=function(r){var t,e;if(this._mdf||r){var i=this.o.v%360/360;if(i<0&&(i+=1),this.s.v>1?t=1+i:this.s.v<0?t=0+i:t=this.s.v+i,this.e.v>1?e=1+i:this.e.v<0?e=0+i:e=this.e.v+i,t>e){var n=t;t=e,e=n}t=Math.round(t*1e4)*1e-4,e=Math.round(e*1e4)*1e-4,this.sValue=t,this.eValue=e}else t=this.sValue,e=this.eValue;var s,a,o=this.shapes.length,h,u,d,g,f,m=0;if(e===t)for(a=0;a<o;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(e===1&&t===0||e===0&&t===1){if(this._mdf)for(a=0;a<o;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var _=[],v,b;for(a=0;a<o;a+=1)if(v=this.shapes[a],!v.shape._mdf&&!this._mdf&&!r&&this.m!==2)v.shape.paths=v.localShapeCollection;else{if(s=v.shape.paths,u=s._length,f=0,!v.shape._mdf&&v.pathsData.length)f=v.totalShapeLength;else{for(d=this.releasePathsData(v.pathsData),h=0;h<u;h+=1)g=bez.getSegmentsLength(s.shapes[h]),d.push(g),f+=g.totalLength;v.totalShapeLength=f,v.pathsData=d}m+=f,v.shape._mdf=!0}var C=t,M=e,E=0,w;for(a=o-1;a>=0;a-=1)if(v=this.shapes[a],v.shape._mdf){for(b=v.localShapeCollection,b.releaseShapes(),this.m===2&&o>1?(w=this.calculateShapeEdges(t,e,v.totalShapeLength,E,m),E+=v.totalShapeLength):w=[[C,M]],u=w.length,h=0;h<u;h+=1){C=w[h][0],M=w[h][1],_.length=0,M<=1?_.push({s:v.totalShapeLength*C,e:v.totalShapeLength*M}):C>=1?_.push({s:v.totalShapeLength*(C-1),e:v.totalShapeLength*(M-1)}):(_.push({s:v.totalShapeLength*C,e:v.totalShapeLength}),_.push({s:0,e:v.totalShapeLength*(M-1)}));var A=this.addShapes(v,_[0]);if(_[0].s!==_[0].e){if(_.length>1){var R=v.shape.paths.shapes[v.shape.paths._length-1];if(R.c){var N=A.pop();this.addPaths(A,b),A=this.addShapes(v,_[1],N)}else this.addPaths(A,b),A=this.addShapes(v,_[1])}this.addPaths(A,b)}}v.shape.paths=b}}},TrimModifier.prototype.addPaths=function(r,t){var e,i=r.length;for(e=0;e<i;e+=1)t.addShape(r[e])},TrimModifier.prototype.addSegment=function(r,t,e,i,n,s,a){n.setXYAt(t[0],t[1],"o",s),n.setXYAt(e[0],e[1],"i",s+1),a&&n.setXYAt(r[0],r[1],"v",s),n.setXYAt(i[0],i[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(r,t,e,i){t.setXYAt(r[1],r[5],"o",e),t.setXYAt(r[2],r[6],"i",e+1),i&&t.setXYAt(r[0],r[4],"v",e),t.setXYAt(r[3],r[7],"v",e+1)},TrimModifier.prototype.addShapes=function(r,t,e){var i=r.pathsData,n=r.shape.paths.shapes,s,a=r.shape.paths._length,o,h,u=0,d,g,f,m,_=[],v,b=!0;for(e?(g=e._length,v=e._length):(e=shapePool.newElement(),g=0,v=0),_.push(e),s=0;s<a;s+=1){for(f=i[s].lengths,e.c=n[s].c,h=n[s].c?f.length:f.length+1,o=1;o<h;o+=1)if(d=f[o-1],u+d.addedLength<t.s)u+=d.addedLength,e.c=!1;else if(u>t.e){e.c=!1;break}else t.s<=u&&t.e>=u+d.addedLength?(this.addSegment(n[s].v[o-1],n[s].o[o-1],n[s].i[o],n[s].v[o],e,g,b),b=!1):(m=bez.getNewSegment(n[s].v[o-1],n[s].v[o],n[s].o[o-1],n[s].i[o],(t.s-u)/d.addedLength,(t.e-u)/d.addedLength,f[o-1]),this.addSegmentFromArray(m,e,g,b),b=!1,e.c=!1),u+=d.addedLength,g+=1;if(n[s].c&&f.length){if(d=f[o-1],u<=t.e){var C=f[o-1].addedLength;t.s<=u&&t.e>=u+C?(this.addSegment(n[s].v[o-1],n[s].o[o-1],n[s].i[0],n[s].v[0],e,g,b),b=!1):(m=bez.getNewSegment(n[s].v[o-1],n[s].v[0],n[s].o[o-1],n[s].i[0],(t.s-u)/C,(t.e-u)/C,f[o-1]),this.addSegmentFromArray(m,e,g,b),b=!1,e.c=!1)}else e.c=!1;u+=d.addedLength,g+=1}if(e._length&&(e.setXYAt(e.v[v][0],e.v[v][1],"i",v),e.setXYAt(e.v[e._length-1][0],e.v[e._length-1][1],"o",e._length-1)),u>t.e)break;s<a-1&&(e=shapePool.newElement(),b=!0,_.push(e),g=0)}return _};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(r,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(r,t){var e=t/100,i=[0,0],n=r._length,s=0;for(s=0;s<n;s+=1)i[0]+=r.v[s][0],i[1]+=r.v[s][1];i[0]/=n,i[1]/=n;var a=shapePool.newElement();a.c=r.c;var o,h,u,d,g,f;for(s=0;s<n;s+=1)o=r.v[s][0]+(i[0]-r.v[s][0])*e,h=r.v[s][1]+(i[1]-r.v[s][1])*e,u=r.o[s][0]+(i[0]-r.o[s][0])*-e,d=r.o[s][1]+(i[1]-r.o[s][1])*-e,g=r.i[s][0]+(i[0]-r.i[s][0])*-e,f=r.i[s][1]+(i[1]-r.i[s][1])*-e,a.setTripleAt(o,h,u,d,g,f,s);return a},PuckerAndBloatModifier.prototype.processShapes=function(r){var t,e,i=this.shapes.length,n,s,a=this.amount.v;if(a!==0){var o,h;for(e=0;e<i;e+=1){if(o=this.shapes[e],h=o.localShapeCollection,!(!o.shape._mdf&&!this._mdf&&!r))for(h.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,s=o.shape.paths._length,n=0;n<s;n+=1)h.addShape(this.processPath(t[n],a));o.shape.paths=o.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var r=[0,0];function t(h){var u=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||u,this.a&&h.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&h.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&h.skewFromAxis(-this.sk.v,this.sa.v),this.r?h.rotate(-this.r.v):h.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?h.translate(this.px.v,this.py.v,-this.pz.v):h.translate(this.px.v,this.py.v,0):h.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function e(h){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||h){var u;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var d,g;if(u=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(d=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/u,0),g=this.p.getValueAtTime(this.p.keyframes[0].t/u,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(d=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/u,0),g=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/u,0)):(d=this.p.pv,g=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/u,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){d=[],g=[];var f=this.px,m=this.py;f._caching.lastFrame+f.offsetTime<=f.keyframes[0].t?(d[0]=f.getValueAtTime((f.keyframes[0].t+.01)/u,0),d[1]=m.getValueAtTime((m.keyframes[0].t+.01)/u,0),g[0]=f.getValueAtTime(f.keyframes[0].t/u,0),g[1]=m.getValueAtTime(m.keyframes[0].t/u,0)):f._caching.lastFrame+f.offsetTime>=f.keyframes[f.keyframes.length-1].t?(d[0]=f.getValueAtTime(f.keyframes[f.keyframes.length-1].t/u,0),d[1]=m.getValueAtTime(m.keyframes[m.keyframes.length-1].t/u,0),g[0]=f.getValueAtTime((f.keyframes[f.keyframes.length-1].t-.01)/u,0),g[1]=m.getValueAtTime((m.keyframes[m.keyframes.length-1].t-.01)/u,0)):(d=[f.pv,m.pv],g[0]=f.getValueAtTime((f._caching.lastFrame+f.offsetTime-.01)/u,f.offsetTime),g[1]=m.getValueAtTime((m._caching.lastFrame+m.offsetTime-.01)/u,m.offsetTime))}else g=r,d=g;this.v.rotate(-Math.atan2(d[1]-g[1],d[0]-g[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function i(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function n(){}function s(h){this._addDynamicProperty(h),this.elem.addDynamicProperty(h),this._isDirty=!0}function a(h,u,d){if(this.elem=h,this.frameId=-1,this.propType="transform",this.data=u,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(d||h),u.p&&u.p.s?(this.px=PropertyFactory.getProp(h,u.p.x,0,0,this),this.py=PropertyFactory.getProp(h,u.p.y,0,0,this),u.p.z&&(this.pz=PropertyFactory.getProp(h,u.p.z,0,0,this))):this.p=PropertyFactory.getProp(h,u.p||{k:[0,0,0]},1,0,this),u.rx){if(this.rx=PropertyFactory.getProp(h,u.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(h,u.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(h,u.rz,0,degToRads,this),u.or.k[0].ti){var g,f=u.or.k.length;for(g=0;g<f;g+=1)u.or.k[g].to=null,u.or.k[g].ti=null}this.or=PropertyFactory.getProp(h,u.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(h,u.r||{k:0},0,degToRads,this);u.sk&&(this.sk=PropertyFactory.getProp(h,u.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(h,u.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(h,u.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(h,u.s||{k:[100,100,100]},1,.01,this),u.o?this.o=PropertyFactory.getProp(h,u.o,0,.01,h):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}a.prototype={applyToMatrix:t,getValue:e,precalculateMatrix:i,autoOrient:n},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=s,a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function o(h,u,d){return new a(h,u,d)}return{getTransformProperty:o}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(r,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(r,t.c,0,null,this),this.o=PropertyFactory.getProp(r,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(r,t.tr,this),this.so=PropertyFactory.getProp(r,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(r,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(r,t,e,i,n,s){var a=s?-1:1,o=i.s.v[0]+(1-i.s.v[0])*(1-n),h=i.s.v[1]+(1-i.s.v[1])*(1-n);r.translate(i.p.v[0]*a*n,i.p.v[1]*a*n,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*a*n),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.scale(s?1/o:o,s?1/h:h),e.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(r,t,e,i){for(this.elem=r,this.arr=t,this.pos=e,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,t[e]);e>0;)e-=1,this._elements.unshift(t[e]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(r){var t,e=r.length;for(t=0;t<e;t+=1)r[t]._processed=!1,r[t].ty==="gr"&&this.resetElements(r[t].it)},RepeaterModifier.prototype.cloneElements=function(r){var t=JSON.parse(JSON.stringify(r));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(r,t){var e,i=r.length;for(e=0;e<i;e+=1)r[e]._render=t,r[e].ty==="gr"&&this.changeGroupRender(r[e].it,t)},RepeaterModifier.prototype.processShapes=function(r){var t,e,i,n,s,a=!1;if(this._mdf||r){var o=Math.ceil(this.c.v);if(this._groups.length<o){for(;this._groups.length<o;){var h={it:this.cloneElements(this._elements),ty:"gr"};h.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,h),this._groups.splice(0,0,h),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}s=0;var u;for(i=0;i<=this._groups.length-1;i+=1){if(u=s<o,this._groups[i]._render=u,this.changeGroupRender(this._groups[i].it,u),!u){var d=this.elemsData[i].it,g=d[d.length-1];g.transform.op.v!==0?(g.transform.op._mdf=!0,g.transform.op.v=0):g.transform.op._mdf=!1}s+=1}this._currentCopies=o;var f=this.o.v,m=f%1,_=f>0?Math.floor(f):Math.ceil(f),v=this.pMatrix.props,b=this.rMatrix.props,C=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var M=0;if(f>0){for(;M<_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),M+=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,m,!1),M+=m)}else if(f<0){for(;M>_;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),M-=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-m,!0),M-=m)}i=this.data.m===1?0:this._currentCopies-1,n=this.data.m===1?1:-1,s=this._currentCopies;for(var E,w;s;){if(t=this.elemsData[i].it,e=t[t.length-1].transform.mProps.v.props,w=e.length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),M!==0){for((i!==0&&n===1||i!==this._currentCopies-1&&n===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),E=0;E<w;E+=1)e[E]=this.matrix.props[E];this.matrix.reset()}else for(this.matrix.reset(),E=0;E<w;E+=1)e[E]=this.matrix.props[E];M+=1,s-=1,i+=n}}else for(s=this._currentCopies,i=0,n=1;s;)t=this.elemsData[i].it,e=t[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,s-=1,i+=n;return a},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(r,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(r,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(r,t){var e=shapePool.newElement();e.c=r.c;var i,n=r._length,s,a,o,h,u,d,g=0,f,m,_,v,b,C;for(i=0;i<n;i+=1)s=r.v[i],o=r.o[i],a=r.i[i],s[0]===o[0]&&s[1]===o[1]&&s[0]===a[0]&&s[1]===a[1]?(i===0||i===n-1)&&!r.c?(e.setTripleAt(s[0],s[1],o[0],o[1],a[0],a[1],g),g+=1):(i===0?h=r.v[n-1]:h=r.v[i-1],u=Math.sqrt(Math.pow(s[0]-h[0],2)+Math.pow(s[1]-h[1],2)),d=u?Math.min(u/2,t)/u:0,b=s[0]+(h[0]-s[0])*d,f=b,C=s[1]-(s[1]-h[1])*d,m=C,_=f-(f-s[0])*roundCorner,v=m-(m-s[1])*roundCorner,e.setTripleAt(f,m,_,v,b,C,g),g+=1,i===n-1?h=r.v[0]:h=r.v[i+1],u=Math.sqrt(Math.pow(s[0]-h[0],2)+Math.pow(s[1]-h[1],2)),d=u?Math.min(u/2,t)/u:0,_=s[0]+(h[0]-s[0])*d,f=_,v=s[1]+(h[1]-s[1])*d,m=v,b=f-(f-s[0])*roundCorner,C=m-(m-s[1])*roundCorner,e.setTripleAt(f,m,_,v,b,C,g),g+=1):(e.setTripleAt(r.v[i][0],r.v[i][1],r.o[i][0],r.o[i][1],r.i[i][0],r.i[i][1],g),g+=1);return e},RoundCornersModifier.prototype.processShapes=function(r){var t,e,i=this.shapes.length,n,s,a=this.rd.v;if(a!==0){var o,h;for(e=0;e<i;e+=1){if(o=this.shapes[e],h=o.localShapeCollection,!(!o.shape._mdf&&!this._mdf&&!r))for(h.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,s=o.shape.paths._length,n=0;n<s;n+=1)h.addShape(this.processPath(t[n],a));o.shape.paths=o.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(r,t){return Math.abs(r-t)*1e5<=Math.min(Math.abs(r),Math.abs(t))}function floatZero(r){return Math.abs(r)<=1e-5}function lerp(r,t,e){return r*(1-e)+t*e}function lerpPoint(r,t,e){return[lerp(r[0],t[0],e),lerp(r[1],t[1],e)]}function quadRoots(r,t,e){if(r===0)return[];var i=t*t-4*r*e;if(i<0)return[];var n=-t/(2*r);if(i===0)return[n];var s=Math.sqrt(i)/(2*r);return[n-s,n+s]}function polynomialCoefficients(r,t,e,i){return[-r+3*t-3*e+i,3*r-6*t+3*e,-3*r+3*t,r]}function singlePoint(r){return new PolynomialBezier(r,r,r,r,!1)}function PolynomialBezier(r,t,e,i,n){n&&pointEqual(r,t)&&(t=lerpPoint(r,i,1/3)),n&&pointEqual(e,i)&&(e=lerpPoint(r,i,2/3));var s=polynomialCoefficients(r[0],t[0],e[0],i[0]),a=polynomialCoefficients(r[1],t[1],e[1],i[1]);this.a=[s[0],a[0]],this.b=[s[1],a[1]],this.c=[s[2],a[2]],this.d=[s[3],a[3]],this.points=[r,t,e,i]}PolynomialBezier.prototype.point=function(r){return[((this.a[0]*r+this.b[0])*r+this.c[0])*r+this.d[0],((this.a[1]*r+this.b[1])*r+this.c[1])*r+this.d[1]]},PolynomialBezier.prototype.derivative=function(r){return[(3*r*this.a[0]+2*this.b[0])*r+this.c[0],(3*r*this.a[1]+2*this.b[1])*r+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(r){var t=this.derivative(r);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(r){var t=this.derivative(r);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var r=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(r))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/r,e=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/r;if(e<0)return[];var i=Math.sqrt(e);return floatZero(i)?i>0&&i<1?[t]:[]:[t-i,t+i].filter(function(n){return n>0&&n<1})},PolynomialBezier.prototype.split=function(r){if(r<=0)return[singlePoint(this.points[0]),this];if(r>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],r),e=lerpPoint(this.points[1],this.points[2],r),i=lerpPoint(this.points[2],this.points[3],r),n=lerpPoint(t,e,r),s=lerpPoint(e,i,r),a=lerpPoint(n,s,r);return[new PolynomialBezier(this.points[0],t,n,a,!0),new PolynomialBezier(a,s,i,this.points[3],!0)]};function extrema(r,t){var e=r.points[0][t],i=r.points[r.points.length-1][t];if(e>i){var n=i;i=e,e=n}for(var s=quadRoots(3*r.a[t],2*r.b[t],r.c[t]),a=0;a<s.length;a+=1)if(s[a]>0&&s[a]<1){var o=r.point(s[a])[t];o<e?e=o:o>i&&(i=o)}return{min:e,max:i}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var r=this.bounds();return{left:r.x.min,right:r.x.max,top:r.y.min,bottom:r.y.max,width:r.x.max-r.x.min,height:r.y.max-r.y.min,cx:(r.x.max+r.x.min)/2,cy:(r.y.max+r.y.min)/2}};function intersectData(r,t,e){var i=r.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:r,t:(t+e)/2,t1:t,t2:e}}function splitData(r){var t=r.bez.split(.5);return[intersectData(t[0],r.t1,r.t),intersectData(t[1],r.t,r.t2)]}function boxIntersect(r,t){return Math.abs(r.cx-t.cx)*2<r.width+t.width&&Math.abs(r.cy-t.cy)*2<r.height+t.height}function intersectsImpl(r,t,e,i,n,s){if(!!boxIntersect(r,t)){if(e>=s||r.width<=i&&r.height<=i&&t.width<=i&&t.height<=i){n.push([r.t,t.t]);return}var a=splitData(r),o=splitData(t);intersectsImpl(a[0],o[0],e+1,i,n,s),intersectsImpl(a[0],o[1],e+1,i,n,s),intersectsImpl(a[1],o[0],e+1,i,n,s),intersectsImpl(a[1],o[1],e+1,i,n,s)}}PolynomialBezier.prototype.intersections=function(r,t,e){t===void 0&&(t=2),e===void 0&&(e=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(r,0,1),0,t,i,e),i},PolynomialBezier.shapeSegment=function(r,t){var e=(t+1)%r.length();return new PolynomialBezier(r.v[t],r.o[t],r.i[e],r.v[e],!0)},PolynomialBezier.shapeSegmentInverted=function(r,t){var e=(t+1)%r.length();return new PolynomialBezier(r.v[e],r.i[e],r.o[t],r.v[t],!0)};function crossProduct(r,t){return[r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]]}function lineIntersection(r,t,e,i){var n=[r[0],r[1],1],s=[t[0],t[1],1],a=[e[0],e[1],1],o=[i[0],i[1],1],h=crossProduct(crossProduct(n,s),crossProduct(a,o));return floatZero(h[2])?null:[h[0]/h[2],h[1]/h[2]]}function polarOffset(r,t,e){return[r[0]+Math.cos(t)*e,r[1]-Math.sin(t)*e]}function pointDistance(r,t){return Math.hypot(r[0]-t[0],r[1]-t[1])}function pointEqual(r,t){return floatEqual(r[0],t[0])&&floatEqual(r[1],t[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(r,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(r,t.s,0,null,this),this.frequency=PropertyFactory.getProp(r,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(r,t.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(r,t,e,i,n,s,a){var o=e-Math.PI/2,h=e+Math.PI/2,u=t[0]+Math.cos(e)*i*n,d=t[1]-Math.sin(e)*i*n;r.setTripleAt(u,d,u+Math.cos(o)*s,d-Math.sin(o)*s,u+Math.cos(h)*a,d-Math.sin(h)*a,r.length())}function getPerpendicularVector(r,t){var e=[t[0]-r[0],t[1]-r[1]],i=-Math.PI*.5,n=[Math.cos(i)*e[0]-Math.sin(i)*e[1],Math.sin(i)*e[0]+Math.cos(i)*e[1]];return n}function getProjectingAngle(r,t){var e=t===0?r.length()-1:t-1,i=(t+1)%r.length(),n=r.v[e],s=r.v[i],a=getPerpendicularVector(n,s);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(r,t,e,i,n,s,a){var o=getProjectingAngle(t,e),h=t.v[e%t._length],u=t.v[e===0?t._length-1:e-1],d=t.v[(e+1)%t._length],g=s===2?Math.sqrt(Math.pow(h[0]-u[0],2)+Math.pow(h[1]-u[1],2)):0,f=s===2?Math.sqrt(Math.pow(h[0]-d[0],2)+Math.pow(h[1]-d[1],2)):0;setPoint(r,t.v[e%t._length],o,a,i,f/((n+1)*2),g/((n+1)*2),s)}function zigZagSegment(r,t,e,i,n,s){for(var a=0;a<i;a+=1){var o=(a+1)/(i+1),h=n===2?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,u=t.normalAngle(o),d=t.point(o);setPoint(r,d,u,s,e,h/((i+1)*2),h/((i+1)*2),n),s=-s}return s}ZigZagModifier.prototype.processPath=function(r,t,e,i){var n=r._length,s=shapePool.newElement();if(s.c=r.c,r.c||(n-=1),n===0)return s;var a=-1,o=PolynomialBezier.shapeSegment(r,0);zigZagCorner(s,r,0,t,e,i,a);for(var h=0;h<n;h+=1)a=zigZagSegment(s,o,t,e,i,-a),h===n-1&&!r.c?o=null:o=PolynomialBezier.shapeSegment(r,(h+1)%n),zigZagCorner(s,r,h+1,t,e,i,a);return s},ZigZagModifier.prototype.processShapes=function(r){var t,e,i=this.shapes.length,n,s,a=this.amplitude.v,o=Math.max(0,Math.round(this.frequency.v)),h=this.pointsType.v;if(a!==0){var u,d;for(e=0;e<i;e+=1){if(u=this.shapes[e],d=u.localShapeCollection,!(!u.shape._mdf&&!this._mdf&&!r))for(d.releaseShapes(),u.shape._mdf=!0,t=u.shape.paths.shapes,s=u.shape.paths._length,n=0;n<s;n+=1)d.addShape(this.processPath(t[n],a,o,h));u.shape.paths=u.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(r,t,e){var i=Math.atan2(t[0]-r[0],t[1]-r[1]);return[polarOffset(r,i,e),polarOffset(t,i,e)]}function offsetSegment(r,t){var e,i,n,s,a,o,h;h=linearOffset(r.points[0],r.points[1],t),e=h[0],i=h[1],h=linearOffset(r.points[1],r.points[2],t),n=h[0],s=h[1],h=linearOffset(r.points[2],r.points[3],t),a=h[0],o=h[1];var u=lineIntersection(e,i,n,s);u===null&&(u=i);var d=lineIntersection(a,o,n,s);return d===null&&(d=a),new PolynomialBezier(e,u,d,o)}function joinLines(r,t,e,i,n){var s=t.points[3],a=e.points[0];if(i===3||pointEqual(s,a))return s;if(i===2){var o=-t.tangentAngle(1),h=-e.tangentAngle(0)+Math.PI,u=lineIntersection(s,polarOffset(s,o+Math.PI/2,100),a,polarOffset(a,o+Math.PI/2,100)),d=u?pointDistance(u,s):pointDistance(s,a)/2,g=polarOffset(s,o,2*d*roundCorner);return r.setXYAt(g[0],g[1],"o",r.length()-1),g=polarOffset(a,h,2*d*roundCorner),r.setTripleAt(a[0],a[1],a[0],a[1],g[0],g[1],r.length()),a}var f=pointEqual(s,t.points[2])?t.points[0]:t.points[2],m=pointEqual(a,e.points[1])?e.points[3]:e.points[1],_=lineIntersection(f,s,a,m);return _&&pointDistance(_,s)<n?(r.setTripleAt(_[0],_[1],_[0],_[1],_[0],_[1],r.length()),_):s}function getIntersection(r,t){var e=r.intersections(t);return e.length&&floatEqual(e[0][0],1)&&e.shift(),e.length?e[0]:null}function pruneSegmentIntersection(r,t){var e=r.slice(),i=t.slice(),n=getIntersection(r[r.length-1],t[0]);return n&&(e[r.length-1]=r[r.length-1].split(n[0])[0],i[0]=t[0].split(n[1])[1]),r.length>1&&t.length>1&&(n=getIntersection(r[0],t[t.length-1]),n)?[[r[0].split(n[0])[0]],[t[t.length-1].split(n[1])[1]]]:[e,i]}function pruneIntersections(r){for(var t,e=1;e<r.length;e+=1)t=pruneSegmentIntersection(r[e-1],r[e]),r[e-1]=t[0],r[e]=t[1];return r.length>1&&(t=pruneSegmentIntersection(r[r.length-1],r[0]),r[r.length-1]=t[0],r[0]=t[1]),r}function offsetSegmentSplit(r,t){var e=r.inflectionPoints(),i,n,s,a;if(e.length===0)return[offsetSegment(r,t)];if(e.length===1||floatEqual(e[1],1))return s=r.split(e[0]),i=s[0],n=s[1],[offsetSegment(i,t),offsetSegment(n,t)];s=r.split(e[0]),i=s[0];var o=(e[1]-e[0])/(1-e[0]);return s=s[1].split(o),a=s[0],n=s[1],[offsetSegment(i,t),offsetSegment(a,t),offsetSegment(n,t)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(r,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(r,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(r,t,e,i){var n=shapePool.newElement();n.c=r.c;var s=r.length();r.c||(s-=1);var a,o,h,u=[];for(a=0;a<s;a+=1)h=PolynomialBezier.shapeSegment(r,a),u.push(offsetSegmentSplit(h,t));if(!r.c)for(a=s-1;a>=0;a-=1)h=PolynomialBezier.shapeSegmentInverted(r,a),u.push(offsetSegmentSplit(h,t));u=pruneIntersections(u);var d=null,g=null;for(a=0;a<u.length;a+=1){var f=u[a];for(g&&(d=joinLines(n,g,f[0],e,i)),g=f[f.length-1],o=0;o<f.length;o+=1)h=f[o],d&&pointEqual(h.points[0],d)?n.setXYAt(h.points[1][0],h.points[1][1],"o",n.length()-1):n.setTripleAt(h.points[0][0],h.points[0][1],h.points[1][0],h.points[1][1],h.points[0][0],h.points[0][1],n.length()),n.setTripleAt(h.points[3][0],h.points[3][1],h.points[3][0],h.points[3][1],h.points[2][0],h.points[2][1],n.length()),d=h.points[3]}return u.length&&joinLines(n,g,u[0][0],e,i),n},OffsetPathModifier.prototype.processShapes=function(r){var t,e,i=this.shapes.length,n,s,a=this.amount.v,o=this.miterLimit.v,h=this.lineJoin;if(a!==0){var u,d;for(e=0;e<i;e+=1){if(u=this.shapes[e],d=u.localShapeCollection,!(!u.shape._mdf&&!this._mdf&&!r))for(d.releaseShapes(),u.shape._mdf=!0,t=u.shape.paths.shapes,s=u.shape.paths._length,n=0;n<s;n+=1)d.addShape(this.processPath(t[n],a,h,o));u.shape.paths=u.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(r){for(var t=r.fStyle?r.fStyle.split(" "):[],e="normal",i="normal",n=t.length,s,a=0;a<n;a+=1)switch(s=t[a].toLowerCase(),s){case"italic":i="italic";break;case"bold":e="700";break;case"black":e="900";break;case"medium":e="500";break;case"regular":case"normal":e="400";break;case"light":case"thin":e="200";break;default:break}return{style:i,weight:r.fWeight||e}}var FontManager=function(){var r=5e3,t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],n=[65039,8205];function s(w){var A=w.split(","),R,N=A.length,D=[];for(R=0;R<N;R+=1)A[R]!=="sans-serif"&&A[R]!=="monospace"&&D.push(A[R]);return D.join(",")}function a(w,A){var R=createTag("span");R.setAttribute("aria-hidden",!0),R.style.fontFamily=A;var N=createTag("span");N.innerText="giItT1WQy@!-/#",R.style.position="absolute",R.style.left="-10000px",R.style.top="-10000px",R.style.fontSize="300px",R.style.fontVariant="normal",R.style.fontStyle="normal",R.style.fontWeight="normal",R.style.letterSpacing="0",R.appendChild(N),document.body.appendChild(R);var D=N.offsetWidth;return N.style.fontFamily=s(w)+", "+A,{node:N,w:D,parent:R}}function o(){var w,A=this.fonts.length,R,N,D=A;for(w=0;w<A;w+=1)this.fonts[w].loaded?D-=1:this.fonts[w].fOrigin==="n"||this.fonts[w].origin===0?this.fonts[w].loaded=!0:(R=this.fonts[w].monoCase.node,N=this.fonts[w].monoCase.w,R.offsetWidth!==N?(D-=1,this.fonts[w].loaded=!0):(R=this.fonts[w].sansCase.node,N=this.fonts[w].sansCase.w,R.offsetWidth!==N&&(D-=1,this.fonts[w].loaded=!0)),this.fonts[w].loaded&&(this.fonts[w].sansCase.parent.parentNode.removeChild(this.fonts[w].sansCase.parent),this.fonts[w].monoCase.parent.parentNode.removeChild(this.fonts[w].monoCase.parent)));D!==0&&Date.now()-this.initTime<r?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function h(w,A){var R=document.body&&A?"svg":"canvas",N,D=getFontProperties(w);if(R==="svg"){var X=createNS("text");X.style.fontSize="100px",X.setAttribute("font-family",w.fFamily),X.setAttribute("font-style",D.style),X.setAttribute("font-weight",D.weight),X.textContent="1",w.fClass?(X.style.fontFamily="inherit",X.setAttribute("class",w.fClass)):X.style.fontFamily=w.fFamily,A.appendChild(X),N=X}else{var at=new OffscreenCanvas(500,500).getContext("2d");at.font=D.style+" "+D.weight+" 100px "+w.fFamily,N=at}function ft(gt){return R==="svg"?(N.textContent=gt,N.getComputedTextLength()):N.measureText(gt).width}return{measureText:ft}}function u(w,A){if(!w){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=w.list;return}if(!document.body){this.isLoaded=!0,w.list.forEach(function(it){it.helper=h(it),it.cache={}}),this.fonts=w.list;return}var R=w.list,N,D=R.length,X=D;for(N=0;N<D;N+=1){var at=!0,ft,gt;if(R[N].loaded=!1,R[N].monoCase=a(R[N].fFamily,"monospace"),R[N].sansCase=a(R[N].fFamily,"sans-serif"),!R[N].fPath)R[N].loaded=!0,X-=1;else if(R[N].fOrigin==="p"||R[N].origin===3){if(ft=document.querySelectorAll('style[f-forigin="p"][f-family="'+R[N].fFamily+'"], style[f-origin="3"][f-family="'+R[N].fFamily+'"]'),ft.length>0&&(at=!1),at){var ut=createTag("style");ut.setAttribute("f-forigin",R[N].fOrigin),ut.setAttribute("f-origin",R[N].origin),ut.setAttribute("f-family",R[N].fFamily),ut.type="text/css",ut.innerText="@font-face {font-family: "+R[N].fFamily+"; font-style: normal; src: url('"+R[N].fPath+"');}",A.appendChild(ut)}}else if(R[N].fOrigin==="g"||R[N].origin===1){for(ft=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),gt=0;gt<ft.length;gt+=1)ft[gt].href.indexOf(R[N].fPath)!==-1&&(at=!1);if(at){var xt=createTag("link");xt.setAttribute("f-forigin",R[N].fOrigin),xt.setAttribute("f-origin",R[N].origin),xt.type="text/css",xt.rel="stylesheet",xt.href=R[N].fPath,document.body.appendChild(xt)}}else if(R[N].fOrigin==="t"||R[N].origin===2){for(ft=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),gt=0;gt<ft.length;gt+=1)R[N].fPath===ft[gt].src&&(at=!1);if(at){var nt=createTag("link");nt.setAttribute("f-forigin",R[N].fOrigin),nt.setAttribute("f-origin",R[N].origin),nt.setAttribute("rel","stylesheet"),nt.setAttribute("href",R[N].fPath),A.appendChild(nt)}}R[N].helper=h(R[N],A),R[N].cache={},this.fonts.push(R[N])}X===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function d(w){if(!!w){this.chars||(this.chars=[]);var A,R=w.length,N,D=this.chars.length,X;for(A=0;A<R;A+=1){for(N=0,X=!1;N<D;)this.chars[N].style===w[A].style&&this.chars[N].fFamily===w[A].fFamily&&this.chars[N].ch===w[A].ch&&(X=!0),N+=1;X||(this.chars.push(w[A]),D+=1)}}}function g(w,A,R){for(var N=0,D=this.chars.length;N<D;){if(this.chars[N].ch===w&&this.chars[N].style===A&&this.chars[N].fFamily===R)return this.chars[N];N+=1}return(typeof w=="string"&&w.charCodeAt(0)!==13||!w)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",w,A,R)),t}function f(w,A,R){var N=this.getFontByName(A),D=w.charCodeAt(0);if(!N.cache[D+1]){var X=N.helper;if(w===" "){var at=X.measureText("|"+w+"|"),ft=X.measureText("||");N.cache[D+1]=(at-ft)/100}else N.cache[D+1]=X.measureText(w)/100}return N.cache[D+1]*R}function m(w){for(var A=0,R=this.fonts.length;A<R;){if(this.fonts[A].fName===w)return this.fonts[A];A+=1}return this.fonts[0]}function _(w,A){var R=w.toString(16)+A.toString(16);return i.indexOf(R)!==-1}function v(w,A){return A?w===n[0]&&A===n[1]:w===n[1]}function b(w){return e.indexOf(w)!==-1}function C(){this.isLoaded=!0}var M=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};M.isModifier=_,M.isZeroWidthJoiner=v,M.isCombinedCharacter=b;var E={addChars:d,addFonts:u,getCharData:g,getFontByName:m,measureText:f,checkLoadedFonts:o,setIsLoaded:C};return M.prototype=E,M}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){this.renderableComponents.indexOf(t)===-1&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){this.renderableComponents.indexOf(t)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var r={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return r[t]||""}}();function SliderEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,0,0,e)}function AngleEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,0,0,e)}function ColorEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,1,0,e)}function PointEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,1,0,e)}function LayerIndexEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,0,0,e)}function MaskIndexEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,0,0,e)}function CheckboxEffect(r,t,e){this.p=PropertyFactory.getProp(t,r.v,0,0,e)}function NoValueEffect(){this.p={}}function EffectsManager(r,t){var e=r.ef||[];this.effectElements=[];var i,n=e.length,s;for(i=0;i<n;i+=1)s=new GroupEffect(e[i],t),this.effectElements.push(s)}function GroupEffect(r,t){this.init(r,t)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(r,t){this.data=r,this.effectElements=[],this.initDynamicPropertyContainer(t);var e,i=this.data.ef.length,n,s=this.data.ef;for(e=0;e<i;e+=1){switch(n=null,s[e].ty){case 0:n=new SliderEffect(s[e],t,this);break;case 1:n=new AngleEffect(s[e],t,this);break;case 2:n=new ColorEffect(s[e],t,this);break;case 3:n=new PointEffect(s[e],t,this);break;case 4:case 7:n=new CheckboxEffect(s[e],t,this);break;case 10:n=new LayerIndexEffect(s[e],t,this);break;case 11:n=new MaskIndexEffect(s[e],t,this);break;case 5:n=new EffectsManager(s[e],t,this);break;default:n=new NoValueEffect(s[e],t,this);break}n&&this.effectElements.push(n)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if(this.data.masksProperties[t].mode!=="n"&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(!!t){var e=t("layer"),i=t("effects"),n=t("shape"),s=t("text"),a=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var o=i.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(o),this.data.ty===0||this.data.xt?this.compInterface=a(this):this.data.ty===4?(this.layerInterface.shapeInterface=n(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=s(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm),e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t},initBaseData:function(t,e,i){this.globalData=e,this.comp=i,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,n=this.dynamicProperties.length;for(i=0;i<n;i+=1)(e||this._isParent&&this.dynamicProperties[i].propType==="transform")&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&this.dynamicProperties.push(t)}};function FootageElement(r,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(r.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(r,t,e)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var r=getExpressionInterfaces();if(!!r){var t=r("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(r,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(r.refId),this.initBaseData(r,t,e),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,r.au&&r.au.lv?r.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(r){if(this.prepareRenderableFrame(r,!0),this.prepareProperties(r,!0),this.tm._placeholder)this._currentTime=r/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var e=this._volume*this._volumeMultiplier;this._previousVolume!==e&&(this._previousVolume=e,this.audio.volume(e))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(r){this.audio.rate(r)},AudioElement.prototype.volume=function(r){this._volumeMultiplier=r,this._previousVolume=r*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(r){var t,e=this.layers.length,i;for(this.completeLayers=!0,t=e-1;t>=0;t-=1)this.elements[t]||(i=this.layers[t],i.ip-i.st<=r-this.layers[t].st&&i.op-i.st>r-this.layers[t].st&&this.buildItem(t)),this.completeLayers=this.elements[t]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(r){switch(r.ty){case 2:return this.createImage(r);case 0:return this.createComp(r);case 1:return this.createSolid(r);case 3:return this.createNull(r);case 4:return this.createShape(r);case 5:return this.createText(r);case 6:return this.createAudio(r);case 13:return this.createCamera(r);case 15:return this.createFootage(r);default:return this.createNull(r)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(r){return new AudioElement(r,this.globalData,this)},BaseRenderer.prototype.createFootage=function(r){return new FootageElement(r,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var r,t=this.layers.length;for(r=0;r<t;r+=1)this.buildItem(r);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(r){this.completeLayers=!1;var t,e=r.length,i,n=this.layers.length;for(t=0;t<e;t+=1)for(i=0;i<n;){if(this.layers[i].id===r[t].id){this.layers[i]=r[t];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(r){this.globalData.projectInterface=r},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(r,t,e){for(var i=this.elements,n=this.layers,s=0,a=n.length;s<a;)n[s].ind==t&&(!i[s]||i[s]===!0?(this.buildItem(s),this.addPendingElement(r)):(e.push(i[s]),i[s].setAsParent(),n[s].parent!==void 0?this.buildElementParenting(r,n[s].parent,e):r.setHierarchy(e))),s+=1},BaseRenderer.prototype.addPendingElement=function(r){this.pendingElements.push(r)},BaseRenderer.prototype.searchExtraCompositions=function(r){var t,e=r.length;for(t=0;t<e;t+=1)if(r[t].xt){var i=this.createComp(r[t]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementByPath=function(r){var t=r.shift(),e;if(typeof t=="number")e=this.elements[t];else{var i,n=this.elements.length;for(i=0;i<n;i+=1)if(this.elements[i].data.nm===t){e=this.elements[i];break}}return r.length===0?e:e.getElementByPath(r)},BaseRenderer.prototype.setupGlobalData=function(r,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(r.chars),this.globalData.fontManager.addFonts(r.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=r.fr,this.globalData.nm=r.nm,this.globalData.compSize={w:r.w,h:r.h}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty!==11},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<n;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<n;i+=1)t=this.hierarchy[i].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):i=!1;var s,a=e.length,o;for(s=0;s<a;s+=1)o=e[s].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},mHelper:new Matrix};function MaskElement(r,t,e){this.data=r,this.element=t,this.globalData=e,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i=this.globalData.defs,n,s=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(s),this.solidPath="";var a,o=this.masksProperties,h=0,u=[],d,g,f=createElementID(),m,_,v,b,C="clipPath",M="clip-path";for(n=0;n<s;n+=1)if((o[n].mode!=="a"&&o[n].mode!=="n"||o[n].inv||o[n].o.k!==100||o[n].o.x)&&(C="mask",M="mask"),(o[n].mode==="s"||o[n].mode==="i")&&h===0?(m=createNS("rect"),m.setAttribute("fill","#ffffff"),m.setAttribute("width",this.element.comp.data.w||0),m.setAttribute("height",this.element.comp.data.h||0),u.push(m)):m=null,a=createNS("path"),o[n].mode==="n")this.viewData[n]={op:PropertyFactory.getProp(this.element,o[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,o[n],3),elem:a,lastPath:""},i.appendChild(a);else{h+=1,a.setAttribute("fill",o[n].mode==="s"?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero");var E;if(o[n].x.k!==0?(C="mask",M="mask",b=PropertyFactory.getProp(this.element,o[n].x,0,null,this.element),E=createElementID(),_=createNS("filter"),_.setAttribute("id",E),v=createNS("feMorphology"),v.setAttribute("operator","erode"),v.setAttribute("in","SourceGraphic"),v.setAttribute("radius","0"),_.appendChild(v),i.appendChild(_),a.setAttribute("stroke",o[n].mode==="s"?"#000000":"#ffffff")):(v=null,b=null),this.storedData[n]={elem:a,x:b,expan:v,lastPath:"",lastOperator:"",filterId:E,lastRadius:0},o[n].mode==="i"){g=u.length;var w=createNS("g");for(d=0;d<g;d+=1)w.appendChild(u[d]);var A=createNS("mask");A.setAttribute("mask-type","alpha"),A.setAttribute("id",f+"_"+h),A.appendChild(a),i.appendChild(A),w.setAttribute("mask","url("+getLocationHref()+"#"+f+"_"+h+")"),u.length=0,u.push(w)}else u.push(a);o[n].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[n]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,o[n].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,o[n],3),invRect:m},this.viewData[n].prop.k||this.drawPath(o[n],this.viewData[n].prop.v,this.viewData[n])}for(this.maskElement=createNS(C),s=u.length,n=0;n<s;n+=1)this.maskElement.appendChild(u[n]);h>0&&(this.maskElement.setAttribute("id",f),this.element.maskedElement.setAttribute(M,"url("+getLocationHref()+"#"+f+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(r){return this.viewData[r].prop},MaskElement.prototype.renderFrame=function(r){var t=this.element.finalTransform.mat,e,i=this.masksProperties.length;for(e=0;e<i;e+=1)if((this.viewData[e].prop._mdf||r)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||r)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),this.masksProperties[e].mode!=="n"&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||r)&&this.viewData[e].invRect.setAttribute("transform",t.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||r))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?(this.storedData[e].lastOperator!=="erode"&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):(this.storedData[e].lastOperator!=="dilate"&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",this.storedData[e].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var r="M0,0 ";return r+=" h"+this.globalData.compSize.w,r+=" v"+this.globalData.compSize.h,r+=" h-"+this.globalData.compSize.w,r+=" v-"+this.globalData.compSize.h+" ",r},MaskElement.prototype.drawPath=function(r,t,e){var i=" M"+t.v[0][0]+","+t.v[0][1],n,s;for(s=t._length,n=1;n<s;n+=1)i+=" C"+t.o[n-1][0]+","+t.o[n-1][1]+" "+t.i[n][0]+","+t.i[n][1]+" "+t.v[n][0]+","+t.v[n][1];if(t.c&&s>1&&(i+=" C"+t.o[n-1][0]+","+t.o[n-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),e.lastPath!==i){var a="";e.elem&&(t.c&&(a=r.inv?this.solidPath+i:i),e.elem.setAttribute("d",a)),e.lastPath=i}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var r={};r.createFilter=t,r.createAlphaToLuminanceFilter=e;function t(i,n){var s=createNS("filter");return s.setAttribute("id",i),n!==!0&&(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s}function e(){var i=createNS("feColorMatrix");return i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),i}return r}(),featureSupport=function(){var r={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(r.maskType=!1),r}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(r){var t,e="SourceGraphic",i=r.data.ef?r.data.ef.length:0,n=createElementID(),s=filtersFactory.createFilter(n,!0),a=0;this.filters=[];var o;for(t=0;t<i;t+=1){o=null;var h=r.data.ef[t].ty;if(registeredEffects[h]){var u=registeredEffects[h].effect;o=new u(s,r.effectsManager.effectElements[t],r,idPrefix+a,e),e=idPrefix+a,registeredEffects[h].countsAsEffect&&(a+=1)}o&&this.filters.push(o)}a&&(r.globalData.defs.appendChild(s),r.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+n+")")),this.filters.length&&r.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(r){var t,e=this.filters.length;for(t=0;t<e;t+=1)this.filters[t].renderFrame(r)};function registerEffect(r,t,e){registeredEffects[r]={effect:t,countsAsEffect:e}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("symbol");e.setAttribute("id",this.layerId);var i=createNS("g");i.appendChild(this.layerElement),e.appendChild(i),t=i,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var n=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(n.setAttribute("id",a),n.appendChild(s),this.globalData.defs.appendChild(n),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),o.appendChild(this.layerElement),this.transformedElement=o,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(t){if(!this.matteMasks[t]){var e=this.layerId+"_"+t,i,n,s,a;if(t===1||t===3){var o=createNS("mask");o.setAttribute("id",e),o.setAttribute("mask-type",t===3?"luminance":"alpha"),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),o.appendChild(s),this.globalData.defs.appendChild(o),!featureSupport.maskType&&t===1&&(o.setAttribute("mask-type","luminance"),i=createElementID(),n=filtersFactory.createFilter(i),this.globalData.defs.appendChild(n),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),a.appendChild(s),o.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+i+")"))}else if(t===2){var h=createNS("mask");h.setAttribute("id",e),h.setAttribute("mask-type","alpha");var u=createNS("g");h.appendChild(u),i=createElementID(),n=filtersFactory.createFilter(i);var d=createNS("feComponentTransfer");d.setAttribute("in","SourceGraphic"),n.appendChild(d);var g=createNS("feFuncA");g.setAttribute("type","table"),g.setAttribute("tableValues","1.0 0.0"),d.appendChild(g),this.globalData.defs.appendChild(n);var f=createNS("rect");f.setAttribute("width",this.comp.data.w),f.setAttribute("height",this.comp.data.h),f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("fill","#ffffff"),f.setAttribute("opacity","0"),u.setAttribute("filter","url("+getLocationHref()+"#"+i+")"),u.appendChild(f),s=createNS("use"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),u.appendChild(s),featureSupport.maskType||(h.setAttribute("mask-type","luminance"),n.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),u.appendChild(f),a.appendChild(this.layerElement),u.appendChild(a)),this.globalData.defs.appendChild(h)}this.matteMasks[t]=e}return this.matteMasks[t]},setMatte:function(t){!this.matteElement||this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var r={initElement:function(e,i,n){this.initFrame(),this.initBaseData(e,i,n),this.initTransform(e,i,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var e=this.baseElement||this.layerElement;e.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var e=this.baseElement||this.layerElement;e.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(r)],RenderableDOMElement)})();function IImageElement(r,t,e){this.assetData=t.getAssetData(r.refId),this.initElement(r,t,e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(r,t){this.elem=r,this.pos=t}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=0,i=this.shapeModifiers.length;e<i;)if(this.shapeModifiers[e].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(!!this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();e=this.shapeModifiers.length;var i;for(t=e-1;t>=0&&(i=this.shapeModifiers[t].processShapes(this._isFirstFrame),!i);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,n=e.length;i<n;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var i=this.processedElements,n=i.length;n;)if(n-=1,i[n].elem===t){i[n].pos=e;return}i.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(r,t,e){this.caches=[],this.styles=[],this.transformers=r,this.lStr="",this.sh=e,this.lvl=t,this._isAnimated=!!e.k;for(var i=0,n=r.length;i<n;){if(r[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(r,t){this.data=r,this.type=r.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=r.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(r,t,e,i){this.elem=r,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var n,s=t.length||0,a;for(n=0;n<s;n+=1)a=PropertyFactory.getProp(r,t[n].v,0,0,this),this.k=a.k||this.k,this.dataProps[n]={n:t[n].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(r){if(!(this.elem.globalData.frameId===this.frameId&&!r)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||r,this._mdf)){var t=0,e=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),t=0;t<e;t+=1)this.dataProps[t].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(r,t,e){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,t.o,0,.01,this),this.w=PropertyFactory.getProp(r,t.w,0,null,this),this.d=new DashProperty(r,t.d||{},"svg",this),this.c=PropertyFactory.getProp(r,t.c,1,255,this),this.style=e,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(r,t,e){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,t.o,0,.01,this),this.c=PropertyFactory.getProp(r,t.c,1,255,this),this.style=e}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(r,t,e){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.style=e}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(r,t,e){this.data=t,this.c=createTypedArray("uint8c",t.p*4);var i=t.k.k[0].s?t.k.k[0].s.length-t.p*4:t.k.k.length-t.p*4;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(e),this.prop=PropertyFactory.getProp(r,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(r,t){for(var e=0,i=this.o.length/2,n;e<i;){if(n=Math.abs(r[e*4]-r[t*4+e*2]),n>.01)return!1;e+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var r=0,t=this.data.k.k.length;r<t;){if(!this.comparePoints(this.data.k.k[r].s,this.data.p))return!1;r+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(r){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||r){var t,e=this.data.p*4,i,n;for(t=0;t<e;t+=1)i=t%4==0?100:255,n=Math.round(this.prop.v[t]*i),this.c[t]!==n&&(this.c[t]=n,this._cmdf=!r);if(this.o.length)for(e=this.prop.v.length,t=this.data.p*4;t<e;t+=1)i=t%2==0?100:1,n=t%2==0?Math.round(this.prop.v[t]*100):this.prop.v[t],this.o[t-this.data.p*4]!==n&&(this.o[t-this.data.p*4]=n,this._omdf=!r);this._mdf=!r}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(r,t,e){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.initGradientData(r,t,e)}SVGGradientFillStyleData.prototype.initGradientData=function(r,t,e){this.o=PropertyFactory.getProp(r,t.o,0,.01,this),this.s=PropertyFactory.getProp(r,t.s,1,null,this),this.e=PropertyFactory.getProp(r,t.e,1,null,this),this.h=PropertyFactory.getProp(r,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(r,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(r,t.g,this),this.style=e,this.stops=[],this.setGradientData(e.pElem,t),this.setGradientOpacity(t,e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(r,t){var e=createElementID(),i=createNS(t.t===1?"linearGradient":"radialGradient");i.setAttribute("id",e),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var n=[],s,a,o;for(o=t.g.p*4,a=0;a<o;a+=4)s=createNS("stop"),i.appendChild(s),n.push(s);r.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+e+")"),this.gf=i,this.cst=n},SVGGradientFillStyleData.prototype.setGradientOpacity=function(r,t){if(this.g._hasOpacity&&!this.g._collapsable){var e,i,n,s=createNS("mask"),a=createNS("path");s.appendChild(a);var o=createElementID(),h=createElementID();s.setAttribute("id",h);var u=createNS(r.t===1?"linearGradient":"radialGradient");u.setAttribute("id",o),u.setAttribute("spreadMethod","pad"),u.setAttribute("gradientUnits","userSpaceOnUse"),n=r.g.k.k[0].s?r.g.k.k[0].s.length:r.g.k.k.length;var d=this.stops;for(i=r.g.p*4;i<n;i+=2)e=createNS("stop"),e.setAttribute("stop-color","rgb(255,255,255)"),u.appendChild(e),d.push(e);a.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),r.ty==="gs"&&(a.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),r.lj===1&&a.setAttribute("stroke-miterlimit",r.ml)),this.of=u,this.ms=s,this.ost=d,this.maskId=h,t.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(r,t,e){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(r,t.w,0,null,this),this.d=new DashProperty(r,t.d||{},"svg",this),this.initGradientData(r,t,e),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(r,t,e){this.transform={mProps:r,op:t,container:e},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(t,e,i,n){if(e===0)return"";var s=t.o,a=t.i,o=t.v,h,u=" M"+n.applyToPointStringified(o[0][0],o[0][1]);for(h=1;h<e;h+=1)u+=" C"+n.applyToPointStringified(s[h-1][0],s[h-1][1])+" "+n.applyToPointStringified(a[h][0],a[h][1])+" "+n.applyToPointStringified(o[h][0],o[h][1]);return i&&e&&(u+=" C"+n.applyToPointStringified(s[h-1][0],s[h-1][1])+" "+n.applyToPointStringified(a[0][0],a[0][1])+" "+n.applyToPointStringified(o[0][0],o[0][1]),u+="z"),u},SVGElementsRenderer=function(){var r=new Matrix,t=new Matrix,e={createRenderFunction:i};function i(g){switch(g.ty){case"fl":return o;case"gf":return u;case"gs":return h;case"st":return d;case"sh":case"el":case"rc":case"sr":return a;case"tr":return n;case"no":return s;default:return null}}function n(g,f,m){(m||f.transform.op._mdf)&&f.transform.container.setAttribute("opacity",f.transform.op.v),(m||f.transform.mProps._mdf)&&f.transform.container.setAttribute("transform",f.transform.mProps.v.to2dCSS())}function s(){}function a(g,f,m){var _,v,b,C,M,E,w=f.styles.length,A=f.lvl,R,N,D,X,at;for(E=0;E<w;E+=1){if(C=f.sh._mdf||m,f.styles[E].lvl<A){for(N=t.reset(),X=A-f.styles[E].lvl,at=f.transformers.length-1;!C&&X>0;)C=f.transformers[at].mProps._mdf||C,X-=1,at-=1;if(C)for(X=A-f.styles[E].lvl,at=f.transformers.length-1;X>0;)D=f.transformers[at].mProps.v.props,N.transform(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15]),X-=1,at-=1}else N=r;if(R=f.sh.paths,v=R._length,C){for(b="",_=0;_<v;_+=1)M=R.shapes[_],M&&M._length&&(b+=buildShapeString(M,M._length,M.c,N));f.caches[E]=b}else b=f.caches[E];f.styles[E].d+=g.hd===!0?"":b,f.styles[E]._mdf=C||f.styles[E]._mdf}}function o(g,f,m){var _=f.style;(f.c._mdf||m)&&_.pElem.setAttribute("fill","rgb("+bmFloor(f.c.v[0])+","+bmFloor(f.c.v[1])+","+bmFloor(f.c.v[2])+")"),(f.o._mdf||m)&&_.pElem.setAttribute("fill-opacity",f.o.v)}function h(g,f,m){u(g,f,m),d(g,f,m)}function u(g,f,m){var _=f.gf,v=f.g._hasOpacity,b=f.s.v,C=f.e.v;if(f.o._mdf||m){var M=g.ty==="gf"?"fill-opacity":"stroke-opacity";f.style.pElem.setAttribute(M,f.o.v)}if(f.s._mdf||m){var E=g.t===1?"x1":"cx",w=E==="x1"?"y1":"cy";_.setAttribute(E,b[0]),_.setAttribute(w,b[1]),v&&!f.g._collapsable&&(f.of.setAttribute(E,b[0]),f.of.setAttribute(w,b[1]))}var A,R,N,D;if(f.g._cmdf||m){A=f.cst;var X=f.g.c;for(N=A.length,R=0;R<N;R+=1)D=A[R],D.setAttribute("offset",X[R*4]+"%"),D.setAttribute("stop-color","rgb("+X[R*4+1]+","+X[R*4+2]+","+X[R*4+3]+")")}if(v&&(f.g._omdf||m)){var at=f.g.o;for(f.g._collapsable?A=f.cst:A=f.ost,N=A.length,R=0;R<N;R+=1)D=A[R],f.g._collapsable||D.setAttribute("offset",at[R*2]+"%"),D.setAttribute("stop-opacity",at[R*2+1])}if(g.t===1)(f.e._mdf||m)&&(_.setAttribute("x2",C[0]),_.setAttribute("y2",C[1]),v&&!f.g._collapsable&&(f.of.setAttribute("x2",C[0]),f.of.setAttribute("y2",C[1])));else{var ft;if((f.s._mdf||f.e._mdf||m)&&(ft=Math.sqrt(Math.pow(b[0]-C[0],2)+Math.pow(b[1]-C[1],2)),_.setAttribute("r",ft),v&&!f.g._collapsable&&f.of.setAttribute("r",ft)),f.e._mdf||f.h._mdf||f.a._mdf||m){ft||(ft=Math.sqrt(Math.pow(b[0]-C[0],2)+Math.pow(b[1]-C[1],2)));var gt=Math.atan2(C[1]-b[1],C[0]-b[0]),ut=f.h.v;ut>=1?ut=.99:ut<=-1&&(ut=-.99);var xt=ft*ut,nt=Math.cos(gt+f.a.v)*xt+b[0],it=Math.sin(gt+f.a.v)*xt+b[1];_.setAttribute("fx",nt),_.setAttribute("fy",it),v&&!f.g._collapsable&&(f.of.setAttribute("fx",nt),f.of.setAttribute("fy",it))}}}function d(g,f,m){var _=f.style,v=f.d;v&&(v._mdf||m)&&v.dashStr&&(_.pElem.setAttribute("stroke-dasharray",v.dashStr),_.pElem.setAttribute("stroke-dashoffset",v.dashoffset[0])),f.c&&(f.c._mdf||m)&&_.pElem.setAttribute("stroke","rgb("+bmFloor(f.c.v[0])+","+bmFloor(f.c.v[1])+","+bmFloor(f.c.v[2])+")"),(f.o._mdf||m)&&_.pElem.setAttribute("stroke-opacity",f.o.v),(f.w._mdf||m)&&(_.pElem.setAttribute("stroke-width",f.w.v),_.msElem&&_.msElem.setAttribute("stroke-width",f.w.v))}return e}();function SVGShapeElement(r,t,e){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(r,t,e),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var r,t=this.shapes.length,e,i,n=this.stylesList.length,s,a=[],o=!1;for(i=0;i<n;i+=1){for(s=this.stylesList[i],o=!1,a.length=0,r=0;r<t;r+=1)e=this.shapes[r],e.styles.indexOf(s)!==-1&&(a.push(e),o=e._isAnimated||o);a.length>1&&o&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(r){var t,e=r.length;for(t=0;t<e;t+=1)r[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(r,t){var e,i=new SVGStyleData(r,t),n=i.pElem;if(r.ty==="st")e=new SVGStrokeStyleData(this,r,i);else if(r.ty==="fl")e=new SVGFillStyleData(this,r,i);else if(r.ty==="gf"||r.ty==="gs"){var s=r.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;e=new s(this,r,i),this.globalData.defs.appendChild(e.gf),e.maskId&&(this.globalData.defs.appendChild(e.ms),this.globalData.defs.appendChild(e.of),n.setAttribute("mask","url("+getLocationHref()+"#"+e.maskId+")"))}else r.ty==="no"&&(e=new SVGNoStyleData(this,r,i));return(r.ty==="st"||r.ty==="gs")&&(n.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),n.setAttribute("fill-opacity","0"),r.lj===1&&n.setAttribute("stroke-miterlimit",r.ml)),r.r===2&&n.setAttribute("fill-rule","evenodd"),r.ln&&n.setAttribute("id",r.ln),r.cl&&n.setAttribute("class",r.cl),r.bm&&(n.style["mix-blend-mode"]=getBlendMode(r.bm)),this.stylesList.push(i),this.addToAnimatedContents(r,e),e},SVGShapeElement.prototype.createGroupElement=function(r){var t=new ShapeGroupData;return r.ln&&t.gr.setAttribute("id",r.ln),r.cl&&t.gr.setAttribute("class",r.cl),r.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(r.bm)),t},SVGShapeElement.prototype.createTransformElement=function(r,t){var e=TransformPropertyFactory.getTransformProperty(this,r,this),i=new SVGTransformData(e,e.o,t);return this.addToAnimatedContents(r,i),i},SVGShapeElement.prototype.createShapeElement=function(r,t,e){var i=4;r.ty==="rc"?i=5:r.ty==="el"?i=6:r.ty==="sr"&&(i=7);var n=ShapePropertyFactory.getShapeProp(this,r,i,this),s=new SVGShapeData(t,e,n);return this.shapes.push(s),this.addShapeToModifiers(s),this.addToAnimatedContents(r,s),s},SVGShapeElement.prototype.addToAnimatedContents=function(r,t){for(var e=0,i=this.animatedContents.length;e<i;){if(this.animatedContents[e].element===t)return;e+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(r),element:t,data:r})},SVGShapeElement.prototype.setElementStyles=function(r){var t=r.styles,e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||t.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var r,t=this.itemsData.length;for(r=0;r<t;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,r=0;r<t;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(r,t,e,i,n,s,a){var o=[].concat(s),h,u=r.length-1,d,g,f=[],m=[],_,v,b;for(h=u;h>=0;h-=1){if(b=this.searchProcessedElement(r[h]),b?t[h]=e[b-1]:r[h]._render=a,r[h].ty==="fl"||r[h].ty==="st"||r[h].ty==="gf"||r[h].ty==="gs"||r[h].ty==="no")b?t[h].style.closed=!1:t[h]=this.createStyleElement(r[h],n),r[h]._render&&t[h].style.pElem.parentNode!==i&&i.appendChild(t[h].style.pElem),f.push(t[h].style);else if(r[h].ty==="gr"){if(!b)t[h]=this.createGroupElement(r[h]);else for(g=t[h].it.length,d=0;d<g;d+=1)t[h].prevViewData[d]=t[h].it[d];this.searchShapes(r[h].it,t[h].it,t[h].prevViewData,t[h].gr,n+1,o,a),r[h]._render&&t[h].gr.parentNode!==i&&i.appendChild(t[h].gr)}else r[h].ty==="tr"?(b||(t[h]=this.createTransformElement(r[h],i)),_=t[h].transform,o.push(_)):r[h].ty==="sh"||r[h].ty==="rc"||r[h].ty==="el"||r[h].ty==="sr"?(b||(t[h]=this.createShapeElement(r[h],o,n)),this.setElementStyles(t[h])):r[h].ty==="tm"||r[h].ty==="rd"||r[h].ty==="ms"||r[h].ty==="pb"||r[h].ty==="zz"||r[h].ty==="op"?(b?(v=t[h],v.closed=!1):(v=ShapeModifiers.getModifier(r[h].ty),v.init(this,r[h]),t[h]=v,this.shapeModifiers.push(v)),m.push(v)):r[h].ty==="rp"&&(b?(v=t[h],v.closed=!0):(v=ShapeModifiers.getModifier(r[h].ty),t[h]=v,v.init(this,r,h,t),this.shapeModifiers.push(v),a=!1),m.push(v));this.addProcessedElement(r[h],h+1)}for(u=f.length,h=0;h<u;h+=1)f[h].closed=!0;for(u=m.length,h=0;h<u;h+=1)m[h].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var r,t=this.stylesList.length;for(r=0;r<t;r+=1)this.stylesList[r].reset();for(this.renderShape(),r=0;r<t;r+=1)(this.stylesList[r]._mdf||this._isFirstFrame)&&(this.stylesList[r].msElem&&(this.stylesList[r].msElem.setAttribute("d",this.stylesList[r].d),this.stylesList[r].d="M0 0"+this.stylesList[r].d),this.stylesList[r].pElem.setAttribute("d",this.stylesList[r].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var r,t=this.animatedContents.length,e;for(r=0;r<t;r+=1)e=this.animatedContents[r],(this._isFirstFrame||e.element._isAnimated)&&e.data!==!0&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(r,t,e,i,n,s){this.o=r,this.sw=t,this.sc=e,this.fc=i,this.m=n,this.p=s,this._mdf={o:!0,sw:!!t,sc:!!e,fc:!!i,m:!0,p:!0}}LetterProps.prototype.update=function(r,t,e,i,n,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==r&&(this.o=r,this._mdf.o=!0,a=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,a=!0),this.sc!==e&&(this.sc=e,this._mdf.sc=!0,a=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,a=!0),this.m!==n&&(this.m=n,this._mdf.m=!0,a=!0),s.length&&(this.p[0]!==s[0]||this.p[1]!==s[1]||this.p[4]!==s[4]||this.p[5]!==s[5]||this.p[12]!==s[12]||this.p[13]!==s[13])&&(this.p=s,this._mdf.p=!0,a=!0),a};function TextProperty(r,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=r,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r},TextProperty.prototype.setCurrentData=function(r){r.__complete||this.completeTextData(r),this.currentData=r,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(r){this.effectsSequence.push(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(r){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!r)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,e=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var i,n=this.effectsSequence.length,s=r||this.data.d.k[this.keysIndex].s;for(i=0;i<n;i+=1)e!==this.keysIndex?s=this.effectsSequence[i](s,s.t):s=this.effectsSequence[i](this.currentData,s.t);t!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var r=this.data.d.k,t=this.elem.comp.renderedFrame,e=0,i=r.length;e<=i-1&&!(e===i-1||r[e+1].t>t);)e+=1;return this.keysIndex!==e&&(this.keysIndex=e),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(r){for(var t=[],e=0,i=r.length,n,s,a=!1;e<i;)n=r.charCodeAt(e),FontManager.isCombinedCharacter(n)?t[t.length-1]+=r.charAt(e):n>=55296&&n<=56319?(s=r.charCodeAt(e+1),s>=56320&&s<=57343?(a||FontManager.isModifier(n,s)?(t[t.length-1]+=r.substr(e,2),a=!1):t.push(r.substr(e,2)),e+=1):t.push(r.charAt(e))):n>56319?(s=r.charCodeAt(e+1),FontManager.isZeroWidthJoiner(n,s)?(a=!0,t[t.length-1]+=r.substr(e,2),e+=1):t.push(r.charAt(e))):FontManager.isZeroWidthJoiner(n)?(t[t.length-1]+=r.charAt(e),a=!0):t.push(r.charAt(e)),e+=1;return t},TextProperty.prototype.completeTextData=function(r){r.__complete=!0;var t=this.elem.globalData.fontManager,e=this.data,i=[],n,s,a,o=0,h,u=e.m.g,d=0,g=0,f=0,m=[],_=0,v=0,b,C,M=t.getFontByName(r.f),E,w=0,A=getFontProperties(M);r.fWeight=A.weight,r.fStyle=A.style,r.finalSize=r.s,r.finalText=this.buildFinalText(r.t),s=r.finalText.length,r.finalLineHeight=r.lh;var R=r.tr/1e3*r.finalSize,N;if(r.sz)for(var D=!0,X=r.sz[0],at=r.sz[1],ft,gt;D;){gt=this.buildFinalText(r.t),ft=0,_=0,s=gt.length,R=r.tr/1e3*r.finalSize;var ut=-1;for(n=0;n<s;n+=1)N=gt[n].charCodeAt(0),a=!1,gt[n]===" "?ut=n:(N===13||N===3)&&(_=0,a=!0,ft+=r.finalLineHeight||r.finalSize*1.2),t.chars?(E=t.getCharData(gt[n],M.fStyle,M.fFamily),w=a?0:E.w*r.finalSize/100):w=t.measureText(gt[n],r.f,r.finalSize),_+w>X&&gt[n]!==" "?(ut===-1?s+=1:n=ut,ft+=r.finalLineHeight||r.finalSize*1.2,gt.splice(n,ut===n?1:0,"\r"),ut=-1,_=0):(_+=w,_+=R);ft+=M.ascent*r.finalSize/100,this.canResize&&r.finalSize>this.minimumFontSize&&at<ft?(r.finalSize-=1,r.finalLineHeight=r.finalSize*r.lh/r.s):(r.finalText=gt,s=r.finalText.length,D=!1)}_=-R,w=0;var xt=0,nt;for(n=0;n<s;n+=1)if(a=!1,nt=r.finalText[n],N=nt.charCodeAt(0),N===13||N===3?(xt=0,m.push(_),v=_>v?_:v,_=-2*R,h="",a=!0,f+=1):h=nt,t.chars?(E=t.getCharData(nt,M.fStyle,t.getFontByName(r.f).fFamily),w=a?0:E.w*r.finalSize/100):w=t.measureText(h,r.f,r.finalSize),nt===" "?xt+=w+R:(_+=w+R+xt,xt=0),i.push({l:w,an:w,add:d,n:a,anIndexes:[],val:h,line:f,animatorJustifyOffset:0}),u==2){if(d+=w,h===""||h===" "||n===s-1){for((h===""||h===" ")&&(d-=w);g<=n;)i[g].an=d,i[g].ind=o,i[g].extra=w,g+=1;o+=1,d=0}}else if(u==3){if(d+=w,h===""||n===s-1){for(h===""&&(d-=w);g<=n;)i[g].an=d,i[g].ind=o,i[g].extra=w,g+=1;d=0,o+=1}}else i[o].ind=o,i[o].extra=0,o+=1;if(r.l=i,v=_>v?_:v,m.push(_),r.sz)r.boxWidth=r.sz[0],r.justifyOffset=0;else switch(r.boxWidth=v,r.j){case 1:r.justifyOffset=-r.boxWidth;break;case 2:r.justifyOffset=-r.boxWidth/2;break;default:r.justifyOffset=0}r.lineWidths=m;var it=e.a,tt,W;C=it.length;var Q,ot,ct=[];for(b=0;b<C;b+=1){for(tt=it[b],tt.a.sc&&(r.strokeColorAnim=!0),tt.a.sw&&(r.strokeWidthAnim=!0),(tt.a.fc||tt.a.fh||tt.a.fs||tt.a.fb)&&(r.fillColorAnim=!0),ot=0,Q=tt.s.b,n=0;n<s;n+=1)W=i[n],W.anIndexes[b]=ot,(Q==1&&W.val!==""||Q==2&&W.val!==""&&W.val!==" "||Q==3&&(W.n||W.val==" "||n==s-1)||Q==4&&(W.n||n==s-1))&&(tt.s.rn===1&&ct.push(ot),ot+=1);e.a[b].s.totalChars=ot;var Tt=-1,Rt;if(tt.s.rn===1)for(n=0;n<s;n+=1)W=i[n],Tt!=W.anIndexes[b]&&(Tt=W.anIndexes[b],Rt=ct.splice(Math.floor(Math.random()*ct.length),1)[0]),W.anIndexes[b]=Rt}r.yOffset=r.finalLineHeight||r.finalSize*1.2,r.ls=r.ls||0,r.ascent=M.ascent*r.finalSize/100},TextProperty.prototype.updateDocumentData=function(r,t){t=t===void 0?this.keysIndex:t;var e=this.copyData({},this.data.d.k[t].s);e=this.copyData(e,r),this.data.d.k[t].s=e,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(r){var t=this.data.d.k[r].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(r){this.canResize=r,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(r){this.minimumFontSize=Math.floor(r)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var r=Math.max,t=Math.min,e=Math.floor;function i(s,a){this._currentTextLength=-1,this.k=!1,this.data=a,this.elem=s,this.comp=s.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(s),this.s=PropertyFactory.getProp(s,a.s||{k:0},0,0,this),"e"in a?this.e=PropertyFactory.getProp(s,a.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(s,a.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(s,a.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(s,a.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(s,a.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(s,a.a,0,.01,this),this.dynamicProperties.length||this.getValue()}i.prototype={getMult:function(a){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var o=0,h=0,u=1,d=1;this.ne.v>0?o=this.ne.v/100:h=-this.ne.v/100,this.xe.v>0?u=1-this.xe.v/100:d=1+this.xe.v/100;var g=BezierFactory.getBezierEasing(o,h,u,d).get,f=0,m=this.finalS,_=this.finalE,v=this.data.sh;if(v===2)_===m?f=a>=_?1:0:f=r(0,t(.5/(_-m)+(a-m)/(_-m),1)),f=g(f);else if(v===3)_===m?f=a>=_?0:1:f=1-r(0,t(.5/(_-m)+(a-m)/(_-m),1)),f=g(f);else if(v===4)_===m?f=0:(f=r(0,t(.5/(_-m)+(a-m)/(_-m),1)),f<.5?f*=2:f=1-2*(f-.5)),f=g(f);else if(v===5){if(_===m)f=0;else{var b=_-m;a=t(r(0,a+.5-m),_-m);var C=-b/2+a,M=b/2;f=Math.sqrt(1-C*C/(M*M))}f=g(f)}else v===6?(_===m?f=0:(a=t(r(0,a+.5-m),_-m),f=(1+Math.cos(Math.PI+Math.PI*2*a/(_-m)))/2),f=g(f)):(a>=e(m)&&(a-m<0?f=r(0,t(t(_,1)-(m-a),1)):f=r(0,t(_-a,1))),f=g(f));if(this.sm.v!==100){var E=this.sm.v*.01;E===0&&(E=1e-8);var w=.5-E*.5;f<w?f=0:(f=(f-w)/E,f>1&&(f=1))}return f*this.a.v},getValue:function(a){this.iterateDynamicProperties(),this._mdf=a||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,a&&this.data.r===2&&(this.e.v=this._currentTextLength);var o=this.data.r===2?1:100/this.data.totalChars,h=this.o.v/o,u=this.s.v/o+h,d=this.e.v/o+h;if(u>d){var g=u;u=d,d=g}this.finalS=u,this.finalE=d}},extendPrototype([DynamicPropertyContainer],i);function n(s,a,o){return new i(s,a,o)}return{getTextSelectorProp:n}}();function TextAnimatorDataProperty(r,t,e){var i={propType:!1},n=PropertyFactory.getProp,s=t.a;this.a={r:s.r?n(r,s.r,0,degToRads,e):i,rx:s.rx?n(r,s.rx,0,degToRads,e):i,ry:s.ry?n(r,s.ry,0,degToRads,e):i,sk:s.sk?n(r,s.sk,0,degToRads,e):i,sa:s.sa?n(r,s.sa,0,degToRads,e):i,s:s.s?n(r,s.s,1,.01,e):i,a:s.a?n(r,s.a,1,0,e):i,o:s.o?n(r,s.o,0,.01,e):i,p:s.p?n(r,s.p,1,0,e):i,sw:s.sw?n(r,s.sw,0,0,e):i,sc:s.sc?n(r,s.sc,1,0,e):i,fc:s.fc?n(r,s.fc,1,0,e):i,fh:s.fh?n(r,s.fh,0,0,e):i,fs:s.fs?n(r,s.fs,0,.01,e):i,fb:s.fb?n(r,s.fb,0,.01,e):i,t:s.t?n(r,s.t,0,0,e):i},this.s=TextSelectorProp.getTextSelectorProp(r,t.s,e),this.s.t=t.s.t}function TextAnimatorProperty(r,t,e){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=r,this._renderType=t,this._elem=e,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(e)}TextAnimatorProperty.prototype.searchProperties=function(){var r,t=this._textData.a.length,e,i=PropertyFactory.getProp;for(r=0;r<t;r+=1)e=this._textData.a[r],this._animatorsData[r]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(r,t){if(this.lettersChangedFlag=t,!(!this._mdf&&!this._isFirstFrame&&!t&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var e=this._moreOptions.alignment.v,i=this._animatorsData,n=this._textData,s=this.mHelper,a=this._renderType,o=this.renderedLetters.length,h,u,d,g,f=r.l,m,_,v,b,C,M,E,w,A,R,N,D,X,at,ft;if(this._hasMaskedPath){if(ft=this._pathData.m,!this._pathData.n||this._pathData._mdf){var gt=ft.v;this._pathData.r.v&&(gt=gt.reverse()),m={tLength:0,segments:[]},g=gt._length-1;var ut;for(D=0,d=0;d<g;d+=1)ut=bez.buildBezierData(gt.v[d],gt.v[d+1],[gt.o[d][0]-gt.v[d][0],gt.o[d][1]-gt.v[d][1]],[gt.i[d+1][0]-gt.v[d+1][0],gt.i[d+1][1]-gt.v[d+1][1]]),m.tLength+=ut.segmentLength,m.segments.push(ut),D+=ut.segmentLength;d=g,ft.v.c&&(ut=bez.buildBezierData(gt.v[d],gt.v[0],[gt.o[d][0]-gt.v[d][0],gt.o[d][1]-gt.v[d][1]],[gt.i[0][0]-gt.v[0][0],gt.i[0][1]-gt.v[0][1]]),m.tLength+=ut.segmentLength,m.segments.push(ut),D+=ut.segmentLength),this._pathData.pi=m}if(m=this._pathData.pi,_=this._pathData.f.v,E=0,M=1,b=0,C=!0,R=m.segments,_<0&&ft.v.c)for(m.tLength<Math.abs(_)&&(_=-Math.abs(_)%m.tLength),E=R.length-1,A=R[E].points,M=A.length-1;_<0;)_+=A[M].partialLength,M-=1,M<0&&(E-=1,A=R[E].points,M=A.length-1);A=R[E].points,w=A[M-1],v=A[M],N=v.partialLength}g=f.length,h=0,u=0;var xt=r.finalSize*1.2*.714,nt=!0,it,tt,W,Q,ot;Q=i.length;var ct,Tt=-1,Rt,Pt,Nt,At=_,Qt=E,Vt=M,Yt=-1,Xt,re,qt,Ut,Lt,te,ge,Bt,oe="",le=this.defaultPropsArray,de;if(r.j===2||r.j===1){var Se=0,wt=0,mt=r.j===2?-.5:-1,Ft=0,l=!0;for(d=0;d<g;d+=1)if(f[d].n){for(Se&&(Se+=wt);Ft<d;)f[Ft].animatorJustifyOffset=Se,Ft+=1;Se=0,l=!0}else{for(W=0;W<Q;W+=1)it=i[W].a,it.t.propType&&(l&&r.j===2&&(wt+=it.t.v*mt),tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),ct.length?Se+=it.t.v*ct[0]*mt:Se+=it.t.v*ct*mt);l=!1}for(Se&&(Se+=wt);Ft<d;)f[Ft].animatorJustifyOffset=Se,Ft+=1}for(d=0;d<g;d+=1){if(s.reset(),Xt=1,f[d].n)h=0,u+=r.yOffset,u+=nt?1:0,_=At,nt=!1,this._hasMaskedPath&&(E=Qt,M=Vt,A=R[E].points,w=A[M-1],v=A[M],N=v.partialLength,b=0),oe="",Bt="",te="",de="",le=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Yt!==f[d].line){switch(r.j){case 1:_+=D-r.lineWidths[f[d].line];break;case 2:_+=(D-r.lineWidths[f[d].line])/2;break;default:break}Yt=f[d].line}Tt!==f[d].ind&&(f[Tt]&&(_+=f[Tt].extra),_+=f[d].an/2,Tt=f[d].ind),_+=e[0]*f[d].an*.005;var c=0;for(W=0;W<Q;W+=1)it=i[W].a,it.p.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),ct.length?c+=it.p.v[0]*ct[0]:c+=it.p.v[0]*ct),it.a.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),ct.length?c+=it.a.v[0]*ct[0]:c+=it.a.v[0]*ct);for(C=!0,this._pathData.a.v&&(_=f[0].an*.5+(D-this._pathData.f.v-f[0].an*.5-f[f.length-1].an*.5)*Tt/(g-1),_+=this._pathData.f.v);C;)b+N>=_+c||!A?(X=(_+c-b)/v.partialLength,Pt=w.point[0]+(v.point[0]-w.point[0])*X,Nt=w.point[1]+(v.point[1]-w.point[1])*X,s.translate(-e[0]*f[d].an*.005,-(e[1]*xt)*.01),C=!1):A&&(b+=v.partialLength,M+=1,M>=A.length&&(M=0,E+=1,R[E]?A=R[E].points:ft.v.c?(M=0,E=0,A=R[E].points):(b-=v.partialLength,A=null)),A&&(w=v,v=A[M],N=v.partialLength));Rt=f[d].an/2-f[d].add,s.translate(-Rt,0,0)}else Rt=f[d].an/2-f[d].add,s.translate(-Rt,0,0),s.translate(-e[0]*f[d].an*.005,-e[1]*xt*.01,0);for(W=0;W<Q;W+=1)it=i[W].a,it.t.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),(h!==0||r.j!==0)&&(this._hasMaskedPath?ct.length?_+=it.t.v*ct[0]:_+=it.t.v*ct:ct.length?h+=it.t.v*ct[0]:h+=it.t.v*ct));for(r.strokeWidthAnim&&(qt=r.sw||0),r.strokeColorAnim&&(r.sc?re=[r.sc[0],r.sc[1],r.sc[2]]:re=[0,0,0]),r.fillColorAnim&&r.fc&&(Ut=[r.fc[0],r.fc[1],r.fc[2]]),W=0;W<Q;W+=1)it=i[W].a,it.a.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),ct.length?s.translate(-it.a.v[0]*ct[0],-it.a.v[1]*ct[1],it.a.v[2]*ct[2]):s.translate(-it.a.v[0]*ct,-it.a.v[1]*ct,it.a.v[2]*ct));for(W=0;W<Q;W+=1)it=i[W].a,it.s.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),ct.length?s.scale(1+(it.s.v[0]-1)*ct[0],1+(it.s.v[1]-1)*ct[1],1):s.scale(1+(it.s.v[0]-1)*ct,1+(it.s.v[1]-1)*ct,1));for(W=0;W<Q;W+=1){if(it=i[W].a,tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),it.sk.propType&&(ct.length?s.skewFromAxis(-it.sk.v*ct[0],it.sa.v*ct[1]):s.skewFromAxis(-it.sk.v*ct,it.sa.v*ct)),it.r.propType&&(ct.length?s.rotateZ(-it.r.v*ct[2]):s.rotateZ(-it.r.v*ct)),it.ry.propType&&(ct.length?s.rotateY(it.ry.v*ct[1]):s.rotateY(it.ry.v*ct)),it.rx.propType&&(ct.length?s.rotateX(it.rx.v*ct[0]):s.rotateX(it.rx.v*ct)),it.o.propType&&(ct.length?Xt+=(it.o.v*ct[0]-Xt)*ct[0]:Xt+=(it.o.v*ct-Xt)*ct),r.strokeWidthAnim&&it.sw.propType&&(ct.length?qt+=it.sw.v*ct[0]:qt+=it.sw.v*ct),r.strokeColorAnim&&it.sc.propType)for(Lt=0;Lt<3;Lt+=1)ct.length?re[Lt]+=(it.sc.v[Lt]-re[Lt])*ct[0]:re[Lt]+=(it.sc.v[Lt]-re[Lt])*ct;if(r.fillColorAnim&&r.fc){if(it.fc.propType)for(Lt=0;Lt<3;Lt+=1)ct.length?Ut[Lt]+=(it.fc.v[Lt]-Ut[Lt])*ct[0]:Ut[Lt]+=(it.fc.v[Lt]-Ut[Lt])*ct;it.fh.propType&&(ct.length?Ut=addHueToRGB(Ut,it.fh.v*ct[0]):Ut=addHueToRGB(Ut,it.fh.v*ct)),it.fs.propType&&(ct.length?Ut=addSaturationToRGB(Ut,it.fs.v*ct[0]):Ut=addSaturationToRGB(Ut,it.fs.v*ct)),it.fb.propType&&(ct.length?Ut=addBrightnessToRGB(Ut,it.fb.v*ct[0]):Ut=addBrightnessToRGB(Ut,it.fb.v*ct))}}for(W=0;W<Q;W+=1)it=i[W].a,it.p.propType&&(tt=i[W].s,ct=tt.getMult(f[d].anIndexes[W],n.a[W].s.totalChars),this._hasMaskedPath?ct.length?s.translate(0,it.p.v[1]*ct[0],-it.p.v[2]*ct[1]):s.translate(0,it.p.v[1]*ct,-it.p.v[2]*ct):ct.length?s.translate(it.p.v[0]*ct[0],it.p.v[1]*ct[1],-it.p.v[2]*ct[2]):s.translate(it.p.v[0]*ct,it.p.v[1]*ct,-it.p.v[2]*ct));if(r.strokeWidthAnim&&(te=qt<0?0:qt),r.strokeColorAnim&&(ge="rgb("+Math.round(re[0]*255)+","+Math.round(re[1]*255)+","+Math.round(re[2]*255)+")"),r.fillColorAnim&&r.fc&&(Bt="rgb("+Math.round(Ut[0]*255)+","+Math.round(Ut[1]*255)+","+Math.round(Ut[2]*255)+")"),this._hasMaskedPath){if(s.translate(0,-r.ls),s.translate(0,e[1]*xt*.01+u,0),this._pathData.p.v){at=(v.point[1]-w.point[1])/(v.point[0]-w.point[0]);var p=Math.atan(at)*180/Math.PI;v.point[0]<w.point[0]&&(p+=180),s.rotate(-p*Math.PI/180)}s.translate(Pt,Nt,0),_-=e[0]*f[d].an*.005,f[d+1]&&Tt!==f[d+1].ind&&(_+=f[d].an/2,_+=r.tr*.001*r.finalSize)}else{switch(s.translate(h,u,0),r.ps&&s.translate(r.ps[0],r.ps[1]+r.ascent,0),r.j){case 1:s.translate(f[d].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[f[d].line]),0,0);break;case 2:s.translate(f[d].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[f[d].line])/2,0,0);break;default:break}s.translate(0,-r.ls),s.translate(Rt,0,0),s.translate(e[0]*f[d].an*.005,e[1]*xt*.01,0),h+=f[d].l+r.tr*.001*r.finalSize}a==="html"?oe=s.toCSS():a==="svg"?oe=s.to2dCSS():le=[s.props[0],s.props[1],s.props[2],s.props[3],s.props[4],s.props[5],s.props[6],s.props[7],s.props[8],s.props[9],s.props[10],s.props[11],s.props[12],s.props[13],s.props[14],s.props[15]],de=Xt}o<=d?(ot=new LetterProps(de,te,ge,Bt,oe,le),this.renderedLetters.push(ot),o+=1,this.lettersChangedFlag=!0):(ot=this.renderedLetters[d],this.lettersChangedFlag=ot.update(de,te,ge,Bt,oe,le)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(r,t,e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(r,t,e),this.textProperty=new TextProperty(this,r.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(r.t,this.renderType,this),this.initTransform(r,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(r,t){var e,i=t.length,n,s="";for(e=0;e<i;e+=1)t[e].ty==="sh"&&(n=t[e].ks.k,s+=buildShapeString(n,n.i.length,!0,r));return s},ITextElement.prototype.updateDocumentData=function(r,t){this.textProperty.updateDocumentData(r,t)},ITextElement.prototype.canResizeFont=function(r){this.textProperty.canResizeFont(r)},ITextElement.prototype.setMinimumFontSize=function(r){this.textProperty.setMinimumFontSize(r)},ITextElement.prototype.applyTextPropertiesToMatrix=function(r,t,e,i,n){switch(r.ps&&t.translate(r.ps[0],r.ps[1]+r.ascent,0),t.translate(0,-r.ls,0),r.j){case 1:t.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[e]),0,0);break;case 2:t.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[e])/2,0,0);break;default:break}t.translate(i,n,0)},ITextElement.prototype.buildColor=function(r){return"rgb("+Math.round(r[0]*255)+","+Math.round(r[1]*255)+","+Math.round(r[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(r,t,e){this.textSpans=[],this.renderType="svg",this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(r){for(var t=0,e=r.length,i=[],n="";t<e;)r[t]===String.fromCharCode(13)||r[t]===String.fromCharCode(3)?(i.push(n),n=""):n+=r[t],t+=1;return i.push(n),i},SVGTextLottieElement.prototype.buildShapeData=function(r,t){if(r.shapes&&r.shapes.length){var e=r.shapes[0];if(e.it){var i=e.it[e.it.length-1];i.s&&(i.s.k[0]=t,i.s.k[1]=t)}}return r},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var r,t,e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var i=this.globalData.fontManager.getFontByName(e.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var n=e.fWeight,s=e.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",n)}this.layerElement.setAttribute("aria-label",e.t);var a=e.l||[],o=!!this.globalData.fontManager.chars;t=a.length;var h,u=this.mHelper,d="",g=this.data.singleShape,f=0,m=0,_=!0,v=e.tr*.001*e.finalSize;if(g&&!o&&!e.sz){var b=this.textContainer,C="start";switch(e.j){case 1:C="end";break;case 2:C="middle";break;default:C="start";break}b.setAttribute("text-anchor",C),b.setAttribute("letter-spacing",v);var M=this.buildTextContents(e.finalText);for(t=M.length,m=e.ps?e.ps[1]+e.ascent:0,r=0;r<t;r+=1)h=this.textSpans[r].span||createNS("tspan"),h.textContent=M[r],h.setAttribute("x",0),h.setAttribute("y",m),h.style.display="inherit",b.appendChild(h),this.textSpans[r]||(this.textSpans[r]={span:null,glyph:null}),this.textSpans[r].span=h,m+=e.finalLineHeight;this.layerElement.appendChild(b)}else{var E=this.textSpans.length,w;for(r=0;r<t;r+=1){if(this.textSpans[r]||(this.textSpans[r]={span:null,childSpan:null,glyph:null}),!o||!g||r===0){if(h=E>r?this.textSpans[r].span:createNS(o?"g":"text"),E<=r){if(h.setAttribute("stroke-linecap","butt"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit","4"),this.textSpans[r].span=h,o){var A=createNS("g");h.appendChild(A),this.textSpans[r].childSpan=A}this.textSpans[r].span=h,this.layerElement.appendChild(h)}h.style.display="inherit"}if(u.reset(),g&&(a[r].n&&(f=-v,m+=e.yOffset,m+=_?1:0,_=!1),this.applyTextPropertiesToMatrix(e,u,a[r].line,f,m),f+=a[r].l||0,f+=v),o){w=this.globalData.fontManager.getCharData(e.finalText[r],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);var R;if(w.t===1)R=new SVGCompElement(w.data,this.globalData,this);else{var N=emptyShapeData;w.data&&w.data.shapes&&(N=this.buildShapeData(w.data,e.finalSize)),R=new SVGShapeElement(N,this.globalData,this)}if(this.textSpans[r].glyph){var D=this.textSpans[r].glyph;this.textSpans[r].childSpan.removeChild(D.layerElement),D.destroy()}this.textSpans[r].glyph=R,R._debug=!0,R.prepareFrame(0),R.renderFrame(),this.textSpans[r].childSpan.appendChild(R.layerElement),w.t===1&&this.textSpans[r].childSpan.setAttribute("transform","scale("+e.finalSize/100+","+e.finalSize/100+")")}else g&&h.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),h.textContent=a[r].val,h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}g&&h&&h.setAttribute("d",d)}for(;r<this.textSpans.length;)this.textSpans[r].span.style.display="none",r+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var r=this.layerElement.getBBox();this.bbox={top:r.y,left:r.x,width:r.width,height:r.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var r,t=this.textSpans.length,e;for(this.renderedFrame=this.comp.renderedFrame,r=0;r<t;r+=1)e=this.textSpans[r].glyph,e&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var r,t,e=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l;t=i.length;var n,s,a;for(r=0;r<t;r+=1)i[r].n||(n=e[r],s=this.textSpans[r].span,a=this.textSpans[r].glyph,a&&a.renderFrame(),n._mdf.m&&s.setAttribute("transform",n.m),n._mdf.o&&s.setAttribute("opacity",n.o),n._mdf.sw&&s.setAttribute("stroke-width",n.sw),n._mdf.sc&&s.setAttribute("stroke",n.sc),n._mdf.fc&&s.setAttribute("fill",n.fc))}};function ISolidElement(r,t,e){this.initElement(r,t,e)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var r=createNS("rect");r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.layerElement.appendChild(r)};function NullElement(r,t,e){this.initFrame(),this.initBaseData(r,t,e),this.initFrame(),this.initTransform(r,t,e),this.initHierarchy()}NullElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(r){return new NullElement(r,this.globalData,this)},SVGRendererBase.prototype.createShape=function(r){return new SVGShapeElement(r,this.globalData,this)},SVGRendererBase.prototype.createText=function(r){return new SVGTextLottieElement(r,this.globalData,this)},SVGRendererBase.prototype.createImage=function(r){return new IImageElement(r,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(r){return new ISolidElement(r,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(r){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+r.w+" "+r.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",r.w),this.svgElement.setAttribute("height",r.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(r,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=r;var e=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",r.w),i.setAttribute("height",r.h),i.setAttribute("x",0),i.setAttribute("y",0);var n=createElementID();e.setAttribute("id",n),e.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),t.appendChild(e),this.layers=r.layers,this.elements=createSizedArray(r.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var r,t=this.layers?this.layers.length:0;for(r=0;r<t;r+=1)this.elements[r]&&this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(r){var t=0,e=this.layers.length;for(t=0;t<e;t+=1)if(this.layers[t].ind===r)return t;return-1},SVGRendererBase.prototype.buildItem=function(r){var t=this.elements;if(!(t[r]||this.layers[r].ty===99)){t[r]=!0;var e=this.createItem(this.layers[r]);if(t[r]=e,getExpressionsPlugin()&&(this.layers[r].ty===0&&this.globalData.projectInterface.registerComposition(e),e.initExpressions()),this.appendElementInPos(e,r),this.layers[r].tt){var i="tp"in this.layers[r]?this.findIndexByInd(this.layers[r].tp):r-1;if(i===-1)return;if(!this.elements[i]||this.elements[i]===!0)this.buildItem(i),this.addPendingElement(e);else{var n=t[i],s=n.getMatte(this.layers[r].tt);e.setMatte(s)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();if(r.checkParenting(),r.data.tt)for(var t=0,e=this.elements.length;t<e;){if(this.elements[t]===r){var i="tp"in r.data?this.findIndexByInd(r.data.tp):t-1,n=this.elements[i],s=n.getMatte(this.layers[t].tt);r.setMatte(s);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(r){if(!(this.renderedFrame===r||this.destroyed)){r===null?r=this.renderedFrame:this.renderedFrame=r,this.globalData.frameNum=r,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=r,this.globalData._mdf=!1;var t,e=this.layers.length;for(this.completeLayers||this.checkLayers(r),t=e-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(r-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(r,t){var e=r.getBaseElement();if(!!e){for(var i=0,n;i<t;)this.elements[i]&&this.elements[i]!==!0&&this.elements[i].getBaseElement()&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(r,t,e){this.initFrame(),this.initBaseData(r,t,e),this.initTransform(r,t,e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!t.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(r){if(this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=r/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var e,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&(this.elements[e].prepareFrame(this.renderedFrame-this.layers[e].st),this.elements[e]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var r,t=this.layers.length;for(r=0;r<t;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},ICompElement.prototype.setElements=function(r){this.elements=r},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var r,t=this.layers.length;for(r=0;r<t;r+=1)this.elements[r]&&this.elements[r].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(r,t,e){this.layers=r.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,t,e),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)};function SVGRenderer(r,t){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var e="";if(t&&t.title){var i=createNS("title"),n=createElementID();i.setAttribute("id",n),i.textContent=t.title,this.svgElement.appendChild(i),e+=n}if(t&&t.description){var s=createNS("desc"),a=createElementID();s.setAttribute("id",a),s.textContent=t.description,this.svgElement.appendChild(s),e+=" "+a}e&&this.svgElement.setAttribute("aria-labelledby",e);var o=createNS("defs");this.svgElement.appendChild(o);var h=createNS("g");this.svgElement.appendChild(h),this.layerElement=h,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&t.hideOnTransparent===!1),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var r,t=15;for(this.savedOp=createTypedArray("float32",t),r=0;r<t;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=t}CVContextData.prototype.duplicate=function(){var r=this._length*2,t=this.savedOp;this.savedOp=createTypedArray("float32",r),this.savedOp.set(t);var e=0;for(e=this._length;e<r;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=r},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,i=t.length,n="_";for(e=0;e<i;e+=1)n+=t[e].transform.key+"_";var s=this.sequences[n];return s||(s={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=s,this.sequenceList.push(s)),s},processSequence:function(t,e){for(var i=0,n=t.transforms.length,s=e;i<n&&!e;){if(t.transforms[i].transform.mProps._mdf){s=!0;break}i+=1}if(s){var a;for(t.finalTransform.reset(),i=n-1;i>=0;i-=1)a=t.transforms[i].transform.mProps.v.props,t.finalTransform.transform(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}t._mdf=s},processSequences:function(t){var e,i=this.sequenceList.length;for(e=0;e<i;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function CVMaskElement(r,t){this.data=r,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var e,i=this.masksProperties.length,n=!1;for(e=0;e<i;e+=1)this.masksProperties[e].mode!=="n"&&(n=!0),this.viewData[e]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[e],3);this.hasMasks=n,n&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(!!this.hasMasks){var r=this.element.finalTransform.mat,t=this.element.canvasContext,e,i=this.masksProperties.length,n,s,a;for(t.beginPath(),e=0;e<i;e+=1)if(this.masksProperties[e].mode!=="n"){this.masksProperties[e].inv&&(t.moveTo(0,0),t.lineTo(this.element.globalData.compSize.w,0),t.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),t.lineTo(0,this.element.globalData.compSize.h),t.lineTo(0,0)),a=this.viewData[e].v,n=r.applyToPointArray(a.v[0][0],a.v[0][1],0),t.moveTo(n[0],n[1]);var o,h=a._length;for(o=1;o<h;o+=1)s=r.applyToTriplePoints(a.o[o-1],a.i[o],a.v[o]),t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=r.applyToTriplePoints(a.o[o-1],a.i[0],a.v[0]),t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),t.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!(this.hidden||this.data.hd)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=this.data.ty===0;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(r,t,e,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n=4;t.ty==="rc"?n=5:t.ty==="el"?n=6:t.ty==="sr"&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(r,t,n,r);var s,a=e.length,o;for(s=0;s<a;s+=1)e[s].closed||(o={transforms:i.addTransformSequence(e[s].transforms),trNodes:[]},this.styledShapes.push(o),e[s].elements.push(o))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(r,t,e){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(r,t){var e={data:r,type:r.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:r.hd===!0},i={};if(r.ty==="fl"||r.ty==="st"?(i.c=PropertyFactory.getProp(this,r.c,1,255,this),i.c.k||(e.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):(r.ty==="gf"||r.ty==="gs")&&(i.s=PropertyFactory.getProp(this,r.s,1,null,this),i.e=PropertyFactory.getProp(this,r.e,1,null,this),i.h=PropertyFactory.getProp(this,r.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,r.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,r.g,this)),i.o=PropertyFactory.getProp(this,r.o,0,.01,this),r.ty==="st"||r.ty==="gs"){if(e.lc=lineCapEnum[r.lc||2],e.lj=lineJoinEnum[r.lj||2],r.lj==1&&(e.ml=r.ml),i.w=PropertyFactory.getProp(this,r.w,0,null,this),i.w.k||(e.wi=i.w.v),r.d){var n=new DashProperty(this,r.d,"canvas",this);i.d=n,i.d.k||(e.da=i.d.dashArray,e.do=i.d.dashoffset[0])}}else e.r=r.r===2?"evenodd":"nonzero";return this.stylesList.push(e),i.style=e,i},CVShapeElement.prototype.createGroupElement=function(){var r={it:[],prevViewData:[]};return r},CVShapeElement.prototype.createTransformElement=function(r){var t={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,r.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,r,this)}};return t},CVShapeElement.prototype.createShapeElement=function(r){var t=new CVShapeData(this,r,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var r,t=this.itemsData.length;for(r=0;r<t;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,r=0;r<t;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(r){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(r)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var r,t=this.stylesList.length;for(r=0;r<t;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.pop()},CVShapeElement.prototype.closeStyles=function(r){var t,e=r.length;for(t=0;t<e;t+=1)r[t].closed=!0},CVShapeElement.prototype.searchShapes=function(r,t,e,i,n){var s,a=r.length-1,o,h,u=[],d=[],g,f,m,_=[].concat(n);for(s=a;s>=0;s-=1){if(g=this.searchProcessedElement(r[s]),g?t[s]=e[g-1]:r[s]._shouldRender=i,r[s].ty==="fl"||r[s].ty==="st"||r[s].ty==="gf"||r[s].ty==="gs")g?t[s].style.closed=!1:t[s]=this.createStyleElement(r[s],_),u.push(t[s].style);else if(r[s].ty==="gr"){if(!g)t[s]=this.createGroupElement(r[s]);else for(h=t[s].it.length,o=0;o<h;o+=1)t[s].prevViewData[o]=t[s].it[o];this.searchShapes(r[s].it,t[s].it,t[s].prevViewData,i,_)}else r[s].ty==="tr"?(g||(m=this.createTransformElement(r[s]),t[s]=m),_.push(t[s]),this.addTransformToStyleList(t[s])):r[s].ty==="sh"||r[s].ty==="rc"||r[s].ty==="el"||r[s].ty==="sr"?g||(t[s]=this.createShapeElement(r[s])):r[s].ty==="tm"||r[s].ty==="rd"||r[s].ty==="pb"||r[s].ty==="zz"||r[s].ty==="op"?(g?(f=t[s],f.closed=!1):(f=ShapeModifiers.getModifier(r[s].ty),f.init(this,r[s]),t[s]=f,this.shapeModifiers.push(f)),d.push(f)):r[s].ty==="rp"&&(g?(f=t[s],f.closed=!0):(f=ShapeModifiers.getModifier(r[s].ty),t[s]=f,f.init(this,r,s,t),this.shapeModifiers.push(f),i=!1),d.push(f));this.addProcessedElement(r[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(u),a=d.length,s=0;s<a;s+=1)d[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(r,t){(r._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=r.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var r,t=this.stylesList.length,e,i,n,s,a,o,h=this.globalData.renderer,u=this.globalData.canvasContext,d,g;for(r=0;r<t;r+=1)if(g=this.stylesList[r],d=g.type,!((d==="st"||d==="gs")&&g.wi===0||!g.data._shouldRender||g.coOp===0||this.globalData.currentGlobalAlpha===0)){for(h.save(),a=g.elements,d==="st"||d==="gs"?(u.strokeStyle=d==="st"?g.co:g.grd,u.lineWidth=g.wi,u.lineCap=g.lc,u.lineJoin=g.lj,u.miterLimit=g.ml||0):u.fillStyle=d==="fl"?g.co:g.grd,h.ctxOpacity(g.coOp),d!=="st"&&d!=="gs"&&u.beginPath(),h.ctxTransform(g.preTransforms.finalTransform.props),i=a.length,e=0;e<i;e+=1){for((d==="st"||d==="gs")&&(u.beginPath(),g.da&&(u.setLineDash(g.da),u.lineDashOffset=g.do)),o=a[e].trNodes,s=o.length,n=0;n<s;n+=1)o[n].t==="m"?u.moveTo(o[n].p[0],o[n].p[1]):o[n].t==="c"?u.bezierCurveTo(o[n].pts[0],o[n].pts[1],o[n].pts[2],o[n].pts[3],o[n].pts[4],o[n].pts[5]):u.closePath();(d==="st"||d==="gs")&&(u.stroke(),g.da&&u.setLineDash(this.dashResetter))}d!=="st"&&d!=="gs"&&u.fill(g.r),h.restore()}},CVShapeElement.prototype.renderShape=function(r,t,e,i){var n,s=t.length-1,a;for(a=r,n=s;n>=0;n-=1)t[n].ty==="tr"?(a=e[n].transform,this.renderShapeTransform(r,a)):t[n].ty==="sh"||t[n].ty==="el"||t[n].ty==="rc"||t[n].ty==="sr"?this.renderPath(t[n],e[n]):t[n].ty==="fl"?this.renderFill(t[n],e[n],a):t[n].ty==="st"?this.renderStroke(t[n],e[n],a):t[n].ty==="gf"||t[n].ty==="gs"?this.renderGradientFill(t[n],e[n],a):t[n].ty==="gr"?this.renderShape(a,t[n].it,e[n].it):t[n].ty==="tm";i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(r,t){if(this._isFirstFrame||t._mdf||r.transforms._mdf){var e=r.trNodes,i=t.paths,n,s,a,o=i._length;e.length=0;var h=r.transforms.finalTransform;for(a=0;a<o;a+=1){var u=i.shapes[a];if(u&&u.v){for(s=u._length,n=1;n<s;n+=1)n===1&&e.push({t:"m",p:h.applyToPointArray(u.v[0][0],u.v[0][1],0)}),e.push({t:"c",pts:h.applyToTriplePoints(u.o[n-1],u.i[n],u.v[n])});s===1&&e.push({t:"m",p:h.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&s&&(e.push({t:"c",pts:h.applyToTriplePoints(u.o[n-1],u.i[0],u.v[0])}),e.push({t:"z"}))}}r.trNodes=e}},CVShapeElement.prototype.renderPath=function(r,t){if(r.hd!==!0&&r._shouldRender){var e,i=t.styledShapes.length;for(e=0;e<i;e+=1)this.renderStyledShape(t.styledShapes[e],t.sh)}},CVShapeElement.prototype.renderFill=function(r,t,e){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*e.opacity)},CVShapeElement.prototype.renderGradientFill=function(r,t,e){var i=t.style,n;if(!i.grd||t.g._mdf||t.s._mdf||t.e._mdf||r.t!==1&&(t.h._mdf||t.a._mdf)){var s=this.globalData.canvasContext,a=t.s.v,o=t.e.v;if(r.t===1)n=s.createLinearGradient(a[0],a[1],o[0],o[1]);else{var h=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)),u=Math.atan2(o[1]-a[1],o[0]-a[0]),d=t.h.v;d>=1?d=.99:d<=-1&&(d=-.99);var g=h*d,f=Math.cos(u+t.a.v)*g+a[0],m=Math.sin(u+t.a.v)*g+a[1];n=s.createRadialGradient(f,m,0,a[0],a[1],h)}var _,v=r.g.p,b=t.g.c,C=1;for(_=0;_<v;_+=1)t.g._hasOpacity&&t.g._collapsable&&(C=t.g.o[_*2+1]),n.addColorStop(b[_*4]/100,"rgba("+b[_*4+1]+","+b[_*4+2]+","+b[_*4+3]+","+C+")");i.grd=n}i.coOp=t.o.v*e.opacity},CVShapeElement.prototype.renderStroke=function(r,t,e){var i=t.style,n=t.d;n&&(n._mdf||this._isFirstFrame)&&(i.da=n.dashArray,i.do=n.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*e.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(r,t,e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var t=!1;r.fc?(t=!0,this.values.fill=this.buildColor(r.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var e=!1;r.sc&&(e=!0,this.values.stroke=this.buildColor(r.sc),this.values.sWidth=r.sw);var i=this.globalData.fontManager.getFontByName(r.f),n,s,a=r.l,o=this.mHelper;this.stroke=e,this.values.fValue=r.finalSize+"px "+this.globalData.fontManager.getFontByName(r.f).fFamily,s=r.finalText.length;var h,u,d,g,f,m,_,v,b,C,M=this.data.singleShape,E=r.tr*.001*r.finalSize,w=0,A=0,R=!0,N=0;for(n=0;n<s;n+=1){h=this.globalData.fontManager.getCharData(r.finalText[n],i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily),u=h&&h.data||{},o.reset(),M&&a[n].n&&(w=-E,A+=r.yOffset,A+=R?1:0,R=!1),f=u.shapes?u.shapes[0].it:[],_=f.length,o.scale(r.finalSize/100,r.finalSize/100),M&&this.applyTextPropertiesToMatrix(r,o,a[n].line,w,A),b=createSizedArray(_-1);var D=0;for(m=0;m<_;m+=1)if(f[m].ty==="sh"){for(g=f[m].ks.k.i.length,v=f[m].ks.k,C=[],d=1;d<g;d+=1)d===1&&C.push(o.applyToX(v.v[0][0],v.v[0][1],0),o.applyToY(v.v[0][0],v.v[0][1],0)),C.push(o.applyToX(v.o[d-1][0],v.o[d-1][1],0),o.applyToY(v.o[d-1][0],v.o[d-1][1],0),o.applyToX(v.i[d][0],v.i[d][1],0),o.applyToY(v.i[d][0],v.i[d][1],0),o.applyToX(v.v[d][0],v.v[d][1],0),o.applyToY(v.v[d][0],v.v[d][1],0));C.push(o.applyToX(v.o[d-1][0],v.o[d-1][1],0),o.applyToY(v.o[d-1][0],v.o[d-1][1],0),o.applyToX(v.i[0][0],v.i[0][1],0),o.applyToY(v.i[0][0],v.i[0][1],0),o.applyToX(v.v[0][0],v.v[0][1],0),o.applyToY(v.v[0][0],v.v[0][1],0)),b[D]=C,D+=1}M&&(w+=a[n].l,w+=E),this.textSpans[N]?this.textSpans[N].elem=b:this.textSpans[N]={elem:b},N+=1}},CVTextElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.font=this.values.fValue,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var t,e,i,n,s,a,o=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;e=h.length;var u,d=null,g=null,f=null,m,_;for(t=0;t<e;t+=1)if(!h[t].n){if(u=o[t],u&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(u.p),this.globalData.renderer.ctxOpacity(u.o)),this.fill){for(u&&u.fc?d!==u.fc&&(d=u.fc,r.fillStyle=u.fc):d!==this.values.fill&&(d=this.values.fill,r.fillStyle=this.values.fill),m=this.textSpans[t].elem,n=m.length,this.globalData.canvasContext.beginPath(),i=0;i<n;i+=1)for(_=m[i],a=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),s=2;s<a;s+=6)this.globalData.canvasContext.bezierCurveTo(_[s],_[s+1],_[s+2],_[s+3],_[s+4],_[s+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(u&&u.sw?f!==u.sw&&(f=u.sw,r.lineWidth=u.sw):f!==this.values.sWidth&&(f=this.values.sWidth,r.lineWidth=this.values.sWidth),u&&u.sc?g!==u.sc&&(g=u.sc,r.strokeStyle=u.sc):g!==this.values.stroke&&(g=this.values.stroke,r.strokeStyle=this.values.stroke),m=this.textSpans[t].elem,n=m.length,this.globalData.canvasContext.beginPath(),i=0;i<n;i+=1)for(_=m[i],a=_.length,this.globalData.canvasContext.moveTo(_[0],_[1]),s=2;s<a;s+=6)this.globalData.canvasContext.bezierCurveTo(_[s],_[s+1],_[s+2],_[s+3],_[s+4],_[s+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}u&&this.globalData.renderer.restore()}};function CVImageElement(r,t,e){this.assetData=t.getAssetData(r.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var r=createTag("canvas");r.width=this.assetData.w,r.height=this.assetData.h;var t=r.getContext("2d"),e=this.img.width,i=this.img.height,n=e/i,s=this.assetData.w/this.assetData.h,a,o,h=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;n>s&&h==="xMidYMid slice"||n<s&&h!=="xMidYMid slice"?(o=i,a=o*s):(a=e,o=a/s),t.drawImage(this.img,(e-a)/2,(i-o)/2,a,o,0,0,this.assetData.w,this.assetData.h),this.img=r}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(r,t,e){this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.fillStyle=this.data.sc,r.fillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(r,t){this.animationItem=r,this.renderConfig={clearCanvas:t&&t.clearCanvas!==void 0?t.clearCanvas:!0,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(r){return new CVShapeElement(r,this.globalData,this)},CanvasRendererBase.prototype.createText=function(r){return new CVTextElement(r,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(r){return new CVImageElement(r,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(r){return new CVSolidElement(r,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(r){if(!(r[0]===1&&r[1]===0&&r[4]===0&&r[5]===1&&r[12]===0&&r[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(r[0],r[1],r[4],r[5],r[12],r[13]);return}this.transformMat.cloneFromProps(r);var t=this.contextData.cTr.props;this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var e=this.contextData.cTr.props;this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}},CanvasRendererBase.prototype.ctxOpacity=function(r){if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=r<0?0:r,this.globalData.currentGlobalAlpha=this.contextData.cO;return}this.contextData.cO*=r<0?0:r,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(r){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}r&&this.canvasContext.save();var t=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var e,i=this.contextData.saved[this.contextData.cArrPos];for(e=0;e<16;e+=1)i[e]=t[e];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRendererBase.prototype.restore=function(r){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}r&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var t=this.contextData.saved[this.contextData.cArrPos],e,i=this.contextData.cTr.props;for(e=0;e<16;e+=1)i[e]=t[e];this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),t=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=t,this.globalData.currentGlobalAlpha!==t&&(this.canvasContext.globalAlpha=t,this.globalData.currentGlobalAlpha=t)},CanvasRendererBase.prototype.configAnimation=function(r){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var e="0px 0px 0px";t.transformOrigin=e,t.mozTransformOrigin=e,t.webkitTransformOrigin=e,t["-webkit-transform"]=e,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=r,this.layers=r.layers,this.transformCanvas={w:r.w,h:r.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(r,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(r.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(r,t){this.reset();var e,i;r?(e=r,i=t,this.canvasContext.canvas.width=e,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(e=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=e*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr);var n,s;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var a=this.renderConfig.preserveAspectRatio.split(" "),o=a[1]||"meet",h=a[0]||"xMidYMid",u=h.substr(0,4),d=h.substr(4);n=e/i,s=this.transformCanvas.w/this.transformCanvas.h,s>n&&o==="meet"||s<n&&o==="slice"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),u==="xMid"&&(s<n&&o==="meet"||s>n&&o==="slice")?this.transformCanvas.tx=(e-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:u==="xMax"&&(s<n&&o==="meet"||s>n&&o==="slice")?this.transformCanvas.tx=(e-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,d==="YMid"&&(s>n&&o==="meet"||s<n&&o==="slice")?this.transformCanvas.ty=(i-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:d==="YMax"&&(s>n&&o==="meet"||s<n&&o==="slice")?this.transformCanvas.ty=(i-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var r,t=this.layers?this.layers.length:0;for(r=t-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(r,t){if(!(this.renderedFrame===r&&this.renderConfig.clearCanvas===!0&&!t||this.destroyed||r===-1)){this.renderedFrame=r,this.globalData.frameNum=r-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=r;var e,i=this.layers.length;for(this.completeLayers||this.checkLayers(r),e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(r-this.layers[e].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(r){var t=this.elements;if(!(t[r]||this.layers[r].ty===99)){var e=this.createItem(this.layers[r],this,this.globalData);t[r]=e,e.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();r.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CVCompElement(r,t,e){this.completeLayers=!1,this.layers=r.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(r,t,e),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var r=this.canvasContext;r.beginPath(),r.moveTo(0,0),r.lineTo(this.data.w,0),r.lineTo(this.data.w,this.data.h),r.lineTo(0,this.data.h),r.lineTo(0,0),r.clip();var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var r,t=this.layers.length;for(r=t-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)};function CanvasRenderer(r,t){this.animationItem=r,this.renderConfig={clearCanvas:t&&t.clearCanvas!==void 0?t.clearCanvas:!0,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(r,t,e){this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var r;this.data.hasMask?(r=createNS("rect"),r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(r=createTag("div"),r.style.width=this.data.sw+"px",r.style.height=this.data.sh+"px",r.style.backgroundColor=this.data.sc),this.layerElement.appendChild(r)};function HShapeElement(r,t,e){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(r,t,e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var r;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),r=this.svgElement;else{r=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.appendChild(this.shapesContainer),this.layerElement.appendChild(r)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=r},HShapeElement.prototype.getTransformedPoint=function(r,t){var e,i=r.length;for(e=0;e<i;e+=1)t=r[e].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(r,t){var e=r.sh.v,i=r.transformers,n,s=e._length,a,o,h,u;if(!(s<=1)){for(n=0;n<s-1;n+=1)a=this.getTransformedPoint(i,e.v[n]),o=this.getTransformedPoint(i,e.o[n]),h=this.getTransformedPoint(i,e.i[n+1]),u=this.getTransformedPoint(i,e.v[n+1]),this.checkBounds(a,o,h,u,t);e.c&&(a=this.getTransformedPoint(i,e.v[n]),o=this.getTransformedPoint(i,e.o[n]),h=this.getTransformedPoint(i,e.i[0]),u=this.getTransformedPoint(i,e.v[0]),this.checkBounds(a,o,h,u,t))}},HShapeElement.prototype.checkBounds=function(r,t,e,i,n){this.getBoundsOfCurve(r,t,e,i);var s=this.shapeBoundingBox;n.x=bmMin(s.left,n.x),n.xMax=bmMax(s.right,n.xMax),n.y=bmMin(s.top,n.y),n.yMax=bmMax(s.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(r,t,e,i){for(var n=[[r[0],i[0]],[r[1],i[1]]],s,a,o,h,u,d,g,f=0;f<2;++f)a=6*r[f]-12*t[f]+6*e[f],s=-3*r[f]+9*t[f]-9*e[f]+3*i[f],o=3*t[f]-3*r[f],a|=0,s|=0,o|=0,s===0&&a===0||(s===0?(h=-o/a,h>0&&h<1&&n[f].push(this.calculateF(h,r,t,e,i,f))):(u=a*a-4*o*s,u>=0&&(d=(-a+bmSqrt(u))/(2*s),d>0&&d<1&&n[f].push(this.calculateF(d,r,t,e,i,f)),g=(-a-bmSqrt(u))/(2*s),g>0&&g<1&&n[f].push(this.calculateF(g,r,t,e,i,f)))));this.shapeBoundingBox.left=bmMin.apply(null,n[0]),this.shapeBoundingBox.top=bmMin.apply(null,n[1]),this.shapeBoundingBox.right=bmMax.apply(null,n[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,n[1])},HShapeElement.prototype.calculateF=function(r,t,e,i,n,s){return bmPow(1-r,3)*t[s]+3*bmPow(1-r,2)*r*e[s]+3*(1-r)*bmPow(r,2)*i[s]+bmPow(r,3)*n[s]},HShapeElement.prototype.calculateBoundingBox=function(r,t){var e,i=r.length;for(e=0;e<i;e+=1)r[e]&&r[e].sh?this.calculateShapeBoundingBox(r[e],t):r[e]&&r[e].it?this.calculateBoundingBox(r[e].it,t):r[e]&&r[e].style&&r[e].w&&this.expandStrokeBoundingBox(r[e].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(r,t){var e=0;if(r.keyframes){for(var i=0;i<r.keyframes.length;i+=1){var n=r.keyframes[i].s;n>e&&(e=n)}e*=r.mult}else e=r.v*r.mult;t.x-=e,t.xMax+=e,t.y-=e,t.yMax+=e},HShapeElement.prototype.currentBoxContains=function(r){return this.currentBBox.x<=r.x&&this.currentBBox.y<=r.y&&this.currentBBox.width+this.currentBBox.x>=r.x+r.width&&this.currentBBox.height+this.currentBBox.y>=r.y+r.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var r=this.tempBoundingBox,t=999999;if(r.x=t,r.xMax=-t,r.y=t,r.yMax=-t,this.calculateBoundingBox(this.itemsData,r),r.width=r.xMax<r.x?0:r.xMax-r.x,r.height=r.yMax<r.y?0:r.yMax-r.y,this.currentBoxContains(r))return;var e=!1;if(this.currentBBox.w!==r.width&&(this.currentBBox.w=r.width,this.shapeCont.setAttribute("width",r.width),e=!0),this.currentBBox.h!==r.height&&(this.currentBBox.h=r.height,this.shapeCont.setAttribute("height",r.height),e=!0),e||this.currentBBox.x!==r.x||this.currentBBox.y!==r.y){this.currentBBox.w=r.width,this.currentBBox.h=r.height,this.currentBBox.x=r.x,this.currentBBox.y=r.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=n,i.webkitTransform=n}}};function HTextElement(r,t,e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var r=createNS("g");this.maskedElement.appendChild(r),this.innerElem=r}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var t=this.innerElem.style,e=r.fc?this.buildColor(r.fc):"rgba(0,0,0,0)";t.fill=e,t.color=e,r.sc&&(t.stroke=this.buildColor(r.sc),t.strokeWidth=r.sw+"px");var i=this.globalData.fontManager.getFontByName(r.f);if(!this.globalData.fontManager.chars)if(t.fontSize=r.finalSize+"px",t.lineHeight=r.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{t.fontFamily=i.fFamily;var n=r.fWeight,s=r.fStyle;t.fontStyle=s,t.fontWeight=n}var a,o,h=r.l;o=h.length;var u,d,g,f=this.mHelper,m,_="",v=0;for(a=0;a<o;a+=1){if(this.globalData.fontManager.chars?(this.textPaths[v]?u=this.textPaths[v]:(u=createNS("path"),u.setAttribute("stroke-linecap",lineCapEnum[1]),u.setAttribute("stroke-linejoin",lineJoinEnum[2]),u.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[v]?(d=this.textSpans[v],g=d.children[0]):(d=createTag("div"),d.style.lineHeight=0,g=createNS("svg"),g.appendChild(u),styleDiv(d)))):this.isMasked?u=this.textPaths[v]?this.textPaths[v]:createNS("text"):this.textSpans[v]?(d=this.textSpans[v],u=this.textPaths[v]):(d=createTag("span"),styleDiv(d),u=createTag("span"),styleDiv(u),d.appendChild(u)),this.globalData.fontManager.chars){var b=this.globalData.fontManager.getCharData(r.finalText[a],i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily),C;if(b?C=b.data:C=null,f.reset(),C&&C.shapes&&C.shapes.length&&(m=C.shapes[0].it,f.scale(r.finalSize/100,r.finalSize/100),_=this.createPathShape(f,m),u.setAttribute("d",_)),this.isMasked)this.innerElem.appendChild(u);else{if(this.innerElem.appendChild(d),C&&C.shapes){document.body.appendChild(g);var M=g.getBBox();g.setAttribute("width",M.width+2),g.setAttribute("height",M.height+2),g.setAttribute("viewBox",M.x-1+" "+(M.y-1)+" "+(M.width+2)+" "+(M.height+2));var E=g.style,w="translate("+(M.x-1)+"px,"+(M.y-1)+"px)";E.transform=w,E.webkitTransform=w,h[a].yOffset=M.y-1}else g.setAttribute("width",1),g.setAttribute("height",1);d.appendChild(g)}}else if(u.textContent=h[a].val,u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(u);else{this.innerElem.appendChild(d);var A=u.style,R="translate3d(0,"+-r.finalSize/1.2+"px,0)";A.transform=R,A.webkitTransform=R}this.isMasked?this.textSpans[v]=u:this.textSpans[v]=d,this.textSpans[v].style.display="block",this.textPaths[v]=u,v+=1}for(;v<this.textSpans.length;)this.textSpans[v].style.display="none",v+=1},HTextElement.prototype.renderInnerContent=function(){var r;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),r=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";r.transform=t,r.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var e,i,n=0,s=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;i=a.length;var o,h,u;for(e=0;e<i;e+=1)a[e].n?n+=1:(h=this.textSpans[e],u=this.textPaths[e],o=s[n],n+=1,o._mdf.m&&(this.isMasked?h.setAttribute("transform",o.m):(h.style.webkitTransform=o.m,h.style.transform=o.m)),h.style.opacity=o.o,o.sw&&o._mdf.sw&&u.setAttribute("stroke-width",o.sw),o.sc&&o._mdf.sc&&u.setAttribute("stroke",o.sc),o.fc&&o._mdf.fc&&(u.setAttribute("fill",o.fc),u.style.color=o.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var d=this.innerElem.getBBox();this.currentBBox.w!==d.width&&(this.currentBBox.w=d.width,this.svgElement.setAttribute("width",d.width)),this.currentBBox.h!==d.height&&(this.currentBBox.h=d.height,this.svgElement.setAttribute("height",d.height));var g=1;if(this.currentBBox.w!==d.width+g*2||this.currentBBox.h!==d.height+g*2||this.currentBBox.x!==d.x-g||this.currentBBox.y!==d.y-g){this.currentBBox.w=d.width+g*2,this.currentBBox.h=d.height+g*2,this.currentBBox.x=d.x-g,this.currentBBox.y=d.y-g,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),r=this.svgElement.style;var f="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=f,r.webkitTransform=f}}}};function HCameraElement(r,t,e){this.initFrame(),this.initBaseData(r,t,e),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,r.pe,0,0,this),r.ks.p.s?(this.px=i(this,r.ks.p.x,1,0,this),this.py=i(this,r.ks.p.y,1,0,this),this.pz=i(this,r.ks.p.z,1,0,this)):this.p=i(this,r.ks.p,1,0,this),r.ks.a&&(this.a=i(this,r.ks.a,1,0,this)),r.ks.or.k.length&&r.ks.or.k[0].to){var n,s=r.ks.or.k.length;for(n=0;n<s;n+=1)r.ks.or.k[n].to=null,r.ks.or.k[n].ti=null}this.or=i(this,r.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,r.ks.rx,0,degToRads,this),this.ry=i(this,r.ks.ry,0,degToRads,this),this.rz=i(this,r.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var r,t=this.comp.threeDElements.length,e,i,n;for(r=0;r<t;r+=1)if(e=this.comp.threeDElements[r],e.type==="3d"){i=e.perspectiveElem.style,n=e.container.style;var s=this.pe.v+"px",a="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=s,i.webkitPerspective=s,n.transformOrigin=a,n.mozTransformOrigin=a,n.webkitTransformOrigin=a,i.transform=o,i.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var r=this._isFirstFrame,t,e;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)r=this.hierarchy[t].finalTransform.mProp._mdf||r;if(r||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=this.hierarchy.length-1,t=e;t>=0;t-=1){var i=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var n;this.p?n=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:n=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),a=[n[0]/s,n[1]/s,n[2]/s],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),h=Math.atan2(a[1],o),u=Math.atan2(a[0],-a[2]);this.mat.rotateY(u).rotateX(-h)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var d=!this._prevMat.equals(this.mat);if((d||this.pe._mdf)&&this.comp.threeDElements){e=this.comp.threeDElements.length;var g,f,m;for(t=0;t<e;t+=1)if(g=this.comp.threeDElements[t],g.type==="3d"){if(d){var _=this.mat.toCSS();m=g.container.style,m.transform=_,m.webkitTransform=_}this.pe._mdf&&(f=g.perspectiveElem.style,f.perspective=this.pe.v+"px",f.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(r,t,e){this.assetData=t.getAssetData(r.refId),this.initElement(r,t,e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=r,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(r,t){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();r.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(r,t){var e=r.getBaseElement();if(!!e){var i=this.layers[t];if(!i.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(e,t);else{for(var n=0,s,a,o;n<t;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement&&(a=this.elements[n],o=this.layers[n].ddd?this.getThreeDContainerByPos(n):a.getBaseElement(),s=o||s),n+=1;s?(!i.ddd||!this.supports3d)&&this.layerElement.insertBefore(e,s):(!i.ddd||!this.supports3d)&&this.layerElement.appendChild(e)}else this.addTo3dContainer(e,t)}},HybridRendererBase.prototype.createShape=function(r){return this.supports3d?new HShapeElement(r,this.globalData,this):new SVGShapeElement(r,this.globalData,this)},HybridRendererBase.prototype.createText=function(r){return this.supports3d?new HTextElement(r,this.globalData,this):new SVGTextLottieElement(r,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(r){return this.camera=new HCameraElement(r,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(r){return this.supports3d?new HImageElement(r,this.globalData,this):new IImageElement(r,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(r){return this.supports3d?new HSolidElement(r,this.globalData,this):new ISolidElement(r,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(r){for(var t=0,e=this.threeDElements.length;t<e;){if(this.threeDElements[t].startPos<=r&&this.threeDElements[t].endPos>=r)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(r,t){var e=createTag("div"),i,n;styleDiv(e);var s=createTag("div");if(styleDiv(s),t==="3d"){i=e.style,i.width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var a="50% 50%";i.webkitTransformOrigin=a,i.mozTransformOrigin=a,i.transformOrigin=a,n=s.style;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.transform=o,n.webkitTransform=o}e.appendChild(s);var h={container:s,perspectiveElem:e,startPos:r,endPos:r,type:t};return this.threeDElements.push(h),h},HybridRendererBase.prototype.build3dContainers=function(){var r,t=this.layers.length,e,i="";for(r=0;r<t;r+=1)this.layers[r].ddd&&this.layers[r].ty!==3?(i!=="3d"&&(i="3d",e=this.createThreeDContainer(r,"3d")),e.endPos=Math.max(e.endPos,r)):(i!=="2d"&&(i="2d",e=this.createThreeDContainer(r,"2d")),e.endPos=Math.max(e.endPos,r));for(t=this.threeDElements.length,r=t-1;r>=0;r-=1)this.resizerElem.appendChild(this.threeDElements[r].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(r,t){for(var e=0,i=this.threeDElements.length;e<i;){if(t<=this.threeDElements[e].endPos){for(var n=this.threeDElements[e].startPos,s;n<t;)this.elements[n]&&this.elements[n].getBaseElement&&(s=this.elements[n].getBaseElement()),n+=1;s?this.threeDElements[e].container.insertBefore(r,s):this.threeDElements[e].container.appendChild(r);break}e+=1}},HybridRendererBase.prototype.configAnimation=function(r){var t=createTag("div"),e=this.animationItem.wrapper,i=t.style;i.width=r.w+"px",i.height=r.h+"px",this.resizerElem=t,styleDiv(t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),e.appendChild(t),i.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var s=createNS("defs");n.appendChild(s),this.data=r,this.setupGlobalData(r,n),this.globalData.defs=s,this.layers=r.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var r,t=this.layers?this.layers.length:0;for(r=0;r<t;r+=1)this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var r=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,e=r/t,i=this.globalData.compSize.w/this.globalData.compSize.h,n,s,a,o;i>e?(n=r/this.globalData.compSize.w,s=r/this.globalData.compSize.w,a=0,o=(t-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(n=t/this.globalData.compSize.h,s=t/this.globalData.compSize.h,a=(r-this.globalData.compSize.w*(t/this.globalData.compSize.h))/2,o=0);var h=this.resizerElem.style;h.webkitTransform="matrix3d("+n+",0,0,0,0,"+s+",0,0,0,0,1,0,"+a+","+o+",0,1)",h.transform=h.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var r=this.globalData.compSize.w,t=this.globalData.compSize.h,e,i=this.threeDElements.length;for(e=0;e<i;e+=1){var n=this.threeDElements[e].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(r,2)+Math.pow(t,2))+"px",n.perspective=n.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(r){var t,e=r.length,i=createTag("div");for(t=0;t<e;t+=1)if(r[t].xt){var n=this.createComp(r[t],i,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}};function HCompElement(r,t,e){this.layers=r.layers,this.supports3d=!r.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,t,e),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,t.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(r,t){for(var e=0,i;e<t;)this.elements[e]&&this.elements[e].getBaseElement&&(i=this.elements[e].getBaseElement()),e+=1;i?this.layerElement.insertBefore(r,i):this.layerElement.appendChild(r)},HCompElement.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)};function HybridRenderer(r,t){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)};var CompExpressionInterface=function(){return function(r){function t(e){for(var i=0,n=r.layers.length;i<n;){if(r.layers[i].nm===e||r.layers[i].ind===e)return r.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(t,"_name",{value:r.data.nm}),t.layer=t,t.pixelAspect=1,t.height=r.data.h||r.globalData.compSize.h,t.width=r.data.w||r.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/r.globalData.frameRate,t.displayStartTime=0,t.numLayers=r.layers.length,t}}(),Expressions=function(){var r={};r.initExpressions=t;function t(e){var i=0,n=[];function s(){i+=1}function a(){i-=1,i===0&&h()}function o(u){n.indexOf(u)===-1&&n.push(u)}function h(){var u,d=n.length;for(u=0;u<d;u+=1)n[u].release();n.length=0}e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=s,e.renderer.globalData.popExpression=a,e.renderer.globalData.registerExpressionProperty=o}return r}(),MaskManagerInterface=function(){function r(e,i){this._mask=e,this._data=i}Object.defineProperty(r.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(r.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var t=function(i){var n=createSizedArray(i.viewData.length),s,a=i.viewData.length;for(s=0;s<a;s+=1)n[s]=new r(i.viewData[s],i.masksProperties[s]);var o=function(u){for(s=0;s<a;){if(i.masksProperties[s].nm===u)return n[s];s+=1}return null};return o};return t}(),ExpressionPropertyInterface=function(){var r={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function e(a,o,h){Object.defineProperty(a,"velocity",{get:function(){return o.getVelocityAtTime(o.comp.currentFrame)}}),a.numKeys=o.keyframes?o.keyframes.length:0,a.key=function(u){if(!a.numKeys)return 0;var d="";"s"in o.keyframes[u-1]?d=o.keyframes[u-1].s:"e"in o.keyframes[u-2]?d=o.keyframes[u-2].e:d=o.keyframes[u-2].s;var g=h==="unidimensional"?new Number(d):Object.assign({},d);return g.time=o.keyframes[u-1].t/o.elem.comp.globalData.frameRate,g.value=h==="unidimensional"?d[0]:d,g},a.valueAtTime=o.getValueAtTime,a.speedAtTime=o.getSpeedAtTime,a.velocityAtTime=o.getVelocityAtTime,a.propertyGroup=o.propertyGroup}function i(a){(!a||!("pv"in a))&&(a=r);var o=1/a.mult,h=a.pv*o,u=new Number(h);return u.value=h,e(u,a,"unidimensional"),function(){return a.k&&a.getValue(),h=a.v*o,u.value!==h&&(u=new Number(h),u.value=h,e(u,a,"unidimensional")),u}}function n(a){(!a||!("pv"in a))&&(a=t);var o=1/a.mult,h=a.data&&a.data.l||a.pv.length,u=createTypedArray("float32",h),d=createTypedArray("float32",h);return u.value=d,e(u,a,"multidimensional"),function(){a.k&&a.getValue();for(var g=0;g<h;g+=1)d[g]=a.v[g]*o,u[g]=d[g];return u}}function s(){return r}return function(a){return a?a.propType==="unidimensional"?i(a):n(a):s}}(),TransformExpressionInterface=function(){return function(r){function t(a){switch(a){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(r.r||r.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(r.rz||r.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(r.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(r.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(r.s)});var e,i,n,s;return r.p?s=ExpressionPropertyInterface(r.p):(e=ExpressionPropertyInterface(r.px),i=ExpressionPropertyInterface(r.py),r.pz&&(n=ExpressionPropertyInterface(r.pz))),Object.defineProperty(t,"position",{get:function(){return r.p?s():[e(),i(),n?n():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(r.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(r.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(r.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(r.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(r.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(r.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(r.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(r.or)}),t}}(),LayerExpressionInterface=function(){function r(u){var d=new Matrix;if(u!==void 0){var g=this._elem.finalTransform.mProp.getValueAtTime(u);g.clone(d)}else{var f=this._elem.finalTransform.mProp;f.applyToMatrix(d)}return d}function t(u,d){var g=this.getMatrix(d);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.applyPoint(g,u)}function e(u,d){var g=this.getMatrix(d);return this.applyPoint(g,u)}function i(u,d){var g=this.getMatrix(d);return g.props[12]=0,g.props[13]=0,g.props[14]=0,this.invertPoint(g,u)}function n(u,d){var g=this.getMatrix(d);return this.invertPoint(g,u)}function s(u,d){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,f=this._elem.hierarchy.length;for(g=0;g<f;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(u)}return u.applyToPointArray(d[0],d[1],d[2]||0)}function a(u,d){if(this._elem.hierarchy&&this._elem.hierarchy.length){var g,f=this._elem.hierarchy.length;for(g=0;g<f;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(u)}return u.inversePoint(d)}function o(u){var d=new Matrix;if(d.reset(),this._elem.finalTransform.mProp.applyToMatrix(d),this._elem.hierarchy&&this._elem.hierarchy.length){var g,f=this._elem.hierarchy.length;for(g=0;g<f;g+=1)this._elem.hierarchy[g].finalTransform.mProp.applyToMatrix(d);return d.inversePoint(u)}return d.inversePoint(u)}function h(){return[1,1,1,1]}return function(u){var d;function g(v){m.mask=new MaskManagerInterface(v,u)}function f(v){m.effect=v}function m(v){switch(v){case"ADBE Root Vectors Group":case"Contents":case 2:return m.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return d;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return m.effect;case"ADBE Text Properties":return m.textInterface;default:return null}}m.getMatrix=r,m.invertPoint=a,m.applyPoint=s,m.toWorld=e,m.toWorldVec=t,m.fromWorld=n,m.fromWorldVec=i,m.toComp=e,m.fromComp=o,m.sampleImage=h,m.sourceRectAtTime=u.sourceRectAtTime.bind(u),m._elem=u,d=TransformExpressionInterface(u.finalTransform.mProp);var _=getDescriptor(d,"anchorPoint");return Object.defineProperties(m,{hasParent:{get:function(){return u.hierarchy.length}},parent:{get:function(){return u.hierarchy[0].layerInterface}},rotation:getDescriptor(d,"rotation"),scale:getDescriptor(d,"scale"),position:getDescriptor(d,"position"),opacity:getDescriptor(d,"opacity"),anchorPoint:_,anchor_point:_,transform:{get:function(){return d}},active:{get:function(){return u.isInRange}}}),m.startTime=u.data.st,m.index=u.data.ind,m.source=u.data.refId,m.height=u.data.ty===0?u.data.h:100,m.width=u.data.ty===0?u.data.w:100,m.inPoint=u.data.ip/u.comp.globalData.frameRate,m.outPoint=u.data.op/u.comp.globalData.frameRate,m._name=u.data.nm,m.registerMaskInterface=g,m.registerEffectsInterface=f,m}}(),propertyGroupFactory=function(){return function(r,t){return function(e){return e=e===void 0?1:e,e<=0?r:t(e-1)}}}(),PropertyInterface=function(){return function(r,t){var e={_name:r};function i(n){return n=n===void 0?1:n,n<=0?e:t(n-1)}return i}}(),EffectsExpressionInterface=function(){var r={createEffectsInterface:t};function t(n,s){if(n.effectsManager){var a=[],o=n.data.ef,h,u=n.effectsManager.effectElements.length;for(h=0;h<u;h+=1)a.push(e(o[h],n.effectsManager.effectElements[h],s,n));var d=n.data.ef||[],g=function(m){for(h=0,u=d.length;h<u;){if(m===d[h].nm||m===d[h].mn||m===d[h].ix)return a[h];h+=1}return null};return Object.defineProperty(g,"numProperties",{get:function(){return d.length}}),g}return null}function e(n,s,a,o){function h(m){for(var _=n.ef,v=0,b=_.length;v<b;){if(m===_[v].nm||m===_[v].mn||m===_[v].ix)return _[v].ty===5?d[v]:d[v]();v+=1}throw new Error}var u=propertyGroupFactory(h,a),d=[],g,f=n.ef.length;for(g=0;g<f;g+=1)n.ef[g].ty===5?d.push(e(n.ef[g],s.effectElements[g],s.effectElements[g].propertyGroup,o)):d.push(i(s.effectElements[g],n.ef[g].ty,o,u));return n.mn==="ADBE Color Control"&&Object.defineProperty(h,"color",{get:function(){return d[0]()}}),Object.defineProperties(h,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:u}}),h.enabled=n.en!==0,h.active=h.enabled,h}function i(n,s,a,o){var h=ExpressionPropertyInterface(n.p);function u(){return s===10?a.comp.compInterface(n.p.v):h()}return n.p.setGroupProperty&&n.p.setGroupProperty(PropertyInterface("",o)),u}return r}(),ShapePathInterface=function(){return function(t,e,i){var n=e.sh;function s(o){return o==="Shape"||o==="shape"||o==="Path"||o==="path"||o==="ADBE Vector Shape"||o===2?s.path:null}var a=propertyGroupFactory(s,i);return n.setGroupProperty(PropertyInterface("Path",a)),Object.defineProperties(s,{path:{get:function(){return n.k&&n.getValue(),n}},shape:{get:function(){return n.k&&n.getValue(),n}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:i}}),s}}(),ShapeExpressionInterface=function(){function r(_,v,b){var C=[],M,E=_?_.length:0;for(M=0;M<E;M+=1)_[M].ty==="gr"?C.push(e(_[M],v[M],b)):_[M].ty==="fl"?C.push(i(_[M],v[M],b)):_[M].ty==="st"?C.push(a(_[M],v[M],b)):_[M].ty==="tm"?C.push(o(_[M],v[M],b)):_[M].ty==="tr"||(_[M].ty==="el"?C.push(u(_[M],v[M],b)):_[M].ty==="sr"?C.push(d(_[M],v[M],b)):_[M].ty==="sh"?C.push(ShapePathInterface(_[M],v[M],b)):_[M].ty==="rc"?C.push(g(_[M],v[M],b)):_[M].ty==="rd"?C.push(f(_[M],v[M],b)):_[M].ty==="rp"?C.push(m(_[M],v[M],b)):_[M].ty==="gf"?C.push(n(_[M],v[M],b)):C.push(s(_[M],v[M],b)));return C}function t(_,v,b){var C,M=function(A){for(var R=0,N=C.length;R<N;){if(C[R]._name===A||C[R].mn===A||C[R].propertyIndex===A||C[R].ix===A||C[R].ind===A)return C[R];R+=1}return typeof A=="number"?C[A-1]:null};M.propertyGroup=propertyGroupFactory(M,b),C=r(_.it,v.it,M.propertyGroup),M.numProperties=C.length;var E=h(_.it[_.it.length-1],v.it[v.it.length-1],M.propertyGroup);return M.transform=E,M.propertyIndex=_.cix,M._name=_.nm,M}function e(_,v,b){var C=function(A){switch(A){case"ADBE Vectors Group":case"Contents":case 2:return C.content;default:return C.transform}};C.propertyGroup=propertyGroupFactory(C,b);var M=t(_,v,C.propertyGroup),E=h(_.it[_.it.length-1],v.it[v.it.length-1],C.propertyGroup);return C.content=M,C.transform=E,Object.defineProperty(C,"_name",{get:function(){return _.nm}}),C.numProperties=_.np,C.propertyIndex=_.ix,C.nm=_.nm,C.mn=_.mn,C}function i(_,v,b){function C(M){return M==="Color"||M==="color"?C.color:M==="Opacity"||M==="opacity"?C.opacity:null}return Object.defineProperties(C,{color:{get:ExpressionPropertyInterface(v.c)},opacity:{get:ExpressionPropertyInterface(v.o)},_name:{value:_.nm},mn:{value:_.mn}}),v.c.setGroupProperty(PropertyInterface("Color",b)),v.o.setGroupProperty(PropertyInterface("Opacity",b)),C}function n(_,v,b){function C(M){return M==="Start Point"||M==="start point"?C.startPoint:M==="End Point"||M==="end point"?C.endPoint:M==="Opacity"||M==="opacity"?C.opacity:null}return Object.defineProperties(C,{startPoint:{get:ExpressionPropertyInterface(v.s)},endPoint:{get:ExpressionPropertyInterface(v.e)},opacity:{get:ExpressionPropertyInterface(v.o)},type:{get:function(){return"a"}},_name:{value:_.nm},mn:{value:_.mn}}),v.s.setGroupProperty(PropertyInterface("Start Point",b)),v.e.setGroupProperty(PropertyInterface("End Point",b)),v.o.setGroupProperty(PropertyInterface("Opacity",b)),C}function s(){function _(){return null}return _}function a(_,v,b){var C=propertyGroupFactory(N,b),M=propertyGroupFactory(R,C);function E(D){Object.defineProperty(R,_.d[D].nm,{get:ExpressionPropertyInterface(v.d.dataProps[D].p)})}var w,A=_.d?_.d.length:0,R={};for(w=0;w<A;w+=1)E(w),v.d.dataProps[w].p.setGroupProperty(M);function N(D){return D==="Color"||D==="color"?N.color:D==="Opacity"||D==="opacity"?N.opacity:D==="Stroke Width"||D==="stroke width"?N.strokeWidth:null}return Object.defineProperties(N,{color:{get:ExpressionPropertyInterface(v.c)},opacity:{get:ExpressionPropertyInterface(v.o)},strokeWidth:{get:ExpressionPropertyInterface(v.w)},dash:{get:function(){return R}},_name:{value:_.nm},mn:{value:_.mn}}),v.c.setGroupProperty(PropertyInterface("Color",C)),v.o.setGroupProperty(PropertyInterface("Opacity",C)),v.w.setGroupProperty(PropertyInterface("Stroke Width",C)),N}function o(_,v,b){function C(E){return E===_.e.ix||E==="End"||E==="end"?C.end:E===_.s.ix?C.start:E===_.o.ix?C.offset:null}var M=propertyGroupFactory(C,b);return C.propertyIndex=_.ix,v.s.setGroupProperty(PropertyInterface("Start",M)),v.e.setGroupProperty(PropertyInterface("End",M)),v.o.setGroupProperty(PropertyInterface("Offset",M)),C.propertyIndex=_.ix,C.propertyGroup=b,Object.defineProperties(C,{start:{get:ExpressionPropertyInterface(v.s)},end:{get:ExpressionPropertyInterface(v.e)},offset:{get:ExpressionPropertyInterface(v.o)},_name:{value:_.nm}}),C.mn=_.mn,C}function h(_,v,b){function C(E){return _.a.ix===E||E==="Anchor Point"?C.anchorPoint:_.o.ix===E||E==="Opacity"?C.opacity:_.p.ix===E||E==="Position"?C.position:_.r.ix===E||E==="Rotation"||E==="ADBE Vector Rotation"?C.rotation:_.s.ix===E||E==="Scale"?C.scale:_.sk&&_.sk.ix===E||E==="Skew"?C.skew:_.sa&&_.sa.ix===E||E==="Skew Axis"?C.skewAxis:null}var M=propertyGroupFactory(C,b);return v.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",M)),v.transform.mProps.p.setGroupProperty(PropertyInterface("Position",M)),v.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",M)),v.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",M)),v.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",M)),v.transform.mProps.sk&&(v.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",M)),v.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",M))),v.transform.op.setGroupProperty(PropertyInterface("Opacity",M)),Object.defineProperties(C,{opacity:{get:ExpressionPropertyInterface(v.transform.mProps.o)},position:{get:ExpressionPropertyInterface(v.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(v.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(v.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(v.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(v.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(v.transform.mProps.sa)},_name:{value:_.nm}}),C.ty="tr",C.mn=_.mn,C.propertyGroup=b,C}function u(_,v,b){function C(w){return _.p.ix===w?C.position:_.s.ix===w?C.size:null}var M=propertyGroupFactory(C,b);C.propertyIndex=_.ix;var E=v.sh.ty==="tm"?v.sh.prop:v.sh;return E.s.setGroupProperty(PropertyInterface("Size",M)),E.p.setGroupProperty(PropertyInterface("Position",M)),Object.defineProperties(C,{size:{get:ExpressionPropertyInterface(E.s)},position:{get:ExpressionPropertyInterface(E.p)},_name:{value:_.nm}}),C.mn=_.mn,C}function d(_,v,b){function C(w){return _.p.ix===w?C.position:_.r.ix===w?C.rotation:_.pt.ix===w?C.points:_.or.ix===w||w==="ADBE Vector Star Outer Radius"?C.outerRadius:_.os.ix===w?C.outerRoundness:_.ir&&(_.ir.ix===w||w==="ADBE Vector Star Inner Radius")?C.innerRadius:_.is&&_.is.ix===w?C.innerRoundness:null}var M=propertyGroupFactory(C,b),E=v.sh.ty==="tm"?v.sh.prop:v.sh;return C.propertyIndex=_.ix,E.or.setGroupProperty(PropertyInterface("Outer Radius",M)),E.os.setGroupProperty(PropertyInterface("Outer Roundness",M)),E.pt.setGroupProperty(PropertyInterface("Points",M)),E.p.setGroupProperty(PropertyInterface("Position",M)),E.r.setGroupProperty(PropertyInterface("Rotation",M)),_.ir&&(E.ir.setGroupProperty(PropertyInterface("Inner Radius",M)),E.is.setGroupProperty(PropertyInterface("Inner Roundness",M))),Object.defineProperties(C,{position:{get:ExpressionPropertyInterface(E.p)},rotation:{get:ExpressionPropertyInterface(E.r)},points:{get:ExpressionPropertyInterface(E.pt)},outerRadius:{get:ExpressionPropertyInterface(E.or)},outerRoundness:{get:ExpressionPropertyInterface(E.os)},innerRadius:{get:ExpressionPropertyInterface(E.ir)},innerRoundness:{get:ExpressionPropertyInterface(E.is)},_name:{value:_.nm}}),C.mn=_.mn,C}function g(_,v,b){function C(w){return _.p.ix===w?C.position:_.r.ix===w?C.roundness:_.s.ix===w||w==="Size"||w==="ADBE Vector Rect Size"?C.size:null}var M=propertyGroupFactory(C,b),E=v.sh.ty==="tm"?v.sh.prop:v.sh;return C.propertyIndex=_.ix,E.p.setGroupProperty(PropertyInterface("Position",M)),E.s.setGroupProperty(PropertyInterface("Size",M)),E.r.setGroupProperty(PropertyInterface("Rotation",M)),Object.defineProperties(C,{position:{get:ExpressionPropertyInterface(E.p)},roundness:{get:ExpressionPropertyInterface(E.r)},size:{get:ExpressionPropertyInterface(E.s)},_name:{value:_.nm}}),C.mn=_.mn,C}function f(_,v,b){function C(w){return _.r.ix===w||w==="Round Corners 1"?C.radius:null}var M=propertyGroupFactory(C,b),E=v;return C.propertyIndex=_.ix,E.rd.setGroupProperty(PropertyInterface("Radius",M)),Object.defineProperties(C,{radius:{get:ExpressionPropertyInterface(E.rd)},_name:{value:_.nm}}),C.mn=_.mn,C}function m(_,v,b){function C(w){return _.c.ix===w||w==="Copies"?C.copies:_.o.ix===w||w==="Offset"?C.offset:null}var M=propertyGroupFactory(C,b),E=v;return C.propertyIndex=_.ix,E.c.setGroupProperty(PropertyInterface("Copies",M)),E.o.setGroupProperty(PropertyInterface("Offset",M)),Object.defineProperties(C,{copies:{get:ExpressionPropertyInterface(E.c)},offset:{get:ExpressionPropertyInterface(E.o)},_name:{value:_.nm}}),C.mn=_.mn,C}return function(_,v,b){var C;function M(w){if(typeof w=="number")return w=w===void 0?1:w,w===0?b:C[w-1];for(var A=0,R=C.length;A<R;){if(C[A]._name===w)return C[A];A+=1}return null}function E(){return b}return M.propertyGroup=propertyGroupFactory(M,E),C=r(_,v,M.propertyGroup),M.numProperties=C.length,M._name="Contents",M}}(),TextExpressionInterface=function(){return function(r){var t,e;function i(n){switch(n){case"ADBE Text Document":return i.sourceText;default:return null}}return Object.defineProperty(i,"sourceText",{get:function(){r.textProperty.getValue();var s=r.textProperty.currentData.t;return s!==t&&(r.textProperty.currentData.t=t,e=new String(s),e.value=s||new String(s)),e}}),i}}();function _typeof$2(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(e){return typeof e}:_typeof$2=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(r)}var FootageInterface=function(){var r=function(i){var n="",s=i.getFootageData();function a(){return n="",s=i.getFootageData(),o}function o(h){if(s[h])return n=h,s=s[h],_typeof$2(s)==="object"?o:s;var u=h.indexOf(n);if(u!==-1){var d=parseInt(h.substr(u+n.length),10);return s=s[d],_typeof$2(s)==="object"?o:s}return""}return a},t=function(i){function n(s){return s==="Outline"?n.outlineInterface():null}return n._name="Outline",n.outlineInterface=r(i),n};return function(e){function i(n){return n==="Data"?i.dataInterface:null}return i._name="Data",i.dataInterface=t(e),i}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(r){return interfaces[r]||null}function _typeof$1(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(r)}function seedRandom(r,t){var e=this,i=256,n=6,s=52,a="random",o=t.pow(i,n),h=t.pow(2,s),u=h*2,d=i-1,g;function f(E,w,A){var R=[];w=w===!0?{entropy:!0}:w||{};var N=b(v(w.entropy?[E,M(r)]:E===null?C():E,3),R),D=new m(R),X=function(){for(var ft=D.g(n),gt=o,ut=0;ft<h;)ft=(ft+ut)*i,gt*=i,ut=D.g(1);for(;ft>=u;)ft/=2,gt/=2,ut>>>=1;return(ft+ut)/gt};return X.int32=function(){return D.g(4)|0},X.quick=function(){return D.g(4)/4294967296},X.double=X,b(M(D.S),r),(w.pass||A||function(at,ft,gt,ut){return ut&&(ut.S&&_(ut,D),at.state=function(){return _(D,{})}),gt?(t[a]=at,ft):at})(X,N,"global"in w?w.global:this==t,w.state)}t["seed"+a]=f;function m(E){var w,A=E.length,R=this,N=0,D=R.i=R.j=0,X=R.S=[];for(A||(E=[A++]);N<i;)X[N]=N++;for(N=0;N<i;N++)X[N]=X[D=d&D+E[N%A]+(w=X[N])],X[D]=w;R.g=function(at){for(var ft,gt=0,ut=R.i,xt=R.j,nt=R.S;at--;)ft=nt[ut=d&ut+1],gt=gt*i+nt[d&(nt[ut]=nt[xt=d&xt+ft])+(nt[xt]=ft)];return R.i=ut,R.j=xt,gt}}function _(E,w){return w.i=E.i,w.j=E.j,w.S=E.S.slice(),w}function v(E,w){var A=[],R=_typeof$1(E),N;if(w&&R=="object")for(N in E)try{A.push(v(E[N],w-1))}catch{}return A.length?A:R=="string"?E:E+"\0"}function b(E,w){for(var A=E+"",R,N=0;N<A.length;)w[d&N]=d&(R^=w[d&N]*19)+A.charCodeAt(N++);return M(w)}function C(){try{if(g)return M(g.randomBytes(i));var E=new Uint8Array(i);return(e.crypto||e.msCrypto).getRandomValues(E),M(E)}catch{var w=e.navigator,A=w&&w.plugins;return[+new Date,e,A,e.screen,M(r)]}}function M(E){return String.fromCharCode.apply(0,E)}b(t.random(),r)}function initialize$2(r){seedRandom([],r)}var propTypes={SHAPE:"shape"};function _typeof(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(r)}var ExpressionManager=function(){"use strict";var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;initialize$2(BMMath);function $bm_isInstanceOfArray(r){return r.constructor===Array||r.constructor===Float32Array}function isNumerable(r,t){return r==="number"||r==="boolean"||r==="string"||t instanceof Number}function $bm_neg(r){var t=_typeof(r);if(t==="number"||t==="boolean"||r instanceof Number)return-r;if($bm_isInstanceOfArray(r)){var e,i=r.length,n=[];for(e=0;e<i;e+=1)n[e]=-r[e];return n}return r.propType?r.v:-r}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(r,t){var e=_typeof(r),i=_typeof(t);if(e==="string"||i==="string"||isNumerable(e,r)&&isNumerable(i,t))return r+t;if($bm_isInstanceOfArray(r)&&isNumerable(i,t))return r=r.slice(0),r[0]+=t,r;if(isNumerable(e,r)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=r+t[0],t;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(t)){for(var n=0,s=r.length,a=t.length,o=[];n<s||n<a;)(typeof r[n]=="number"||r[n]instanceof Number)&&(typeof t[n]=="number"||t[n]instanceof Number)?o[n]=r[n]+t[n]:o[n]=t[n]===void 0?r[n]:r[n]||t[n],n+=1;return o}return 0}var add=sum;function sub(r,t){var e=_typeof(r),i=_typeof(t);if(isNumerable(e,r)&&isNumerable(i,t))return e==="string"&&(r=parseInt(r,10)),i==="string"&&(t=parseInt(t,10)),r-t;if($bm_isInstanceOfArray(r)&&isNumerable(i,t))return r=r.slice(0),r[0]-=t,r;if(isNumerable(e,r)&&$bm_isInstanceOfArray(t))return t=t.slice(0),t[0]=r-t[0],t;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(t)){for(var n=0,s=r.length,a=t.length,o=[];n<s||n<a;)(typeof r[n]=="number"||r[n]instanceof Number)&&(typeof t[n]=="number"||t[n]instanceof Number)?o[n]=r[n]-t[n]:o[n]=t[n]===void 0?r[n]:r[n]||t[n],n+=1;return o}return 0}function mul(r,t){var e=_typeof(r),i=_typeof(t),n;if(isNumerable(e,r)&&isNumerable(i,t))return r*t;var s,a;if($bm_isInstanceOfArray(r)&&isNumerable(i,t)){for(a=r.length,n=createTypedArray("float32",a),s=0;s<a;s+=1)n[s]=r[s]*t;return n}if(isNumerable(e,r)&&$bm_isInstanceOfArray(t)){for(a=t.length,n=createTypedArray("float32",a),s=0;s<a;s+=1)n[s]=r*t[s];return n}return 0}function div(r,t){var e=_typeof(r),i=_typeof(t),n;if(isNumerable(e,r)&&isNumerable(i,t))return r/t;var s,a;if($bm_isInstanceOfArray(r)&&isNumerable(i,t)){for(a=r.length,n=createTypedArray("float32",a),s=0;s<a;s+=1)n[s]=r[s]/t;return n}if(isNumerable(e,r)&&$bm_isInstanceOfArray(t)){for(a=t.length,n=createTypedArray("float32",a),s=0;s<a;s+=1)n[s]=r/t[s];return n}return 0}function mod(r,t){return typeof r=="string"&&(r=parseInt(r,10)),typeof t=="string"&&(t=parseInt(t,10)),r%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(r,t,e){if(t>e){var i=e;e=t,t=i}return Math.min(Math.max(r,t),e)}function radiansToDegrees(r){return r/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(r){return r*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(r,t){if(typeof r=="number"||r instanceof Number)return t=t||0,Math.abs(r-t);t||(t=helperLengthArray);var e,i=Math.min(r.length,t.length),n=0;for(e=0;e<i;e+=1)n+=Math.pow(t[e]-r[e],2);return Math.sqrt(n)}function normalize(r){return div(r,length(r))}function rgbToHsl(r){var t=r[0],e=r[1],i=r[2],n=Math.max(t,e,i),s=Math.min(t,e,i),a,o,h=(n+s)/2;if(n===s)a=0,o=0;else{var u=n-s;switch(o=h>.5?u/(2-n-s):u/(n+s),n){case t:a=(e-i)/u+(e<i?6:0);break;case e:a=(i-t)/u+2;break;case i:a=(t-e)/u+4;break;default:break}a/=6}return[a,o,h,r[3]]}function hue2rgb(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function hslToRgb(r){var t=r[0],e=r[1],i=r[2],n,s,a;if(e===0)n=i,a=i,s=i;else{var o=i<.5?i*(1+e):i+e-i*e,h=2*i-o;n=hue2rgb(h,o,t+1/3),s=hue2rgb(h,o,t),a=hue2rgb(h,o,t-1/3)}return[n,s,a,r[3]]}function linear(r,t,e,i,n){if((i===void 0||n===void 0)&&(i=t,n=e,t=0,e=1),e<t){var s=e;e=t,t=s}if(r<=t)return i;if(r>=e)return n;var a=e===t?0:(r-t)/(e-t);if(!i.length)return i+(n-i)*a;var o,h=i.length,u=createTypedArray("float32",h);for(o=0;o<h;o+=1)u[o]=i[o]+(n[o]-i[o])*a;return u}function random(r,t){if(t===void 0&&(r===void 0?(r=0,t=1):(t=r,r=void 0)),t.length){var e,i=t.length;r||(r=createTypedArray("float32",i));var n=createTypedArray("float32",i),s=BMMath.random();for(e=0;e<i;e+=1)n[e]=r[e]+s*(t[e]-r[e]);return n}r===void 0&&(r=0);var a=BMMath.random();return r+a*(t-r)}function createPath(r,t,e,i){var n,s=r.length,a=shapePool.newElement();a.setPathData(!!i,s);var o=[0,0],h,u;for(n=0;n<s;n+=1)h=t&&t[n]?t[n]:o,u=e&&e[n]?e[n]:o,a.setTripleAt(r[n][0],r[n][1],u[0]+r[n][0],u[1]+r[n][1],h[0]+r[n][0],h[1]+r[n][1],n,!0);return a}function initiateExpression(elem,data,property){function noOp(r){return r}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function r(t,e){var i,n,s=this.pv.length?this.pv.length:1,a=createTypedArray("float32",s);t=5;var o=Math.floor(time*t);for(i=0,n=0;i<o;){for(n=0;n<s;n+=1)a[n]+=-e+e*2*BMMath.random();i+=1}var h=time*t,u=h-Math.floor(h),d=createTypedArray("float32",s);if(s>1){for(n=0;n<s;n+=1)d[n]=this.pv[n]+a[n]+(-e+e*2*BMMath.random())*u;return d}return this.pv+a[0]+(-e+e*2*BMMath.random())*u}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(r,t){return loopIn(r,t,!0)}function loopOutDuration(r,t){return loopOut(r,t,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(r,t){var e=[t[0]-r[0],t[1]-r[1],t[2]-r[2]],i=Math.atan2(e[0],Math.sqrt(e[1]*e[1]+e[2]*e[2]))/degToRads,n=-Math.atan2(e[1],e[2])/degToRads;return[n,i,0]}function easeOut(r,t,e,i,n){return applyEase(easeOutBez,r,t,e,i,n)}function easeIn(r,t,e,i,n){return applyEase(easeInBez,r,t,e,i,n)}function ease(r,t,e,i,n){return applyEase(easeInOutBez,r,t,e,i,n)}function applyEase(r,t,e,i,n,s){n===void 0?(n=e,s=i):t=(t-e)/(i-e),t>1?t=1:t<0&&(t=0);var a=r(t);if($bm_isInstanceOfArray(n)){var o,h=n.length,u=createTypedArray("float32",h);for(o=0;o<h;o+=1)u[o]=(s[o]-n[o])*a+n[o];return u}return(s-n)*a+n}function nearestKey(r){var t,e=data.k.length,i,n;if(!data.k.length||typeof data.k[0]=="number")i=0,n=0;else if(i=-1,r*=elem.comp.globalData.frameRate,r<data.k[0].t)i=1,n=data.k[0].t;else{for(t=0;t<e-1;t+=1)if(r===data.k[t].t){i=t+1,n=data.k[t].t;break}else if(r>data.k[t].t&&r<data.k[t+1].t){r-data.k[t].t>data.k[t+1].t-r?(i=t+2,n=data.k[t+1].t):(i=t+1,n=data.k[t].t);break}i===-1&&(i=t+1,n=data.k[t].t)}var s={};return s.index=i,s.time=n/elem.comp.globalData.frameRate,s}function key(r){var t,e,i;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+r);r-=1,t={time:data.k[r].t/elem.comp.globalData.frameRate,value:[]};var n=Object.prototype.hasOwnProperty.call(data.k[r],"s")?data.k[r].s:data.k[r-1].e;for(i=n.length,e=0;e<i;e+=1)t[e]=n[e],t.value[e]=n[e];return t}function framesToTime(r,t){return t||(t=elem.comp.globalData.frameRate),r/t}function timeToFrames(r,t){return!r&&r!==0&&(r=time),t||(t=elem.comp.globalData.frameRate),r*t}function seedRandom(r){BMMath.seedrandom(randSeed+r)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(r,t){return typeof value=="string"?t===void 0?value.substring(r):value.substring(r,t):""}function substr(r,t){return typeof value=="string"?t===void 0?value.substr(r):value.substr(r,t):""}function posterizeTime(r){time=r===0?0:Math.floor(time*r)/r,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(r){return value=r,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers=function(){function r(a,o,h){o.x&&(h.k=!0,h.x=!0,h.initiateExpression=ExpressionManager.initiateExpression,h.effectsSequence.push(h.initiateExpression(a,o,h).bind(h)))}function t(a){return a*=this.elem.globalData.frameRate,a-=this.offsetTime,a!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<a?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(a,this._cachingAtTime),this._cachingAtTime.lastFrame=a),this._cachingAtTime.value}function e(a){var o=-.01,h=this.getValueAtTime(a),u=this.getValueAtTime(a+o),d=0;if(h.length){var g;for(g=0;g<h.length;g+=1)d+=Math.pow(u[g]-h[g],2);d=Math.sqrt(d)*100}else d=0;return d}function i(a){if(this.vel!==void 0)return this.vel;var o=-.001,h=this.getValueAtTime(a),u=this.getValueAtTime(a+o),d;if(h.length){d=createTypedArray("float32",h.length);var g;for(g=0;g<h.length;g+=1)d[g]=(u[g]-h[g])/o}else d=(u-h)/o;return d}function n(){return this.pv}function s(a){this.propertyGroup=a}return{searchExpressions:r,getSpeedAtTime:e,getVelocityAtTime:i,getValueAtTime:t,getStaticValueAtTime:n,setGroupProperty:s}}();function addPropertyDecorator(){function r(f,m,_){if(!this.k||!this.keyframes)return this.pv;f=f?f.toLowerCase():"";var v=this.comp.renderedFrame,b=this.keyframes,C=b[b.length-1].t;if(v<=C)return this.pv;var M,E;_?(m?M=Math.abs(C-this.elem.comp.globalData.frameRate*m):M=Math.max(0,C-this.elem.data.ip),E=C-M):((!m||m>b.length-1)&&(m=b.length-1),E=b[b.length-1-m].t,M=C-E);var w,A,R;if(f==="pingpong"){var N=Math.floor((v-E)/M);if(N%2!=0)return this.getValueAtTime((M-(v-E)%M+E)/this.comp.globalData.frameRate,0)}else if(f==="offset"){var D=this.getValueAtTime(E/this.comp.globalData.frameRate,0),X=this.getValueAtTime(C/this.comp.globalData.frameRate,0),at=this.getValueAtTime(((v-E)%M+E)/this.comp.globalData.frameRate,0),ft=Math.floor((v-E)/M);if(this.pv.length){for(R=new Array(D.length),A=R.length,w=0;w<A;w+=1)R[w]=(X[w]-D[w])*ft+at[w];return R}return(X-D)*ft+at}else if(f==="continue"){var gt=this.getValueAtTime(C/this.comp.globalData.frameRate,0),ut=this.getValueAtTime((C-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(R=new Array(gt.length),A=R.length,w=0;w<A;w+=1)R[w]=gt[w]+(gt[w]-ut[w])*((v-C)/this.comp.globalData.frameRate)/5e-4;return R}return gt+(gt-ut)*((v-C)/.001)}return this.getValueAtTime(((v-E)%M+E)/this.comp.globalData.frameRate,0)}function t(f,m,_){if(!this.k)return this.pv;f=f?f.toLowerCase():"";var v=this.comp.renderedFrame,b=this.keyframes,C=b[0].t;if(v>=C)return this.pv;var M,E;_?(m?M=Math.abs(this.elem.comp.globalData.frameRate*m):M=Math.max(0,this.elem.data.op-C),E=C+M):((!m||m>b.length-1)&&(m=b.length-1),E=b[m].t,M=E-C);var w,A,R;if(f==="pingpong"){var N=Math.floor((C-v)/M);if(N%2==0)return this.getValueAtTime(((C-v)%M+C)/this.comp.globalData.frameRate,0)}else if(f==="offset"){var D=this.getValueAtTime(C/this.comp.globalData.frameRate,0),X=this.getValueAtTime(E/this.comp.globalData.frameRate,0),at=this.getValueAtTime((M-(C-v)%M+C)/this.comp.globalData.frameRate,0),ft=Math.floor((C-v)/M)+1;if(this.pv.length){for(R=new Array(D.length),A=R.length,w=0;w<A;w+=1)R[w]=at[w]-(X[w]-D[w])*ft;return R}return at-(X-D)*ft}else if(f==="continue"){var gt=this.getValueAtTime(C/this.comp.globalData.frameRate,0),ut=this.getValueAtTime((C+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(R=new Array(gt.length),A=R.length,w=0;w<A;w+=1)R[w]=gt[w]+(gt[w]-ut[w])*(C-v)/.001;return R}return gt+(gt-ut)*(C-v)/.001}return this.getValueAtTime((M-((C-v)%M+C))/this.comp.globalData.frameRate,0)}function e(f,m){if(!this.k)return this.pv;if(f=(f||.4)*.5,m=Math.floor(m||5),m<=1)return this.pv;var _=this.comp.renderedFrame/this.comp.globalData.frameRate,v=_-f,b=_+f,C=m>1?(b-v)/(m-1):1,M=0,E=0,w;this.pv.length?w=createTypedArray("float32",this.pv.length):w=0;for(var A;M<m;){if(A=this.getValueAtTime(v+M*C),this.pv.length)for(E=0;E<this.pv.length;E+=1)w[E]+=A[E];else w+=A;M+=1}if(this.pv.length)for(E=0;E<this.pv.length;E+=1)w[E]/=m;else w/=m;return w}function i(f){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var m=this._transformCachingAtTime.v;if(m.cloneFromProps(this.pre.props),this.appliedTransformations<1){var _=this.a.getValueAtTime(f);m.translate(-_[0]*this.a.mult,-_[1]*this.a.mult,_[2]*this.a.mult)}if(this.appliedTransformations<2){var v=this.s.getValueAtTime(f);m.scale(v[0]*this.s.mult,v[1]*this.s.mult,v[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var b=this.sk.getValueAtTime(f),C=this.sa.getValueAtTime(f);m.skewFromAxis(-b*this.sk.mult,C*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var M=this.r.getValueAtTime(f);m.rotate(-M*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var E=this.rz.getValueAtTime(f),w=this.ry.getValueAtTime(f),A=this.rx.getValueAtTime(f),R=this.or.getValueAtTime(f);m.rotateZ(-E*this.rz.mult).rotateY(w*this.ry.mult).rotateX(A*this.rx.mult).rotateZ(-R[2]*this.or.mult).rotateY(R[1]*this.or.mult).rotateX(R[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var N=this.px.getValueAtTime(f),D=this.py.getValueAtTime(f);if(this.data.p.z){var X=this.pz.getValueAtTime(f);m.translate(N*this.px.mult,D*this.py.mult,-X*this.pz.mult)}else m.translate(N*this.px.mult,D*this.py.mult,0)}else{var at=this.p.getValueAtTime(f);m.translate(at[0]*this.p.mult,at[1]*this.p.mult,-at[2]*this.p.mult)}return m}function n(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(f,m,_){var v=s(f,m,_);return v.dynamicProperties.length?v.getValueAtTime=i.bind(v):v.getValueAtTime=n.bind(v),v.setGroupProperty=expressionHelpers.setGroupProperty,v};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(f,m,_,v,b){var C=a(f,m,_,v,b);C.kf?C.getValueAtTime=expressionHelpers.getValueAtTime.bind(C):C.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(C),C.setGroupProperty=expressionHelpers.setGroupProperty,C.loopOut=r,C.loopIn=t,C.smooth=e,C.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(C),C.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(C),C.numKeys=m.a===1?m.k.length:0,C.propertyIndex=m.ix;var M=0;return _!==0&&(M=createTypedArray("float32",m.a===1?m.k[0].s.length:m.k.length)),C._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:M},expressionHelpers.searchExpressions(f,m,C),C.k&&b.addDynamicProperty(C),C};function o(f){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),f*=this.elem.globalData.frameRate,f-=this.offsetTime,f!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<f?this._caching.lastIndex:0,this._cachingAtTime.lastTime=f,this.interpolateShape(f,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var h=ShapePropertyFactory.getConstructorFunction(),u=ShapePropertyFactory.getKeyframedConstructorFunction();function d(){}d.prototype={vertices:function(m,_){this.k&&this.getValue();var v=this.v;_!==void 0&&(v=this.getValueAtTime(_,0));var b,C=v._length,M=v[m],E=v.v,w=createSizedArray(C);for(b=0;b<C;b+=1)m==="i"||m==="o"?w[b]=[M[b][0]-E[b][0],M[b][1]-E[b][1]]:w[b]=[M[b][0],M[b][1]];return w},points:function(m){return this.vertices("v",m)},inTangents:function(m){return this.vertices("i",m)},outTangents:function(m){return this.vertices("o",m)},isClosed:function(){return this.v.c},pointOnPath:function(m,_){var v=this.v;_!==void 0&&(v=this.getValueAtTime(_,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(v));for(var b=this._segmentsLength,C=b.lengths,M=b.totalLength*m,E=0,w=C.length,A=0,R;E<w;){if(A+C[E].addedLength>M){var N=E,D=v.c&&E===w-1?0:E+1,X=(M-A)/C[E].addedLength;R=bez.getPointInSegment(v.v[N],v.v[D],v.o[N],v.i[D],X,C[E]);break}else A+=C[E].addedLength;E+=1}return R||(R=v.c?[v.v[0][0],v.v[0][1]]:[v.v[v._length-1][0],v.v[v._length-1][1]]),R},vectorOnPath:function(m,_,v){m==1?m=this.v.c:m==0&&(m=.999);var b=this.pointOnPath(m,_),C=this.pointOnPath(m+.001,_),M=C[0]-b[0],E=C[1]-b[1],w=Math.sqrt(Math.pow(M,2)+Math.pow(E,2));if(w===0)return[0,0];var A=v==="tangent"?[M/w,E/w]:[-E/w,M/w];return A},tangentOnPath:function(m,_){return this.vectorOnPath(m,_,"tangent")},normalOnPath:function(m,_){return this.vectorOnPath(m,_,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([d],h),extendPrototype([d],u),u.prototype.getValueAtTime=o,u.prototype.initiateExpression=ExpressionManager.initiateExpression;var g=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(f,m,_,v,b){var C=g(f,m,_,v,b);return C.propertyIndex=m.ix,C.lock=!1,_===3?expressionHelpers.searchExpressions(f,m.pt,C):_===4&&expressionHelpers.searchExpressions(f,m.ks,C),C.k&&f.addDynamicProperty(C),C}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function r(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(t,e){var i=this.calculateExpression(e);if(t.t!==i){var n={};return this.copyData(n,t),n.t=i.toString(),n.__complete=!1,n}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=r}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function r(t,e){var i=createNS("feMerge");i.setAttribute("result",t);var n,s;for(s=0;s<e.length;s+=1)n=createNS("feMergeNode"),n.setAttribute("in",e[s]),i.appendChild(n),i.appendChild(n);return i}};function SVGTintFilter(r,t,e,i,n){this.filterManager=t;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),s.setAttribute("result",i+"_tint_1"),r.appendChild(s),s=createNS("feColorMatrix"),s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",i+"_tint_2"),r.appendChild(s),this.matrixFilter=s;var a=this.createMergeNode(i,[n,i+"_tint_1",i+"_tint_2"]);r.appendChild(a)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",e[0]-t[0]+" 0 0 0 "+t[0]+" "+(e[1]-t[1])+" 0 0 0 "+t[1]+" "+(e[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+i+" 0")}};function SVGFillFilter(r,t,e,i){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",i),r.appendChild(n),this.matrixFilter=n}SVGFillFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,e=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+e+" 0")}};function SVGStrokeEffect(r,t,e){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var r=this.elem.layerElement.children||this.elem.layerElement.childNodes,t,e,i,n;for(this.filterManager.effectElements[1].p.v===1?(n=this.elem.maskManager.masksProperties.length,i=0):(i=this.filterManager.effectElements[0].p.v-1,n=i+1),e=createNS("g"),e.setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1),i;i<n;i+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:i});if(this.filterManager.effectElements[10].p.v===3){var s=createNS("mask"),a=createElementID();s.setAttribute("id",a),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+a+")");r[0];)o.appendChild(r[0]);this.elem.layerElement.appendChild(o),this.masker=s,e.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(r){this.initialized||this.initialize();var t,e=this.paths.length,i,n;for(t=0;t<e;t+=1)if(this.paths[t].m!==-1&&(i=this.elem.maskManager.viewData[this.paths[t].m],n=this.paths[t].p,(r||this.filterManager._mdf||i.prop._mdf)&&n.setAttribute("d",i.lastPath),r||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var s;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,o=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,h=n.getTotalLength();s="0 0 0 "+h*a+" ";var u=h*(o-a),d=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,g=Math.floor(u/d),f;for(f=0;f<g;f+=1)s+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+h*10+" 0 0"}else s="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;n.setAttribute("stroke-dasharray",s)}if((r||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(r||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(r||this.filterManager.effectElements[3].p._mdf)){var m=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(m[0]*255)+","+bmFloor(m[1]*255)+","+bmFloor(m[2]*255)+")")}};function SVGTritoneFilter(r,t,e,i){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.appendChild(n);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),this.matrixFilter=s;var a=createNS("feFuncR");a.setAttribute("type","table"),s.appendChild(a),this.feFuncR=a;var o=createNS("feFuncG");o.setAttribute("type","table"),s.appendChild(o),this.feFuncG=o;var h=createNS("feFuncB");h.setAttribute("type","table"),s.appendChild(h),this.feFuncB=h,r.appendChild(s)}SVGTritoneFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,n=i[0]+" "+e[0]+" "+t[0],s=i[1]+" "+e[1]+" "+t[1],a=i[2]+" "+e[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",n),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",a)}};function SVGProLevelsFilter(r,t,e,i){this.filterManager=t;var n=this.filterManager.effectElements,s=createNS("feComponentTransfer");(n[10].p.k||n[10].p.v!==0||n[11].p.k||n[11].p.v!==1||n[12].p.k||n[12].p.v!==1||n[13].p.k||n[13].p.v!==0||n[14].p.k||n[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(n[17].p.k||n[17].p.v!==0||n[18].p.k||n[18].p.v!==1||n[19].p.k||n[19].p.v!==1||n[20].p.k||n[20].p.v!==0||n[21].p.k||n[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(n[24].p.k||n[24].p.v!==0||n[25].p.k||n[25].p.v!==1||n[26].p.k||n[26].p.v!==1||n[27].p.k||n[27].p.v!==0||n[28].p.k||n[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(n[31].p.k||n[31].p.v!==0||n[32].p.k||n[32].p.v!==1||n[33].p.k||n[33].p.v!==1||n[34].p.k||n[34].p.v!==0||n[35].p.k||n[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),r.appendChild(s)),(n[3].p.k||n[3].p.v!==0||n[4].p.k||n[4].p.v!==1||n[5].p.k||n[5].p.v!==1||n[6].p.k||n[6].p.v!==0||n[7].p.k||n[7].p.v!==1)&&(s=createNS("feComponentTransfer"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),r.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}SVGProLevelsFilter.prototype.createFeFunc=function(r,t){var e=createNS(r);return e.setAttribute("type","table"),t.appendChild(e),e},SVGProLevelsFilter.prototype.getTableValue=function(r,t,e,i,n){for(var s=0,a=256,o,h=Math.min(r,t),u=Math.max(r,t),d=Array.call(null,{length:a}),g,f=0,m=n-i,_=t-r;s<=256;)o=s/256,o<=h?g=_<0?n:i:o>=u?g=_<0?i:n:g=i+m*Math.pow((o-r)/_,1/e),d[f]=g,f+=1,s+=256/(a-1);return d.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var t,e=this.filterManager.effectElements;this.feFuncRComposed&&(r||e[3].p._mdf||e[4].p._mdf||e[5].p._mdf||e[6].p._mdf||e[7].p._mdf)&&(t=this.getTableValue(e[3].p.v,e[4].p.v,e[5].p.v,e[6].p.v,e[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(r||e[10].p._mdf||e[11].p._mdf||e[12].p._mdf||e[13].p._mdf||e[14].p._mdf)&&(t=this.getTableValue(e[10].p.v,e[11].p.v,e[12].p.v,e[13].p.v,e[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(r||e[17].p._mdf||e[18].p._mdf||e[19].p._mdf||e[20].p._mdf||e[21].p._mdf)&&(t=this.getTableValue(e[17].p.v,e[18].p.v,e[19].p.v,e[20].p.v,e[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(r||e[24].p._mdf||e[25].p._mdf||e[26].p._mdf||e[27].p._mdf||e[28].p._mdf)&&(t=this.getTableValue(e[24].p.v,e[25].p.v,e[26].p.v,e[27].p.v,e[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(r||e[31].p._mdf||e[32].p._mdf||e[33].p._mdf||e[34].p._mdf||e[35].p._mdf)&&(t=this.getTableValue(e[31].p.v,e[32].p.v,e[33].p.v,e[34].p.v,e[35].p.v),this.feFuncA.setAttribute("tableValues",t))}};function SVGDropShadowEffect(r,t,e,i,n){var s=t.container.globalData.renderConfig.filterSize,a=t.data.fs||s;r.setAttribute("x",a.x||s.x),r.setAttribute("y",a.y||s.y),r.setAttribute("width",a.width||s.width),r.setAttribute("height",a.height||s.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",i+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,r.appendChild(o);var h=createNS("feOffset");h.setAttribute("dx","25"),h.setAttribute("dy","0"),h.setAttribute("in",i+"_drop_shadow_1"),h.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=h,r.appendChild(h);var u=createNS("feFlood");u.setAttribute("flood-color","#00ff00"),u.setAttribute("flood-opacity","1"),u.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=u,r.appendChild(u);var d=createNS("feComposite");d.setAttribute("in",i+"_drop_shadow_3"),d.setAttribute("in2",i+"_drop_shadow_2"),d.setAttribute("operator","in"),d.setAttribute("result",i+"_drop_shadow_4"),r.appendChild(d);var g=this.createMergeNode(i,[i+"_drop_shadow_4",n]);r.appendChild(g)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){if((r||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),r||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(t[0]*255),Math.round(t[1]*255),Math.round(t[2]*255)))}if((r||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),r||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var e=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,n=e*Math.cos(i),s=e*Math.sin(i);this.feOffset.setAttribute("dx",n),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(r,t,e){this.initialized=!1,this.filterManager=t,this.filterElem=r,this.elem=e,e.matteElement=createNS("g"),e.matteElement.appendChild(e.layerElement),e.matteElement.appendChild(e.transformedElement),e.baseElement=e.matteElement}SVGMatte3Effect.prototype.findSymbol=function(r){for(var t=0,e=_svgMatteSymbols.length;t<e;){if(_svgMatteSymbols[t]===r)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(r,t){var e=r.layerElement.parentNode;if(!!e){for(var i=e.children,n=0,s=i.length;n<s&&i[n]!==r.layerElement;)n+=1;var a;n<=s-2&&(a=i[n+1]);var o=createNS("use");o.setAttribute("href","#"+t),a?e.insertBefore(o,a):e.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(r,t){if(!this.findSymbol(t)){var e=createElementID(),i=createNS("mask");i.setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var n=r.globalData.defs;n.appendChild(i);var s=createNS("symbol");s.setAttribute("id",e),this.replaceInParent(t,e),s.appendChild(t.layerElement),n.appendChild(s);var a=createNS("use");a.setAttribute("href","#"+e),i.appendChild(a),t.data.hd=!1,t.show()}r.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var r=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,e=0,i=t.length;e<i;)t[e]&&t[e].data.ind===r&&this.setElementAsMask(this.elem,t[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(r,t,e,i){r.setAttribute("x","-100%"),r.setAttribute("y","-100%"),r.setAttribute("width","300%"),r.setAttribute("height","300%"),this.filterManager=t;var n=createNS("feGaussianBlur");n.setAttribute("result",i),r.appendChild(n),this.feGaussianBlur=n}return SVGGaussianBlurEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var t=.3,e=this.filterManager.effectElements[0].p.v*t,i=this.filterManager.effectElements[1].p.v,n=i==3?0:e,s=i==2?0:e;this.feGaussianBlur.setAttribute("stdDeviation",n+" "+s);var a=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})});var Gw=mi(()=>{});var Ww=mi((Jf,Hw)=>{(function(r,t){typeof Jf=="object"&&typeof Hw!="undefined"?t(Jf):typeof define=="function"&&define.amd?define(["exports"],t):(r=r||self,t(r.acorn={}))})(Jf,function(r){"use strict";var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},e="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",i={5:e,"5module":e+" export import",6:e+" const class extends export import super"},n=/^in(stanceof)?$/,s="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",a="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",o=new RegExp("["+s+"]"),h=new RegExp("["+s+a+"]");s=a=null;var u=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],d=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function g(S,F){for(var st=65536,yt=0;yt<F.length;yt+=2){if(st+=F[yt],st>S)return!1;if(st+=F[yt+1],st>=S)return!0}}function f(S,F){return S<65?S===36:S<91?!0:S<97?S===95:S<123?!0:S<=65535?S>=170&&o.test(String.fromCharCode(S)):F===!1?!1:g(S,u)}function m(S,F){return S<48?S===36:S<58?!0:S<65?!1:S<91?!0:S<97?S===95:S<123?!0:S<=65535?S>=170&&h.test(String.fromCharCode(S)):F===!1?!1:g(S,u)||g(S,d)}var _=function(F,st){st===void 0&&(st={}),this.label=F,this.keyword=st.keyword,this.beforeExpr=!!st.beforeExpr,this.startsExpr=!!st.startsExpr,this.isLoop=!!st.isLoop,this.isAssign=!!st.isAssign,this.prefix=!!st.prefix,this.postfix=!!st.postfix,this.binop=st.binop||null,this.updateContext=null};function v(S,F){return new _(S,{beforeExpr:!0,binop:F})}var b={beforeExpr:!0},C={startsExpr:!0},M={};function E(S,F){return F===void 0&&(F={}),F.keyword=S,M[S]=new _(S,F)}var w={num:new _("num",C),regexp:new _("regexp",C),string:new _("string",C),name:new _("name",C),eof:new _("eof"),bracketL:new _("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new _("]"),braceL:new _("{",{beforeExpr:!0,startsExpr:!0}),braceR:new _("}"),parenL:new _("(",{beforeExpr:!0,startsExpr:!0}),parenR:new _(")"),comma:new _(",",b),semi:new _(";",b),colon:new _(":",b),dot:new _("."),question:new _("?",b),questionDot:new _("?."),arrow:new _("=>",b),template:new _("template"),invalidTemplate:new _("invalidTemplate"),ellipsis:new _("...",b),backQuote:new _("`",C),dollarBraceL:new _("${",{beforeExpr:!0,startsExpr:!0}),eq:new _("=",{beforeExpr:!0,isAssign:!0}),assign:new _("_=",{beforeExpr:!0,isAssign:!0}),incDec:new _("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new _("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:v("||",1),logicalAND:v("&&",2),bitwiseOR:v("|",3),bitwiseXOR:v("^",4),bitwiseAND:v("&",5),equality:v("==/!=/===/!==",6),relational:v("</>/<=/>=",7),bitShift:v("<</>>/>>>",8),plusMin:new _("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:v("%",10),star:v("*",10),slash:v("/",10),starstar:new _("**",{beforeExpr:!0}),coalesce:v("??",1),_break:E("break"),_case:E("case",b),_catch:E("catch"),_continue:E("continue"),_debugger:E("debugger"),_default:E("default",b),_do:E("do",{isLoop:!0,beforeExpr:!0}),_else:E("else",b),_finally:E("finally"),_for:E("for",{isLoop:!0}),_function:E("function",C),_if:E("if"),_return:E("return",b),_switch:E("switch"),_throw:E("throw",b),_try:E("try"),_var:E("var"),_const:E("const"),_while:E("while",{isLoop:!0}),_with:E("with"),_new:E("new",{beforeExpr:!0,startsExpr:!0}),_this:E("this",C),_super:E("super",C),_class:E("class",C),_extends:E("extends",b),_export:E("export"),_import:E("import",C),_null:E("null",C),_true:E("true",C),_false:E("false",C),_in:E("in",{beforeExpr:!0,binop:7}),_instanceof:E("instanceof",{beforeExpr:!0,binop:7}),_typeof:E("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:E("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:E("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},A=/\r\n?|\n|\u2028|\u2029/,R=new RegExp(A.source,"g");function N(S,F){return S===10||S===13||!F&&(S===8232||S===8233)}var D=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,X=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,at=Object.prototype,ft=at.hasOwnProperty,gt=at.toString;function ut(S,F){return ft.call(S,F)}var xt=Array.isArray||function(S){return gt.call(S)==="[object Array]"};function nt(S){return new RegExp("^(?:"+S.replace(/ /g,"|")+")$")}var it=function(F,st){this.line=F,this.column=st};it.prototype.offset=function(F){return new it(this.line,this.column+F)};var tt=function(F,st,yt){this.start=st,this.end=yt,F.sourceFile!==null&&(this.source=F.sourceFile)};function W(S,F){for(var st=1,yt=0;;){R.lastIndex=yt;var Ct=R.exec(S);if(Ct&&Ct.index<F)++st,yt=Ct.index+Ct[0].length;else return new it(st,F-yt)}}var Q={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function ot(S){var F={};for(var st in Q)F[st]=S&&ut(S,st)?S[st]:Q[st];if(F.ecmaVersion>=2015&&(F.ecmaVersion-=2009),F.allowReserved==null&&(F.allowReserved=F.ecmaVersion<5),xt(F.onToken)){var yt=F.onToken;F.onToken=function(Ct){return yt.push(Ct)}}return xt(F.onComment)&&(F.onComment=ct(F,F.onComment)),F}function ct(S,F){return function(st,yt,Ct,Ot,jt,se){var fe={type:st?"Block":"Line",value:yt,start:Ct,end:Ot};S.locations&&(fe.loc=new tt(this,jt,se)),S.ranges&&(fe.range=[Ct,Ot]),F.push(fe)}}var Tt=1,Rt=2,Pt=Tt|Rt,Nt=4,At=8,Qt=16,Vt=32,Yt=64,Xt=128;function re(S,F){return Rt|(S?Nt:0)|(F?At:0)}var qt=0,Ut=1,Lt=2,te=3,ge=4,Bt=5,oe=function(F,st,yt){this.options=F=ot(F),this.sourceFile=F.sourceFile,this.keywords=nt(i[F.ecmaVersion>=6?6:F.sourceType==="module"?"5module":5]);var Ct="";if(F.allowReserved!==!0){for(var Ot=F.ecmaVersion;!(Ct=t[Ot]);Ot--);F.sourceType==="module"&&(Ct+=" await")}this.reservedWords=nt(Ct);var jt=(Ct?Ct+" ":"")+t.strict;this.reservedWordsStrict=nt(jt),this.reservedWordsStrictBind=nt(jt+" "+t.strictBind),this.input=String(st),this.containsEsc=!1,yt?(this.pos=yt,this.lineStart=this.input.lastIndexOf(`
`,yt-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(A).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=F.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&F.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Tt),this.regexpState=null},le={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};oe.prototype.parse=function(){var F=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(F)},le.inFunction.get=function(){return(this.currentVarScope().flags&Rt)>0},le.inGenerator.get=function(){return(this.currentVarScope().flags&At)>0},le.inAsync.get=function(){return(this.currentVarScope().flags&Nt)>0},le.allowSuper.get=function(){return(this.currentThisScope().flags&Yt)>0},le.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Xt)>0},le.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},oe.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Rt)>0},oe.extend=function(){for(var F=[],st=arguments.length;st--;)F[st]=arguments[st];for(var yt=this,Ct=0;Ct<F.length;Ct++)yt=F[Ct](yt);return yt},oe.parse=function(F,st){return new this(st,F).parse()},oe.parseExpressionAt=function(F,st,yt){var Ct=new this(yt,F,st);return Ct.nextToken(),Ct.parseExpression()},oe.tokenizer=function(F,st){return new this(st,F)},Object.defineProperties(oe.prototype,le);var de=oe.prototype,Se=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;de.strictDirective=function(S){for(;;){X.lastIndex=S,S+=X.exec(this.input)[0].length;var F=Se.exec(this.input.slice(S));if(!F)return!1;if((F[1]||F[2])==="use strict"){X.lastIndex=S+F[0].length;var st=X.exec(this.input),yt=st.index+st[0].length,Ct=this.input.charAt(yt);return Ct===";"||Ct==="}"||A.test(st[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ct)||Ct==="!"&&this.input.charAt(yt+1)==="=")}S+=F[0].length,X.lastIndex=S,S+=X.exec(this.input)[0].length,this.input[S]===";"&&S++}},de.eat=function(S){return this.type===S?(this.next(),!0):!1},de.isContextual=function(S){return this.type===w.name&&this.value===S&&!this.containsEsc},de.eatContextual=function(S){return this.isContextual(S)?(this.next(),!0):!1},de.expectContextual=function(S){this.eatContextual(S)||this.unexpected()},de.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||A.test(this.input.slice(this.lastTokEnd,this.start))},de.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},de.semicolon=function(){!this.eat(w.semi)&&!this.insertSemicolon()&&this.unexpected()},de.afterTrailingComma=function(S,F){if(this.type===S)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),F||this.next(),!0},de.expect=function(S){this.eat(S)||this.unexpected()},de.unexpected=function(S){this.raise(S??this.start,"Unexpected token")};function wt(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}de.checkPatternErrors=function(S,F){if(!!S){S.trailingComma>-1&&this.raiseRecoverable(S.trailingComma,"Comma is not permitted after the rest element");var st=F?S.parenthesizedAssign:S.parenthesizedBind;st>-1&&this.raiseRecoverable(st,"Parenthesized pattern")}},de.checkExpressionErrors=function(S,F){if(!S)return!1;var st=S.shorthandAssign,yt=S.doubleProto;if(!F)return st>=0||yt>=0;st>=0&&this.raise(st,"Shorthand property assignments are valid only in destructuring patterns"),yt>=0&&this.raiseRecoverable(yt,"Redefinition of __proto__ property")},de.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},de.isSimpleAssignTarget=function(S){return S.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(S.expression):S.type==="Identifier"||S.type==="MemberExpression"};var mt=oe.prototype;mt.parseTopLevel=function(S){var F={};for(S.body||(S.body=[]);this.type!==w.eof;){var st=this.parseStatement(null,!0,F);S.body.push(st)}if(this.inModule)for(var yt=0,Ct=Object.keys(this.undefinedExports);yt<Ct.length;yt+=1){var Ot=Ct[yt];this.raiseRecoverable(this.undefinedExports[Ot].start,"Export '"+Ot+"' is not defined")}return this.adaptDirectivePrologue(S.body),this.next(),S.sourceType=this.options.sourceType,this.finishNode(S,"Program")};var Ft={kind:"loop"},l={kind:"switch"};mt.isLet=function(S){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;X.lastIndex=this.pos;var F=X.exec(this.input),st=this.pos+F[0].length,yt=this.input.charCodeAt(st);if(yt===91)return!0;if(S)return!1;if(yt===123)return!0;if(f(yt,!0)){for(var Ct=st+1;m(this.input.charCodeAt(Ct),!0);)++Ct;var Ot=this.input.slice(st,Ct);if(!n.test(Ot))return!0}return!1},mt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;X.lastIndex=this.pos;var S=X.exec(this.input),F=this.pos+S[0].length;return!A.test(this.input.slice(this.pos,F))&&this.input.slice(F,F+8)==="function"&&(F+8===this.input.length||!m(this.input.charAt(F+8)))},mt.parseStatement=function(S,F,st){var yt=this.type,Ct=this.startNode(),Ot;switch(this.isLet(S)&&(yt=w._var,Ot="let"),yt){case w._break:case w._continue:return this.parseBreakContinueStatement(Ct,yt.keyword);case w._debugger:return this.parseDebuggerStatement(Ct);case w._do:return this.parseDoStatement(Ct);case w._for:return this.parseForStatement(Ct);case w._function:return S&&(this.strict||S!=="if"&&S!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ct,!1,!S);case w._class:return S&&this.unexpected(),this.parseClass(Ct,!0);case w._if:return this.parseIfStatement(Ct);case w._return:return this.parseReturnStatement(Ct);case w._switch:return this.parseSwitchStatement(Ct);case w._throw:return this.parseThrowStatement(Ct);case w._try:return this.parseTryStatement(Ct);case w._const:case w._var:return Ot=Ot||this.value,S&&Ot!=="var"&&this.unexpected(),this.parseVarStatement(Ct,Ot);case w._while:return this.parseWhileStatement(Ct);case w._with:return this.parseWithStatement(Ct);case w.braceL:return this.parseBlock(!0,Ct);case w.semi:return this.parseEmptyStatement(Ct);case w._export:case w._import:if(this.options.ecmaVersion>10&&yt===w._import){X.lastIndex=this.pos;var jt=X.exec(this.input),se=this.pos+jt[0].length,fe=this.input.charCodeAt(se);if(fe===40||fe===46)return this.parseExpressionStatement(Ct,this.parseExpression())}return this.options.allowImportExportEverywhere||(F||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),yt===w._import?this.parseImport(Ct):this.parseExport(Ct,st);default:if(this.isAsyncFunction())return S&&this.unexpected(),this.next(),this.parseFunctionStatement(Ct,!0,!S);var Ce=this.value,De=this.parseExpression();return yt===w.name&&De.type==="Identifier"&&this.eat(w.colon)?this.parseLabeledStatement(Ct,Ce,De,S):this.parseExpressionStatement(Ct,De)}},mt.parseBreakContinueStatement=function(S,F){var st=F==="break";this.next(),this.eat(w.semi)||this.insertSemicolon()?S.label=null:this.type!==w.name?this.unexpected():(S.label=this.parseIdent(),this.semicolon());for(var yt=0;yt<this.labels.length;++yt){var Ct=this.labels[yt];if((S.label==null||Ct.name===S.label.name)&&(Ct.kind!=null&&(st||Ct.kind==="loop")||S.label&&st))break}return yt===this.labels.length&&this.raise(S.start,"Unsyntactic "+F),this.finishNode(S,st?"BreakStatement":"ContinueStatement")},mt.parseDebuggerStatement=function(S){return this.next(),this.semicolon(),this.finishNode(S,"DebuggerStatement")},mt.parseDoStatement=function(S){return this.next(),this.labels.push(Ft),S.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),S.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(S,"DoWhileStatement")},mt.parseForStatement=function(S){this.next();var F=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Ft),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return F>-1&&this.unexpected(F),this.parseFor(S,null);var st=this.isLet();if(this.type===w._var||this.type===w._const||st){var yt=this.startNode(),Ct=st?"let":this.value;return this.next(),this.parseVar(yt,!0,Ct),this.finishNode(yt,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&yt.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===w._in?F>-1&&this.unexpected(F):S.await=F>-1),this.parseForIn(S,yt)):(F>-1&&this.unexpected(F),this.parseFor(S,yt))}var Ot=new wt,jt=this.parseExpression(!0,Ot);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?F>-1&&this.unexpected(F):S.await=F>-1),this.toAssignable(jt,!1,Ot),this.checkLVal(jt),this.parseForIn(S,jt)):(this.checkExpressionErrors(Ot,!0),F>-1&&this.unexpected(F),this.parseFor(S,jt))},mt.parseFunctionStatement=function(S,F,st){return this.next(),this.parseFunction(S,p|(st?0:x),!1,F)},mt.parseIfStatement=function(S){return this.next(),S.test=this.parseParenExpression(),S.consequent=this.parseStatement("if"),S.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(S,"IfStatement")},mt.parseReturnStatement=function(S){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?S.argument=null:(S.argument=this.parseExpression(),this.semicolon()),this.finishNode(S,"ReturnStatement")},mt.parseSwitchStatement=function(S){this.next(),S.discriminant=this.parseParenExpression(),S.cases=[],this.expect(w.braceL),this.labels.push(l),this.enterScope(0);for(var F,st=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var yt=this.type===w._case;F&&this.finishNode(F,"SwitchCase"),S.cases.push(F=this.startNode()),F.consequent=[],this.next(),yt?F.test=this.parseExpression():(st&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),st=!0,F.test=null),this.expect(w.colon)}else F||this.unexpected(),F.consequent.push(this.parseStatement(null));return this.exitScope(),F&&this.finishNode(F,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(S,"SwitchStatement")},mt.parseThrowStatement=function(S){return this.next(),A.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),S.argument=this.parseExpression(),this.semicolon(),this.finishNode(S,"ThrowStatement")};var c=[];mt.parseTryStatement=function(S){if(this.next(),S.block=this.parseBlock(),S.handler=null,this.type===w._catch){var F=this.startNode();if(this.next(),this.eat(w.parenL)){F.param=this.parseBindingAtom();var st=F.param.type==="Identifier";this.enterScope(st?Vt:0),this.checkLVal(F.param,st?ge:Lt),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),F.param=null,this.enterScope(0);F.body=this.parseBlock(!1),this.exitScope(),S.handler=this.finishNode(F,"CatchClause")}return S.finalizer=this.eat(w._finally)?this.parseBlock():null,!S.handler&&!S.finalizer&&this.raise(S.start,"Missing catch or finally clause"),this.finishNode(S,"TryStatement")},mt.parseVarStatement=function(S,F){return this.next(),this.parseVar(S,!1,F),this.semicolon(),this.finishNode(S,"VariableDeclaration")},mt.parseWhileStatement=function(S){return this.next(),S.test=this.parseParenExpression(),this.labels.push(Ft),S.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(S,"WhileStatement")},mt.parseWithStatement=function(S){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),S.object=this.parseParenExpression(),S.body=this.parseStatement("with"),this.finishNode(S,"WithStatement")},mt.parseEmptyStatement=function(S){return this.next(),this.finishNode(S,"EmptyStatement")},mt.parseLabeledStatement=function(S,F,st,yt){for(var Ct=0,Ot=this.labels;Ct<Ot.length;Ct+=1){var jt=Ot[Ct];jt.name===F&&this.raise(st.start,"Label '"+F+"' is already declared")}for(var se=this.type.isLoop?"loop":this.type===w._switch?"switch":null,fe=this.labels.length-1;fe>=0;fe--){var Ce=this.labels[fe];if(Ce.statementStart===S.start)Ce.statementStart=this.start,Ce.kind=se;else break}return this.labels.push({name:F,kind:se,statementStart:this.start}),S.body=this.parseStatement(yt?yt.indexOf("label")===-1?yt+"label":yt:"label"),this.labels.pop(),S.label=st,this.finishNode(S,"LabeledStatement")},mt.parseExpressionStatement=function(S,F){return S.expression=F,this.semicolon(),this.finishNode(S,"ExpressionStatement")},mt.parseBlock=function(S,F,st){for(S===void 0&&(S=!0),F===void 0&&(F=this.startNode()),F.body=[],this.expect(w.braceL),S&&this.enterScope(0);this.type!==w.braceR;){var yt=this.parseStatement(null);F.body.push(yt)}return st&&(this.strict=!1),this.next(),S&&this.exitScope(),this.finishNode(F,"BlockStatement")},mt.parseFor=function(S,F){return S.init=F,this.expect(w.semi),S.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),S.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),S.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(S,"ForStatement")},mt.parseForIn=function(S,F){var st=this.type===w._in;return this.next(),F.type==="VariableDeclaration"&&F.declarations[0].init!=null&&(!st||this.options.ecmaVersion<8||this.strict||F.kind!=="var"||F.declarations[0].id.type!=="Identifier")?this.raise(F.start,(st?"for-in":"for-of")+" loop variable declaration may not have an initializer"):F.type==="AssignmentPattern"&&this.raise(F.start,"Invalid left-hand side in for-loop"),S.left=F,S.right=st?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),S.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(S,st?"ForInStatement":"ForOfStatement")},mt.parseVar=function(S,F,st){for(S.declarations=[],S.kind=st;;){var yt=this.startNode();if(this.parseVarId(yt,st),this.eat(w.eq)?yt.init=this.parseMaybeAssign(F):st==="const"&&!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():yt.id.type!=="Identifier"&&!(F&&(this.type===w._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):yt.init=null,S.declarations.push(this.finishNode(yt,"VariableDeclarator")),!this.eat(w.comma))break}return S},mt.parseVarId=function(S,F){S.id=this.parseBindingAtom(),this.checkLVal(S.id,F==="var"?Ut:Lt,!1)};var p=1,x=2,y=4;mt.parseFunction=function(S,F,st,yt){this.initFunction(S),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!yt)&&(this.type===w.star&&F&x&&this.unexpected(),S.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(S.async=!!yt),F&p&&(S.id=F&y&&this.type!==w.name?null:this.parseIdent(),S.id&&!(F&x)&&this.checkLVal(S.id,this.strict||S.generator||S.async?this.treatFunctionsAsVar?Ut:Lt:te));var Ct=this.yieldPos,Ot=this.awaitPos,jt=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(re(S.async,S.generator)),F&p||(S.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(S),this.parseFunctionBody(S,st,!1),this.yieldPos=Ct,this.awaitPos=Ot,this.awaitIdentPos=jt,this.finishNode(S,F&p?"FunctionDeclaration":"FunctionExpression")},mt.parseFunctionParams=function(S){this.expect(w.parenL),S.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},mt.parseClass=function(S,F){this.next();var st=this.strict;this.strict=!0,this.parseClassId(S,F),this.parseClassSuper(S);var yt=this.startNode(),Ct=!1;for(yt.body=[],this.expect(w.braceL);this.type!==w.braceR;){var Ot=this.parseClassElement(S.superClass!==null);Ot&&(yt.body.push(Ot),Ot.type==="MethodDefinition"&&Ot.kind==="constructor"&&(Ct&&this.raise(Ot.start,"Duplicate constructor in the same class"),Ct=!0))}return this.strict=st,this.next(),S.body=this.finishNode(yt,"ClassBody"),this.finishNode(S,F?"ClassDeclaration":"ClassExpression")},mt.parseClassElement=function(S){var F=this;if(this.eat(w.semi))return null;var st=this.startNode(),yt=function(fe,Ce){Ce===void 0&&(Ce=!1);var De=F.start,pi=F.startLoc;return F.eatContextual(fe)?F.type!==w.parenL&&(!Ce||!F.canInsertSemicolon())?!0:(st.key&&F.unexpected(),st.computed=!1,st.key=F.startNodeAt(De,pi),st.key.name=fe,F.finishNode(st.key,"Identifier"),!1):!1};st.kind="method",st.static=yt("static");var Ct=this.eat(w.star),Ot=!1;Ct||(this.options.ecmaVersion>=8&&yt("async",!0)?(Ot=!0,Ct=this.options.ecmaVersion>=9&&this.eat(w.star)):yt("get")?st.kind="get":yt("set")&&(st.kind="set")),st.key||this.parsePropertyName(st);var jt=st.key,se=!1;return!st.computed&&!st.static&&(jt.type==="Identifier"&&jt.name==="constructor"||jt.type==="Literal"&&jt.value==="constructor")?(st.kind!=="method"&&this.raise(jt.start,"Constructor can't have get/set modifier"),Ct&&this.raise(jt.start,"Constructor can't be a generator"),Ot&&this.raise(jt.start,"Constructor can't be an async method"),st.kind="constructor",se=S):st.static&&jt.type==="Identifier"&&jt.name==="prototype"&&this.raise(jt.start,"Classes may not have a static property named prototype"),this.parseClassMethod(st,Ct,Ot,se),st.kind==="get"&&st.value.params.length!==0&&this.raiseRecoverable(st.value.start,"getter should have no params"),st.kind==="set"&&st.value.params.length!==1&&this.raiseRecoverable(st.value.start,"setter should have exactly one param"),st.kind==="set"&&st.value.params[0].type==="RestElement"&&this.raiseRecoverable(st.value.params[0].start,"Setter cannot use rest params"),st},mt.parseClassMethod=function(S,F,st,yt){return S.value=this.parseMethod(F,st,yt),this.finishNode(S,"MethodDefinition")},mt.parseClassId=function(S,F){this.type===w.name?(S.id=this.parseIdent(),F&&this.checkLVal(S.id,Lt,!1)):(F===!0&&this.unexpected(),S.id=null)},mt.parseClassSuper=function(S){S.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},mt.parseExport=function(S,F){if(this.next(),this.eat(w.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(S.exported=this.parseIdent(!0),this.checkExport(F,S.exported.name,this.lastTokStart)):S.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),S.source=this.parseExprAtom(),this.semicolon(),this.finishNode(S,"ExportAllDeclaration");if(this.eat(w._default)){this.checkExport(F,"default",this.lastTokStart);var st;if(this.type===w._function||(st=this.isAsyncFunction())){var yt=this.startNode();this.next(),st&&this.next(),S.declaration=this.parseFunction(yt,p|y,!1,st)}else if(this.type===w._class){var Ct=this.startNode();S.declaration=this.parseClass(Ct,"nullableID")}else S.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(S,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())S.declaration=this.parseStatement(null),S.declaration.type==="VariableDeclaration"?this.checkVariableExport(F,S.declaration.declarations):this.checkExport(F,S.declaration.id.name,S.declaration.id.start),S.specifiers=[],S.source=null;else{if(S.declaration=null,S.specifiers=this.parseExportSpecifiers(F),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),S.source=this.parseExprAtom();else{for(var Ot=0,jt=S.specifiers;Ot<jt.length;Ot+=1){var se=jt[Ot];this.checkUnreserved(se.local),this.checkLocalExport(se.local)}S.source=null}this.semicolon()}return this.finishNode(S,"ExportNamedDeclaration")},mt.checkExport=function(S,F,st){!S||(ut(S,F)&&this.raiseRecoverable(st,"Duplicate export '"+F+"'"),S[F]=!0)},mt.checkPatternExport=function(S,F){var st=F.type;if(st==="Identifier")this.checkExport(S,F.name,F.start);else if(st==="ObjectPattern")for(var yt=0,Ct=F.properties;yt<Ct.length;yt+=1){var Ot=Ct[yt];this.checkPatternExport(S,Ot)}else if(st==="ArrayPattern")for(var jt=0,se=F.elements;jt<se.length;jt+=1){var fe=se[jt];fe&&this.checkPatternExport(S,fe)}else st==="Property"?this.checkPatternExport(S,F.value):st==="AssignmentPattern"?this.checkPatternExport(S,F.left):st==="RestElement"?this.checkPatternExport(S,F.argument):st==="ParenthesizedExpression"&&this.checkPatternExport(S,F.expression)},mt.checkVariableExport=function(S,F){if(!!S)for(var st=0,yt=F;st<yt.length;st+=1){var Ct=yt[st];this.checkPatternExport(S,Ct.id)}},mt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},mt.parseExportSpecifiers=function(S){var F=[],st=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(st)st=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var yt=this.startNode();yt.local=this.parseIdent(!0),yt.exported=this.eatContextual("as")?this.parseIdent(!0):yt.local,this.checkExport(S,yt.exported.name,yt.exported.start),F.push(this.finishNode(yt,"ExportSpecifier"))}return F},mt.parseImport=function(S){return this.next(),this.type===w.string?(S.specifiers=c,S.source=this.parseExprAtom()):(S.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),S.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(S,"ImportDeclaration")},mt.parseImportSpecifiers=function(){var S=[],F=!0;if(this.type===w.name){var st=this.startNode();if(st.local=this.parseIdent(),this.checkLVal(st.local,Lt),S.push(this.finishNode(st,"ImportDefaultSpecifier")),!this.eat(w.comma))return S}if(this.type===w.star){var yt=this.startNode();return this.next(),this.expectContextual("as"),yt.local=this.parseIdent(),this.checkLVal(yt.local,Lt),S.push(this.finishNode(yt,"ImportNamespaceSpecifier")),S}for(this.expect(w.braceL);!this.eat(w.braceR);){if(F)F=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var Ct=this.startNode();Ct.imported=this.parseIdent(!0),this.eatContextual("as")?Ct.local=this.parseIdent():(this.checkUnreserved(Ct.imported),Ct.local=Ct.imported),this.checkLVal(Ct.local,Lt),S.push(this.finishNode(Ct,"ImportSpecifier"))}return S},mt.adaptDirectivePrologue=function(S){for(var F=0;F<S.length&&this.isDirectiveCandidate(S[F]);++F)S[F].directive=S[F].expression.raw.slice(1,-1)},mt.isDirectiveCandidate=function(S){return S.type==="ExpressionStatement"&&S.expression.type==="Literal"&&typeof S.expression.value=="string"&&(this.input[S.start]==='"'||this.input[S.start]==="'")};var T=oe.prototype;T.toAssignable=function(S,F,st){if(this.options.ecmaVersion>=6&&S)switch(S.type){case"Identifier":this.inAsync&&S.name==="await"&&this.raise(S.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":S.type="ObjectPattern",st&&this.checkPatternErrors(st,!0);for(var yt=0,Ct=S.properties;yt<Ct.length;yt+=1){var Ot=Ct[yt];this.toAssignable(Ot,F),Ot.type==="RestElement"&&(Ot.argument.type==="ArrayPattern"||Ot.argument.type==="ObjectPattern")&&this.raise(Ot.argument.start,"Unexpected token")}break;case"Property":S.kind!=="init"&&this.raise(S.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(S.value,F);break;case"ArrayExpression":S.type="ArrayPattern",st&&this.checkPatternErrors(st,!0),this.toAssignableList(S.elements,F);break;case"SpreadElement":S.type="RestElement",this.toAssignable(S.argument,F),S.argument.type==="AssignmentPattern"&&this.raise(S.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":S.operator!=="="&&this.raise(S.left.end,"Only '=' operator can be used for specifying default value."),S.type="AssignmentPattern",delete S.operator,this.toAssignable(S.left,F);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(S.expression,F,st);break;case"ChainExpression":this.raiseRecoverable(S.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!F)break;default:this.raise(S.start,"Assigning to rvalue")}else st&&this.checkPatternErrors(st,!0);return S},T.toAssignableList=function(S,F){for(var st=S.length,yt=0;yt<st;yt++){var Ct=S[yt];Ct&&this.toAssignable(Ct,F)}if(st){var Ot=S[st-1];this.options.ecmaVersion===6&&F&&Ot&&Ot.type==="RestElement"&&Ot.argument.type!=="Identifier"&&this.unexpected(Ot.argument.start)}return S},T.parseSpread=function(S){var F=this.startNode();return this.next(),F.argument=this.parseMaybeAssign(!1,S),this.finishNode(F,"SpreadElement")},T.parseRestBinding=function(){var S=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==w.name&&this.unexpected(),S.argument=this.parseBindingAtom(),this.finishNode(S,"RestElement")},T.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var S=this.startNode();return this.next(),S.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(S,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},T.parseBindingList=function(S,F,st){for(var yt=[],Ct=!0;!this.eat(S);)if(Ct?Ct=!1:this.expect(w.comma),F&&this.type===w.comma)yt.push(null);else{if(st&&this.afterTrailingComma(S))break;if(this.type===w.ellipsis){var Ot=this.parseRestBinding();this.parseBindingListItem(Ot),yt.push(Ot),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(S);break}else{var jt=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(jt),yt.push(jt)}}return yt},T.parseBindingListItem=function(S){return S},T.parseMaybeDefault=function(S,F,st){if(st=st||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return st;var yt=this.startNodeAt(S,F);return yt.left=st,yt.right=this.parseMaybeAssign(),this.finishNode(yt,"AssignmentPattern")},T.checkLVal=function(S,F,st){switch(F===void 0&&(F=qt),S.type){case"Identifier":F===Lt&&S.name==="let"&&this.raiseRecoverable(S.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(S.name)&&this.raiseRecoverable(S.start,(F?"Binding ":"Assigning to ")+S.name+" in strict mode"),st&&(ut(st,S.name)&&this.raiseRecoverable(S.start,"Argument name clash"),st[S.name]=!0),F!==qt&&F!==Bt&&this.declareName(S.name,F,S.start);break;case"ChainExpression":this.raiseRecoverable(S.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":F&&this.raiseRecoverable(S.start,"Binding member expression");break;case"ObjectPattern":for(var yt=0,Ct=S.properties;yt<Ct.length;yt+=1){var Ot=Ct[yt];this.checkLVal(Ot,F,st)}break;case"Property":this.checkLVal(S.value,F,st);break;case"ArrayPattern":for(var jt=0,se=S.elements;jt<se.length;jt+=1){var fe=se[jt];fe&&this.checkLVal(fe,F,st)}break;case"AssignmentPattern":this.checkLVal(S.left,F,st);break;case"RestElement":this.checkLVal(S.argument,F,st);break;case"ParenthesizedExpression":this.checkLVal(S.expression,F,st);break;default:this.raise(S.start,(F?"Binding":"Assigning to")+" rvalue")}};var P=oe.prototype;P.checkPropClash=function(S,F,st){if(!(this.options.ecmaVersion>=9&&S.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(S.computed||S.method||S.shorthand))){var yt=S.key,Ct;switch(yt.type){case"Identifier":Ct=yt.name;break;case"Literal":Ct=String(yt.value);break;default:return}var Ot=S.kind;if(this.options.ecmaVersion>=6){Ct==="__proto__"&&Ot==="init"&&(F.proto&&(st?st.doubleProto<0&&(st.doubleProto=yt.start):this.raiseRecoverable(yt.start,"Redefinition of __proto__ property")),F.proto=!0);return}Ct="$"+Ct;var jt=F[Ct];if(jt){var se;Ot==="init"?se=this.strict&&jt.init||jt.get||jt.set:se=jt.init||jt[Ot],se&&this.raiseRecoverable(yt.start,"Redefinition of property")}else jt=F[Ct]={init:!1,get:!1,set:!1};jt[Ot]=!0}},P.parseExpression=function(S,F){var st=this.start,yt=this.startLoc,Ct=this.parseMaybeAssign(S,F);if(this.type===w.comma){var Ot=this.startNodeAt(st,yt);for(Ot.expressions=[Ct];this.eat(w.comma);)Ot.expressions.push(this.parseMaybeAssign(S,F));return this.finishNode(Ot,"SequenceExpression")}return Ct},P.parseMaybeAssign=function(S,F,st){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(S);this.exprAllowed=!1}var yt=!1,Ct=-1,Ot=-1;F?(Ct=F.parenthesizedAssign,Ot=F.trailingComma,F.parenthesizedAssign=F.trailingComma=-1):(F=new wt,yt=!0);var jt=this.start,se=this.startLoc;(this.type===w.parenL||this.type===w.name)&&(this.potentialArrowAt=this.start);var fe=this.parseMaybeConditional(S,F);if(st&&(fe=st.call(this,fe,jt,se)),this.type.isAssign){var Ce=this.startNodeAt(jt,se);return Ce.operator=this.value,Ce.left=this.type===w.eq?this.toAssignable(fe,!1,F):fe,yt||(F.parenthesizedAssign=F.trailingComma=F.doubleProto=-1),F.shorthandAssign>=Ce.left.start&&(F.shorthandAssign=-1),this.checkLVal(fe),this.next(),Ce.right=this.parseMaybeAssign(S),this.finishNode(Ce,"AssignmentExpression")}else yt&&this.checkExpressionErrors(F,!0);return Ct>-1&&(F.parenthesizedAssign=Ct),Ot>-1&&(F.trailingComma=Ot),fe},P.parseMaybeConditional=function(S,F){var st=this.start,yt=this.startLoc,Ct=this.parseExprOps(S,F);if(this.checkExpressionErrors(F))return Ct;if(this.eat(w.question)){var Ot=this.startNodeAt(st,yt);return Ot.test=Ct,Ot.consequent=this.parseMaybeAssign(),this.expect(w.colon),Ot.alternate=this.parseMaybeAssign(S),this.finishNode(Ot,"ConditionalExpression")}return Ct},P.parseExprOps=function(S,F){var st=this.start,yt=this.startLoc,Ct=this.parseMaybeUnary(F,!1);return this.checkExpressionErrors(F)||Ct.start===st&&Ct.type==="ArrowFunctionExpression"?Ct:this.parseExprOp(Ct,st,yt,-1,S)},P.parseExprOp=function(S,F,st,yt,Ct){var Ot=this.type.binop;if(Ot!=null&&(!Ct||this.type!==w._in)&&Ot>yt){var jt=this.type===w.logicalOR||this.type===w.logicalAND,se=this.type===w.coalesce;se&&(Ot=w.logicalAND.binop);var fe=this.value;this.next();var Ce=this.start,De=this.startLoc,pi=this.parseExprOp(this.parseMaybeUnary(null,!1),Ce,De,Ot,Ct),Dn=this.buildBinary(F,st,S,pi,fe,jt||se);return(jt&&this.type===w.coalesce||se&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Dn,F,st,yt,Ct)}return S},P.buildBinary=function(S,F,st,yt,Ct,Ot){var jt=this.startNodeAt(S,F);return jt.left=st,jt.operator=Ct,jt.right=yt,this.finishNode(jt,Ot?"LogicalExpression":"BinaryExpression")},P.parseMaybeUnary=function(S,F){var st=this.start,yt=this.startLoc,Ct;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))Ct=this.parseAwait(),F=!0;else if(this.type.prefix){var Ot=this.startNode(),jt=this.type===w.incDec;Ot.operator=this.value,Ot.prefix=!0,this.next(),Ot.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(S,!0),jt?this.checkLVal(Ot.argument):this.strict&&Ot.operator==="delete"&&Ot.argument.type==="Identifier"?this.raiseRecoverable(Ot.start,"Deleting local variable in strict mode"):F=!0,Ct=this.finishNode(Ot,jt?"UpdateExpression":"UnaryExpression")}else{if(Ct=this.parseExprSubscripts(S),this.checkExpressionErrors(S))return Ct;for(;this.type.postfix&&!this.canInsertSemicolon();){var se=this.startNodeAt(st,yt);se.operator=this.value,se.prefix=!1,se.argument=Ct,this.checkLVal(Ct),this.next(),Ct=this.finishNode(se,"UpdateExpression")}}return!F&&this.eat(w.starstar)?this.buildBinary(st,yt,Ct,this.parseMaybeUnary(null,!1),"**",!1):Ct},P.parseExprSubscripts=function(S){var F=this.start,st=this.startLoc,yt=this.parseExprAtom(S);if(yt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return yt;var Ct=this.parseSubscripts(yt,F,st);return S&&Ct.type==="MemberExpression"&&(S.parenthesizedAssign>=Ct.start&&(S.parenthesizedAssign=-1),S.parenthesizedBind>=Ct.start&&(S.parenthesizedBind=-1)),Ct},P.parseSubscripts=function(S,F,st,yt){for(var Ct=this.options.ecmaVersion>=8&&S.type==="Identifier"&&S.name==="async"&&this.lastTokEnd===S.end&&!this.canInsertSemicolon()&&S.end-S.start==5&&this.potentialArrowAt===S.start,Ot=!1;;){var jt=this.parseSubscript(S,F,st,yt,Ct,Ot);if(jt.optional&&(Ot=!0),jt===S||jt.type==="ArrowFunctionExpression"){if(Ot){var se=this.startNodeAt(F,st);se.expression=jt,jt=this.finishNode(se,"ChainExpression")}return jt}S=jt}},P.parseSubscript=function(S,F,st,yt,Ct,Ot){var jt=this.options.ecmaVersion>=11,se=jt&&this.eat(w.questionDot);yt&&se&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var fe=this.eat(w.bracketL);if(fe||se&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var Ce=this.startNodeAt(F,st);Ce.object=S,Ce.property=fe?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),Ce.computed=!!fe,fe&&this.expect(w.bracketR),jt&&(Ce.optional=se),S=this.finishNode(Ce,"MemberExpression")}else if(!yt&&this.eat(w.parenL)){var De=new wt,pi=this.yieldPos,Dn=this.awaitPos,es=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ca=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,De);if(Ct&&!se&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(De,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=pi,this.awaitPos=Dn,this.awaitIdentPos=es,this.parseArrowExpression(this.startNodeAt(F,st),Ca,!0);this.checkExpressionErrors(De,!0),this.yieldPos=pi||this.yieldPos,this.awaitPos=Dn||this.awaitPos,this.awaitIdentPos=es||this.awaitIdentPos;var is=this.startNodeAt(F,st);is.callee=S,is.arguments=Ca,jt&&(is.optional=se),S=this.finishNode(is,"CallExpression")}else if(this.type===w.backQuote){(se||Ot)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var rs=this.startNodeAt(F,st);rs.tag=S,rs.quasi=this.parseTemplate({isTagged:!0}),S=this.finishNode(rs,"TaggedTemplateExpression")}return S},P.parseExprAtom=function(S){this.type===w.slash&&this.readRegexp();var F,st=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),F=this.startNode(),this.next(),this.type===w.parenL&&!this.allowDirectSuper&&this.raise(F.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(F,"Super");case w._this:return F=this.startNode(),this.next(),this.finishNode(F,"ThisExpression");case w.name:var yt=this.start,Ct=this.startLoc,Ot=this.containsEsc,jt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ot&&jt.name==="async"&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(yt,Ct),0,!1,!0);if(st&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(yt,Ct),[jt],!1);if(this.options.ecmaVersion>=8&&jt.name==="async"&&this.type===w.name&&!Ot)return jt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(w.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(yt,Ct),[jt],!0)}return jt;case w.regexp:var se=this.value;return F=this.parseLiteral(se.value),F.regex={pattern:se.pattern,flags:se.flags},F;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return F=this.startNode(),F.value=this.type===w._null?null:this.type===w._true,F.raw=this.type.keyword,this.next(),this.finishNode(F,"Literal");case w.parenL:var fe=this.start,Ce=this.parseParenAndDistinguishExpression(st);return S&&(S.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Ce)&&(S.parenthesizedAssign=fe),S.parenthesizedBind<0&&(S.parenthesizedBind=fe)),Ce;case w.bracketL:return F=this.startNode(),this.next(),F.elements=this.parseExprList(w.bracketR,!0,!0,S),this.finishNode(F,"ArrayExpression");case w.braceL:return this.parseObj(!1,S);case w._function:return F=this.startNode(),this.next(),this.parseFunction(F,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},P.parseExprImport=function(){var S=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var F=this.parseIdent(!0);switch(this.type){case w.parenL:return this.parseDynamicImport(S);case w.dot:return S.meta=F,this.parseImportMeta(S);default:this.unexpected()}},P.parseDynamicImport=function(S){if(this.next(),S.source=this.parseMaybeAssign(),!this.eat(w.parenR)){var F=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(F,"Trailing comma is not allowed in import()"):this.unexpected(F)}return this.finishNode(S,"ImportExpression")},P.parseImportMeta=function(S){this.next();var F=this.containsEsc;return S.property=this.parseIdent(!0),S.property.name!=="meta"&&this.raiseRecoverable(S.property.start,"The only valid meta property for import is 'import.meta'"),F&&this.raiseRecoverable(S.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(S.start,"Cannot use 'import.meta' outside a module"),this.finishNode(S,"MetaProperty")},P.parseLiteral=function(S){var F=this.startNode();return F.value=S,F.raw=this.input.slice(this.start,this.end),F.raw.charCodeAt(F.raw.length-1)===110&&(F.bigint=F.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(F,"Literal")},P.parseParenExpression=function(){this.expect(w.parenL);var S=this.parseExpression();return this.expect(w.parenR),S},P.parseParenAndDistinguishExpression=function(S){var F=this.start,st=this.startLoc,yt,Ct=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Ot=this.start,jt=this.startLoc,se=[],fe=!0,Ce=!1,De=new wt,pi=this.yieldPos,Dn=this.awaitPos,es;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;)if(fe?fe=!1:this.expect(w.comma),Ct&&this.afterTrailingComma(w.parenR,!0)){Ce=!0;break}else if(this.type===w.ellipsis){es=this.start,se.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else se.push(this.parseMaybeAssign(!1,De,this.parseParenItem));var Ca=this.start,is=this.startLoc;if(this.expect(w.parenR),S&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(De,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=pi,this.awaitPos=Dn,this.parseParenArrowList(F,st,se);(!se.length||Ce)&&this.unexpected(this.lastTokStart),es&&this.unexpected(es),this.checkExpressionErrors(De,!0),this.yieldPos=pi||this.yieldPos,this.awaitPos=Dn||this.awaitPos,se.length>1?(yt=this.startNodeAt(Ot,jt),yt.expressions=se,this.finishNodeAt(yt,"SequenceExpression",Ca,is)):yt=se[0]}else yt=this.parseParenExpression();if(this.options.preserveParens){var rs=this.startNodeAt(F,st);return rs.expression=yt,this.finishNode(rs,"ParenthesizedExpression")}else return yt},P.parseParenItem=function(S){return S},P.parseParenArrowList=function(S,F,st){return this.parseArrowExpression(this.startNodeAt(S,F),st)};var I=[];P.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var S=this.startNode(),F=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){S.meta=F;var st=this.containsEsc;return S.property=this.parseIdent(!0),S.property.name!=="target"&&this.raiseRecoverable(S.property.start,"The only valid meta property for new is 'new.target'"),st&&this.raiseRecoverable(S.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(S.start,"'new.target' can only be used in functions"),this.finishNode(S,"MetaProperty")}var yt=this.start,Ct=this.startLoc,Ot=this.type===w._import;return S.callee=this.parseSubscripts(this.parseExprAtom(),yt,Ct,!0),Ot&&S.callee.type==="ImportExpression"&&this.raise(yt,"Cannot use new with import()"),this.eat(w.parenL)?S.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):S.arguments=I,this.finishNode(S,"NewExpression")},P.parseTemplateElement=function(S){var F=S.isTagged,st=this.startNode();return this.type===w.invalidTemplate?(F||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),st.value={raw:this.value,cooked:null}):st.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),st.tail=this.type===w.backQuote,this.finishNode(st,"TemplateElement")},P.parseTemplate=function(S){S===void 0&&(S={});var F=S.isTagged;F===void 0&&(F=!1);var st=this.startNode();this.next(),st.expressions=[];var yt=this.parseTemplateElement({isTagged:F});for(st.quasis=[yt];!yt.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),st.expressions.push(this.parseExpression()),this.expect(w.braceR),st.quasis.push(yt=this.parseTemplateElement({isTagged:F}));return this.next(),this.finishNode(st,"TemplateLiteral")},P.isAsyncProp=function(S){return!S.computed&&S.key.type==="Identifier"&&S.key.name==="async"&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!A.test(this.input.slice(this.lastTokEnd,this.start))},P.parseObj=function(S,F){var st=this.startNode(),yt=!0,Ct={};for(st.properties=[],this.next();!this.eat(w.braceR);){if(yt)yt=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var Ot=this.parseProperty(S,F);S||this.checkPropClash(Ot,Ct,F),st.properties.push(Ot)}return this.finishNode(st,S?"ObjectPattern":"ObjectExpression")},P.parseProperty=function(S,F){var st=this.startNode(),yt,Ct,Ot,jt;if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return S?(st.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(st,"RestElement")):(this.type===w.parenL&&F&&(F.parenthesizedAssign<0&&(F.parenthesizedAssign=this.start),F.parenthesizedBind<0&&(F.parenthesizedBind=this.start)),st.argument=this.parseMaybeAssign(!1,F),this.type===w.comma&&F&&F.trailingComma<0&&(F.trailingComma=this.start),this.finishNode(st,"SpreadElement"));this.options.ecmaVersion>=6&&(st.method=!1,st.shorthand=!1,(S||F)&&(Ot=this.start,jt=this.startLoc),S||(yt=this.eat(w.star)));var se=this.containsEsc;return this.parsePropertyName(st),!S&&!se&&this.options.ecmaVersion>=8&&!yt&&this.isAsyncProp(st)?(Ct=!0,yt=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(st,F)):Ct=!1,this.parsePropertyValue(st,S,yt,Ct,Ot,jt,F,se),this.finishNode(st,"Property")},P.parsePropertyValue=function(S,F,st,yt,Ct,Ot,jt,se){if((st||yt)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))S.value=F?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,jt),S.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)F&&this.unexpected(),S.kind="init",S.method=!0,S.value=this.parseMethod(st,yt);else if(!F&&!se&&this.options.ecmaVersion>=5&&!S.computed&&S.key.type==="Identifier"&&(S.key.name==="get"||S.key.name==="set")&&this.type!==w.comma&&this.type!==w.braceR&&this.type!==w.eq){(st||yt)&&this.unexpected(),S.kind=S.key.name,this.parsePropertyName(S),S.value=this.parseMethod(!1);var fe=S.kind==="get"?0:1;if(S.value.params.length!==fe){var Ce=S.value.start;S.kind==="get"?this.raiseRecoverable(Ce,"getter should have no params"):this.raiseRecoverable(Ce,"setter should have exactly one param")}else S.kind==="set"&&S.value.params[0].type==="RestElement"&&this.raiseRecoverable(S.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!S.computed&&S.key.type==="Identifier"?((st||yt)&&this.unexpected(),this.checkUnreserved(S.key),S.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ct),S.kind="init",F?S.value=this.parseMaybeDefault(Ct,Ot,S.key):this.type===w.eq&&jt?(jt.shorthandAssign<0&&(jt.shorthandAssign=this.start),S.value=this.parseMaybeDefault(Ct,Ot,S.key)):S.value=S.key,S.shorthand=!0):this.unexpected()},P.parsePropertyName=function(S){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return S.computed=!0,S.key=this.parseMaybeAssign(),this.expect(w.bracketR),S.key;S.computed=!1}return S.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},P.initFunction=function(S){S.id=null,this.options.ecmaVersion>=6&&(S.generator=S.expression=!1),this.options.ecmaVersion>=8&&(S.async=!1)},P.parseMethod=function(S,F,st){var yt=this.startNode(),Ct=this.yieldPos,Ot=this.awaitPos,jt=this.awaitIdentPos;return this.initFunction(yt),this.options.ecmaVersion>=6&&(yt.generator=S),this.options.ecmaVersion>=8&&(yt.async=!!F),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(re(F,yt.generator)|Yt|(st?Xt:0)),this.expect(w.parenL),yt.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(yt,!1,!0),this.yieldPos=Ct,this.awaitPos=Ot,this.awaitIdentPos=jt,this.finishNode(yt,"FunctionExpression")},P.parseArrowExpression=function(S,F,st){var yt=this.yieldPos,Ct=this.awaitPos,Ot=this.awaitIdentPos;return this.enterScope(re(st,!1)|Qt),this.initFunction(S),this.options.ecmaVersion>=8&&(S.async=!!st),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,S.params=this.toAssignableList(F,!0),this.parseFunctionBody(S,!0,!1),this.yieldPos=yt,this.awaitPos=Ct,this.awaitIdentPos=Ot,this.finishNode(S,"ArrowFunctionExpression")},P.parseFunctionBody=function(S,F,st){var yt=F&&this.type!==w.braceL,Ct=this.strict,Ot=!1;if(yt)S.body=this.parseMaybeAssign(),S.expression=!0,this.checkParams(S,!1);else{var jt=this.options.ecmaVersion>=7&&!this.isSimpleParamList(S.params);(!Ct||jt)&&(Ot=this.strictDirective(this.end),Ot&&jt&&this.raiseRecoverable(S.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var se=this.labels;this.labels=[],Ot&&(this.strict=!0),this.checkParams(S,!Ct&&!Ot&&!F&&!st&&this.isSimpleParamList(S.params)),this.strict&&S.id&&this.checkLVal(S.id,Bt),S.body=this.parseBlock(!1,void 0,Ot&&!Ct),S.expression=!1,this.adaptDirectivePrologue(S.body.body),this.labels=se}this.exitScope()},P.isSimpleParamList=function(S){for(var F=0,st=S;F<st.length;F+=1){var yt=st[F];if(yt.type!=="Identifier")return!1}return!0},P.checkParams=function(S,F){for(var st={},yt=0,Ct=S.params;yt<Ct.length;yt+=1){var Ot=Ct[yt];this.checkLVal(Ot,Ut,F?null:st)}},P.parseExprList=function(S,F,st,yt){for(var Ct=[],Ot=!0;!this.eat(S);){if(Ot)Ot=!1;else if(this.expect(w.comma),F&&this.afterTrailingComma(S))break;var jt=void 0;st&&this.type===w.comma?jt=null:this.type===w.ellipsis?(jt=this.parseSpread(yt),yt&&this.type===w.comma&&yt.trailingComma<0&&(yt.trailingComma=this.start)):jt=this.parseMaybeAssign(!1,yt),Ct.push(jt)}return Ct},P.checkUnreserved=function(S){var F=S.start,st=S.end,yt=S.name;if(this.inGenerator&&yt==="yield"&&this.raiseRecoverable(F,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&yt==="await"&&this.raiseRecoverable(F,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(yt)&&this.raise(F,"Unexpected keyword '"+yt+"'"),!(this.options.ecmaVersion<6&&this.input.slice(F,st).indexOf("\\")!==-1)){var Ct=this.strict?this.reservedWordsStrict:this.reservedWords;Ct.test(yt)&&(!this.inAsync&&yt==="await"&&this.raiseRecoverable(F,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(F,"The keyword '"+yt+"' is reserved"))}},P.parseIdent=function(S,F){var st=this.startNode();return this.type===w.name?st.name=this.value:this.type.keyword?(st.name=this.type.keyword,(st.name==="class"||st.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!S),this.finishNode(st,"Identifier"),S||(this.checkUnreserved(st),st.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=st.start)),st},P.parseYield=function(S){this.yieldPos||(this.yieldPos=this.start);var F=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(F.delegate=!1,F.argument=null):(F.delegate=this.eat(w.star),F.argument=this.parseMaybeAssign(S)),this.finishNode(F,"YieldExpression")},P.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var S=this.startNode();return this.next(),S.argument=this.parseMaybeUnary(null,!1),this.finishNode(S,"AwaitExpression")};var L=oe.prototype;L.raise=function(S,F){var st=W(this.input,S);F+=" ("+st.line+":"+st.column+")";var yt=new SyntaxError(F);throw yt.pos=S,yt.loc=st,yt.raisedAt=this.pos,yt},L.raiseRecoverable=L.raise,L.curPosition=function(){if(this.options.locations)return new it(this.curLine,this.pos-this.lineStart)};var k=oe.prototype,G=function(F){this.flags=F,this.var=[],this.lexical=[],this.functions=[]};k.enterScope=function(S){this.scopeStack.push(new G(S))},k.exitScope=function(){this.scopeStack.pop()},k.treatFunctionsAsVarInScope=function(S){return S.flags&Rt||!this.inModule&&S.flags&Tt},k.declareName=function(S,F,st){var yt=!1;if(F===Lt){var Ct=this.currentScope();yt=Ct.lexical.indexOf(S)>-1||Ct.functions.indexOf(S)>-1||Ct.var.indexOf(S)>-1,Ct.lexical.push(S),this.inModule&&Ct.flags&Tt&&delete this.undefinedExports[S]}else if(F===ge){var Ot=this.currentScope();Ot.lexical.push(S)}else if(F===te){var jt=this.currentScope();this.treatFunctionsAsVar?yt=jt.lexical.indexOf(S)>-1:yt=jt.lexical.indexOf(S)>-1||jt.var.indexOf(S)>-1,jt.functions.push(S)}else for(var se=this.scopeStack.length-1;se>=0;--se){var fe=this.scopeStack[se];if(fe.lexical.indexOf(S)>-1&&!(fe.flags&Vt&&fe.lexical[0]===S)||!this.treatFunctionsAsVarInScope(fe)&&fe.functions.indexOf(S)>-1){yt=!0;break}if(fe.var.push(S),this.inModule&&fe.flags&Tt&&delete this.undefinedExports[S],fe.flags&Pt)break}yt&&this.raiseRecoverable(st,"Identifier '"+S+"' has already been declared")},k.checkLocalExport=function(S){this.scopeStack[0].lexical.indexOf(S.name)===-1&&this.scopeStack[0].var.indexOf(S.name)===-1&&(this.undefinedExports[S.name]=S)},k.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},k.currentVarScope=function(){for(var S=this.scopeStack.length-1;;S--){var F=this.scopeStack[S];if(F.flags&Pt)return F}},k.currentThisScope=function(){for(var S=this.scopeStack.length-1;;S--){var F=this.scopeStack[S];if(F.flags&Pt&&!(F.flags&Qt))return F}};var V=function(F,st,yt){this.type="",this.start=st,this.end=0,F.options.locations&&(this.loc=new tt(F,yt)),F.options.directSourceFile&&(this.sourceFile=F.options.directSourceFile),F.options.ranges&&(this.range=[st,0])},H=oe.prototype;H.startNode=function(){return new V(this,this.start,this.startLoc)},H.startNodeAt=function(S,F){return new V(this,S,F)};function Y(S,F,st,yt){return S.type=F,S.end=st,this.options.locations&&(S.loc.end=yt),this.options.ranges&&(S.range[1]=st),S}H.finishNode=function(S,F){return Y.call(this,S,F,this.lastTokEnd,this.lastTokEndLoc)},H.finishNodeAt=function(S,F,st,yt){return Y.call(this,S,F,st,yt)};var B=function(F,st,yt,Ct,Ot){this.token=F,this.isExpr=!!st,this.preserveSpace=!!yt,this.override=Ct,this.generator=!!Ot},z={b_stat:new B("{",!1),b_expr:new B("{",!0),b_tmpl:new B("${",!1),p_stat:new B("(",!1),p_expr:new B("(",!0),q_tmpl:new B("`",!0,!0,function(S){return S.tryReadTemplateToken()}),f_stat:new B("function",!1),f_expr:new B("function",!0),f_expr_gen:new B("function",!0,!1,null,!0),f_gen:new B("function",!1,!1,null,!0)},$=oe.prototype;$.initialContext=function(){return[z.b_stat]},$.braceIsBlock=function(S){var F=this.curContext();return F===z.f_expr||F===z.f_stat?!0:S===w.colon&&(F===z.b_stat||F===z.b_expr)?!F.isExpr:S===w._return||S===w.name&&this.exprAllowed?A.test(this.input.slice(this.lastTokEnd,this.start)):S===w._else||S===w.semi||S===w.eof||S===w.parenR||S===w.arrow?!0:S===w.braceL?F===z.b_stat:S===w._var||S===w._const||S===w.name?!1:!this.exprAllowed},$.inGeneratorContext=function(){for(var S=this.context.length-1;S>=1;S--){var F=this.context[S];if(F.token==="function")return F.generator}return!1},$.updateContext=function(S){var F,st=this.type;st.keyword&&S===w.dot?this.exprAllowed=!1:(F=st.updateContext)?F.call(this,S):this.exprAllowed=st.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var S=this.context.pop();S===z.b_stat&&this.curContext().token==="function"&&(S=this.context.pop()),this.exprAllowed=!S.isExpr},w.braceL.updateContext=function(S){this.context.push(this.braceIsBlock(S)?z.b_stat:z.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(z.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(S){var F=S===w._if||S===w._for||S===w._with||S===w._while;this.context.push(F?z.p_stat:z.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(S){S.beforeExpr&&S!==w.semi&&S!==w._else&&!(S===w._return&&A.test(this.input.slice(this.lastTokEnd,this.start)))&&!((S===w.colon||S===w.braceL)&&this.curContext()===z.b_stat)?this.context.push(z.f_expr):this.context.push(z.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===z.q_tmpl?this.context.pop():this.context.push(z.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(S){if(S===w._function){var F=this.context.length-1;this.context[F]===z.f_expr?this.context[F]=z.f_expr_gen:this.context[F]=z.f_gen}this.exprAllowed=!0},w.name.updateContext=function(S){var F=!1;this.options.ecmaVersion>=6&&S!==w.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(F=!0),this.exprAllowed=F};var j="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",et=j+" Extended_Pictographic",q=et,J={9:j,10:et,11:q},U="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",K="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",O=K+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",rt=O+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",lt={9:K,10:O,11:rt},pt={};function bt(S){var F=pt[S]={binary:nt(J[S]+" "+U),nonBinary:{General_Category:nt(U),Script:nt(lt[S])}};F.nonBinary.Script_Extensions=F.nonBinary.Script,F.nonBinary.gc=F.nonBinary.General_Category,F.nonBinary.sc=F.nonBinary.Script,F.nonBinary.scx=F.nonBinary.Script_Extensions}bt(9),bt(10),bt(11);var dt=oe.prototype,St=function(F){this.parser=F,this.validFlags="gim"+(F.options.ecmaVersion>=6?"uy":"")+(F.options.ecmaVersion>=9?"s":""),this.unicodeProperties=pt[F.options.ecmaVersion>=11?11:F.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};St.prototype.reset=function(F,st,yt){var Ct=yt.indexOf("u")!==-1;this.start=F|0,this.source=st+"",this.flags=yt,this.switchU=Ct&&this.parser.options.ecmaVersion>=6,this.switchN=Ct&&this.parser.options.ecmaVersion>=9},St.prototype.raise=function(F){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+F)},St.prototype.at=function(F,st){st===void 0&&(st=!1);var yt=this.source,Ct=yt.length;if(F>=Ct)return-1;var Ot=yt.charCodeAt(F);if(!(st||this.switchU)||Ot<=55295||Ot>=57344||F+1>=Ct)return Ot;var jt=yt.charCodeAt(F+1);return jt>=56320&&jt<=57343?(Ot<<10)+jt-56613888:Ot},St.prototype.nextIndex=function(F,st){st===void 0&&(st=!1);var yt=this.source,Ct=yt.length;if(F>=Ct)return Ct;var Ot=yt.charCodeAt(F),jt;return!(st||this.switchU)||Ot<=55295||Ot>=57344||F+1>=Ct||(jt=yt.charCodeAt(F+1))<56320||jt>57343?F+1:F+2},St.prototype.current=function(F){return F===void 0&&(F=!1),this.at(this.pos,F)},St.prototype.lookahead=function(F){return F===void 0&&(F=!1),this.at(this.nextIndex(this.pos,F),F)},St.prototype.advance=function(F){F===void 0&&(F=!1),this.pos=this.nextIndex(this.pos,F)},St.prototype.eat=function(F,st){return st===void 0&&(st=!1),this.current(st)===F?(this.advance(st),!0):!1};function Z(S){return S<=65535?String.fromCharCode(S):(S-=65536,String.fromCharCode((S>>10)+55296,(S&1023)+56320))}dt.validateRegExpFlags=function(S){for(var F=S.validFlags,st=S.flags,yt=0;yt<st.length;yt++){var Ct=st.charAt(yt);F.indexOf(Ct)===-1&&this.raise(S.start,"Invalid regular expression flag"),st.indexOf(Ct,yt+1)>-1&&this.raise(S.start,"Duplicate regular expression flag")}},dt.validateRegExpPattern=function(S){this.regexp_pattern(S),!S.switchN&&this.options.ecmaVersion>=9&&S.groupNames.length>0&&(S.switchN=!0,this.regexp_pattern(S))},dt.regexp_pattern=function(S){S.pos=0,S.lastIntValue=0,S.lastStringValue="",S.lastAssertionIsQuantifiable=!1,S.numCapturingParens=0,S.maxBackReference=0,S.groupNames.length=0,S.backReferenceNames.length=0,this.regexp_disjunction(S),S.pos!==S.source.length&&(S.eat(41)&&S.raise("Unmatched ')'"),(S.eat(93)||S.eat(125))&&S.raise("Lone quantifier brackets")),S.maxBackReference>S.numCapturingParens&&S.raise("Invalid escape");for(var F=0,st=S.backReferenceNames;F<st.length;F+=1){var yt=st[F];S.groupNames.indexOf(yt)===-1&&S.raise("Invalid named capture referenced")}},dt.regexp_disjunction=function(S){for(this.regexp_alternative(S);S.eat(124);)this.regexp_alternative(S);this.regexp_eatQuantifier(S,!0)&&S.raise("Nothing to repeat"),S.eat(123)&&S.raise("Lone quantifier brackets")},dt.regexp_alternative=function(S){for(;S.pos<S.source.length&&this.regexp_eatTerm(S););},dt.regexp_eatTerm=function(S){return this.regexp_eatAssertion(S)?(S.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(S)&&S.switchU&&S.raise("Invalid quantifier"),!0):(S.switchU?this.regexp_eatAtom(S):this.regexp_eatExtendedAtom(S))?(this.regexp_eatQuantifier(S),!0):!1},dt.regexp_eatAssertion=function(S){var F=S.pos;if(S.lastAssertionIsQuantifiable=!1,S.eat(94)||S.eat(36))return!0;if(S.eat(92)){if(S.eat(66)||S.eat(98))return!0;S.pos=F}if(S.eat(40)&&S.eat(63)){var st=!1;if(this.options.ecmaVersion>=9&&(st=S.eat(60)),S.eat(61)||S.eat(33))return this.regexp_disjunction(S),S.eat(41)||S.raise("Unterminated group"),S.lastAssertionIsQuantifiable=!st,!0}return S.pos=F,!1},dt.regexp_eatQuantifier=function(S,F){return F===void 0&&(F=!1),this.regexp_eatQuantifierPrefix(S,F)?(S.eat(63),!0):!1},dt.regexp_eatQuantifierPrefix=function(S,F){return S.eat(42)||S.eat(43)||S.eat(63)||this.regexp_eatBracedQuantifier(S,F)},dt.regexp_eatBracedQuantifier=function(S,F){var st=S.pos;if(S.eat(123)){var yt=0,Ct=-1;if(this.regexp_eatDecimalDigits(S)&&(yt=S.lastIntValue,S.eat(44)&&this.regexp_eatDecimalDigits(S)&&(Ct=S.lastIntValue),S.eat(125)))return Ct!==-1&&Ct<yt&&!F&&S.raise("numbers out of order in {} quantifier"),!0;S.switchU&&!F&&S.raise("Incomplete quantifier"),S.pos=st}return!1},dt.regexp_eatAtom=function(S){return this.regexp_eatPatternCharacters(S)||S.eat(46)||this.regexp_eatReverseSolidusAtomEscape(S)||this.regexp_eatCharacterClass(S)||this.regexp_eatUncapturingGroup(S)||this.regexp_eatCapturingGroup(S)},dt.regexp_eatReverseSolidusAtomEscape=function(S){var F=S.pos;if(S.eat(92)){if(this.regexp_eatAtomEscape(S))return!0;S.pos=F}return!1},dt.regexp_eatUncapturingGroup=function(S){var F=S.pos;if(S.eat(40)){if(S.eat(63)&&S.eat(58)){if(this.regexp_disjunction(S),S.eat(41))return!0;S.raise("Unterminated group")}S.pos=F}return!1},dt.regexp_eatCapturingGroup=function(S){if(S.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(S):S.current()===63&&S.raise("Invalid group"),this.regexp_disjunction(S),S.eat(41))return S.numCapturingParens+=1,!0;S.raise("Unterminated group")}return!1},dt.regexp_eatExtendedAtom=function(S){return S.eat(46)||this.regexp_eatReverseSolidusAtomEscape(S)||this.regexp_eatCharacterClass(S)||this.regexp_eatUncapturingGroup(S)||this.regexp_eatCapturingGroup(S)||this.regexp_eatInvalidBracedQuantifier(S)||this.regexp_eatExtendedPatternCharacter(S)},dt.regexp_eatInvalidBracedQuantifier=function(S){return this.regexp_eatBracedQuantifier(S,!0)&&S.raise("Nothing to repeat"),!1},dt.regexp_eatSyntaxCharacter=function(S){var F=S.current();return ht(F)?(S.lastIntValue=F,S.advance(),!0):!1};function ht(S){return S===36||S>=40&&S<=43||S===46||S===63||S>=91&&S<=94||S>=123&&S<=125}dt.regexp_eatPatternCharacters=function(S){for(var F=S.pos,st=0;(st=S.current())!==-1&&!ht(st);)S.advance();return S.pos!==F},dt.regexp_eatExtendedPatternCharacter=function(S){var F=S.current();return F!==-1&&F!==36&&!(F>=40&&F<=43)&&F!==46&&F!==63&&F!==91&&F!==94&&F!==124?(S.advance(),!0):!1},dt.regexp_groupSpecifier=function(S){if(S.eat(63)){if(this.regexp_eatGroupName(S)){S.groupNames.indexOf(S.lastStringValue)!==-1&&S.raise("Duplicate capture group name"),S.groupNames.push(S.lastStringValue);return}S.raise("Invalid group")}},dt.regexp_eatGroupName=function(S){if(S.lastStringValue="",S.eat(60)){if(this.regexp_eatRegExpIdentifierName(S)&&S.eat(62))return!0;S.raise("Invalid capture group name")}return!1},dt.regexp_eatRegExpIdentifierName=function(S){if(S.lastStringValue="",this.regexp_eatRegExpIdentifierStart(S)){for(S.lastStringValue+=Z(S.lastIntValue);this.regexp_eatRegExpIdentifierPart(S);)S.lastStringValue+=Z(S.lastIntValue);return!0}return!1},dt.regexp_eatRegExpIdentifierStart=function(S){var F=S.pos,st=this.options.ecmaVersion>=11,yt=S.current(st);return S.advance(st),yt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(S,st)&&(yt=S.lastIntValue),vt(yt)?(S.lastIntValue=yt,!0):(S.pos=F,!1)};function vt(S){return f(S,!0)||S===36||S===95}dt.regexp_eatRegExpIdentifierPart=function(S){var F=S.pos,st=this.options.ecmaVersion>=11,yt=S.current(st);return S.advance(st),yt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(S,st)&&(yt=S.lastIntValue),_t(yt)?(S.lastIntValue=yt,!0):(S.pos=F,!1)};function _t(S){return m(S,!0)||S===36||S===95||S===8204||S===8205}dt.regexp_eatAtomEscape=function(S){return this.regexp_eatBackReference(S)||this.regexp_eatCharacterClassEscape(S)||this.regexp_eatCharacterEscape(S)||S.switchN&&this.regexp_eatKGroupName(S)?!0:(S.switchU&&(S.current()===99&&S.raise("Invalid unicode escape"),S.raise("Invalid escape")),!1)},dt.regexp_eatBackReference=function(S){var F=S.pos;if(this.regexp_eatDecimalEscape(S)){var st=S.lastIntValue;if(S.switchU)return st>S.maxBackReference&&(S.maxBackReference=st),!0;if(st<=S.numCapturingParens)return!0;S.pos=F}return!1},dt.regexp_eatKGroupName=function(S){if(S.eat(107)){if(this.regexp_eatGroupName(S))return S.backReferenceNames.push(S.lastStringValue),!0;S.raise("Invalid named reference")}return!1},dt.regexp_eatCharacterEscape=function(S){return this.regexp_eatControlEscape(S)||this.regexp_eatCControlLetter(S)||this.regexp_eatZero(S)||this.regexp_eatHexEscapeSequence(S)||this.regexp_eatRegExpUnicodeEscapeSequence(S,!1)||!S.switchU&&this.regexp_eatLegacyOctalEscapeSequence(S)||this.regexp_eatIdentityEscape(S)},dt.regexp_eatCControlLetter=function(S){var F=S.pos;if(S.eat(99)){if(this.regexp_eatControlLetter(S))return!0;S.pos=F}return!1},dt.regexp_eatZero=function(S){return S.current()===48&&!Wt(S.lookahead())?(S.lastIntValue=0,S.advance(),!0):!1},dt.regexp_eatControlEscape=function(S){var F=S.current();return F===116?(S.lastIntValue=9,S.advance(),!0):F===110?(S.lastIntValue=10,S.advance(),!0):F===118?(S.lastIntValue=11,S.advance(),!0):F===102?(S.lastIntValue=12,S.advance(),!0):F===114?(S.lastIntValue=13,S.advance(),!0):!1},dt.regexp_eatControlLetter=function(S){var F=S.current();return Mt(F)?(S.lastIntValue=F%32,S.advance(),!0):!1};function Mt(S){return S>=65&&S<=90||S>=97&&S<=122}dt.regexp_eatRegExpUnicodeEscapeSequence=function(S,F){F===void 0&&(F=!1);var st=S.pos,yt=F||S.switchU;if(S.eat(117)){if(this.regexp_eatFixedHexDigits(S,4)){var Ct=S.lastIntValue;if(yt&&Ct>=55296&&Ct<=56319){var Ot=S.pos;if(S.eat(92)&&S.eat(117)&&this.regexp_eatFixedHexDigits(S,4)){var jt=S.lastIntValue;if(jt>=56320&&jt<=57343)return S.lastIntValue=(Ct-55296)*1024+(jt-56320)+65536,!0}S.pos=Ot,S.lastIntValue=Ct}return!0}if(yt&&S.eat(123)&&this.regexp_eatHexDigits(S)&&S.eat(125)&&kt(S.lastIntValue))return!0;yt&&S.raise("Invalid unicode escape"),S.pos=st}return!1};function kt(S){return S>=0&&S<=1114111}dt.regexp_eatIdentityEscape=function(S){if(S.switchU)return this.regexp_eatSyntaxCharacter(S)?!0:S.eat(47)?(S.lastIntValue=47,!0):!1;var F=S.current();return F!==99&&(!S.switchN||F!==107)?(S.lastIntValue=F,S.advance(),!0):!1},dt.regexp_eatDecimalEscape=function(S){S.lastIntValue=0;var F=S.current();if(F>=49&&F<=57){do S.lastIntValue=10*S.lastIntValue+(F-48),S.advance();while((F=S.current())>=48&&F<=57);return!0}return!1},dt.regexp_eatCharacterClassEscape=function(S){var F=S.current();if(Gt(F))return S.lastIntValue=-1,S.advance(),!0;if(S.switchU&&this.options.ecmaVersion>=9&&(F===80||F===112)){if(S.lastIntValue=-1,S.advance(),S.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(S)&&S.eat(125))return!0;S.raise("Invalid property name")}return!1};function Gt(S){return S===100||S===68||S===115||S===83||S===119||S===87}dt.regexp_eatUnicodePropertyValueExpression=function(S){var F=S.pos;if(this.regexp_eatUnicodePropertyName(S)&&S.eat(61)){var st=S.lastStringValue;if(this.regexp_eatUnicodePropertyValue(S)){var yt=S.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(S,st,yt),!0}}if(S.pos=F,this.regexp_eatLoneUnicodePropertyNameOrValue(S)){var Ct=S.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(S,Ct),!0}return!1},dt.regexp_validateUnicodePropertyNameAndValue=function(S,F,st){ut(S.unicodeProperties.nonBinary,F)||S.raise("Invalid property name"),S.unicodeProperties.nonBinary[F].test(st)||S.raise("Invalid property value")},dt.regexp_validateUnicodePropertyNameOrValue=function(S,F){S.unicodeProperties.binary.test(F)||S.raise("Invalid property name")},dt.regexp_eatUnicodePropertyName=function(S){var F=0;for(S.lastStringValue="";Ht(F=S.current());)S.lastStringValue+=Z(F),S.advance();return S.lastStringValue!==""};function Ht(S){return Mt(S)||S===95}dt.regexp_eatUnicodePropertyValue=function(S){var F=0;for(S.lastStringValue="";Dt(F=S.current());)S.lastStringValue+=Z(F),S.advance();return S.lastStringValue!==""};function Dt(S){return Ht(S)||Wt(S)}dt.regexp_eatLoneUnicodePropertyNameOrValue=function(S){return this.regexp_eatUnicodePropertyValue(S)},dt.regexp_eatCharacterClass=function(S){if(S.eat(91)){if(S.eat(94),this.regexp_classRanges(S),S.eat(93))return!0;S.raise("Unterminated character class")}return!1},dt.regexp_classRanges=function(S){for(;this.regexp_eatClassAtom(S);){var F=S.lastIntValue;if(S.eat(45)&&this.regexp_eatClassAtom(S)){var st=S.lastIntValue;S.switchU&&(F===-1||st===-1)&&S.raise("Invalid character class"),F!==-1&&st!==-1&&F>st&&S.raise("Range out of order in character class")}}},dt.regexp_eatClassAtom=function(S){var F=S.pos;if(S.eat(92)){if(this.regexp_eatClassEscape(S))return!0;if(S.switchU){var st=S.current();(st===99||ee(st))&&S.raise("Invalid class escape"),S.raise("Invalid escape")}S.pos=F}var yt=S.current();return yt!==93?(S.lastIntValue=yt,S.advance(),!0):!1},dt.regexp_eatClassEscape=function(S){var F=S.pos;if(S.eat(98))return S.lastIntValue=8,!0;if(S.switchU&&S.eat(45))return S.lastIntValue=45,!0;if(!S.switchU&&S.eat(99)){if(this.regexp_eatClassControlLetter(S))return!0;S.pos=F}return this.regexp_eatCharacterClassEscape(S)||this.regexp_eatCharacterEscape(S)},dt.regexp_eatClassControlLetter=function(S){var F=S.current();return Wt(F)||F===95?(S.lastIntValue=F%32,S.advance(),!0):!1},dt.regexp_eatHexEscapeSequence=function(S){var F=S.pos;if(S.eat(120)){if(this.regexp_eatFixedHexDigits(S,2))return!0;S.switchU&&S.raise("Invalid escape"),S.pos=F}return!1},dt.regexp_eatDecimalDigits=function(S){var F=S.pos,st=0;for(S.lastIntValue=0;Wt(st=S.current());)S.lastIntValue=10*S.lastIntValue+(st-48),S.advance();return S.pos!==F};function Wt(S){return S>=48&&S<=57}dt.regexp_eatHexDigits=function(S){var F=S.pos,st=0;for(S.lastIntValue=0;zt(st=S.current());)S.lastIntValue=16*S.lastIntValue+Kt(st),S.advance();return S.pos!==F};function zt(S){return S>=48&&S<=57||S>=65&&S<=70||S>=97&&S<=102}function Kt(S){return S>=65&&S<=70?10+(S-65):S>=97&&S<=102?10+(S-97):S-48}dt.regexp_eatLegacyOctalEscapeSequence=function(S){if(this.regexp_eatOctalDigit(S)){var F=S.lastIntValue;if(this.regexp_eatOctalDigit(S)){var st=S.lastIntValue;F<=3&&this.regexp_eatOctalDigit(S)?S.lastIntValue=F*64+st*8+S.lastIntValue:S.lastIntValue=F*8+st}else S.lastIntValue=F;return!0}return!1},dt.regexp_eatOctalDigit=function(S){var F=S.current();return ee(F)?(S.lastIntValue=F-48,S.advance(),!0):(S.lastIntValue=0,!1)};function ee(S){return S>=48&&S<=55}dt.regexp_eatFixedHexDigits=function(S,F){var st=S.pos;S.lastIntValue=0;for(var yt=0;yt<F;++yt){var Ct=S.current();if(!zt(Ct))return S.pos=st,!1;S.lastIntValue=16*S.lastIntValue+Kt(Ct),S.advance()}return!0};var ue=function(F){this.type=F.type,this.value=F.value,this.start=F.start,this.end=F.end,F.options.locations&&(this.loc=new tt(F,F.startLoc,F.endLoc)),F.options.ranges&&(this.range=[F.start,F.end])},ne=oe.prototype;ne.next=function(S){!S&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ue(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ne.getToken=function(){return this.next(),new ue(this)},typeof Symbol!="undefined"&&(ne[Symbol.iterator]=function(){var S=this;return{next:function(){var F=S.getToken();return{done:F.type===w.eof,value:F}}}}),ne.curContext=function(){return this.context[this.context.length-1]},ne.nextToken=function(){var S=this.curContext();if((!S||!S.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(w.eof);if(S.override)return S.override(this);this.readToken(this.fullCharCodeAtPos())},ne.readToken=function(S){return f(S,this.options.ecmaVersion>=6)||S===92?this.readWord():this.getTokenFromCode(S)},ne.fullCharCodeAtPos=function(){var S=this.input.charCodeAt(this.pos);if(S<=55295||S>=57344)return S;var F=this.input.charCodeAt(this.pos+1);return(S<<10)+F-56613888},ne.skipBlockComment=function(){var S=this.options.onComment&&this.curPosition(),F=this.pos,st=this.input.indexOf("*/",this.pos+=2);if(st===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=st+2,this.options.locations){R.lastIndex=F;for(var yt;(yt=R.exec(this.input))&&yt.index<this.pos;)++this.curLine,this.lineStart=yt.index+yt[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(F+2,st),F,this.pos,S,this.curPosition())},ne.skipLineComment=function(S){for(var F=this.pos,st=this.options.onComment&&this.curPosition(),yt=this.input.charCodeAt(this.pos+=S);this.pos<this.input.length&&!N(yt);)yt=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(F+S,this.pos),F,this.pos,st,this.curPosition())},ne.skipSpace=function(){t:for(;this.pos<this.input.length;){var S=this.input.charCodeAt(this.pos);switch(S){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(S>8&&S<14||S>=5760&&D.test(String.fromCharCode(S)))++this.pos;else break t}}},ne.finishToken=function(S,F){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var st=this.type;this.type=S,this.value=F,this.updateContext(st)},ne.readToken_dot=function(){var S=this.input.charCodeAt(this.pos+1);if(S>=48&&S<=57)return this.readNumber(!0);var F=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&S===46&&F===46?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},ne.readToken_slash=function(){var S=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):S===61?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},ne.readToken_mult_modulo_exp=function(S){var F=this.input.charCodeAt(this.pos+1),st=1,yt=S===42?w.star:w.modulo;return this.options.ecmaVersion>=7&&S===42&&F===42&&(++st,yt=w.starstar,F=this.input.charCodeAt(this.pos+2)),F===61?this.finishOp(w.assign,st+1):this.finishOp(yt,st)},ne.readToken_pipe_amp=function(S){var F=this.input.charCodeAt(this.pos+1);if(F===S){if(this.options.ecmaVersion>=12){var st=this.input.charCodeAt(this.pos+2);if(st===61)return this.finishOp(w.assign,3)}return this.finishOp(S===124?w.logicalOR:w.logicalAND,2)}return F===61?this.finishOp(w.assign,2):this.finishOp(S===124?w.bitwiseOR:w.bitwiseAND,1)},ne.readToken_caret=function(){var S=this.input.charCodeAt(this.pos+1);return S===61?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},ne.readToken_plus_min=function(S){var F=this.input.charCodeAt(this.pos+1);return F===S?F===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||A.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(w.incDec,2):F===61?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},ne.readToken_lt_gt=function(S){var F=this.input.charCodeAt(this.pos+1),st=1;return F===S?(st=S===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+st)===61?this.finishOp(w.assign,st+1):this.finishOp(w.bitShift,st)):F===33&&S===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(F===61&&(st=2),this.finishOp(w.relational,st))},ne.readToken_eq_excl=function(S){var F=this.input.charCodeAt(this.pos+1);return F===61?this.finishOp(w.equality,this.input.charCodeAt(this.pos+2)===61?3:2):S===61&&F===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(S===61?w.eq:w.prefix,1)},ne.readToken_question=function(){var S=this.options.ecmaVersion;if(S>=11){var F=this.input.charCodeAt(this.pos+1);if(F===46){var st=this.input.charCodeAt(this.pos+2);if(st<48||st>57)return this.finishOp(w.questionDot,2)}if(F===63){if(S>=12){var yt=this.input.charCodeAt(this.pos+2);if(yt===61)return this.finishOp(w.assign,3)}return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},ne.getTokenFromCode=function(S){switch(S){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var F=this.input.charCodeAt(this.pos+1);if(F===120||F===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(F===111||F===79)return this.readRadixNumber(8);if(F===98||F===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(S);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(S);case 124:case 38:return this.readToken_pipe_amp(S);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(S);case 60:case 62:return this.readToken_lt_gt(S);case 61:case 33:return this.readToken_eq_excl(S);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+ae(S)+"'")},ne.finishOp=function(S,F){var st=this.input.slice(this.pos,this.pos+F);return this.pos+=F,this.finishToken(S,st)},ne.readRegexp=function(){for(var S,F,st=this.pos;;){this.pos>=this.input.length&&this.raise(st,"Unterminated regular expression");var yt=this.input.charAt(this.pos);if(A.test(yt)&&this.raise(st,"Unterminated regular expression"),S)S=!1;else{if(yt==="[")F=!0;else if(yt==="]"&&F)F=!1;else if(yt==="/"&&!F)break;S=yt==="\\"}++this.pos}var Ct=this.input.slice(st,this.pos);++this.pos;var Ot=this.pos,jt=this.readWord1();this.containsEsc&&this.unexpected(Ot);var se=this.regexpState||(this.regexpState=new St(this));se.reset(st,Ct,jt),this.validateRegExpFlags(se),this.validateRegExpPattern(se);var fe=null;try{fe=new RegExp(Ct,jt)}catch{}return this.finishToken(w.regexp,{pattern:Ct,flags:jt,value:fe})},ne.readInt=function(S,F,st){for(var yt=this.options.ecmaVersion>=12&&F===void 0,Ct=st&&this.input.charCodeAt(this.pos)===48,Ot=this.pos,jt=0,se=0,fe=0,Ce=F??1/0;fe<Ce;++fe,++this.pos){var De=this.input.charCodeAt(this.pos),pi=void 0;if(yt&&De===95){Ct&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),se===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),fe===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),se=De;continue}if(De>=97?pi=De-97+10:De>=65?pi=De-65+10:De>=48&&De<=57?pi=De-48:pi=1/0,pi>=S)break;se=De,jt=jt*S+pi}return yt&&se===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Ot||F!=null&&this.pos-Ot!==F?null:jt};function me(S,F){return F?parseInt(S,8):parseFloat(S.replace(/_/g,""))}function ce(S){return typeof BigInt!="function"?null:BigInt(S.replace(/_/g,""))}ne.readRadixNumber=function(S){var F=this.pos;this.pos+=2;var st=this.readInt(S);return st==null&&this.raise(this.start+2,"Expected number in radix "+S),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(st=ce(this.input.slice(F,this.pos)),++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,st)},ne.readNumber=function(S){var F=this.pos;!S&&this.readInt(10,void 0,!0)===null&&this.raise(F,"Invalid number");var st=this.pos-F>=2&&this.input.charCodeAt(F)===48;st&&this.strict&&this.raise(F,"Invalid number");var yt=this.input.charCodeAt(this.pos);if(!st&&!S&&this.options.ecmaVersion>=11&&yt===110){var Ct=ce(this.input.slice(F,this.pos));return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,Ct)}st&&/[89]/.test(this.input.slice(F,this.pos))&&(st=!1),yt===46&&!st&&(++this.pos,this.readInt(10),yt=this.input.charCodeAt(this.pos)),(yt===69||yt===101)&&!st&&(yt=this.input.charCodeAt(++this.pos),(yt===43||yt===45)&&++this.pos,this.readInt(10)===null&&this.raise(F,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Ot=me(this.input.slice(F,this.pos),st);return this.finishToken(w.num,Ot)},ne.readCodePoint=function(){var S=this.input.charCodeAt(this.pos),F;if(S===123){this.options.ecmaVersion<6&&this.unexpected();var st=++this.pos;F=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,F>1114111&&this.invalidStringToken(st,"Code point out of bounds")}else F=this.readHexChar(4);return F};function ae(S){return S<=65535?String.fromCharCode(S):(S-=65536,String.fromCharCode((S>>10)+55296,(S&1023)+56320))}ne.readString=function(S){for(var F="",st=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var yt=this.input.charCodeAt(this.pos);if(yt===S)break;yt===92?(F+=this.input.slice(st,this.pos),F+=this.readEscapedChar(!1),st=this.pos):(N(yt,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return F+=this.input.slice(st,this.pos++),this.finishToken(w.string,F)};var Ze={};ne.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(S){if(S===Ze)this.readInvalidTemplateToken();else throw S}this.inTemplateElement=!1},ne.invalidStringToken=function(S,F){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ze;this.raise(S,F)},ne.readTmplToken=function(){for(var S="",F=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var st=this.input.charCodeAt(this.pos);if(st===96||st===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===w.template||this.type===w.invalidTemplate)?st===36?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote)):(S+=this.input.slice(F,this.pos),this.finishToken(w.template,S));if(st===92)S+=this.input.slice(F,this.pos),S+=this.readEscapedChar(!0),F=this.pos;else if(N(st)){switch(S+=this.input.slice(F,this.pos),++this.pos,st){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:S+=`
`;break;default:S+=String.fromCharCode(st);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),F=this.pos}else++this.pos}},ne.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ne.readEscapedChar=function(S){var F=this.input.charCodeAt(++this.pos);switch(++this.pos,F){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ae(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(S){var st=this.pos-1;return this.invalidStringToken(st,"Invalid escape sequence in template string"),null}default:if(F>=48&&F<=55){var yt=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ct=parseInt(yt,8);return Ct>255&&(yt=yt.slice(0,-1),Ct=parseInt(yt,8)),this.pos+=yt.length-1,F=this.input.charCodeAt(this.pos),(yt!=="0"||F===56||F===57)&&(this.strict||S)&&this.invalidStringToken(this.pos-1-yt.length,S?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ct)}return N(F)?"":String.fromCharCode(F)}},ne.readHexChar=function(S){var F=this.pos,st=this.readInt(16,S);return st===null&&this.invalidStringToken(F,"Bad character escape sequence"),st},ne.readWord1=function(){this.containsEsc=!1;for(var S="",F=!0,st=this.pos,yt=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ct=this.fullCharCodeAtPos();if(m(Ct,yt))this.pos+=Ct<=65535?1:2;else if(Ct===92){this.containsEsc=!0,S+=this.input.slice(st,this.pos);var Ot=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var jt=this.readCodePoint();(F?f:m)(jt,yt)||this.invalidStringToken(Ot,"Invalid Unicode escape"),S+=ae(jt),st=this.pos}else break;F=!1}return S+this.input.slice(st,this.pos)},ne.readWord=function(){var S=this.readWord1(),F=w.name;return this.keywords.test(S)&&(F=M[S]),this.finishToken(F,S)};var Ee="7.4.1";oe.acorn={Parser:oe,version:Ee,defaultOptions:Q,Position:it,SourceLocation:tt,getLineInfo:W,Node:V,TokenType:_,tokTypes:w,keywordTypes:M,TokContext:B,tokContexts:z,isIdentifierChar:m,isIdentifierStart:f,Token:ue,isNewLine:N,lineBreak:A,lineBreakG:R,nonASCIIwhitespace:D};function qe(S,F){return oe.parse(S,F)}function $e(S,F,st){return oe.parseExpressionAt(S,F,st)}function Re(S,F){return oe.tokenizer(S,F)}r.Node=V,r.Parser=oe,r.Position=it,r.SourceLocation=tt,r.TokContext=B,r.Token=ue,r.TokenType=_,r.defaultOptions=Q,r.getLineInfo=W,r.isIdentifierChar=m,r.isIdentifierStart=f,r.isNewLine=N,r.keywordTypes=M,r.lineBreak=A,r.lineBreakG=R,r.nonASCIIwhitespace=D,r.parse=qe,r.parseExpressionAt=$e,r.tokContexts=z,r.tokTypes=w,r.tokenizer=Re,r.version=Ee,Object.defineProperty(r,"__esModule",{value:!0})})});var Xw=mi(()=>{});var Yw=mi((qw,Nl)=>{var K6=function(r,t){r=r||Gw();var e=r.window,i=r.document,n=new function(){var l=/^(statics|enumerable|beans|preserve)$/,c=[],p=c.slice,x=Object.create,y=Object.getOwnPropertyDescriptor,T=Object.defineProperty,P=c.forEach||function(H,Y){for(var B=0,z=this.length;B<z;B++)H.call(Y,this[B],B,this)},I=function(H,Y){for(var B in this)this.hasOwnProperty(B)&&H.call(Y,this[B],B,this)},L=Object.assign||function(H){for(var Y=1,B=arguments.length;Y<B;Y++){var z=arguments[Y];for(var $ in z)z.hasOwnProperty($)&&(H[$]=z[$])}return H},k=function(H,Y,B){if(H){var z=y(H,"length");(z&&typeof z.value=="number"?P:I).call(H,Y,B=B||H)}return B};function G(H,Y,B,z,$){var j={};function et(O,rt){rt=rt||(rt=y(Y,O))&&(rt.get?rt:rt.value),typeof rt=="string"&&rt[0]==="#"&&(rt=H[rt.substring(1)]||rt);var lt=typeof rt=="function",pt=rt,bt=$||lt&&!rt.base?rt&&rt.get?O in H:H[O]:null,dt;(!$||!bt)&&(lt&&bt&&(rt.base=bt),lt&&z!==!1&&(dt=O.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(j[dt[3].toLowerCase()+dt[4]]=dt[2]),(!pt||lt||!pt.get||typeof pt.get!="function"||!V.isPlainObject(pt))&&(pt={value:pt,writable:!0}),(y(H,O)||{configurable:!0}).configurable&&(pt.configurable=!0,pt.enumerable=B??!dt),T(H,O,pt))}if(Y){for(var q in Y)Y.hasOwnProperty(q)&&!l.test(q)&&et(q);for(var q in j){var J=j[q],U=H["set"+J],K=H["get"+J]||U&&H["is"+J];K&&(z===!0||K.length===0)&&et(q,{get:K,set:U})}}return H}function V(){for(var H=0,Y=arguments.length;H<Y;H++){var B=arguments[H];B&&L(this,B)}return this}return G(V,{inject:function(H){if(H){var Y=H.statics===!0?H:H.statics,B=H.beans,z=H.preserve;Y!==H&&G(this.prototype,H,H.enumerable,B,z),G(this,Y,null,B,z)}for(var $=1,j=arguments.length;$<j;$++)this.inject(arguments[$]);return this},extend:function(){for(var H=this,Y,B,z=0,$,j=arguments.length;z<j&&!(Y&&B);z++)$=arguments[z],Y=Y||$.initialize,B=B||$.prototype;return Y=Y||function(){H.apply(this,arguments)},B=Y.prototype=B||x(this.prototype),T(B,"constructor",{value:Y,writable:!0,configurable:!0}),G(Y,this),arguments.length&&this.inject.apply(Y,arguments),Y.base=H,Y}}).inject({enumerable:!1,initialize:V,set:V,inject:function(){for(var H=0,Y=arguments.length;H<Y;H++){var B=arguments[H];B&&G(this,B,B.enumerable,B.beans,B.preserve)}return this},extend:function(){var H=x(this);return H.inject.apply(H,arguments)},each:function(H,Y){return k(this,H,Y)},clone:function(){return new this.constructor(this)},statics:{set:L,each:k,create:x,define:T,describe:y,clone:function(H){return L(new H.constructor,H)},isPlainObject:function(H){var Y=H!=null&&H.constructor;return Y&&(Y===Object||Y===V||Y.name==="Object")},pick:function(H,Y){return H!==t?H:Y},slice:function(H,Y,B){return p.call(H,Y,B)}}})};typeof Nl!="undefined"&&(Nl.exports=n),n.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+n.each(this,function(l,c){if(!/^_/.test(c)){var p=typeof l;this.push(c+": "+(p==="number"?u.instance.number(l):p==="string"?"'"+l+"'":l))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(l){return n.importJSON(l,this)},exportJSON:function(l){return n.exportJSON(this,l)},toJSON:function(){return n.serialize(this)},set:function(l,c){return l&&n.filter(this,l,c,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function l(){var c=l.base.apply(this,arguments),p=c.prototype._class;return p&&!n.exports[p]&&(n.exports[p]=c),c},equals:function(l,c){if(l===c)return!0;if(l&&l.equals)return l.equals(c);if(c&&c.equals)return c.equals(l);if(l&&c&&typeof l=="object"&&typeof c=="object"){if(Array.isArray(l)&&Array.isArray(c)){var p=l.length;if(p!==c.length)return!1;for(;p--;)if(!n.equals(l[p],c[p]))return!1}else{var x=Object.keys(l),p=x.length;if(p!==Object.keys(c).length)return!1;for(;p--;){var y=x[p];if(!(c.hasOwnProperty(y)&&n.equals(l[y],c[y])))return!1}}return!0}return!1},read:function(l,c,p,x){if(this===n){var y=this.peek(l,c);return l.__index++,y}var T=this.prototype,P=T._readIndex,I=c||P&&l.__index||0,L=l.length,k=l[I];if(x=x||L-I,k instanceof this||p&&p.readNull&&k==null&&x<=1)return P&&(l.__index=I+1),k&&p&&p.clone?k.clone():k;if(k=n.create(T),P&&(k.__read=!0),k=k.initialize.apply(k,I>0||I+x<L?n.slice(l,I,I+x):l)||k,P){l.__index=I+k.__read;var G=k.__filtered;G&&(l.__filtered=G,k.__filtered=t),k.__read=t}return k},peek:function(l,c){return l[l.__index=c||l.__index||0]},remain:function(l){return l.length-(l.__index||0)},readList:function(l,c,p,x){for(var y=[],T,P=c||0,I=x?P+x:l.length,L=P;L<I;L++)y.push(Array.isArray(T=l[L])?this.read(T,0,p):this.read(l,L,p,1));return y},readNamed:function(l,c,p,x,y){var T=this.getNamed(l,c),P=T!==t;if(P){var I=l.__filtered;if(!I){var L=this.getSource(l);I=l.__filtered=n.create(L),I.__unfiltered=L}I[c]=t}return this.read(P?[T]:l,p,x,y)},readSupported:function(l,c){var p=this.getSource(l),x=this,y=!1;return p&&Object.keys(p).forEach(function(T){if(T in c){var P=x.readNamed(l,T);P!==t&&(c[T]=P),y=!0}}),y},getSource:function(l){var c=l.__source;if(c===t){var p=l.length===1&&l[0];c=l.__source=p&&n.isPlainObject(p)?p:null}return c},getNamed:function(l,c){var p=this.getSource(l);if(p)return c?p[c]:l.__filtered||p},hasNamed:function(l,c){return!!this.getNamed(l,c)},filter:function(l,c,p,x){var y;function T(G){if(!(p&&G in p)&&!(y&&G in y)){var V=c[G];V!==t&&(l[G]=V)}}if(x){for(var P={},I=0,L,k=x.length;I<k;I++)(L=x[I])in c&&(T(L),P[L]=!0);y=P}return Object.keys(c.__unfiltered||c).forEach(T),l},isPlainValue:function(l,c){return n.isPlainObject(l)||Array.isArray(l)||c&&typeof l=="string"},serialize:function(l,c,p,x){c=c||{};var y=!x,T;if(y&&(c.formatter=new u(c.precision),x={length:0,definitions:{},references:{},add:function(V,H){var Y="#"+V._id,B=this.references[Y];if(!B){this.length++;var z=H.call(V),$=V._class;$&&z[0]!==$&&z.unshift($),this.definitions[Y]=z,B=this.references[Y]=[Y]}return B}}),l&&l._serialize){T=l._serialize(c,x);var P=l._class;P&&!l._compactSerialize&&(y||!p)&&T[0]!==P&&T.unshift(P)}else if(Array.isArray(l)){T=[];for(var I=0,L=l.length;I<L;I++)T[I]=n.serialize(l[I],c,p,x)}else if(n.isPlainObject(l)){T={};for(var k=Object.keys(l),I=0,L=k.length;I<L;I++){var G=k[I];T[G]=n.serialize(l[G],c,p,x)}}else typeof l=="number"?T=c.formatter.number(l,c.precision):T=l;return y&&x.length>0?[["dictionary",x.definitions],T]:T},deserialize:function(l,c,p,x,y){var T=l,P=!p,I=P&&l&&l.length&&l[0][0]==="dictionary";if(p=p||{},Array.isArray(l)){var L=l[0],k=L==="dictionary";if(l.length==1&&/^#/.test(L))return p.dictionary[L];L=n.exports[L],T=[];for(var G=L?1:0,V=l.length;G<V;G++)T.push(n.deserialize(l[G],c,p,k,I));if(L){var H=T;c?T=c(L,H,P||y):T=new L(H)}}else if(n.isPlainObject(l)){T={},x&&(p.dictionary=T);for(var Y in l)T[Y]=n.deserialize(l[Y],c,p)}return I?T[1]:T},exportJSON:function(l,c){var p=n.serialize(l,c);return c&&c.asString==!1?p:JSON.stringify(p)},importJSON:function(l,c){return n.deserialize(typeof l=="string"?JSON.parse(l):l,function(p,x,y){var T=y&&c&&c.constructor===p,P=T?c:n.create(p.prototype);if(x.length===1&&P instanceof A&&(T||!(P instanceof N))){var I=x[0];n.isPlainObject(I)&&(I.insert=!1,T&&(x=x.concat([A.INSERT])))}return(T?P.set:p).apply(P,x),T&&(c=null),P})},push:function(l,c){var p=c.length;if(p<4096)l.push.apply(l,c);else{var x=l.length;l.length+=p;for(var y=0;y<p;y++)l[x+y]=c[y]}return l},splice:function(l,c,p,x){var y=c&&c.length,T=p===t;p=T?l.length:p,p>l.length&&(p=l.length);for(var P=0;P<y;P++)c[P]._index=p+P;if(T)return n.push(l,c),[];var I=[p,x];c&&n.push(I,c);for(var L=l.splice.apply(l,I),P=0,k=L.length;P<k;P++)L[P]._index=t;for(var P=p+y,k=l.length;P<k;P++)l[P]._index=P;return L},capitalize:function(l){return l.replace(/\b[a-z]/g,function(c){return c.toUpperCase()})},camelize:function(l){return l.replace(/-(.)/g,function(c,p){return p.toUpperCase()})},hyphenate:function(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var s={on:function(l,c){if(typeof l!="string")n.each(l,function(T,P){this.on(P,T)},this);else{var p=this._eventTypes,x=p&&p[l],y=this._callbacks=this._callbacks||{};y=y[l]=y[l]||[],y.indexOf(c)===-1&&(y.push(c),x&&x.install&&y.length===1&&x.install.call(this,l))}return this},off:function(l,c){if(typeof l!="string"){n.each(l,function(P,I){this.off(I,P)},this);return}var p=this._eventTypes,x=p&&p[l],y=this._callbacks&&this._callbacks[l],T;return y&&(!c||(T=y.indexOf(c))!==-1&&y.length===1?(x&&x.uninstall&&x.uninstall.call(this,l),delete this._callbacks[l]):T!==-1&&y.splice(T,1)),this},once:function(l,c){return this.on(l,function p(){c.apply(this,arguments),this.off(l,p)})},emit:function(l,c){var p=this._callbacks&&this._callbacks[l];if(!p)return!1;var x=n.slice(arguments,1),y=c&&c.target&&!c.currentTarget;p=p.slice(),y&&(c.currentTarget=this);for(var T=0,P=p.length;T<P;T++)if(p[T].apply(this,x)==!1){c&&c.stop&&c.stop();break}return y&&delete c.currentTarget,!0},responds:function(l){return!!(this._callbacks&&this._callbacks[l])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(l){var c=this._eventTypes,p=this._callbacks,x=l?"install":"uninstall";if(c){for(var y in p)if(p[y].length>0){var T=c[y],P=T&&T[x];P&&P.call(this,y)}}},statics:{inject:function l(c){var p=c._events;if(p){var x={};n.each(p,function(y,T){var P=typeof y=="string",I=P?y:T,L=n.capitalize(I),k=I.substring(2).toLowerCase();x[k]=P?{}:y,I="_"+I,c["get"+L]=function(){return this[I]},c["set"+L]=function(G){var V=this[I];V&&this.off(k,V),G&&this.on(k,G),this[I]=G}}),c._eventTypes=x}return l.base.apply(this,arguments)}}},a=n.extend({_class:"PaperScope",initialize:function l(){Ft=this,this.settings=new n({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=l._id++,l._scopes[this._id]=this;var c=l.prototype;if(!this.support){var p=de.getContext(1,1)||{};c.support={nativeDash:"setLineDash"in p||"mozDash"in p,nativeBlendModes:Se.nativeModes},de.release(p)}if(!this.agent){var x=r.navigator.userAgent.toLowerCase(),y=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(x)||[])[0],T=y==="darwin"?"mac":y,P=c.agent=c.browser={platform:T};T&&(P[T]=!0),x.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(I,L,k,G,V){if(!P.chrome){var H=L==="opera"?G:/^(node|trident)$/.test(L)?V:k;P.version=H,P.versionNumber=parseFloat(H),L={trident:"msie",jsdom:"node"}[L]||L,P.name=L,P[L]=!0}}),P.chrome&&delete P.webkit,P.atom&&delete P.chrome}},version:"0.12.17",getView:function(){var l=this.project;return l&&l._view},getPaper:function(){return this},execute:function(l,c){var p=Ft.PaperScript.execute(l,this,c);return Xt.updateFocus(),p},install:function(l){var c=this;n.each(["project","view","tool"],function(x){n.define(l,x,{configurable:!0,get:function(){return c[x]}})});for(var p in this)!/^_/.test(p)&&this[p]&&(l[p]=this[p])},setup:function(l){return Ft=this,this.project=new w(l),this},createCanvas:function(l,c){return de.getCanvas(l,c)},activate:function(){Ft=this},clear:function(){for(var l=this.projects,c=this.tools,p=l.length-1;p>=0;p--)l[p].remove();for(var p=c.length-1;p>=0;p--)c[p].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function l(c){return c+="Attribute",function(p,x){return p[c](x)||p[c]("data-paper-"+x)}}return{_scopes:{},_id:0,get:function(c){return this._scopes[c]||null},getAttribute:l("get"),hasAttribute:l("has")}}}),o=n.extend(s,{initialize:function(l){this._scope=Ft,this._index=this._scope[this._list].push(this)-1,(l||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var l=this._scope[this._reference];return l&&l!==this&&l.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",l),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(n.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h={findItemBoundsCollisions:function(l,c,p){function x(P){for(var I=new Array(P.length),L=0;L<P.length;L++){var k=P[L].getBounds();I[L]=[k.left,k.top,k.right,k.bottom]}return I}var y=x(l),T=!c||c===l?y:x(c);return this.findBoundsCollisions(y,T,p||0)},findCurveBoundsCollisions:function(l,c,p,x){function y(H){for(var Y=Math.min,B=Math.max,z=new Array(H.length),$=0;$<H.length;$++){var j=H[$];z[$]=[Y(j[0],j[2],j[4],j[6]),Y(j[1],j[3],j[5],j[7]),B(j[0],j[2],j[4],j[6]),B(j[1],j[3],j[5],j[7])]}return z}var T=y(l),P=!c||c===l?T:y(c);if(x){for(var I=this.findBoundsCollisions(T,P,p||0,!1,!0),L=this.findBoundsCollisions(T,P,p||0,!0,!0),k=[],G=0,V=I.length;G<V;G++)k[G]={hor:I[G],ver:L[G]};return k}return this.findBoundsCollisions(T,P,p||0)},findBoundsCollisions:function(l,c,p,x,y){var T=!c||l===c,P=T?l:l.concat(c),I=l.length,L=P.length;function k(kt,Gt,Ht){for(var Dt=0,Wt=kt.length;Dt<Wt;){var zt=Wt+Dt>>>1;P[kt[zt]][Gt]<Ht?Dt=zt+1:Wt=zt}return Dt-1}for(var G=x?1:0,V=G+2,H=x?0:1,Y=H+2,B=new Array(L),z=0;z<L;z++)B[z]=z;B.sort(function(kt,Gt){return P[kt][G]-P[Gt][G]});for(var $=[],j=new Array(I),z=0;z<L;z++){var et=B[z],q=P[et],J=T?et:et-I,U=et<I,K=T||!U,O=U?[]:null;if($.length){var rt=k($,V,q[G]-p)+1;if($.splice(0,rt),T&&y){O=O.concat($);for(var lt=0;lt<$.length;lt++){var pt=$[lt];j[pt].push(J)}}else for(var bt=q[Y],dt=q[H],lt=0;lt<$.length;lt++){var pt=$[lt],St=P[pt],Z=pt<I,ht=T||pt>=I;(y||(U&&ht||K&&Z)&&bt>=St[H]-p&&dt<=St[Y]+p)&&(U&&ht&&O.push(T?pt:pt-I),K&&Z&&j[pt].push(J))}}if(U&&(l===c&&O.push(et),j[et]=O),$.length){var vt=q[V],_t=k($,V,vt);$.splice(_t+1,0,et)}else $.push(et)}for(var z=0;z<j.length;z++){var Mt=j[z];Mt&&Mt.sort(function(Gt,Ht){return Gt-Ht})}return j}},u=n.extend({initialize:function(l){this.precision=n.pick(l,5),this.multiplier=Math.pow(10,this.precision)},number:function(l){return this.precision<16?Math.round(l*this.multiplier)/this.multiplier:l},pair:function(l,c,p){return this.number(l)+(p||",")+this.number(c)},point:function(l,c){return this.number(l.x)+(c||",")+this.number(l.y)},size:function(l,c){return this.number(l.width)+(c||",")+this.number(l.height)},rectangle:function(l,c){return this.point(l,c)+(c||",")+this.size(l,c)}});u.instance=new u;var d=new function(){var l=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],c=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],p=Math.abs,x=Math.sqrt,y=Math.pow,T=Math.log2||function(V){return Math.log(V)*Math.LOG2E},P=1e-12,I=112e-18;function L(V,H,Y){return V<H?H:V>Y?Y:V}function k(V,H,Y){function B(rt){var lt=rt*134217729,pt=rt-lt,bt=pt+lt,dt=rt-bt;return[bt,dt]}var z=H*H-V*Y,$=H*H+V*Y;if(p(z)*3<$){var j=B(V),et=B(H),q=B(Y),J=H*H,U=et[0]*et[0]-J+2*et[0]*et[1]+et[1]*et[1],K=V*Y,O=j[0]*q[0]-K+j[0]*q[1]+j[1]*q[0]+j[1]*q[1];z=J-K+(U-O)}return z}function G(){var V=Math.max.apply(Math,arguments);return V&&(V<1e-8||V>1e8)?y(2,-Math.round(T(V))):0}return{EPSILON:P,MACHINE_EPSILON:I,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(x(2)-1)/3,isZero:function(V){return V>=-P&&V<=P},isMachineZero:function(V){return V>=-I&&V<=I},clamp:L,integrate:function(V,H,Y,B){for(var z=l[B-2],$=c[B-2],j=(Y-H)*.5,et=j+H,q=0,J=B+1>>1,U=B&1?$[q++]*V(et):0;q<J;){var K=j*z[q];U+=$[q++]*(V(et+K)+V(et-K))}return j*U},findRoot:function(V,H,Y,B,z,$,j){for(var et=0;et<$;et++){var q=V(Y),J=q/H(Y),U=Y-J;if(p(J)<j){Y=U;break}q>0?(z=Y,Y=U<=B?(B+z)*.5:U):(B=Y,Y=U>=z?(B+z)*.5:U)}return L(Y,B,z)},solveQuadratic:function(V,H,Y,B,z,$){var j,et=1/0;if(p(V)<P){if(p(H)<P)return p(Y)<P?-1:0;j=-Y/H}else{H*=-.5;var q=k(V,H,Y);if(q&&p(q)<I){var J=G(p(V),p(H),p(Y));J&&(V*=J,H*=J,Y*=J,q=k(V,H,Y))}if(q>=-I){var U=q<0?0:x(q),K=H+(H<0?-U:U);K===0?(j=Y/V,et=-j):(j=K/V,et=Y/K)}}var O=0,rt=z==null,lt=z-P,pt=$+P;return isFinite(j)&&(rt||j>lt&&j<pt)&&(B[O++]=rt?j:L(j,z,$)),et!==j&&isFinite(et)&&(rt||et>lt&&et<pt)&&(B[O++]=rt?et:L(et,z,$)),O},solveCubic:function(V,H,Y,B,z,$,j){var et=G(p(V),p(H),p(Y),p(B)),q,J,U,K,O;et&&(V*=et,H*=et,Y*=et,B*=et);function rt(_t){q=_t;var Mt=V*q;J=Mt+H,U=J*q+Y,K=(Mt+J)*q+U,O=U*q+B}if(p(V)<P)V=H,J=Y,U=B,q=1/0;else if(p(B)<P)J=H,U=Y,q=0;else{rt(-(H/V)/3);var lt=O/V,pt=y(p(lt),1/3),bt=lt<0?-1:1,dt=-K/V,St=dt>0?1.324717957244746*Math.max(pt,x(dt)):pt,Z=q-bt*St;if(Z!==q){do rt(Z),Z=K===0?q:q-O/K/(1+I);while(bt*Z>bt*q);p(V)*q*q>p(B/q)&&(U=-B/q,J=(U-Y)/q)}}var ht=d.solveQuadratic(V,J,U,z,$,j),vt=$==null;return isFinite(q)&&(ht===0||ht>0&&q!==z[0]&&q!==z[1])&&(vt||q>$-P&&q<j+P)&&(z[ht++]=vt?q:L(q,$,j)),ht}}},g={_id:1,_pools:{},get:function(l){if(l){var c=this._pools[l];return c||(c=this._pools[l]={_id:1}),c._id++}else return this._id++}},f=n.extend({_class:"Point",_readIndex:!0,initialize:function(c,p){var x=typeof c,y=this.__read,T=0;if(x==="number"){var P=typeof p=="number";this._set(c,P?p:c),y&&(T=P?2:1)}else if(x==="undefined"||c===null)this._set(0,0),y&&(T=c===null?1:0);else{var I=x==="string"?c.split(/[\s,]+/)||[]:c;T=1,Array.isArray(I)?this._set(+I[0],+(I.length>1?I[1]:I[0])):"x"in I?this._set(I.x||0,I.y||0):"width"in I?this._set(I.width||0,I.height||0):"angle"in I?(this._set(I.length||0,0),this.setAngle(I.angle||0)):(this._set(0,0),T=0)}return y&&(this.__read=T),this},set:"#initialize",_set:function(l,c){return this.x=l,this.y=c,this},equals:function(l){return this===l||l&&(this.x===l.x&&this.y===l.y||Array.isArray(l)&&this.x===l[0]&&this.y===l[1])||!1},clone:function(){return new f(this.x,this.y)},toString:function(){var l=u.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+" }"},_serialize:function(l){var c=l.formatter;return[c.number(this.x),c.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(l){if(this.isZero()){var c=this._angle||0;this._set(Math.cos(c)*l,Math.sin(c)*l)}else{var p=l/this.getLength();d.isZero(p)&&this.getAngle(),this._set(this.x*p,this.y*p)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(l){this.setAngleInRadians.call(this,l*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var l=f.read(arguments),c=this.getLength()*l.getLength();if(d.isZero(c))return NaN;var p=this.dot(l)/c;return Math.acos(p<-1?-1:p>1?1:p)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(l){if(this._angle=l,!this.isZero()){var c=this.getLength();this._set(Math.cos(l)*c,Math.sin(l)*c)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var l=f.read(arguments);return Math.atan2(this.cross(l),this.dot(l))*180/Math.PI},getDistance:function(){var l=arguments,c=f.read(l),p=c.x-this.x,x=c.y-this.y,y=p*p+x*x,T=n.read(l);return T?y:Math.sqrt(y)},normalize:function(l){l===t&&(l=1);var c=this.getLength(),p=c!==0?l/c:0,x=new f(this.x*p,this.y*p);return p>=0&&(x._angle=this._angle),x},rotate:function(l,c){if(l===0)return this.clone();l=l*Math.PI/180;var p=c?this.subtract(c):this,x=Math.sin(l),y=Math.cos(l);return p=new f(p.x*y-p.y*x,p.x*x+p.y*y),c?p.add(c):p},transform:function(l){return l?l._transformPoint(this):this},add:function(){var l=f.read(arguments);return new f(this.x+l.x,this.y+l.y)},subtract:function(){var l=f.read(arguments);return new f(this.x-l.x,this.y-l.y)},multiply:function(){var l=f.read(arguments);return new f(this.x*l.x,this.y*l.y)},divide:function(){var l=f.read(arguments);return new f(this.x/l.x,this.y/l.y)},modulo:function(){var l=f.read(arguments);return new f(this.x%l.x,this.y%l.y)},negate:function(){return new f(-this.x,-this.y)},isInside:function(){return b.read(arguments).contains(this)},isClose:function(){var l=arguments,c=f.read(l),p=n.read(l);return this.getDistance(c)<=p},isCollinear:function(){var l=f.read(arguments);return f.isCollinear(this.x,this.y,l.x,l.y)},isColinear:"#isCollinear",isOrthogonal:function(){var l=f.read(arguments);return f.isOrthogonal(this.x,this.y,l.x,l.y)},isZero:function(){var l=d.isZero;return l(this.x)&&l(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(l){return this.x*(l>1&&l<4?-1:1)>=0&&this.y*(l>2?-1:1)>=0},dot:function(){var l=f.read(arguments);return this.x*l.x+this.y*l.y},cross:function(){var l=f.read(arguments);return this.x*l.y-this.y*l.x},project:function(){var l=f.read(arguments),c=l.isZero()?0:this.dot(l)/l.dot(l);return new f(l.x*c,l.y*c)},statics:{min:function(){var l=arguments,c=f.read(l),p=f.read(l);return new f(Math.min(c.x,p.x),Math.min(c.y,p.y))},max:function(){var l=arguments,c=f.read(l),p=f.read(l);return new f(Math.max(c.x,p.x),Math.max(c.y,p.y))},random:function(){return new f(Math.random(),Math.random())},isCollinear:function(l,c,p,x){return Math.abs(l*x-c*p)<=Math.sqrt((l*l+c*c)*(p*p+x*x))*1e-8},isOrthogonal:function(l,c,p,x){return Math.abs(l*p+c*x)<=Math.sqrt((l*l+c*c)*(p*p+x*x))*1e-8}}},n.each(["round","ceil","floor","abs"],function(l){var c=Math[l];this[l]=function(){return new f(c(this.x),c(this.y))}},{})),m=f.extend({initialize:function(c,p,x,y){this._x=c,this._y=p,this._owner=x,this._setter=y},_set:function(l,c,p){return this._x=l,this._y=c,p||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),_=n.extend({_class:"Size",_readIndex:!0,initialize:function(c,p){var x=typeof c,y=this.__read,T=0;if(x==="number"){var P=typeof p=="number";this._set(c,P?p:c),y&&(T=P?2:1)}else if(x==="undefined"||c===null)this._set(0,0),y&&(T=c===null?1:0);else{var I=x==="string"?c.split(/[\s,]+/)||[]:c;T=1,Array.isArray(I)?this._set(+I[0],+(I.length>1?I[1]:I[0])):"width"in I?this._set(I.width||0,I.height||0):"x"in I?this._set(I.x||0,I.y||0):(this._set(0,0),T=0)}return y&&(this.__read=T),this},set:"#initialize",_set:function(l,c){return this.width=l,this.height=c,this},equals:function(l){return l===this||l&&(this.width===l.width&&this.height===l.height||Array.isArray(l)&&this.width===l[0]&&this.height===l[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var l=u.instance;return"{ width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var c=l.formatter;return[c.number(this.width),c.number(this.height)]},add:function(){var l=_.read(arguments);return new _(this.width+l.width,this.height+l.height)},subtract:function(){var l=_.read(arguments);return new _(this.width-l.width,this.height-l.height)},multiply:function(){var l=_.read(arguments);return new _(this.width*l.width,this.height*l.height)},divide:function(){var l=_.read(arguments);return new _(this.width/l.width,this.height/l.height)},modulo:function(){var l=_.read(arguments);return new _(this.width%l.width,this.height%l.height)},negate:function(){return new _(-this.width,-this.height)},isZero:function(){var l=d.isZero;return l(this.width)&&l(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(l,c){return new _(Math.min(l.width,c.width),Math.min(l.height,c.height))},max:function(l,c){return new _(Math.max(l.width,c.width),Math.max(l.height,c.height))},random:function(){return new _(Math.random(),Math.random())}}},n.each(["round","ceil","floor","abs"],function(l){var c=Math[l];this[l]=function(){return new _(c(this.width),c(this.height))}},{})),v=_.extend({initialize:function(c,p,x,y){this._width=c,this._height=p,this._owner=x,this._setter=y},_set:function(l,c,p){return this._width=l,this._height=c,p||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(l){this._width=l,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(l){this._height=l,this._owner[this._setter](this)}}),b=n.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(c,p,x,y){var T=arguments,P=typeof c,I;if(P==="number"?(this._set(c,p,x,y),I=4):P==="undefined"||c===null?(this._set(0,0,0,0),I=c===null?1:0):T.length===1&&(Array.isArray(c)?(this._set.apply(this,c),I=1):c.x!==t||c.width!==t?(this._set(c.x||0,c.y||0,c.width||0,c.height||0),I=1):c.from===t&&c.to===t&&(this._set(0,0,0,0),n.readSupported(T,this)&&(I=1))),I===t){var L=f.readNamed(T,"from"),k=n.peek(T),G=L.x,V=L.y,H,Y;if(k&&k.x!==t||n.hasNamed(T,"to")){var B=f.readNamed(T,"to");H=B.x-G,Y=B.y-V,H<0&&(G=B.x,H=-H),Y<0&&(V=B.y,Y=-Y)}else{var z=_.read(T);H=z.width,Y=z.height}this._set(G,V,H,Y),I=T.__index}var $=T.__filtered;return $&&(this.__filtered=$),this.__read&&(this.__read=I),this},set:"#initialize",_set:function(l,c,p,x){return this.x=l,this.y=c,this.width=p,this.height=x,this},clone:function(){return new b(this.x,this.y,this.width,this.height)},equals:function(l){var c=n.isPlainValue(l)?b.read(arguments):l;return c===this||c&&this.x===c.x&&this.y===c.y&&this.width===c.width&&this.height===c.height||!1},toString:function(){var l=u.instance;return"{ x: "+l.number(this.x)+", y: "+l.number(this.y)+", width: "+l.number(this.width)+", height: "+l.number(this.height)+" }"},_serialize:function(l){var c=l.formatter;return[c.number(this.x),c.number(this.y),c.number(this.width),c.number(this.height)]},getPoint:function(l){var c=l?f:m;return new c(this.x,this.y,this,"setPoint")},setPoint:function(){var l=f.read(arguments);this.x=l.x,this.y=l.y},getSize:function(l){var c=l?_:v;return new c(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var l=_.read(arguments),c=this._sx,p=this._sy,x=l.width,y=l.height;c&&(this.x+=(this.width-x)*c),p&&(this.y+=(this.height-y)*p),this.width=x,this.height=y,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(l){if(!this._fw){var c=l-this.x;this.width-=this._sx===.5?c*2:c}this.x=l,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(l){if(!this._fh){var c=l-this.y;this.height-=this._sy===.5?c*2:c}this.y=l,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(l){if(!this._fw){var c=l-this.x;this.width=this._sx===.5?c*2:c}this.x=l-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(l){if(!this._fh){var c=l-this.y;this.height=this._sy===.5?c*2:c}this.y=l-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(l){this._fw||this._sx===.5?this.x=l-this.width/2:(this._sx&&(this.x+=(l-this.x)*2*this._sx),this.width=(l-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(l){this._fh||this._sy===.5?this.y=l-this.height/2:(this._sy&&(this.y+=(l-this.y)*2*this._sy),this.height=(l-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(l){var c=l?f:m;return new c(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var l=f.read(arguments);return this.setCenterX(l.x),this.setCenterY(l.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(l){return l&&l.width!==t||(Array.isArray(l)?l:arguments).length===4?this._containsRectangle(b.read(arguments)):this._containsPoint(f.read(arguments))},_containsPoint:function(l){var c=l.x,p=l.y;return c>=this.x&&p>=this.y&&c<=this.x+this.width&&p<=this.y+this.height},_containsRectangle:function(l){var c=l.x,p=l.y;return c>=this.x&&p>=this.y&&c+l.width<=this.x+this.width&&p+l.height<=this.y+this.height},intersects:function(){var l=b.read(arguments),c=n.read(arguments)||0;return l.x+l.width>this.x-c&&l.y+l.height>this.y-c&&l.x<this.x+this.width+c&&l.y<this.y+this.height+c},intersect:function(){var l=b.read(arguments),c=Math.max(this.x,l.x),p=Math.max(this.y,l.y),x=Math.min(this.x+this.width,l.x+l.width),y=Math.min(this.y+this.height,l.y+l.height);return new b(c,p,x-c,y-p)},unite:function(){var l=b.read(arguments),c=Math.min(this.x,l.x),p=Math.min(this.y,l.y),x=Math.max(this.x+this.width,l.x+l.width),y=Math.max(this.y+this.height,l.y+l.height);return new b(c,p,x-c,y-p)},include:function(){var l=f.read(arguments),c=Math.min(this.x,l.x),p=Math.min(this.y,l.y),x=Math.max(this.x+this.width,l.x),y=Math.max(this.y+this.height,l.y);return new b(c,p,x-c,y-p)},expand:function(){var l=_.read(arguments),c=l.width,p=l.height;return new b(this.x-c/2,this.y-p/2,this.width+c,this.height+p)},scale:function(l,c){return this.expand(this.width*l-this.width,this.height*(c===t?l:c)-this.height)}},n.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(l,c){var p=l.join(""),x=/^[RL]/.test(p);c>=4&&(l[1]+=x?"Y":"X");var y=l[x?0:1],T=l[x?1:0],P="get"+y,I="get"+T,L="set"+y,k="set"+T,G="get"+p,V="set"+p;this[G]=function(H){var Y=H?f:m;return new Y(this[P](),this[I](),this,V)},this[V]=function(){var H=f.read(arguments);this[L](H.x),this[k](H.y)}},{beans:!0})),C=b.extend({initialize:function(c,p,x,y,T,P){this._set(c,p,x,y,!0),this._owner=T,this._setter=P},_set:function(l,c,p,x,y){return this._x=l,this._y=c,this._width=p,this._height=x,y||this._owner[this._setter](this),this}},new function(){var l=b.prototype;return n.each(["x","y","width","height"],function(c){var p=n.capitalize(c),x="_"+c;this["get"+p]=function(){return this[x]},this["set"+p]=function(y){this[x]=y,this._dontNotify||this._owner[this._setter](this)}},n.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(c){var p="set"+c;this[p]=function(){this._dontNotify=!0,l[p].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(c){var p=this._owner;p._changeSelection&&p._changeSelection(2,c)}}))}),M=n.extend({_class:"Matrix",initialize:function l(c,p){var x=arguments,y=x.length,T=!0;if(y>=6?this._set.apply(this,x):y===1||y===2?c instanceof l?this._set(c._a,c._b,c._c,c._d,c._tx,c._ty,p):Array.isArray(c)?this._set.apply(this,p?c.concat([p]):c):T=!1:y?T=!1:this.reset(),!T)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(l,c,p,x,y,T,P){return this._a=l,this._b=c,this._c=p,this._d=x,this._tx=y,this._ty=T,P||this._changed(),this},_serialize:function(l,c){return n.serialize(this.getValues(),l,!0,c)},_changed:function(){var l=this._owner;l&&(l._applyMatrix?l.transform(null,!0):l._changed(25))},clone:function(){return new M(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(l){return l===this||l&&this._a===l._a&&this._b===l._b&&this._c===l._c&&this._d===l._d&&this._tx===l._tx&&this._ty===l._ty},toString:function(){var l=u.instance;return"[["+[l.number(this._a),l.number(this._c),l.number(this._tx)].join(", ")+"], ["+[l.number(this._b),l.number(this._d),l.number(this._ty)].join(", ")+"]]"},reset:function(l){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,l||this._changed(),this},apply:function(l,c){var p=this._owner;return p?(p.transform(null,n.pick(l,!0),c),this.isIdentity()):!1},translate:function(){var l=f.read(arguments),c=l.x,p=l.y;return this._tx+=c*this._a+p*this._c,this._ty+=c*this._b+p*this._d,this._changed(),this},scale:function(){var l=arguments,c=f.read(l),p=f.read(l,0,{readNull:!0});return p&&this.translate(p),this._a*=c.x,this._b*=c.x,this._c*=c.y,this._d*=c.y,p&&this.translate(p.negate()),this._changed(),this},rotate:function(l){l*=Math.PI/180;var c=f.read(arguments,1),p=c.x,x=c.y,y=Math.cos(l),T=Math.sin(l),P=p-p*y+x*T,I=x-p*T-x*y,L=this._a,k=this._b,G=this._c,V=this._d;return this._a=y*L+T*G,this._b=y*k+T*V,this._c=-T*L+y*G,this._d=-T*k+y*V,this._tx+=P*L+I*G,this._ty+=P*k+I*V,this._changed(),this},shear:function(){var l=arguments,c=f.read(l),p=f.read(l,0,{readNull:!0});p&&this.translate(p);var x=this._a,y=this._b;return this._a+=c.y*this._c,this._b+=c.y*this._d,this._c+=c.x*x,this._d+=c.x*y,p&&this.translate(p.negate()),this._changed(),this},skew:function(){var l=arguments,c=f.read(l),p=f.read(l,0,{readNull:!0}),x=Math.PI/180,y=new f(Math.tan(c.x*x),Math.tan(c.y*x));return this.shear(y,p)},append:function(l,c){if(l){var p=this._a,x=this._b,y=this._c,T=this._d,P=l._a,I=l._c,L=l._b,k=l._d,G=l._tx,V=l._ty;this._a=P*p+L*y,this._c=I*p+k*y,this._b=P*x+L*T,this._d=I*x+k*T,this._tx+=G*p+V*y,this._ty+=G*x+V*T,c||this._changed()}return this},prepend:function(l,c){if(l){var p=this._a,x=this._b,y=this._c,T=this._d,P=this._tx,I=this._ty,L=l._a,k=l._c,G=l._b,V=l._d,H=l._tx,Y=l._ty;this._a=L*p+k*x,this._c=L*y+k*T,this._b=G*p+V*x,this._d=G*y+V*T,this._tx=L*P+k*I+H,this._ty=G*P+V*I+Y,c||this._changed()}return this},appended:function(l){return this.clone().append(l)},prepended:function(l){return this.clone().prepend(l)},invert:function(){var l=this._a,c=this._b,p=this._c,x=this._d,y=this._tx,T=this._ty,P=l*x-c*p,I=null;return P&&!isNaN(P)&&isFinite(y)&&isFinite(T)&&(this._a=x/P,this._b=-c/P,this._c=-p/P,this._d=l/P,this._tx=(p*T-x*y)/P,this._ty=(c*y-l*T)/P,I=this),I},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new M(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var l=this._a*this._d-this._c*this._b;return l&&!isNaN(l)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(l,c,p){return arguments.length<3?this._transformPoint(f.read(arguments)):this._transformCoordinates(l,c,p)},_transformPoint:function(l,c,p){var x=l.x,y=l.y;return c||(c=new f),c._set(x*this._a+y*this._c+this._tx,x*this._b+y*this._d+this._ty,p)},_transformCoordinates:function(l,c,p){for(var x=0,y=2*p;x<y;x+=2){var T=l[x],P=l[x+1];c[x]=T*this._a+P*this._c+this._tx,c[x+1]=T*this._b+P*this._d+this._ty}return c},_transformCorners:function(l){var c=l.x,p=l.y,x=c+l.width,y=p+l.height,T=[c,p,x,p,x,y,c,y];return this._transformCoordinates(T,T,4)},_transformBounds:function(l,c,p){for(var x=this._transformCorners(l),y=x.slice(0,2),T=y.slice(),P=2;P<8;P++){var I=x[P],L=P&1;I<y[L]?y[L]=I:I>T[L]&&(T[L]=I)}return c||(c=new b),c._set(y[0],y[1],T[0]-y[0],T[1]-y[1],p)},inverseTransform:function(){return this._inverseTransform(f.read(arguments))},_inverseTransform:function(l,c,p){var x=this._a,y=this._b,T=this._c,P=this._d,I=this._tx,L=this._ty,k=x*P-y*T,G=null;if(k&&!isNaN(k)&&isFinite(I)&&isFinite(L)){var V=l.x-this._tx,H=l.y-this._ty;c||(c=new f),G=c._set((V*P-H*T)/k,(H*x-V*y)/k,p)}return G},decompose:function(){var l=this._a,c=this._b,p=this._c,x=this._d,y=l*x-c*p,T=Math.sqrt,P=Math.atan2,I=180/Math.PI,L,k,G;if(l!==0||c!==0){var V=T(l*l+c*c);L=Math.acos(l/V)*(c>0?1:-1),k=[V,y/V],G=[P(l*p+c*x,V*V),0]}else if(p!==0||x!==0){var H=T(p*p+x*x);L=Math.asin(p/H)*(x>0?1:-1),k=[y/H,H],G=[0,P(l*p+c*x,H*H)]}else L=0,G=k=[0,0];return{translation:this.getTranslation(),rotation:L*I,scaling:new f(k),skewing:new f(G[0]*I,G[1]*I)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new f(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(l){this.isIdentity()||l.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},n.each(["a","b","c","d","tx","ty"],function(l){var c=n.capitalize(l),p="_"+l;this["get"+c]=function(){return this[p]},this["set"+c]=function(x){this[p]=x,this._changed()}},{})),E=n.extend({_class:"Line",initialize:function(c,p,x,y,T){var P=!1;arguments.length>=4?(this._px=c,this._py=p,this._vx=x,this._vy=y,P=T):(this._px=c.x,this._py=c.y,this._vx=p.x,this._vy=p.y,P=x),P||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new f(this._px,this._py)},getVector:function(){return new f(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(l,c){return E.intersect(this._px,this._py,this._vx,this._vy,l._px,l._py,l._vx,l._vy,!0,c)},getSide:function(l,c){return E.getSide(this._px,this._py,this._vx,this._vy,l.x,l.y,!0,c)},getDistance:function(l){return Math.abs(this.getSignedDistance(l))},getSignedDistance:function(l){return E.getSignedDistance(this._px,this._py,this._vx,this._vy,l.x,l.y,!0)},isCollinear:function(l){return f.isCollinear(this._vx,this._vy,l._vx,l._vy)},isOrthogonal:function(l){return f.isOrthogonal(this._vx,this._vy,l._vx,l._vy)},statics:{intersect:function(l,c,p,x,y,T,P,I,L,k){L||(p-=l,x-=c,P-=y,I-=T);var G=p*I-x*P;if(!d.isMachineZero(G)){var V=l-y,H=c-T,Y=(P*H-I*V)/G,B=(p*H-x*V)/G,z=1e-12,$=-z,j=1+z;if(k||$<Y&&Y<j&&$<B&&B<j)return k||(Y=Y<=0?0:Y>=1?1:Y),new f(l+Y*p,c+Y*x)}},getSide:function(l,c,p,x,y,T,P,I){P||(p-=l,x-=c);var L=y-l,k=T-c,G=L*x-k*p;return!I&&d.isMachineZero(G)&&(G=(L*p+L*p)/(p*p+x*x),G>=0&&G<=1&&(G=0)),G<0?-1:G>0?1:0},getSignedDistance:function(l,c,p,x,y,T,P){return P||(p-=l,x-=c),p===0?x>0?y-l:l-y:x===0?p<0?T-c:c-T:((y-l)*x-(T-c)*p)/(x>p?x*Math.sqrt(1+p*p/(x*x)):p*Math.sqrt(1+x*x/(p*p)))},getDistance:function(l,c,p,x,y,T,P){return Math.abs(E.getSignedDistance(l,c,p,x,y,T,P))}}}),w=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(c){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Qt(null,null,this),this._view=Xt.create(this,c||de.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(l,c){return n.serialize(this._children,l,!0,c)},_changed:function(l,c){if(l&1){var p=this._view;p&&(p._needsUpdate=!0,!p._requested&&p._autoUpdate&&p.requestUpdate())}var x=this._changes;if(x&&c){var y=this._changesById,T=c._id,P=y[T];P?P.flags|=l:x.push(y[T]={item:c,flags:l})}},clear:function(){for(var l=this._children,c=l.length-1;c>=0;c--)l[c].remove()},isEmpty:function(){return!this._children.length},remove:function l(){return l.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(l){this._currentStyle.set(l)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new N({project:this,insert:!0})},getSymbolDefinitions:function(){var l=[],c={};return this.getItems({class:at,match:function(p){var x=p._definition,y=x._id;return c[y]||(c[y]=!0,l.push(x)),!1}}),l},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var l=this._selectionItems,c=[];for(var p in l){var x=l[p],y=x._selection;y&1&&x.isInserted()?c.push(x):y||this._updateSelection(x)}return c},_updateSelection:function(l){var c=l._id,p=this._selectionItems;l._selection?p[c]!==l&&(this._selectionCount++,p[c]=l):p[c]===l&&(this._selectionCount--,delete p[c])},selectAll:function(){for(var l=this._children,c=0,p=l.length;c<p;c++)l[c].setFullySelected(!0)},deselectAll:function(){var l=this._selectionItems;for(var c in l)l[c].setFullySelected(!1)},addLayer:function(l){return this.insertLayer(t,l)},insertLayer:function(l,c){if(c instanceof N){c._remove(!1,!0),n.splice(this._children,[c],l,0),c._setProject(this,!0);var p=c._name;p&&c.setName(p),this._changes&&c._changed(5),this._activeLayer||(this._activeLayer=c)}else c=null;return c},_insertItem:function(l,c,p){return c=this.insertLayer(l,c)||(this._activeLayer||this._insertItem(t,new N(A.NO_INSERT),!0)).insertChild(l,c),p&&c.activate&&c.activate(),c},getItems:function(l){return A._getItems(this,l)},getItem:function(l){return A._getItems(this,l,null,null,!0)[0]||null},importJSON:function(l){this.activate();var c=this._activeLayer;return n.importJSON(l,c&&c.isEmpty()&&c)},removeOn:function(l){var c=this._removeSets;if(c){l==="mouseup"&&(c.mousedrag=null);var p=c[l];if(p){for(var x in p){var y=p[x];for(var T in c){var P=c[T];P&&P!=p&&delete P[y._id]}y.remove()}c[l]=null}}},draw:function(l,c,p){this._updateVersion++,l.save(),c.applyToContext(l);for(var x=this._children,y=new n({offset:new f(0,0),pixelRatio:p,viewMatrix:c.isIdentity()?null:c,matrices:[new M],updateMatrix:!0}),T=0,P=x.length;T<P;T++)x[T].draw(l,y);if(l.restore(),this._selectionCount>0){l.save(),l.strokeWidth=1;var I=this._selectionItems,L=this._scope.settings.handleSize,k=this._updateVersion;for(var G in I)I[G]._drawSelection(l,c,L,I,k);l.restore()}}}),A=n.extend(s,{statics:{extend:function l(c){return c._serializeFields&&(c._serializeFields=n.set({},this.prototype._serializeFields,c._serializeFields)),l.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new M,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var l=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return n.each(l,function(c){this._events[c]={install:function(p){this.getView()._countItemEvent(p,1)},uninstall:function(p){this.getView()._countItemEvent(p,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:l}})},{initialize:function(){},_initialize:function(l,c){var p=l&&n.isPlainObject(l),x=p&&l.internal===!0,y=this._matrix=new M,T=p&&l.project||Ft.project,P=Ft.settings;return this._id=x?null:g.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&P.applyMatrix,c&&y.translate(c),y._owner=this,this._style=new Qt(T._currentStyle,this,T),x||p&&l.insert==!1||!P.insertItems&&!(p&&l.insert==!0)?this._setProject(T):(p&&l.parent||T)._insertItem(t,this,!0),p&&l!==A.NO_INSERT&&l!==A.INSERT&&this.set(l,{internal:!0,insert:!0,project:!0,parent:!0}),p},_serialize:function(l,c){var p={},x=this;function y(T){for(var P in T){var I=x[P];n.equals(I,P==="leading"?T.fontSize*1.2:T[P])||(p[P]=n.serialize(I,l,P!=="data",c))}}return y(this._serializeFields),this instanceof R||y(this._style._defaults),[this._class,p]},_changed:function(l){var c=this._symbol,p=this._parent||c,x=this._project;l&8&&(this._bounds=this._position=this._decomposed=t),l&16&&(this._globalMatrix=t),p&&l&72&&A._clearBoundsCache(p),l&2&&A._clearBoundsCache(this),x&&x._changed(l,this),c&&c._changed(l)},getId:function(){return this._id},getName:function(){return this._name},setName:function(l){if(this._name&&this._removeNamed(),l===+l+"")throw new Error("Names consisting only of numbers are not supported.");var c=this._getOwner();if(l&&c){var p=c._children,x=c._namedChildren;(x[l]=x[l]||[]).push(this),l in p||(p[l]=this)}this._name=l||t,this._changed(256)},getStyle:function(){return this._style},setStyle:function(l){this.getStyle().set(l)}},n.each(["locked","visible","blendMode","opacity","guide"],function(l){var c=n.capitalize(l),p="_"+l,x={locked:256,visible:265};this["get"+c]=function(){return this[p]},this["set"+c]=function(y){y!=this[p]&&(this[p]=y,this._changed(x[l]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(l){if(l!==this._selection){this._selection=l;var c=this._project;c&&(c._updateSelection(this),this._changed(257))}},_changeSelection:function(l,c){var p=this._selection;this.setSelection(c?p|l:p&~l)},isSelected:function(){if(this._selectChildren){for(var l=this._children,c=0,p=l.length;c<p;c++)if(l[c].isSelected())return!0}return!!(this._selection&1)},setSelected:function(l){if(this._selectChildren)for(var c=this._children,p=0,x=c.length;p<x;p++)c[p].setSelected(l);this._changeSelection(1,l)},isFullySelected:function(){var l=this._children,c=!!(this._selection&1);if(l&&c){for(var p=0,x=l.length;p<x;p++)if(!l[p].isFullySelected())return!1;return!0}return c},setFullySelected:function(l){var c=this._children;if(c)for(var p=0,x=c.length;p<x;p++)c[p].setFullySelected(l);this._changeSelection(1,l)},isClipMask:function(){return this._clipMask},setClipMask:function(l){this._clipMask!=(l=!!l)&&(this._clipMask=l,l&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(l){this._data=l},getPosition:function(l){var c=l?f:m,p=this._position||(this._position=this._getPositionFromBounds());return new c(p.x,p.y,this,"setPosition")},setPosition:function(){this.translate(f.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(l){return this._pivot?this._matrix._transformPoint(this._pivot):(l||this.getBounds()).getCenter(!0)},getPivot:function(){var l=this._pivot;return l?new m(l.x,l.y,this,"setPivot"):null},setPivot:function(){this._pivot=f.read(arguments,0,{clone:!0,readNull:!0}),this._position=t}},n.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(l,c){this[c]=function(p){return this.getBounds(p,l)}},{beans:!0,getBounds:function(l,c){var p=c||l instanceof M,x=n.set({},p?c:l,this._boundsOptions);(!x.stroke||this.getStrokeScaling())&&(x.cacheItem=this);var y=this._getCachedBounds(p&&l,x).rect;return arguments.length?y:new C(y.x,y.y,y.width,y.height,this,"setBounds")},setBounds:function(){var l=b.read(arguments),c=this.getBounds(),p=this._matrix,x=new M,y=l.getCenter();x.translate(y),(l.width!=c.width||l.height!=c.height)&&(p.isInvertible()||(p.set(p._backup||new M().translate(p.getTranslation())),c=this.getBounds()),x.scale(c.width!==0?l.width/c.width:0,c.height!==0?l.height/c.height:0)),y=c.getCenter(),x.translate(-y.x,-y.y),this.transform(x)},_getBounds:function(l,c){var p=this._children;return!p||!p.length?new b:(A._updateBoundsCache(this,c.cacheItem),A._getBounds(p,l,c))},_getBoundsCacheKey:function(l,c){return[l.stroke?1:0,l.handle?1:0,c?1:0].join("")},_getCachedBounds:function(l,c,p){l=l&&l._orNullIfIdentity();var x=c.internal&&!p,y=c.cacheItem,T=x?null:this._matrix._orNullIfIdentity(),P=y&&(!l||l.equals(T))&&this._getBoundsCacheKey(c,x),I=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,y),P&&I&&P in I){var L=I[P];return{rect:L.rect.clone(),nonscaling:L.nonscaling}}var k=this._getBounds(l||T,c),G=k.rect||k,V=this._style,H=k.nonscaling||V.hasStroke()&&!V.getStrokeScaling();if(P){I||(this._bounds=I={});var L=I[P]={rect:G.clone(),nonscaling:H,internal:x}}return{rect:G,nonscaling:H}},_getStrokeMatrix:function(l,c){var p=this.getStrokeScaling()?null:c&&c.internal?this:this._parent||this._symbol&&this._symbol._item,x=p?p.getViewMatrix().invert():l;return x&&x._shiftless()},statics:{_updateBoundsCache:function(l,c){if(l&&c){var p=c._id,x=l._boundsCache=l._boundsCache||{ids:{},list:[]};x.ids[p]||(x.list.push(c),x.ids[p]=c)}},_clearBoundsCache:function(l){var c=l._boundsCache;if(c){l._bounds=l._position=l._boundsCache=t;for(var p=0,x=c.list,y=x.length;p<y;p++){var T=x[p];T!==l&&(T._bounds=T._position=t,T._boundsCache&&A._clearBoundsCache(T))}}},_getBounds:function(l,c,p){var x=1/0,y=-x,T=x,P=y,I=!1;p=p||{};for(var L=0,k=l.length;L<k;L++){var G=l[L];if(G._visible&&!G.isEmpty(!0)){var V=G._getCachedBounds(c&&c.appended(G._matrix),p,!0),H=V.rect;x=Math.min(H.x,x),T=Math.min(H.y,T),y=Math.max(H.x+H.width,y),P=Math.max(H.y+H.height,P),V.nonscaling&&(I=!0)}}return{rect:isFinite(x)?new b(x,T,y-x,P-T):new b,nonscaling:I}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var l=this._decompose();return l?l.rotation:0},setRotation:function(l){var c=this.getRotation();if(c!=null&&l!=null){var p=this._decomposed;this.rotate(l-c),p&&(p.rotation=l,this._decomposed=p)}},getScaling:function(){var l=this._decompose(),c=l&&l.scaling;return new m(c?c.x:1,c?c.y:1,this,"setScaling")},setScaling:function(){var l=this.getScaling(),c=f.read(arguments,0,{clone:!0,readNull:!0});if(l&&c&&!l.equals(c)){var p=this.getRotation(),x=this._decomposed,y=new M,T=d.isZero;if(T(l.x)||T(l.y))y.translate(x.translation),p&&y.rotate(p),y.scale(c.x,c.y),this._matrix.set(y);else{var P=this.getPosition(!0);y.translate(P),p&&y.rotate(p),y.scale(c.x/l.x,c.y/l.y),p&&y.rotate(-p),y.translate(P.negate()),this.transform(y)}x&&(x.scaling=c,this._decomposed=x)}},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},getGlobalMatrix:function(l){var c=this._globalMatrix;if(c)for(var p=this._parent,x=[];p;){if(!p._globalMatrix){c=null;for(var y=0,T=x.length;y<T;y++)x[y]._globalMatrix=null;break}x.push(p),p=p._parent}if(!c){c=this._globalMatrix=this._matrix.clone();var p=this._parent;p&&c.prepend(p.getGlobalMatrix(!0))}return l?c:c.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(l){(this._applyMatrix=this._canApplyMatrix&&!!l)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(l,c){if(this._project!==l){this._project&&this._installEvents(!1),this._project=l;for(var p=this._children,x=0,y=p&&p.length;x<y;x++)p[x]._setProject(l);c=!0}c&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function l(c){l.base.call(this,c);for(var p=this._children,x=0,y=p&&p.length;x<y;x++)p[x]._installEvents(c)},getLayer:function(){for(var l=this;l=l._parent;)if(l instanceof N)return l;return null},getParent:function(){return this._parent},setParent:function(l){return l.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(l){this.removeChildren(),this.addChildren(l)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var l=this._getOwner();return l&&l._children[this._index+1]||null},getPreviousSibling:function(){var l=this._getOwner();return l&&l._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(l){return l===this||l&&this._class===l._class&&this._style.equals(l._style)&&this._matrix.equals(l._matrix)&&this._locked===l._locked&&this._visible===l._visible&&this._blendMode===l._blendMode&&this._opacity===l._opacity&&this._clipMask===l._clipMask&&this._guide===l._guide&&this._equals(l)||!1},_equals:function(l){return n.equals(this._children,l._children)},clone:function(l){var c=new this.constructor(A.NO_INSERT),p=this._children,x=n.pick(l?l.insert:t,l===t||l===!0),y=n.pick(l?l.deep:t,!0);p&&c.copyAttributes(this),(!p||y)&&c.copyContent(this),p||c.copyAttributes(this),x&&c.insertAbove(this);var T=this._name,P=this._parent;if(T&&P){for(var p=P._children,I=T,L=1;p[T];)T=I+" "+L++;T!==I&&c.setName(T)}return c},copyContent:function(l){for(var c=l._children,p=0,x=c&&c.length;p<x;p++)this.addChild(c[p].clone(!1),!0)},copyAttributes:function(l,c){this.setStyle(l._style);for(var p=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],x=0,y=p.length;x<y;x++){var T=p[x];l.hasOwnProperty(T)&&(this[T]=l[T])}c||this._matrix.set(l._matrix,!0),this.setApplyMatrix(l._applyMatrix),this.setPivot(l._pivot),this.setSelection(l._selection);var P=l._data,I=l._name;this._data=P?n.clone(P):null,I&&this.setName(I)},rasterize:function(l,c){var p,x,y;n.isPlainObject(l)?(p=l.resolution,x=l.insert,y=l.raster):(p=l,x=c),y||(y=new X(A.NO_INSERT));var T=this.getStrokeBounds(),P=(p||this.getView().getResolution())/72,I=T.getTopLeft().floor(),L=T.getBottomRight().ceil(),k=new _(L.subtract(I)),G=k.multiply(P);if(y.setSize(G,!0),!G.isZero()){var V=y.getContext(!0),H=new M().scale(P).translate(I.negate());V.save(),H.applyToContext(V),this.draw(V,new n({matrices:[H]})),V.restore()}return y._matrix.set(new M().translate(I.add(k.divide(2))).scale(1/P)),(x===t||x)&&y.insertAbove(this),y},contains:function(){var l=this._matrix;return l.isInvertible()&&!!this._contains(l._inverseTransform(f.read(arguments)))},_contains:function(l){var c=this._children;if(c){for(var p=c.length-1;p>=0;p--)if(c[p].contains(l))return!0;return!1}return l.isInside(this.getInternalBounds())},isInside:function(){return b.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new W.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(l,c){return l instanceof A?this._asPathItem().getIntersections(l._asPathItem(),null,c,!0).length>0:!1}},new function(){function l(){var x=arguments;return this._hitTest(f.read(x),gt.getOptions(x))}function c(){var x=arguments,y=f.read(x),T=gt.getOptions(x),P=[];return this._hitTest(y,new n({all:P},T)),P}function p(x,y,T,P){var I=this._children;if(I)for(var L=I.length-1;L>=0;L--){var k=I[L],G=k!==P&&k._hitTest(x,y,T);if(G&&!y.all)return G}return null}return w.inject({hitTest:l,hitTestAll:c,_hitTest:p}),{hitTest:l,hitTestAll:c,_hitTestChildren:p}},{_hitTest:function(l,c,p){if(this._locked||!this._visible||this._guide&&!c.guides||this.isEmpty())return null;var x=this._matrix,y=p?p.appended(x):this.getGlobalMatrix().prepend(this.getView()._matrix),T=Math.max(c.tolerance,1e-12),P=c._tolerancePadding=new _(W._getStrokePadding(T,x._shiftless().invert()));if(l=x._inverseTransform(l),!l||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(P.multiply(2))._containsPoint(l))return null;var I=!(c.guides&&!this._guide||c.selected&&!this.isSelected()||c.type&&c.type!==n.hyphenate(this._class)||c.class&&!(this instanceof c.class)),L=c.match,k=this,G,V;function H(q){return q&&L&&!L(q)&&(q=null),q&&c.all&&c.all.push(q),q}function Y(q,J){var U=J?G["get"+J]():k.getPosition();if(l.subtract(U).divide(P).length<=1)return new gt(q,k,{name:J?n.hyphenate(J):q,point:U})}var B=c.position,z=c.center,$=c.bounds;if(I&&this._parent&&(B||z||$)){if((z||$)&&(G=this.getInternalBounds()),V=B&&Y("position")||z&&Y("center","Center"),!V&&$)for(var j=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],et=0;et<8&&!V;et++)V=Y("bounds",j[et]);V=H(V)}return V||(V=this._hitTestChildren(l,c,y)||I&&H(this._hitTestSelf(l,c,y,this.getStrokeScaling()?null:y._shiftless().invert()))||null),V&&V.point&&(V.point=x.transform(V.point)),V},_hitTestSelf:function(l,c){if(c.fill&&this.hasFill()&&this._contains(l))return new gt("fill",this)},matches:function(l,c){function p(P,I){for(var L in P)if(P.hasOwnProperty(L)){var k=P[L],G=I[L];if(n.isPlainObject(k)&&n.isPlainObject(G)){if(!p(k,G))return!1}else if(!n.equals(k,G))return!1}return!0}var x=typeof l;if(x==="object"){for(var y in l)if(l.hasOwnProperty(y)&&!this.matches(y,l[y]))return!1;return!0}else{if(x==="function")return l(this);if(l==="match")return c(this);var T=/^(empty|editable)$/.test(l)?this["is"+n.capitalize(l)]():l==="type"?n.hyphenate(this._class):this[l];if(l==="class"){if(typeof c=="function")return this instanceof c;T=this._class}if(typeof c=="function")return!!c(T);if(c){if(c.test)return c.test(T);if(n.isPlainObject(c))return p(c,T)}return n.equals(T,c)}},getItems:function(l){return A._getItems(this,l,this._matrix)},getItem:function(l){return A._getItems(this,l,this._matrix,null,!0)[0]||null},statics:{_getItems:function l(c,p,x,y,T){if(!y){var P=typeof p=="object"&&p,I=P&&P.overlapping,L=P&&P.inside,k=I||L,H=k&&b.read([k]);y={items:[],recursive:P&&P.recursive!==!1,inside:!!L,overlapping:!!I,rect:H,path:I&&new W.Rectangle({rectangle:H,insert:!1})},P&&(p=n.filter({},p,{recursive:!0,inside:!0,overlapping:!0}))}var G=c._children,V=y.items,H=y.rect;x=H&&(x||new M);for(var Y=0,B=G&&G.length;Y<B;Y++){var z=G[Y],$=x&&x.appended(z._matrix),j=!0;if(H){var k=z.getBounds($);if(!H.intersects(k))continue;H.contains(k)||y.overlapping&&(k.contains(H)||y.path.intersects(z,$))||(j=!1)}if(j&&z.matches(p)&&(V.push(z),T)||(y.recursive!==!1&&l(z,p,$,y,T),T&&V.length>0))break}return V}}},{importJSON:function(l){var c=n.importJSON(l,this);return c!==this?this.addChild(c):c},addChild:function(l){return this.insertChild(t,l)},insertChild:function(l,c){var p=c?this.insertChildren(l,[c]):null;return p&&p[0]},addChildren:function(l){return this.insertChildren(this._children.length,l)},insertChildren:function(l,c){var p=this._children;if(p&&c&&c.length>0){c=n.slice(c);for(var x={},y=c.length-1;y>=0;y--){var T=c[y],P=T&&T._id;!T||x[P]?c.splice(y,1):(T._remove(!1,!0),x[P]=!0)}n.splice(p,c,l,0);for(var I=this._project,L=I._changes,y=0,k=c.length;y<k;y++){var T=c[y],G=T._name;T._parent=this,T._setProject(I,!0),G&&T.setName(G),L&&T._changed(5)}this._changed(11)}else c=null;return c},_insertItem:"#insertChild",_insertAt:function(l,c){var p=l&&l._getOwner(),x=l!==this&&p?this:null;return x&&(x._remove(!1,!0),p._insertItem(l._index+c,x)),x},insertAbove:function(l){return this._insertAt(l,1)},insertBelow:function(l){return this._insertAt(l,0)},sendToBack:function(){var l=this._getOwner();return l?l._insertItem(0,this):null},bringToFront:function(){var l=this._getOwner();return l?l._insertItem(t,this):null},appendTop:"#addChild",appendBottom:function(l){return this.insertChild(0,l)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(l){return l._insertItem(t,this)},copyTo:function(l){return this.clone(!1).addTo(l)},reduce:function(l){var c=this._children;if(c&&c.length===1){var p=c[0].reduce(l);return this._parent?(p.insertAbove(this),this.remove()):p.remove(),p}return this},_removeNamed:function(){var l=this._getOwner();if(l){var c=l._children,p=l._namedChildren,x=this._name,y=p[x],T=y?y.indexOf(this):-1;T!==-1&&(c[x]==this&&delete c[x],y.splice(T,1),y.length?c[x]=y[0]:delete p[x])}},_remove:function(l,c){var p=this._getOwner(),x=this._project,y=this._index;return this._style&&this._style._dispose(),p?(this._name&&this._removeNamed(),y!=null&&(x._activeLayer===this&&(x._activeLayer=this.getNextSibling()||this.getPreviousSibling()),n.splice(p._children,null,y,1)),this._installEvents(!1),l&&x._changes&&this._changed(5),c&&p._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(l){var c=l&&l.insertBelow(this);return c&&this.remove(),c},removeChildren:function(l,c){if(!this._children)return null;l=l||0,c=n.pick(c,this._children.length);for(var p=n.splice(this._children,null,l,c-l),x=p.length-1;x>=0;x--)p[x]._remove(!0,!1);return p.length>0&&this._changed(11),p},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var l=0,c=this._children.length;l<c;l++)this._children[l]._index=l;this._changed(11)}},isEmpty:function(l){var c=this._children,p=c?c.length:0;if(l){for(var x=0;x<p;x++)if(!c[x].isEmpty(l))return!1;return!0}return!p},isEditable:function(){for(var l=this;l;){if(!l._visible||l._locked)return!1;l=l._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(l){function c(P){var I=[];do I.unshift(P);while(P=P._parent);return I}for(var p=c(this),x=c(l),y=0,T=Math.min(p.length,x.length);y<T;y++)if(p[y]!=x[y])return p[y]._index<x[y]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(l){return this._getOrder(l)===-1},isBelow:function(l){return this._getOrder(l)===1},isParent:function(l){return this._parent===l},isChild:function(l){return l&&l._parent===this},isDescendant:function(l){for(var c=this;c=c._parent;)if(c===l)return!0;return!1},isAncestor:function(l){return l?l.isDescendant(this):!1},isSibling:function(l){return this._parent===l._parent},isGroupedWith:function(l){for(var c=this._parent;c;){if(c._parent&&/^(Group|Layer|CompoundPath)$/.test(c._class)&&l.isDescendant(c))return!0;c=c._parent}return!1}},n.each(["rotate","scale","shear","skew"],function(l){var c=l==="rotate";this[l]=function(){var p=arguments,x=(c?n:f).read(p),y=f.read(p,0,{readNull:!0});return this.transform(new M()[l](x,y||this.getPosition(!0)))}},{translate:function(){var l=new M;return this.transform(l.translate.apply(l,arguments))},transform:function(l,c,p){var x=this._matrix,y=l&&!l.isIdentity(),T=p&&this._canApplyMatrix||this._applyMatrix&&(y||!x.isIdentity()||c&&this._children);if(!y&&!T)return this;if(y){!l.isInvertible()&&x.isInvertible()&&(x._backup=x.getValues()),x.prepend(l,!0);var P=this._style,I=P.getFillColor(!0),L=P.getStrokeColor(!0);I&&I.transform(l),L&&L.transform(l)}if(T&&(T=this._transformContent(x,c,p))){var k=this._pivot;k&&x._transformPoint(k,k,!0),x.reset(!0),p&&this._canApplyMatrix&&(this._applyMatrix=!0)}var G=this._bounds,V=this._position;(y||T)&&this._changed(25);var H=y&&G&&l.decompose();if(H&&H.skewing.isZero()&&H.rotation%90==0){for(var Y in G){var B=G[Y];if(B.nonscaling)delete G[Y];else if(T||!B.internal){var z=B.rect;l._transformBounds(z,z)}}this._bounds=G;var $=G[this._getBoundsCacheKey(this._boundsOptions||{})];$&&(this._position=this._getPositionFromBounds($.rect))}else y&&V&&this._pivot&&(this._position=l._transformPoint(V,V));return this},_transformContent:function(l,c,p){var x=this._children;if(x){for(var y=0,T=x.length;y<T;y++)x[y].transform(l,c,p);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(f.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(f.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(f.read(arguments))},localToParent:function(){return this._matrix._transformPoint(f.read(arguments))},fitBounds:function(l,c){l=b.read(arguments);var p=this.getBounds(),x=p.height/p.width,y=l.height/l.width,T=(c?x>y:x<y)?l.width/p.width:l.height/p.height,P=new b(new f,new _(p.width*T,p.height*T));P.setCenter(l.getCenter()),this.setBounds(P)}}),{_setStyles:function(l,c,p){var x=this._style,y=this._matrix;if(x.hasFill()&&(l.fillStyle=x.getFillColor().toCanvasStyle(l,y)),x.hasStroke()){l.strokeStyle=x.getStrokeColor().toCanvasStyle(l,y),l.lineWidth=x.getStrokeWidth();var T=x.getStrokeJoin(),P=x.getStrokeCap(),I=x.getMiterLimit();if(T&&(l.lineJoin=T),P&&(l.lineCap=P),I&&(l.miterLimit=I),Ft.support.nativeDash){var L=x.getDashArray(),k=x.getDashOffset();L&&L.length&&("setLineDash"in l?(l.setLineDash(L),l.lineDashOffset=k):(l.mozDash=L,l.mozDashOffset=k))}}if(x.hasShadow()){var G=c.pixelRatio||1,V=p._shiftless().prepend(new M().scale(G,G)),H=V.transform(new f(x.getShadowBlur(),0)),Y=V.transform(this.getShadowOffset());l.shadowColor=x.getShadowColor().toCanvasStyle(l),l.shadowBlur=H.getLength(),l.shadowOffsetX=Y.x,l.shadowOffsetY=Y.y}},draw:function(l,c,p){var x=this._updateVersion=this._project._updateVersion;if(!(!this._visible||this._opacity===0)){var y=c.matrices,T=c.viewMatrix,P=this._matrix,I=y[y.length-1].appended(P);if(!!I.isInvertible()){T=T?T.appended(I):I,y.push(I),c.updateMatrix&&(this._globalMatrix=I);var L=this._blendMode,k=d.clamp(this._opacity,0,1),G=L==="normal",V=Se.nativeModes[L],H=G&&k===1||c.dontStart||c.clip||(V||G&&k<1)&&this._canComposite(),Y=c.pixelRatio||1,B,z,$;if(!H){var j=this.getStrokeBounds(T);if(!j.width||!j.height){y.pop();return}$=c.offset,z=c.offset=j.getTopLeft().floor(),B=l,l=de.getContext(j.getSize().ceil().add(1).multiply(Y)),Y!==1&&l.scale(Y,Y)}l.save();var et=p?p.appended(P):this._canScaleStroke&&!this.getStrokeScaling(!0)&&T,q=!H&&c.clipItem,J=!et||q;if(H?(l.globalAlpha=k,V&&(l.globalCompositeOperation=L)):J&&l.translate(-z.x,-z.y),J&&(H?P:T).applyToContext(l),q&&c.clipItem.draw(l,c.extend({clip:!0})),et){l.setTransform(Y,0,0,Y,0,0);var U=c.offset;U&&l.translate(-U.x,-U.y)}this._draw(l,c,T,et),l.restore(),y.pop(),c.clip&&!c.dontFinish&&l.clip(this.getFillRule()),H||(Se.process(L,l,B,k,z.subtract($).multiply(Y)),de.release(l),c.offset=$)}}},_isUpdated:function(l){var c=this._parent;if(c instanceof Q)return c._isUpdated(l);var p=this._updateVersion===l;return!p&&c&&c._visible&&c._isUpdated(l)&&(this._updateVersion=l,p=!0),p},_drawSelection:function(l,c,p,x,y){var T=this._selection,P=T&1,I=T&2||P&&this._selectBounds,L=T&4;if(this._drawSelected||(P=!1),(P||I||L)&&this._isUpdated(y)){var k,G=this.getSelectedColor(!0)||(k=this.getLayer())&&k.getSelectedColor(!0),V=c.appended(this.getGlobalMatrix(!0)),H=p/2;if(l.strokeStyle=l.fillStyle=G?G.toCanvasStyle(l):"#009dec",P&&this._drawSelected(l,V,x),L){var Y=this.getPosition(!0),B=this._parent,z=B?B.localToGlobal(Y):Y,$=z.x,j=z.y;l.beginPath(),l.arc($,j,H,0,Math.PI*2,!0),l.stroke();for(var et=[[0,-1],[1,0],[0,1],[-1,0]],q=H,J=p+1,U=0;U<4;U++){var K=et[U],O=K[0],rt=K[1];l.moveTo($+O*q,j+rt*q),l.lineTo($+O*J,j+rt*J),l.stroke()}}if(I){var lt=V._transformCorners(this.getInternalBounds());l.beginPath();for(var U=0;U<8;U++)l[U?"lineTo":"moveTo"](lt[U],lt[++U]);l.closePath(),l.stroke();for(var U=0;U<8;U++)l.fillRect(lt[U]-H,lt[++U]-H,p,p)}}},_canComposite:function(){return!1}},n.each(["down","drag","up","move"],function(l){this["removeOn"+n.capitalize(l)]=function(){var c={};return c[l]=!0,this.removeOn(c)}},{removeOn:function(l){for(var c in l)if(l[c]){var p="mouse"+c,x=this._project,y=x._removeSets=x._removeSets||{};y[p]=y[p]||{},y[p][this._id]=this}return this}}),{tween:function(l,c,p){p||(p=c,c=l,l=null,p||(p=c,c=null));var x=p&&p.easing,y=p&&p.start,T=p!=null&&(typeof p=="number"?p:p.duration),P=new oe(this,l,c,T,x,y);function I(L){P._handleFrame(L.time*1e3),P.running||this.off("frame",I)}return T&&this.on("frame",I),P},tweenTo:function(l,c){return this.tween(null,l,c)},tweenFrom:function(l,c){return this.tween(l,null,c)}}),R=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||this.addChildren(Array.isArray(c)?c:arguments)},_changed:function l(c){l.base.call(this,c),c&2050&&(this._clipItem=t)},_getClipItem:function(){var l=this._clipItem;if(l===t){l=null;for(var c=this._children,p=0,x=c.length;p<x;p++)if(c[p]._clipMask){l=c[p];break}this._clipItem=l}return l},isClipped:function(){return!!this._getClipItem()},setClipped:function(l){var c=this.getFirstChild();c&&c.setClipMask(l)},_getBounds:function l(c,p){var x=this._getClipItem();return x?x._getCachedBounds(x._matrix.prepended(c),n.set({},p,{stroke:!1})):l.base.call(this,c,p)},_hitTestChildren:function l(c,p,x){var y=this._getClipItem();return(!y||y.contains(c))&&l.base.call(this,c,p,x,y)},_draw:function(l,c){var p=c.clip,x=!p&&this._getClipItem();c=c.extend({clipItem:x,clip:!1}),p?(l.beginPath(),c.dontStart=c.dontFinish=!0):x&&x.draw(l,c.extend({clip:!0}));for(var y=this._children,T=0,P=y.length;T<P;T++){var I=y[T];I!==x&&I.draw(l,c)}}}),N=R.extend({_class:"Layer",initialize:function(){R.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function l(){return this._parent?l.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),D=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(c,p){this._initialize(c,p)},_equals:function(l){return this._type===l._type&&this._size.equals(l._size)&&n.equals(this._radius,l._radius)},copyContent:function(l){this.setType(l._type),this.setSize(l._size),this.setRadius(l._radius)},getType:function(){return this._type},setType:function(l){this._type=l},getShape:"#getType",setShape:"#setType",getSize:function(){var l=this._size;return new v(l.width,l.height,this,"setSize")},setSize:function(){var l=_.read(arguments);if(!this._size)this._size=l.clone();else if(!this._size.equals(l)){var c=this._type,p=l.width,x=l.height;c==="rectangle"?this._radius.set(_.min(this._radius,l.divide(2).abs())):c==="circle"?(p=x=(p+x)/2,this._radius=p/2):c==="ellipse"&&this._radius._set(p/2,x/2),this._size._set(p,x),this._changed(9)}},getRadius:function(){var l=this._radius;return this._type==="circle"?l:new v(l.width,l.height,this,"setRadius")},setRadius:function(l){var c=this._type;if(c==="circle"){if(l===this._radius)return;var p=l*2;this._radius=l,this._size._set(p,p)}else if(l=_.read(arguments),!this._radius)this._radius=l.clone();else{if(this._radius.equals(l))return;if(this._radius.set(l),c==="rectangle"){var p=_.max(this._size,l.multiply(2));this._size.set(p)}else c==="ellipse"&&this._size._set(l.width*2,l.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(l){var c=new W[n.capitalize(this._type)]({center:new f,size:this._size,radius:this._radius,insert:!1});return c.copyAttributes(this),Ft.settings.applyMatrix&&c.setApplyMatrix(!0),(l===t||l)&&c.insertAbove(this),c},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(l,c,p,x){var y=this._style,T=y.hasFill(),P=y.hasStroke(),I=c.dontFinish||c.clip,L=!x;if(T||P||I){var k=this._type,G=this._radius,V=k==="circle";if(c.dontStart||l.beginPath(),L&&V)l.arc(0,0,G,0,Math.PI*2,!0);else{var H=V?G:G.width,Y=V?G:G.height,B=this._size,z=B.width,$=B.height;if(L&&k==="rectangle"&&H===0&&Y===0)l.rect(-z/2,-$/2,z,$);else{var j=z/2,et=$/2,q=1-.5522847498307936,J=H*q,U=Y*q,K=[-j,-et+Y,-j,-et+U,-j+J,-et,-j+H,-et,j-H,-et,j-J,-et,j,-et+U,j,-et+Y,j,et-Y,j,et-U,j-J,et,j-H,et,-j+H,et,-j+J,et,-j,et-U,-j,et-Y];x&&x.transform(K,K,32),l.moveTo(K[0],K[1]),l.bezierCurveTo(K[2],K[3],K[4],K[5],K[6],K[7]),j!==H&&l.lineTo(K[8],K[9]),l.bezierCurveTo(K[10],K[11],K[12],K[13],K[14],K[15]),et!==Y&&l.lineTo(K[16],K[17]),l.bezierCurveTo(K[18],K[19],K[20],K[21],K[22],K[23]),j!==H&&l.lineTo(K[24],K[25]),l.bezierCurveTo(K[26],K[27],K[28],K[29],K[30],K[31])}}l.closePath()}!I&&(T||P)&&(this._setStyles(l,c,p),T&&(l.fill(y.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),P&&l.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(l,c){var p=new b(this._size).setCenter(0,0),x=this._style,y=c.stroke&&x.hasStroke()&&x.getStrokeWidth();return l&&(p=l._transformBounds(p)),y?p.expand(W._getStrokePadding(y,this._getStrokeMatrix(l,c))):p}},new function(){function l(p,x,y){var T=p._radius;if(!T.isZero())for(var P=p._size.divide(2),I=1;I<=4;I++){var L=new f(I>1&&I<4?-1:1,I>2?-1:1),k=L.multiply(P),G=k.subtract(L.multiply(T)),V=new b(y?k.add(L.multiply(y)):k,G);if(V.contains(x))return{point:G,quadrant:I}}}function c(p,x,y,T){var P=p.divide(x);return(!T||P.isInQuadrant(T))&&P.subtract(P.normalize()).multiply(x).divide(y).length<=1}return{_contains:function p(x){if(this._type==="rectangle"){var y=l(this,x);return y?x.subtract(y.point).divide(this._radius).getLength()<=1:p.base.call(this,x)}else return x.divide(this.size).getLength()<=.5},_hitTestSelf:function p(x,y,T,P){var I=!1,L=this._style,k=y.stroke&&L.hasStroke(),G=y.fill&&L.hasFill();if(k||G){var V=this._type,H=this._radius,Y=k?L.getStrokeWidth()/2:0,B=y._tolerancePadding.add(W._getStrokePadding(Y,!L.getStrokeScaling()&&P));if(V==="rectangle"){var z=B.multiply(2),$=l(this,x,z);if($)I=c(x.subtract($.point),H,B,$.quadrant);else{var j=new b(this._size).setCenter(0,0),et=j.expand(z),q=j.expand(z.negate());I=et._containsPoint(x)&&!q._containsPoint(x)}}else I=c(x,H,B)}return I?new gt(k?"stroke":"fill",this):p.base.apply(this,arguments)}}},{statics:new function(){function l(c,p,x,y,T){var P=n.create(D.prototype);return P._type=c,P._size=x,P._radius=y,P._initialize(n.getNamed(T),p),P}return{Circle:function(){var c=arguments,p=f.readNamed(c,"center"),x=n.readNamed(c,"radius");return l("circle",p,new _(x*2),x,c)},Rectangle:function(){var c=arguments,p=b.readNamed(c,"rectangle"),x=_.min(_.readNamed(c,"radius"),p.getSize(!0).divide(2));return l("rectangle",p.getCenter(!0),p.getSize(!0),x,c)},Ellipse:function(){var c=arguments,p=D._readEllipse(c),x=p.radius;return l("ellipse",p.center,x.multiply(2),x,c)},_readEllipse:function(c){var p,x;if(n.hasNamed(c,"radius"))p=f.readNamed(c,"center"),x=_.readNamed(c,"radius");else{var y=b.readNamed(c,"rectangle");p=y.getCenter(!0),x=y.getSize(!0).divide(2)}return{center:p,radius:x}}}}}),X=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(c,p){if(!this._initialize(c,p!==t&&f.read(arguments))){var x,y=typeof c,T=y==="string"?i.getElementById(c):y==="object"?c:null;if(T&&T!==A.NO_INSERT){if(T.getContext||T.naturalHeight!=null)x=T;else if(T){var P=_.read(arguments);P.isZero()||(x=de.getCanvas(P))}}x?this.setImage(x):this.setSource(c)}this._size||(this._size=new _,this._loaded=!1)},_equals:function(l){return this.getSource()===l.getSource()},copyContent:function(l){var c=l._image,p=l._canvas;if(c)this._setImage(c);else if(p){var x=de.getCanvas(l._size);x.getContext("2d").drawImage(p,0,0),this._setImage(x)}this._crossOrigin=l._crossOrigin},getSize:function(){var l=this._size;return new v(l?l.width:0,l?l.height:0,this,"setSize")},setSize:function(l,c){var p=_.read(arguments);if(p.equals(this._size))c&&this.clear();else if(p.width>0&&p.height>0){var x=!c&&this.getElement();this._setImage(de.getCanvas(p)),x&&this.getContext(!0).drawImage(x,0,0,p.width,p.height)}else this._canvas&&de.release(this._canvas),this._size=p.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(l){this.setSize(l,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(l){this.setSize(this.getWidth(),l)},getLoaded:function(){return this._loaded},isEmpty:function(){var l=this._size;return!l||l.width===0&&l.height===0},getResolution:function(){var l=this._matrix,c=new f(0,0).transform(l),p=new f(1,0).transform(l).subtract(c),x=new f(0,1).transform(l).subtract(c);return new _(72/p.getLength(),72/x.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(l){var c=this;function p(x){var y=c.getView(),T=x&&x.type||"load";y&&c.responds(T)&&(Ft=y._scope,c.emit(T,new qt(x)))}this._setImage(l),this._loaded?setTimeout(p,0):l&&Yt.add(l,{load:function(x){c._setImage(l),p(x)},error:p})},_setImage:function(l){this._canvas&&de.release(this._canvas),l&&l.getContext?(this._image=null,this._canvas=l,this._loaded=!0):(this._image=l,this._canvas=null,this._loaded=!!(l&&l.src&&l.complete)),this._size=new _(l?l.naturalWidth||l.width:0,l?l.naturalHeight||l.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var l=de.getContext(this._size);try{this._image&&l.drawImage(this._image,0,0),this._canvas=l.canvas}catch{de.release(l)}}return this._canvas},setCanvas:"#setImage",getContext:function(l){return this._context||(this._context=this.getCanvas().getContext("2d")),l&&(this._image=null,this._changed(1025)),this._context},setContext:function(l){this._context=l},getSource:function(){var l=this._image;return l&&l.src||this.toDataURL()},setSource:function(l){var c=new r.Image,p=this._crossOrigin;p&&(c.crossOrigin=p),l&&(c.src=l),this.setImage(c)},getCrossOrigin:function(){var l=this._image;return l&&l.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(l){this._crossOrigin=l;var c=this._image;c&&(c.crossOrigin=l)},getSmoothing:function(){return this._smoothing},setSmoothing:function(l){this._smoothing=typeof l=="string"?l:l?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var l=b.read(arguments),c=de.getContext(l.getSize());return c.drawImage(this.getCanvas(),l.x,l.y,l.width,l.height,0,0,l.width,l.height),c.canvas},getSubRaster:function(){var l=b.read(arguments),c=new X(A.NO_INSERT);return c._setImage(this.getSubCanvas(l)),c.translate(l.getCenter().subtract(this.getSize().divide(2))),c._matrix.prepend(this._matrix),c.insertAbove(this),c},toDataURL:function(){var l=this._image,c=l&&l.src;if(/^data:/.test(c))return c;var p=this.getCanvas();return p?p.toDataURL.apply(p,arguments):null},drawImage:function(l){var c=f.read(arguments,1);this.getContext(!0).drawImage(l,c.x,c.y)},getAverageColor:function(l){var c,p;if(l?l instanceof tt?(p=l,c=l.getBounds()):typeof l=="object"&&("width"in l?c=new b(l):"x"in l&&(c=new b(l.x-.5,l.y-.5,1,1))):c=this.getBounds(),!c)return null;var x=32,y=Math.min(c.width,x),T=Math.min(c.height,x),P=X._sampleContext;P?P.clearRect(0,0,x+1,x+1):P=X._sampleContext=de.getContext(new _(x)),P.save();var I=new M().scale(y/c.width,T/c.height).translate(-c.x,-c.y);I.applyToContext(P),p&&p.draw(P,new n({clip:!0,matrices:[I]})),this._matrix.applyToContext(P);var L=this.getElement(),k=this._size;L&&P.drawImage(L,-k.width/2,-k.height/2),P.restore();for(var G=P.getImageData(.5,.5,Math.ceil(y),Math.ceil(T)).data,V=[0,0,0],H=0,Y=0,B=G.length;Y<B;Y+=4){var z=G[Y+3];H+=z,z/=255,V[0]+=G[Y]*z,V[1]+=G[Y+1]*z,V[2]+=G[Y+2]*z}for(var Y=0;Y<3;Y++)V[Y]/=H;return H?Pt.read(V):null},getPixel:function(){var l=f.read(arguments),c=this.getContext().getImageData(l.x,l.y,1,1).data;return new Pt("rgb",[c[0]/255,c[1]/255,c[2]/255],c[3]/255)},setPixel:function(){var l=arguments,c=f.read(l),p=Pt.read(l),x=p._convert("rgb"),y=p._alpha,T=this.getContext(!0),P=T.createImageData(1,1),I=P.data;I[0]=x[0]*255,I[1]=x[1]*255,I[2]=x[2]*255,I[3]=y!=null?y*255:255,T.putImageData(P,c.x,c.y)},clear:function(){var l=this._size;this.getContext(!0).clearRect(0,0,l.width+1,l.height+1)},createImageData:function(){var l=_.read(arguments);return this.getContext().createImageData(l.width,l.height)},getImageData:function(){var l=b.read(arguments);return l.isEmpty()&&(l=new b(this._size)),this.getContext().getImageData(l.x,l.y,l.width,l.height)},putImageData:function(l){var c=f.read(arguments,1);this.getContext(!0).putImageData(l,c.x,c.y)},setImageData:function(l){this.setSize(l),this.getContext(!0).putImageData(l,0,0)},_getBounds:function(l,c){var p=new b(this._size).setCenter(0,0);return l?l._transformBounds(p):p},_hitTestSelf:function(l){if(this._contains(l)){var c=this;return new gt("pixel",c,{offset:l.add(c._size.divide(2)).round(),color:{get:function(){return c.getPixel(this.offset)}}})}},_draw:function(l,c,p){var x=this.getElement();if(x&&x.width>0&&x.height>0){l.globalAlpha=d.clamp(this._opacity,0,1),this._setStyles(l,c,p);var y=this._smoothing,T=y==="off";Vt.setPrefixed(l,T?"imageSmoothingEnabled":"imageSmoothingQuality",T?!1:y),l.drawImage(x,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),at=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(c,p){this._initialize(c,p!==t&&f.read(arguments,1))||this.setDefinition(c instanceof ft?c:new ft(c))},_equals:function(l){return this._definition===l._definition},copyContent:function(l){this.setDefinition(l._definition)},getDefinition:function(){return this._definition},setDefinition:function(l){this._definition=l,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(l,c){var p=this._definition._item;return p._getCachedBounds(p._matrix.prepended(l),c)},_hitTestSelf:function(l,c,p){var x=c.extend({all:!1}),y=this._definition._item._hitTest(l,x,p);return y&&(y.item=this),y},_draw:function(l,c){this._definition._item.draw(l,c)}}),ft=n.extend({_class:"SymbolDefinition",initialize:function(c,p){this._id=g.get(),this.project=Ft.project,c&&this.setItem(c,p)},_serialize:function(l,c){return c.add(this,function(){return n.serialize([this._class,this._item],l,!1,c)})},_changed:function(l){l&8&&A._clearBoundsCache(this),l&1&&this.project._changed(l)},getItem:function(){return this._item},setItem:function(l,c){l._symbol&&(l=l.clone()),this._item&&(this._item._symbol=null),this._item=l,l.remove(),l.setSelected(!1),c||l.setPosition(new f),l._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(l){return new at(this,l)},clone:function(){return new ft(this._item.clone(!1))},equals:function(l){return l===this||l&&this._item.equals(l._item)||!1}}),gt=n.extend({_class:"HitResult",initialize:function(c,p,x){this.type=c,this.item=p,x&&this.inject(x)},statics:{getOptions:function(l){var c=l&&n.read(l);return new n({type:null,tolerance:Ft.settings.hitTolerance,fill:!c,stroke:!c,segments:!c,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},c)}}}),ut=n.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(c,p,x,y,T,P){var I=arguments.length,L,k,G,V;I>0&&(c==null||typeof c=="object"?I===1&&c&&"point"in c?(L=c.point,k=c.handleIn,G=c.handleOut,V=c.selection):(L=c,k=p,G=x,V=y):(L=[c,p],k=x!==t?[x,y]:null,G=T!==t?[T,P]:null)),new xt(L,this,"_point"),new xt(k,this,"_handleIn"),new xt(G,this,"_handleOut"),V&&this.setSelection(V)},_serialize:function(l,c){var p=this._point,x=this._selection,y=x||this.hasHandles()?[p,this._handleIn,this._handleOut]:p;return x&&y.push(x),n.serialize(y,l,!0,c)},_changed:function(l){var c=this._path;if(!!c){var p=c._curves,x=this._index,y;p&&((!l||l===this._point||l===this._handleIn)&&(y=x>0?p[x-1]:c._closed?p[p.length-1]:null)&&y._changed(),(!l||l===this._point||l===this._handleOut)&&(y=p[x])&&y._changed()),c._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(f.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(f.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(f.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var l=this._handleIn,c=this._handleOut;return!l.isZero()&&!c.isZero()&&l.isCollinear(c)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(l){var c=this._selection,p=this._path;this._selection=l=l||0,p&&l!==c&&(p._updateSelection(this,c,l),p._changed(257))},_changeSelection:function(l,c){var p=this._selection;this.setSelection(c?p|l:p&~l)},isSelected:function(){return!!(this._selection&7)},setSelected:function(l){this._changeSelection(7,l)},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var l=this._path,c=this._index;return l?(c>0&&!l._closed&&c===l._segments.length-1&&c--,l.getCurves()[c]||null):null},getLocation:function(){var l=this.getCurve();return l?new it(l,this===l._segment1?0:1):null},getNext:function(){var l=this._path&&this._path._segments;return l&&(l[this._index+1]||this._path._closed&&l[0])||null},smooth:function(l,c,p){var x=l||{},y=x.type,T=x.factor,P=this.getPrevious(),I=this.getNext(),L=(P||this)._point,k=this._point,G=(I||this)._point,V=L.getDistance(k),H=k.getDistance(G);if(!y||y==="catmull-rom"){var Y=T===t?.5:T,B=Math.pow(V,Y),z=B*B,$=Math.pow(H,Y),j=$*$;if(!c&&P){var et=2*j+3*$*B+z,q=3*$*($+B);this.setHandleIn(q!==0?new f((j*L._x+et*k._x-z*G._x)/q-k._x,(j*L._y+et*k._y-z*G._y)/q-k._y):new f)}if(!p&&I){var et=2*z+3*B*$+j,q=3*B*(B+$);this.setHandleOut(q!==0?new f((z*G._x+et*k._x-j*L._x)/q-k._x,(z*G._y+et*k._y-j*L._y)/q-k._y):new f)}}else if(y==="geometric"){if(P&&I){var J=L.subtract(G),U=T===t?.4:T,K=U*V/(V+H);c||this.setHandleIn(J.multiply(K)),p||this.setHandleOut(J.multiply(K-U))}}else throw new Error("Smoothing method '"+y+"' not supported.")},getPrevious:function(){var l=this._path&&this._path._segments;return l&&(l[this._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var l=this._path;return l&&this._index===l._segments.length-1||!1},reverse:function(){var l=this._handleIn,c=this._handleOut,p=l.clone();l.set(c),c.set(p)},reversed:function(){return new ut(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ut(this._point,this._handleIn,this._handleOut)},equals:function(l){return l===this||l&&this._class===l._class&&this._point.equals(l._point)&&this._handleIn.equals(l._handleIn)&&this._handleOut.equals(l._handleOut)||!1},toString:function(){var l=["point: "+this._point];return this._handleIn.isZero()||l.push("handleIn: "+this._handleIn),this._handleOut.isZero()||l.push("handleOut: "+this._handleOut),"{ "+l.join(", ")+" }"},transform:function(l){this._transformCoordinates(l,new Array(6),!0),this._changed()},interpolate:function(l,c,p){var x=1-p,y=p,T=l._point,P=c._point,I=l._handleIn,L=c._handleIn,k=c._handleOut,G=l._handleOut;this._point._set(x*T._x+y*P._x,x*T._y+y*P._y,!0),this._handleIn._set(x*I._x+y*L._x,x*I._y+y*L._y,!0),this._handleOut._set(x*G._x+y*k._x,x*G._y+y*k._y,!0),this._changed()},_transformCoordinates:function(l,c,p){var x=this._point,y=!p||!this._handleIn.isZero()?this._handleIn:null,T=!p||!this._handleOut.isZero()?this._handleOut:null,P=x._x,I=x._y,L=2;return c[0]=P,c[1]=I,y&&(c[L++]=y._x+P,c[L++]=y._y+I),T&&(c[L++]=T._x+P,c[L++]=T._y+I),l&&(l._transformCoordinates(c,c,L/2),P=c[0],I=c[1],p?(x._x=P,x._y=I,L=2,y&&(y._x=c[L++]-P,y._y=c[L++]-I),T&&(T._x=c[L++]-P,T._y=c[L++]-I)):(y||(c[L++]=P,c[L++]=I),T||(c[L++]=P,c[L++]=I))),c}}),xt=f.extend({initialize:function(c,p,x){var y,T,P;if(!c)y=T=0;else if((y=c[0])!==t)T=c[1];else{var I=c;(y=I.x)===t&&(I=f.read(arguments),y=I.x),T=I.y,P=I.selected}this._x=y,this._y=T,this._owner=p,p[x]=this,P&&this.setSelected(!0)},_set:function(l,c){return this._x=l,this._y=c,this._owner._changed(this),this},getX:function(){return this._x},setX:function(l){this._x=l,this._owner._changed(this)},getY:function(){return this._y},setY:function(l){this._y=l,this._owner._changed(this)},isZero:function(){var l=d.isZero;return l(this._x)&&l(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(l){this._owner._changeSelection(this._getSelection(),l)},_getSelection:function(){var l=this._owner;return this===l._point?1:this===l._handleIn?2:this===l._handleOut?4:0}}),nt=n.extend({_class:"Curve",beans:!0,initialize:function(c,p,x,y,T,P,I,L){var k=arguments.length,G,V,H,Y,B,z;k===3?(this._path=c,G=p,V=x):k?k===1?"segment1"in c?(G=new ut(c.segment1),V=new ut(c.segment2)):"point1"in c?(H=c.point1,B=c.handle1,z=c.handle2,Y=c.point2):Array.isArray(c)&&(H=[c[0],c[1]],Y=[c[6],c[7]],B=[c[2]-c[0],c[3]-c[1]],z=[c[4]-c[6],c[5]-c[7]]):k===2?(G=new ut(c),V=new ut(p)):k===4?(H=c,B=p,z=x,Y=y):k===8&&(H=[c,p],Y=[I,L],B=[x-c,y-p],z=[T-I,P-L]):(G=new ut,V=new ut),this._segment1=G||new ut(H,null,B),this._segment2=V||new ut(Y,z,null)},_serialize:function(l,c){return n.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],l,!0,c)},_changed:function(){this._length=this._bounds=t},clone:function(){return new nt(this._segment1,this._segment2)},toString:function(){var l=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||l.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||l.push("handle2: "+this._segment2._handleIn),l.push("point2: "+this._segment2._point),"{ "+l.join(", ")+" }"},classify:function(){return nt.classify(this.getValues())},remove:function(){var l=!1;if(this._path){var c=this._segment2,p=c._handleOut;l=c.remove(),l&&this._segment1._handleOut.set(p)}return l},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(f.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(f.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(f.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(f.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index+1]||this._path._closed&&l[0])||null},getPrevious:function(){var l=this._path&&this._path._curves;return l&&(l[this._segment1._index-1]||this._path._closed&&l[l.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var l=this._path;return l&&this._segment1._index===l._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(l){this.getPoint1().setSelected(l),this.getHandle1().setSelected(l),this.getHandle2().setSelected(l),this.getPoint2().setSelected(l)},getValues:function(l){return nt.getValues(this._segment1,this._segment2,l)},getPoints:function(){for(var l=this.getValues(),c=[],p=0;p<8;p+=2)c.push(new f(l[p],l[p+1]));return c}},{getLength:function(){return this._length==null&&(this._length=nt.getLength(this.getValues(),0,1)),this._length},getArea:function(){return nt.getArea(this.getValues())},getLine:function(){return new E(this._segment1._point,this._segment2._point)},getPart:function(l,c){return new nt(nt.getPart(this.getValues(),l,c))},getPartLength:function(l,c){return nt.getLength(this.getValues(),l,c)},divideAt:function(l){return this.divideAtTime(l&&l.curve===this?l.time:this.getTimeAt(l))},divideAtTime:function(l,c){var p=1e-8,x=1-p,y=null;if(l>=p&&l<=x){var T=nt.subdivide(this.getValues(),l),P=T[0],I=T[1],L=c||this.hasHandles(),k=this._segment1,G=this._segment2,V=this._path;L&&(k._handleOut._set(P[2]-P[0],P[3]-P[1]),G._handleIn._set(I[4]-I[6],I[5]-I[7]));var H=P[6],Y=P[7],B=new ut(new f(H,Y),L&&new f(P[4]-H,P[5]-Y),L&&new f(I[2]-H,I[3]-Y));V?(V.insert(k._index+1,B),y=this.getNext()):(this._segment2=B,this._changed(),y=new nt(B,G))}return y},splitAt:function(l){var c=this._path;return c?c.splitAt(l):null},splitAtTime:function(l){return this.splitAt(this.getLocationAtTime(l))},divide:function(l,c){return this.divideAtTime(l===t?.5:c?l:this.getTimeAt(l))},split:function(l,c){return this.splitAtTime(l===t?.5:c?l:this.getTimeAt(l))},reversed:function(){return new nt(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(l,c,p,x){var y=l._point,T=l._handleOut,P=c._handleIn,I=c._point,L=y.x,k=y.y,G=I.x,V=I.y,H=x?[L,k,L,k,G,V,G,V]:[L,k,L+T._x,k+T._y,G+P._x,V+P._y,G,V];return p&&p._transformCoordinates(H,H,4),H},subdivide:function(l,c){var p=l[0],x=l[1],y=l[2],T=l[3],P=l[4],I=l[5],L=l[6],k=l[7];c===t&&(c=.5);var G=1-c,V=G*p+c*y,H=G*x+c*T,Y=G*y+c*P,B=G*T+c*I,z=G*P+c*L,$=G*I+c*k,j=G*V+c*Y,et=G*H+c*B,q=G*Y+c*z,J=G*B+c*$,U=G*j+c*q,K=G*et+c*J;return[[p,x,V,H,j,et,U,K],[U,K,q,J,z,$,L,k]]},getMonoCurves:function(l,c){var p=[],x=c?0:1,y=l[x+0],T=l[x+2],P=l[x+4],I=l[x+6];if(y>=T==T>=P&&T>=P==P>=I||nt.isStraight(l))p.push(l);else{var L=3*(T-P)-y+I,k=2*(y+P)-4*T,G=T-y,V=1e-8,H=1-V,Y=[],B=d.solveQuadratic(L,k,G,Y,V,H);if(!B)p.push(l);else{Y.sort();var z=Y[0],$=nt.subdivide(l,z);p.push($[0]),B>1&&(z=(Y[1]-z)/(1-z),$=nt.subdivide($[1],z),p.push($[0])),p.push($[1])}}return p},solveCubic:function(l,c,p,x,y,T){var P=l[c],I=l[c+2],L=l[c+4],k=l[c+6],G=0;if(!(P<p&&k<p&&I<p&&L<p||P>p&&k>p&&I>p&&L>p)){var V=3*(I-P),H=3*(L-I)-V,Y=k-P-V-H;G=d.solveCubic(Y,H,V,P-p,x,y,T)}return G},getTimeOf:function(l,c){var p=new f(l[0],l[1]),x=new f(l[6],l[7]),y=1e-12,T=1e-7,P=c.isClose(p,y)?0:c.isClose(x,y)?1:null;if(P===null)for(var I=[c.x,c.y],L=[],k=0;k<2;k++)for(var G=nt.solveCubic(l,k,I[k],L,0,1),V=0;V<G;V++){var H=L[V];if(c.isClose(nt.getPoint(l,H),T))return H}return c.isClose(p,T)?0:c.isClose(x,T)?1:null},getNearestTime:function(l,c){if(nt.isStraight(l)){var p=l[0],x=l[1],y=l[6],T=l[7],P=y-p,I=T-x,L=P*P+I*I;if(L===0)return 0;var k=((c.x-p)*P+(c.y-x)*I)/L;return k<1e-12?0:k>.999999999999?1:nt.getTimeOf(l,new f(p+k*P,x+k*I))}var G=100,V=1/0,H=0;function Y($){if($>=0&&$<=1){var j=c.getDistance(nt.getPoint(l,$),!0);if(j<V)return V=j,H=$,!0}}for(var B=0;B<=G;B++)Y(B/G);for(var z=1/(G*2);z>1e-8;)!Y(H-z)&&!Y(H+z)&&(z/=2);return H},getPart:function(l,c,p){var x=c>p;if(x){var y=c;c=p,p=y}return c>0&&(l=nt.subdivide(l,c)[1]),p<1&&(l=nt.subdivide(l,(p-c)/(1-c))[0]),x?[l[6],l[7],l[4],l[5],l[2],l[3],l[0],l[1]]:l},isFlatEnough:function(l,c){var p=l[0],x=l[1],y=l[2],T=l[3],P=l[4],I=l[5],L=l[6],k=l[7],G=3*y-2*p-L,V=3*T-2*x-k,H=3*P-2*L-p,Y=3*I-2*k-x;return Math.max(G*G,H*H)+Math.max(V*V,Y*Y)<=16*c*c},getArea:function(l){var c=l[0],p=l[1],x=l[2],y=l[3],T=l[4],P=l[5],I=l[6],L=l[7];return 3*((L-p)*(x+T)-(I-c)*(y+P)+y*(c-T)-x*(p-P)+L*(T+c/3)-I*(P+p/3))/20},getBounds:function(l){for(var c=l.slice(0,2),p=c.slice(),x=[0,0],y=0;y<2;y++)nt._addBounds(l[y],l[y+2],l[y+4],l[y+6],y,0,c,p,x);return new b(c[0],c[1],p[0]-c[0],p[1]-c[1])},_addBounds:function(l,c,p,x,y,T,P,I,L){function k(U,K){var O=U-K,rt=U+K;O<P[y]&&(P[y]=O),rt>I[y]&&(I[y]=rt)}T/=2;var G=P[y]+T,V=I[y]-T;if(l<G||c<G||p<G||x<G||l>V||c>V||p>V||x>V)if(c<l!=c<x&&p<l!=p<x)k(l,0),k(x,0);else{var H=3*(c-p)-l+x,Y=2*(l+p)-4*c,B=c-l,z=d.solveQuadratic(H,Y,B,L),$=1e-8,j=1-$;k(x,0);for(var et=0;et<z;et++){var q=L[et],J=1-q;$<=q&&q<=j&&k(J*J*J*l+3*J*J*q*c+3*J*q*q*p+q*q*q*x,T)}}}}},n.each(["getBounds","getStrokeBounds","getHandleBounds"],function(l){this[l]=function(){this._bounds||(this._bounds={});var c=this._bounds[l];return c||(c=this._bounds[l]=W[l]([this._segment1,this._segment2],!1,this._path)),c.clone()}},{}),n.each({isStraight:function(l,c,p,x){if(c.isZero()&&p.isZero())return!0;var y=x.subtract(l);if(y.isZero())return!1;if(y.isCollinear(c)&&y.isCollinear(p)){var T=new E(l,x),P=1e-7;if(T.getDistance(l.add(c))<P&&T.getDistance(x.add(p))<P){var I=y.dot(y),L=y.dot(c)/I,k=y.dot(p)/I;return L>=0&&L<=1&&k<=0&&k>=-1}}return!1},isLinear:function(l,c,p,x){var y=x.subtract(l).divide(3);return c.equals(y)&&p.negate().equals(y)}},function(l,c){this[c]=function(p){var x=this._segment1,y=this._segment2;return l(x._point,x._handleOut,y._handleIn,y._point,p)},this.statics[c]=function(p,x){var y=p[0],T=p[1],P=p[6],I=p[7];return l(new f(y,T),new f(p[2]-y,p[3]-T),new f(p[4]-P,p[5]-I),new f(P,I),x)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(l){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(l||0)},isCollinear:function(l){return l&&this.isStraight()&&l.isStraight()&&this.getLine().isCollinear(l.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(l,c){return this.getLocationAtTime(c?l:this.getTimeAt(l))},getLocationAtTime:function(l){return l!=null&&l>=0&&l<=1?new it(this,l):null},getTimeAt:function(l,c){return nt.getTimeAt(this.getValues(),l,c)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var l=f.read(arguments);return l.isZero()?[]:nt.getTimesWithTangent(this.getValues(),l)},getOffsetAtTime:function(l){return this.getPartLength(0,l)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(f.read(arguments)))},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getTimeOf:function(){return nt.getTimeOf(this.getValues(),f.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var l=f.read(arguments),c=this.getValues(),p=nt.getNearestTime(c,l),x=nt.getPoint(c,p);return new it(this,p,x,null,l.getDistance(x))},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()}},new function(){var l=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return n.each(l,function(c){this[c+"At"]=function(p,x){var y=this.getValues();return nt[c](y,x?p:nt.getTimeAt(y,p))},this[c+"AtTime"]=function(p){return nt[c](this.getValues(),p)}},{statics:{_evaluateMethods:l}})},new function(){function l(x){var y=x[0],T=x[1],P=x[2],I=x[3],L=x[4],k=x[5],G=x[6],V=x[7],H=9*(P-L)+3*(G-y),Y=6*(y+L)-12*P,B=3*(P-y),z=9*(I-k)+3*(V-T),$=6*(T+k)-12*I,j=3*(I-T);return function(et){var q=(H*et+Y)*et+B,J=(z*et+$)*et+j;return Math.sqrt(q*q+J*J)}}function c(x,y){return Math.max(2,Math.min(16,Math.ceil(Math.abs(y-x)*32)))}function p(x,y,T,P){if(y==null||y<0||y>1)return null;var I=x[0],L=x[1],k=x[2],G=x[3],V=x[4],H=x[5],Y=x[6],B=x[7],z=d.isZero;z(k-I)&&z(G-L)&&(k=I,G=L),z(V-Y)&&z(H-B)&&(V=Y,H=B);var $=3*(k-I),j=3*(V-k)-$,et=Y-I-$-j,q=3*(G-L),J=3*(H-G)-q,U=B-L-q-J,K,O;if(T===0)K=y===0?I:y===1?Y:((et*y+j)*y+$)*y+I,O=y===0?L:y===1?B:((U*y+J)*y+q)*y+L;else{var rt=1e-8,lt=1-rt;if(y<rt?(K=$,O=q):y>lt?(K=3*(Y-V),O=3*(B-H)):(K=(3*et*y+2*j)*y+$,O=(3*U*y+2*J)*y+q),P){K===0&&O===0&&(y<rt||y>lt)&&(K=V-k,O=H-G);var pt=Math.sqrt(K*K+O*O);pt&&(K/=pt,O/=pt)}if(T===3){var V=6*et*y+2*j,H=6*U*y+2*J,bt=Math.pow(K*K+O*O,3/2);K=bt!==0?(K*H-O*V)/bt:0,O=0}}return T===2?new f(O,-K):new f(K,O)}return{statics:{classify:function(x){var y=x[0],T=x[1],P=x[2],I=x[3],L=x[4],k=x[5],G=x[6],V=x[7],H=y*(V-k)+T*(L-G)+G*k-V*L,Y=P*(T-V)+I*(G-y)+y*V-T*G,B=L*(I-T)+k*(y-P)+P*T-I*y,z=3*B,$=z-Y,j=$-Y+H,et=Math.sqrt(j*j+$*$+z*z),q=et!==0?1/et:0,J=d.isZero,U="serpentine";j*=q,$*=q,z*=q;function K(pt,bt,dt){var St=bt!==t,Z=St&&bt>0&&bt<1,ht=St&&dt>0&&dt<1;return St&&(!(Z||ht)||pt==="loop"&&!(Z&&ht))&&(pt="arch",Z=ht=!1),{type:pt,roots:Z||ht?Z&&ht?bt<dt?[bt,dt]:[dt,bt]:[Z?bt:dt]:null}}if(J(j))return J($)?K(J(z)?"line":"quadratic"):K(U,z/(3*$));var O=3*$*$-4*j*z;if(J(O))return K("cusp",$/(2*j));var rt=O>0?Math.sqrt(O/3):Math.sqrt(-O),lt=2*j;return K(O>0?U:"loop",($+rt)/lt,($-rt)/lt)},getLength:function(x,y,T,P){if(y===t&&(y=0),T===t&&(T=1),nt.isStraight(x)){var I=x;T<1&&(I=nt.subdivide(I,T)[0],y/=T),y>0&&(I=nt.subdivide(I,y)[1]);var L=I[6]-I[0],k=I[7]-I[1];return Math.sqrt(L*L+k*k)}return d.integrate(P||l(x),y,T,c(y,T))},getTimeAt:function(x,y,T){if(T===t&&(T=y<0?1:0),y===0)return T;var P=Math.abs,I=1e-12,L=y>0,k=L?T:0,G=L?1:T,V=l(x),H=nt.getLength(x,k,G,V),Y=P(y)-H;if(P(Y)<I)return L?G:k;if(Y>I)return null;var B=y/H,z=0;function $(j){return z+=d.integrate(V,T,j,c(T,j)),T=j,z-y}return d.findRoot($,V,T+B,k,G,32,1e-12)},getPoint:function(x,y){return p(x,y,0,!1)},getTangent:function(x,y){return p(x,y,1,!0)},getWeightedTangent:function(x,y){return p(x,y,1,!1)},getNormal:function(x,y){return p(x,y,2,!0)},getWeightedNormal:function(x,y){return p(x,y,2,!1)},getCurvature:function(x,y){return p(x,y,3,!1).x},getPeaks:function(x){var y=x[0],T=x[1],P=x[2],I=x[3],L=x[4],k=x[5],G=x[6],V=x[7],H=-y+3*P-3*L+G,Y=3*y-6*P+3*L,B=-3*y+3*P,z=-T+3*I-3*k+V,$=3*T-6*I+3*k,j=-3*T+3*I,et=1e-8,q=1-et,J=[];return d.solveCubic(9*(H*H+z*z),9*(H*Y+$*z),2*(Y*Y+$*$)+3*(B*H+j*z),B*Y+$*j,J,et,q),J.sort()}}}},new function(){function l(Y,B,z,$,j,et,q){var J=!q&&z.getPrevious()===j,U=!q&&z!==j&&z.getNext()===j,K=1e-8,O=1-K;if($!==null&&$>=(J?K:0)&&$<=(U?O:1)&&et!==null&&et>=(U?K:0)&&et<=(J?O:1)){var rt=new it(z,$,null,q),lt=new it(j,et,null,q);rt._intersection=lt,lt._intersection=rt,(!B||B(rt))&&it.insert(Y,rt,!0)}}function c(Y,B,z,$,j,et,q,J,U,K,O,rt,lt){if(++U>=4096||++J>=40)return U;var pt=1e-9,bt=B[0],dt=B[1],St=B[6],Z=B[7],ht=E.getSignedDistance,vt=ht(bt,dt,St,Z,B[2],B[3]),_t=ht(bt,dt,St,Z,B[4],B[5]),Mt=vt*_t>0?3/4:4/9,kt=Mt*Math.min(0,vt,_t),Gt=Mt*Math.max(0,vt,_t),Ht=ht(bt,dt,St,Z,Y[0],Y[1]),Dt=ht(bt,dt,St,Z,Y[2],Y[3]),Wt=ht(bt,dt,St,Z,Y[4],Y[5]),zt=ht(bt,dt,St,Z,Y[6],Y[7]),Kt=p(Ht,Dt,Wt,zt),ee=Kt[0],ue=Kt[1],ne,me;if(vt===0&&_t===0&&Ht===0&&Dt===0&&Wt===0&&zt===0||(ne=x(ee,ue,kt,Gt))==null||(me=x(ee.reverse(),ue.reverse(),kt,Gt))==null)return U;var ce=K+(O-K)*ne,ae=K+(O-K)*me;if(Math.max(lt-rt,ae-ce)<pt){var Ze=(ce+ae)/2,Ee=(rt+lt)/2;l(j,et,q?$:z,q?Ee:Ze,q?z:$,q?Ze:Ee)}else{Y=nt.getPart(Y,ne,me);var qe=lt-rt;if(me-ne>.8)if(ae-ce>qe){var $e=nt.subdivide(Y,.5),Ze=(ce+ae)/2;U=c(B,$e[0],$,z,j,et,!q,J,U,rt,lt,ce,Ze),U=c(B,$e[1],$,z,j,et,!q,J,U,rt,lt,Ze,ae)}else{var $e=nt.subdivide(B,.5),Ee=(rt+lt)/2;U=c($e[0],Y,$,z,j,et,!q,J,U,rt,Ee,ce,ae),U=c($e[1],Y,$,z,j,et,!q,J,U,Ee,lt,ce,ae)}else qe===0||qe>=pt?U=c(B,Y,$,z,j,et,!q,J,U,rt,lt,ce,ae):U=c(Y,B,z,$,j,et,q,J,U,ce,ae,rt,lt)}return U}function p(Y,B,z,$){var j=[0,Y],et=[1/3,B],q=[2/3,z],J=[1,$],U=B-(2*Y+$)/3,K=z-(Y+2*$)/3,O;if(U*K<0)O=[[j,et,J],[j,q,J]];else{var rt=U/K;O=[rt>=2?[j,et,J]:rt<=.5?[j,q,J]:[j,et,q,J],[j,J]]}return(U||K)<0?O.reverse():O}function x(Y,B,z,$){return Y[0][1]<z?y(Y,!0,z):B[0][1]>$?y(B,!1,$):Y[0][0]}function y(Y,B,z){for(var $=Y[0][0],j=Y[0][1],et=1,q=Y.length;et<q;et++){var J=Y[et][0],U=Y[et][1];if(B?U>=z:U<=z)return U===z?J:$+(z-j)*(J-$)/(U-j);$=J,j=U}return null}function T(Y,B,z,$,j){var et=d.isZero;if(et($)&&et(j)){var q=nt.getTimeOf(Y,new f(B,z));return q===null?[]:[q]}for(var J=Math.atan2(-j,$),U=Math.sin(J),K=Math.cos(J),O=[],rt=[],lt=0;lt<8;lt+=2){var pt=Y[lt]-B,bt=Y[lt+1]-z;O.push(pt*K-bt*U,pt*U+bt*K)}return nt.solveCubic(O,1,0,rt,0,1),rt}function P(Y,B,z,$,j,et,q){for(var J=B[0],U=B[1],K=B[6],O=B[7],rt=T(Y,J,U,K-J,O-U),lt=0,pt=rt.length;lt<pt;lt++){var bt=rt[lt],dt=nt.getPoint(Y,bt),St=nt.getTimeOf(B,dt);St!==null&&l(j,et,q?$:z,q?St:bt,q?z:$,q?bt:St)}}function I(Y,B,z,$,j,et){var q=E.intersect(Y[0],Y[1],Y[6],Y[7],B[0],B[1],B[6],B[7]);q&&l(j,et,z,nt.getTimeOf(Y,q),$,nt.getTimeOf(B,q))}function L(Y,B,z,$,j,et){var q=1e-12,J=Math.min,U=Math.max;if(U(Y[0],Y[2],Y[4],Y[6])+q>J(B[0],B[2],B[4],B[6])&&J(Y[0],Y[2],Y[4],Y[6])-q<U(B[0],B[2],B[4],B[6])&&U(Y[1],Y[3],Y[5],Y[7])+q>J(B[1],B[3],B[5],B[7])&&J(Y[1],Y[3],Y[5],Y[7])-q<U(B[1],B[3],B[5],B[7])){var K=V(Y,B);if(K)for(var O=0;O<2;O++){var rt=K[O];l(j,et,z,rt[0],$,rt[1],!0)}else{var lt=nt.isStraight(Y),pt=nt.isStraight(B),bt=lt&&pt,dt=lt&&!pt,St=j.length;if((bt?I:lt||pt?P:c)(dt?B:Y,dt?Y:B,dt?$:z,dt?z:$,j,et,dt,0,0,0,1,0,1),!bt||j.length===St)for(var O=0;O<4;O++){var Z=O>>1,ht=O&1,vt=Z*6,_t=ht*6,Mt=new f(Y[vt],Y[vt+1]),kt=new f(B[_t],B[_t+1]);Mt.isClose(kt,q)&&l(j,et,z,Z,$,ht)}}}return j}function k(Y,B,z,$){var j=nt.classify(Y);if(j.type==="loop"){var et=j.roots;l(z,$,B,et[0],B,et[1])}return z}function G(Y,B,z,$,j,et){var q=1e-7,J=!B;J&&(B=Y);for(var U=Y.length,K=B.length,O=new Array(U),rt=J?O:new Array(K),lt=[],pt=0;pt<U;pt++)O[pt]=Y[pt].getValues($);if(!J)for(var pt=0;pt<K;pt++)rt[pt]=B[pt].getValues(j);for(var bt=h.findCurveBoundsCollisions(O,rt,q),dt=0;dt<U;dt++){var St=Y[dt],Z=O[dt];J&&k(Z,St,lt,z);var ht=bt[dt];if(ht)for(var vt=0;vt<ht.length;vt++){if(et&&lt.length)return lt;var _t=ht[vt];if(!J||_t>dt){var Mt=B[_t],kt=rt[_t];L(Z,kt,St,Mt,lt,z)}}}return lt}function V(Y,B){function z(zt){var Kt=zt[6]-zt[0],ee=zt[7]-zt[1];return Kt*Kt+ee*ee}var $=Math.abs,j=E.getDistance,et=1e-8,q=1e-7,J=nt.isStraight(Y),U=nt.isStraight(B),K=J&&U,O=z(Y)<z(B),rt=O?B:Y,lt=O?Y:B,pt=rt[0],bt=rt[1],dt=rt[6]-pt,St=rt[7]-bt;if(j(pt,bt,dt,St,lt[0],lt[1],!0)<q&&j(pt,bt,dt,St,lt[6],lt[7],!0)<q)!K&&j(pt,bt,dt,St,rt[2],rt[3],!0)<q&&j(pt,bt,dt,St,rt[4],rt[5],!0)<q&&j(pt,bt,dt,St,lt[2],lt[3],!0)<q&&j(pt,bt,dt,St,lt[4],lt[5],!0)<q&&(J=U=K=!0);else if(K)return null;if(J^U)return null;for(var Z=[Y,B],ht=[],vt=0;vt<4&&ht.length<2;vt++){var _t=vt&1,Mt=_t^1,kt=vt>>1,Gt=nt.getTimeOf(Z[_t],new f(Z[Mt][kt?6:0],Z[Mt][kt?7:1]));if(Gt!=null){var Ht=_t?[kt,Gt]:[Gt,kt];(!ht.length||$(Ht[0]-ht[0][0])>et&&$(Ht[1]-ht[0][1])>et)&&ht.push(Ht)}if(vt>2&&!ht.length)break}if(ht.length!==2)ht=null;else if(!K){var Dt=nt.getPart(Y,ht[0][0],ht[1][0]),Wt=nt.getPart(B,ht[0][1],ht[1][1]);($(Wt[2]-Dt[2])>q||$(Wt[3]-Dt[3])>q||$(Wt[4]-Dt[4])>q||$(Wt[5]-Dt[5])>q)&&(ht=null)}return ht}function H(Y,B){var z=Y[0],$=Y[1],j=Y[2],et=Y[3],q=Y[4],J=Y[5],U=Y[6],K=Y[7],O=B.normalize(),rt=O.x,lt=O.y,pt=3*U-9*q+9*j-3*z,bt=3*K-9*J+9*et-3*$,dt=6*q-12*j+6*z,St=6*J-12*et+6*$,Z=3*j-3*z,ht=3*et-3*$,vt=2*pt*lt-2*bt*rt,_t=[];if(Math.abs(vt)<d.CURVETIME_EPSILON){var Mt=pt*ht-bt*Z,vt=pt*St-bt*dt;if(vt!=0){var kt=-Mt/vt;kt>=0&&kt<=1&&_t.push(kt)}}else{var Gt=(dt*dt-4*pt*Z)*lt*lt+(-2*dt*St+4*bt*Z+4*pt*ht)*rt*lt+(St*St-4*bt*ht)*rt*rt,Ht=dt*lt-St*rt;if(Gt>=0&&vt!=0){var Dt=Math.sqrt(Gt),Wt=-(Ht+Dt)/vt,zt=(-Ht+Dt)/vt;Wt>=0&&Wt<=1&&_t.push(Wt),zt>=0&&zt<=1&&_t.push(zt)}}return _t}return{getIntersections:function(Y){var B=this.getValues(),z=Y&&Y!==this&&Y.getValues();return z?L(B,z,this,Y,[]):k(B,this,[])},statics:{getOverlaps:V,getIntersections:G,getCurveLineIntersections:T,getTimesWithTangent:H}}}),it=n.extend({_class:"CurveLocation",initialize:function(c,p,x,y,T){if(p>=.99999999){var P=c.getNext();P&&(p=0,c=P)}this._setCurve(c),this._time=p,this._point=x||c.getPointAtTime(p),this._overlap=y,this._distance=T,this._intersection=this._next=this._previous=null},_setPath:function(l){this._path=l,this._version=l?l._version:0},_setCurve:function(l){this._setPath(l._path),this._curve=l,this._segment=null,this._segment1=l._segment1,this._segment2=l._segment2},_setSegment:function(l){var c=l.getCurve();c?this._setCurve(c):(this._setPath(l._path),this._segment1=l,this._segment2=null),this._segment=l,this._time=l===this._segment1?0:1,this._point=l._point.clone()},getSegment:function(){var l=this._segment;if(!l){var c=this.getCurve(),p=this.getTime();p===0?l=c._segment1:p===1?l=c._segment2:p!=null&&(l=c.getPartLength(0,p)<c.getPartLength(p,1)?c._segment1:c._segment2),this._segment=l}return l},getCurve:function(){var l=this._path,c=this;l&&l._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function p(x){var y=x&&x.getCurve();if(y&&(c._time=y.getTimeOf(c._point))!=null)return c._setCurve(y),y}return this._curve||p(this._segment)||p(this._segment1)||p(this._segment2.getPrevious())},getPath:function(){var l=this.getCurve();return l&&l._path},getIndex:function(){var l=this.getCurve();return l&&l.getIndex()},getTime:function(){var l=this.getCurve(),c=this._time;return l&&c==null?this._time=l.getTimeOf(this._point):c},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var l=this._offset;if(l==null){l=0;var c=this.getPath(),p=this.getIndex();if(c&&p!=null)for(var x=c.getCurves(),y=0;y<p;y++)l+=x[y].getLength();this._offset=l+=this.getCurveOffset()}return l},getCurveOffset:function(){var l=this._curveOffset;if(l==null){var c=this.getCurve(),p=this.getTime();this._curveOffset=l=p!=null&&c&&c.getPartLength(0,p)}return l},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var l=this.getCurve(),c=l&&l.divideAtTime(this.getTime());return c&&this._setSegment(c._segment1),c},split:function(){var l=this.getCurve(),c=l._path,p=l&&l.splitAtTime(this.getTime());return p&&this._setSegment(c.getLastSegment()),p},equals:function(l,c){var p=this===l;if(!p&&l instanceof it){var x=this.getCurve(),y=l.getCurve(),T=x._path,P=y._path;if(T===P){var I=Math.abs,L=1e-7,k=I(this.getOffset()-l.getOffset()),G=!c&&this._intersection,V=!c&&l._intersection;p=(k<L||T&&I(T.getLength()-k)<L)&&(!G&&!V||G&&V&&G.equals(V,!0))}}return p},toString:function(){var l=[],c=this.getPoint(),p=u.instance;c&&l.push("point: "+c);var x=this.getIndex();x!=null&&l.push("index: "+x);var y=this.getTime();return y!=null&&l.push("time: "+p.number(y)),this._distance!=null&&l.push("distance: "+p.number(this._distance)),"{ "+l.join(", ")+" }"},isTouching:function(){var l=this._intersection;if(l&&this.getTangent().isCollinear(l.getTangent())){var c=this.getCurve(),p=l.getCurve();return!(c.isStraight()&&p.isStraight()&&c.getLine().intersect(p.getLine()))}return!1},isCrossing:function(){var l=this._intersection;if(!l)return!1;var c=this.getTime(),p=l.getTime(),x=1e-8,y=1-x,T=c>=x&&c<=y,P=p>=x&&p<=y;if(T&&P)return!this.isTouching();var I=this.getCurve(),L=I&&c<x?I.getPrevious():I,k=l.getCurve(),G=k&&p<x?k.getPrevious():k;if(c>y&&(I=I.getNext()),p>y&&(k=k.getNext()),!L||!I||!G||!k)return!1;var V=[];function H(rt,lt){var pt=rt.getValues(),bt=nt.classify(pt).roots||nt.getPeaks(pt),dt=bt.length,St=nt.getLength(pt,lt&&dt?bt[dt-1]:0,!lt&&dt?bt[0]:1);V.push(dt?St:St/32)}function Y(rt,lt,pt){return lt<pt?rt>lt&&rt<pt:rt>lt||rt<pt}T||(H(L,!0),H(I,!1)),P||(H(G,!0),H(k,!1));var B=this.getPoint(),z=Math.min.apply(Math,V),$=T?I.getTangentAtTime(c):I.getPointAt(z).subtract(B),j=T?$.negate():L.getPointAt(-z).subtract(B),et=P?k.getTangentAtTime(p):k.getPointAt(z).subtract(B),q=P?et.negate():G.getPointAt(-z).subtract(B),J=j.getAngle(),U=$.getAngle(),K=q.getAngle(),O=et.getAngle();return!!(T?Y(J,K,O)^Y(U,K,O)&&Y(J,O,K)^Y(U,O,K):Y(K,J,U)^Y(O,J,U)&&Y(K,U,J)^Y(O,U,J))},hasOverlap:function(){return!!this._overlap}},n.each(nt._evaluateMethods,function(l){var c=l+"At";this[l]=function(){var p=this.getCurve(),x=this.getTime();return x!=null&&p&&p[c](x,!0)}},{preserve:!0}),new function(){function l(c,p,x){var y=c.length,T=0,P=y-1;function I(B,z){for(var $=B+z;$>=-1&&$<=y;$+=z){var j=c[($%y+y)%y];if(!p.getPoint().isClose(j.getPoint(),1e-7))break;if(p.equals(j))return j}return null}for(;T<=P;){var L=T+P>>>1,k=c[L],G;if(x&&(G=p.equals(k)?k:I(L,-1)||I(L,1)))return p._overlap&&(G._overlap=G._intersection._overlap=!0),G;var V=p.getPath(),H=k.getPath(),Y=V!==H?V._id-H._id:p.getIndex()+p.getTime()-(k.getIndex()+k.getTime());Y<0?P=L-1:T=L+1}return c.splice(T,0,p),p}return{statics:{insert:l,expand:function(c){for(var p=c.slice(),x=c.length-1;x>=0;x--)l(p,c[x]._intersection,!1);return p}}}}),tt=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(l){var c,p,x;if(n.isPlainObject(l)?(p=l.segments,c=l.pathData):Array.isArray(l)?p=l:typeof l=="string"&&(c=l),p){var y=p[0];x=y&&Array.isArray(y[0])}else c&&(x=(c.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(c));var T=x?Q:W;return new T(l)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(l){this.isClockwise()!=(l=!!l)&&this.reverse()},setPathData:function(l){var c=l&&l.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),p,x=!1,y,T,P=new f,I=new f;function L(q,J){var U=+p[q];return x&&(U+=P[J]),U}function k(q){return new f(L(q,"x"),L(q+1,"y"))}this.clear();for(var G=0,V=c&&c.length;G<V;G++){var H=c[G],Y=H[0],B=Y.toLowerCase();p=H.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var z=p&&p.length;switch(x=Y===B,y==="z"&&!/[mz]/.test(B)&&this.moveTo(P),B){case"m":case"l":for(var $=B==="m",j=0;j<z;j+=2)this[$?"moveTo":"lineTo"](P=k(j)),$&&(I=P,$=!1);T=P;break;case"h":case"v":var et=B==="h"?"x":"y";P=P.clone();for(var j=0;j<z;j++)P[et]=L(j,et),this.lineTo(P);T=P;break;case"c":for(var j=0;j<z;j+=6)this.cubicCurveTo(k(j),T=k(j+2),P=k(j+4));break;case"s":for(var j=0;j<z;j+=4)this.cubicCurveTo(/[cs]/.test(y)?P.multiply(2).subtract(T):P,T=k(j),P=k(j+2)),y=B;break;case"q":for(var j=0;j<z;j+=4)this.quadraticCurveTo(T=k(j),P=k(j+2));break;case"t":for(var j=0;j<z;j+=2)this.quadraticCurveTo(T=/[qt]/.test(y)?P.multiply(2).subtract(T):P,P=k(j)),y=B;break;case"a":for(var j=0;j<z;j+=7)this.arcTo(P=k(j+5),new _(+p[j],+p[j+1]),+p[j+2],+p[j+4],+p[j+3]);break;case"z":this.closePath(1e-12),P=I;break}y=B}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(l){var c=l.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(l):{};return c.onPath||!!(this.getFillRule()==="evenodd"?c.windingL&1||c.windingR&1:c.winding)},getIntersections:function(l,c,p,x){var y=this===l||!l,T=this._matrix._orNullIfIdentity(),P=y?T:(p||l._matrix)._orNullIfIdentity();return y||this.getBounds(T).intersects(l.getBounds(P),1e-12)?nt.getIntersections(this.getCurves(),!y&&l.getCurves(),c,T,P,x):[]},getCrossings:function(l){return this.getIntersections(l,function(c){return c.isCrossing()})},getNearestLocation:function(){for(var l=f.read(arguments),c=this.getCurves(),p=1/0,x=null,y=0,T=c.length;y<T;y++){var P=c[y].getNearestLocation(l);P._distance<p&&(p=P._distance,x=P)}return x},getNearestPoint:function(){var l=this.getNearestLocation.apply(this,arguments);return l&&l.getPoint()},interpolate:function(l,c,p){var x=!this._children,y=x?"_segments":"_children",T=l[y],P=c[y],I=this[y];if(!T||!P||T.length!==P.length)throw new Error("Invalid operands in interpolate() call: "+l+", "+c);var L=I.length,k=P.length;if(L<k)for(var G=x?ut:W,V=L;V<k;V++)this.add(new G);else L>k&&this[x?"removeSegments":"removeChildren"](k,L);for(var V=0;V<k;V++)I[V].interpolate(T[V],P[V],p);x&&(this.setClosed(l._closed),this._changed(9))},compare:function(l){var c=!1;if(l){var p=this._children||[this],x=l._children?l._children.slice():[l],y=p.length,T=x.length,P=[],I=0;c=!0;for(var L=h.findItemBoundsCollisions(p,x,d.GEOMETRIC_EPSILON),k=y-1;k>=0&&c;k--){var G=p[k];c=!1;var V=L[k];if(V)for(var H=V.length-1;H>=0&&!c;H--)G.compare(x[V[H]])&&(P[V[H]]||(P[V[H]]=!0,I++),c=!0)}c=c&&I===T}return c}}),W=tt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(c){this._closed=!1,this._segments=[],this._version=0;var p=arguments,x=Array.isArray(c)?typeof c[0]=="object"?c:p:c&&c.size===t&&(c.x!==t||c.point!==t)?p:null;x&&x.length>0?this.setSegments(x):(this._curves=t,this._segmentSelection=0,!x&&typeof c=="string"&&(this.setPathData(c),c=null)),this._initialize(!x&&c)},_equals:function(l){return this._closed===l._closed&&n.equals(this._segments,l._segments)},copyContent:function(l){this.setSegments(l._segments),this._closed=l._closed},_changed:function l(c){if(l.base.call(this,c),c&8){if(this._length=this._area=t,c&32)this._version++;else if(this._curves)for(var p=0,x=this._curves.length;p<x;p++)this._curves[p]._changed()}else c&64&&(this._bounds=t)},getStyle:function(){var l=this._parent;return(l instanceof Q?l:this)._style},getSegments:function(){return this._segments},setSegments:function(l){var c=this.isFullySelected(),p=l&&l.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=t,p){var x=l[p-1];typeof x=="boolean"&&(this.setClosed(x),p--),this._add(ut.readList(l,0,{},p))}c&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var l=this._curves,c=this._segments;if(!l){var p=this._countCurves();l=this._curves=new Array(p);for(var x=0;x<p;x++)l[x]=new nt(this,c[x],c[x+1]||c[0])}return l},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var l=this.getCurves();return l[l.length-1]},isClosed:function(){return this._closed},setClosed:function(l){if(this._closed!=(l=!!l)){if(this._closed=l,this._curves){var c=this._curves.length=this._countCurves();l&&(this._curves[c-1]=new nt(this,this._segments[c-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(l,c){var p=this._segments,x=p.length,y=new u(c),T=new Array(6),P=!0,I,L,k,G,V,H,Y,B,z=[];function $(et,q){if(et._transformCoordinates(l,T),I=T[0],L=T[1],P)z.push("M"+y.pair(I,L)),P=!1;else if(V=T[2],H=T[3],V===I&&H===L&&Y===k&&B===G){if(!q){var J=I-k,U=L-G;z.push(J===0?"v"+y.number(U):U===0?"h"+y.number(J):"l"+y.pair(J,U))}}else z.push("c"+y.pair(Y-k,B-G)+" "+y.pair(V-k,H-G)+" "+y.pair(I-k,L-G));k=I,G=L,Y=T[4],B=T[5]}if(!x)return"";for(var j=0;j<x;j++)$(p[j]);return this._closed&&x>0&&($(p[0],!0),z.push("z")),z.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(l){for(var c=this._segments,p=new Array(6),x=0,y=c.length;x<y;x++)c[x]._transformCoordinates(l,p,!0);return!0},_add:function(l,c){for(var p=this._segments,x=this._curves,y=l.length,T=c==null,c=T?p.length:c,P=0;P<y;P++){var I=l[P];I._path&&(I=l[P]=I.clone()),I._path=this,I._index=c+P,I._selection&&this._updateSelection(I,0,I._selection)}if(T)n.push(p,l);else{p.splice.apply(p,[c,0].concat(l));for(var P=c+y,L=p.length;P<L;P++)p[P]._index=P}if(x){var k=this._countCurves(),G=c>0&&c+y-1===k?c-1:c,V=G,H=Math.min(G+y,k);l._curves&&(x.splice.apply(x,[G,0].concat(l._curves)),V+=l._curves.length);for(var P=V;P<H;P++)x.splice(P,0,new nt(this,null,null));this._adjustCurves(G,H)}return this._changed(41),l},_adjustCurves:function(l,c){for(var p=this._segments,x=this._curves,y,T=l;T<c;T++)y=x[T],y._path=this,y._segment1=p[T],y._segment2=p[T+1]||p[0],y._changed();(y=x[this._closed&&!l?p.length-1:l-1])&&(y._segment2=p[l]||p[0],y._changed()),(y=x[c])&&(y._segment1=p[c],y._changed())},_countCurves:function(){var l=this._segments.length;return!this._closed&&l>0?l-1:l},add:function(l){var c=arguments;return c.length>1&&typeof l!="number"?this._add(ut.readList(c)):this._add([ut.read(c)])[0]},insert:function(l,c){var p=arguments;return p.length>2&&typeof c!="number"?this._add(ut.readList(p,1),l):this._add([ut.read(p,1)],l)[0]},addSegment:function(){return this._add([ut.read(arguments)])[0]},insertSegment:function(l){return this._add([ut.read(arguments,1)],l)[0]},addSegments:function(l){return this._add(ut.readList(l))},insertSegments:function(l,c){return this._add(ut.readList(c),l)},removeSegment:function(l){return this.removeSegments(l,l+1)[0]||null},removeSegments:function(l,c,p){l=l||0,c=n.pick(c,this._segments.length);var x=this._segments,y=this._curves,T=x.length,P=x.splice(l,c-l),I=P.length;if(!I)return P;for(var L=0;L<I;L++){var k=P[L];k._selection&&this._updateSelection(k,k._selection,0),k._index=k._path=null}for(var L=l,G=x.length;L<G;L++)x[L]._index=L;if(y){for(var V=l>0&&c===T+(this._closed?1:0)?l-1:l,y=y.splice(V,I),L=y.length-1;L>=0;L--)y[L]._path=null;p&&(P._curves=y.slice(1)),this._adjustCurves(V,V)}return this._changed(41),P},clear:"#removeSegments",hasHandles:function(){for(var l=this._segments,c=0,p=l.length;c<p;c++)if(l[c].hasHandles())return!0;return!1},clearHandles:function(){for(var l=this._segments,c=0,p=l.length;c<p;c++)l[c].clearHandles()},getLength:function(){if(this._length==null){for(var l=this.getCurves(),c=0,p=0,x=l.length;p<x;p++)c+=l[p].getLength();this._length=c}return this._length},getArea:function(){var l=this._area;if(l==null){var c=this._segments,p=this._closed;l=0;for(var x=0,y=c.length;x<y;x++){var T=x+1===y;l+=nt.getArea(nt.getValues(c[x],c[T?0:x+1],null,T&&!p))}this._area=l}return l},isFullySelected:function(){var l=this._segments.length;return this.isSelected()&&l>0&&this._segmentSelection===l*7},setFullySelected:function(l){l&&this._selectSegments(!0),this.setSelected(l)},setSelection:function l(c){c&1||this._selectSegments(!1),l.base.call(this,c)},_selectSegments:function(l){var c=this._segments,p=c.length,x=l?7:0;this._segmentSelection=x*p;for(var y=0;y<p;y++)c[y]._selection=x},_updateSelection:function(l,c,p){l._selection=p;var x=this._segmentSelection+=p-c;x>0&&this.setSelected(!0)},divideAt:function(l){var c=this.getLocationAt(l),p;return c&&(p=c.getCurve().divideAt(c.getCurveOffset()))?p._segment1:null},splitAt:function(l){var c=this.getLocationAt(l),p=c&&c.index,x=c&&c.time,y=1e-8,T=1-y;x>T&&(p++,x=0);var P=this.getCurves();if(p>=0&&p<P.length){x>=y&&P[p++].divideAtTime(x);var I=this.removeSegments(p,this._segments.length,!0),L;return this._closed?(this.setClosed(!1),L=this):(L=new W(A.NO_INSERT),L.insertAbove(this),L.copyAttributes(this)),L._add(I,0),this.addSegment(I[0]),L}return null},split:function(l,c){var p,x=c===t?l:(p=this.getCurves()[l])&&p.getLocationAtTime(c);return x!=null?this.splitAt(x):null},join:function(l,c){var p=c||0;if(l&&l!==this){var x=l._segments,y=this.getLastSegment(),T=l.getLastSegment();if(!T)return this;y&&y._point.isClose(T._point,p)&&l.reverse();var P=l.getFirstSegment();if(y&&y._point.isClose(P._point,p))y.setHandleOut(P._handleOut),this._add(x.slice(1));else{var I=this.getFirstSegment();I&&I._point.isClose(P._point,p)&&l.reverse(),T=l.getLastSegment(),I&&I._point.isClose(T._point,p)?(I.setHandleIn(T._handleIn),this._add(x.slice(0,x.length-1),0)):this._add(x.slice())}l._closed&&this._add([x[0]]),l.remove()}var L=this.getFirstSegment(),k=this.getLastSegment();return L!==k&&L._point.isClose(k._point,p)&&(L.setHandleIn(k._handleIn),k.remove(),this.setClosed(!0)),this},reduce:function(l){for(var c=this.getCurves(),p=l&&l.simplify,x=p?1e-7:0,y=c.length-1;y>=0;y--){var T=c[y];!T.hasHandles()&&(!T.hasLength(x)||p&&T.isCollinear(T.getNext()))&&T.remove()}return this},reverse:function(){this._segments.reverse();for(var l=0,c=this._segments.length;l<c;l++){var p=this._segments[l],x=p._handleIn;p._handleIn=p._handleOut,p._handleOut=x,p._index=l}this._curves=null,this._changed(9)},flatten:function(l){for(var c=new ot(this,l||.25,256,!0),p=c.parts,x=p.length,y=[],T=0;T<x;T++)y.push(new ut(p[T].curve.slice(0,2)));!this._closed&&x>0&&y.push(new ut(p[x-1].curve.slice(6))),this.setSegments(y)},simplify:function(l){var c=new ct(this).fit(l||2.5);return c&&this.setSegments(c),!!c},smooth:function(l){var c=this,p=l||{},x=p.type||"asymmetric",y=this._segments,T=y.length,P=this._closed;function I(ee,ue){var ne=ee&&ee.index;if(ne!=null){var me=ee.path;if(me&&me!==c)throw new Error(ee._class+" "+ne+" of "+me+" is not part of "+c);ue&&ee instanceof nt&&ne++}else ne=typeof ee=="number"?ee:ue;return Math.min(ne<0&&P?ne%T:ne<0?ne+T:ne,T-1)}var L=P&&p.from===t&&p.to===t,k=I(p.from,0),G=I(p.to,T-1);if(k>G)if(P)k-=T;else{var V=k;k=G,G=V}if(/^(?:asymmetric|continuous)$/.test(x)){var H=x==="asymmetric",Y=Math.min,B=G-k+1,z=B-1,$=L?Y(B,4):1,j=$,et=$,q=[];if(P||(j=Y(1,k),et=Y(1,T-G-1)),z+=j+et,z<=1)return;for(var J=0,U=k-j;J<=z;J++,U++)q[J]=y[(U<0?U+T:U)%T]._point;for(var K=q[0]._x+2*q[1]._x,O=q[0]._y+2*q[1]._y,rt=2,lt=z-1,pt=[K],bt=[O],dt=[rt],St=[],Z=[],J=1;J<z;J++){var ht=J<lt,vt=ht||H?1:2,_t=ht?4:H?2:7,Mt=ht?4:H?3:8,kt=ht?2:H?0:1,Gt=vt/rt;rt=dt[J]=_t-Gt,K=pt[J]=Mt*q[J]._x+kt*q[J+1]._x-Gt*K,O=bt[J]=Mt*q[J]._y+kt*q[J+1]._y-Gt*O}St[lt]=pt[lt]/dt[lt],Z[lt]=bt[lt]/dt[lt];for(var J=z-2;J>=0;J--)St[J]=(pt[J]-St[J+1])/dt[J],Z[J]=(bt[J]-Z[J+1])/dt[J];St[z]=(3*q[z]._x-St[lt])/2,Z[z]=(3*q[z]._y-Z[lt])/2;for(var J=j,Ht=z-et,U=k;J<=Ht;J++,U++){var Dt=y[U<0?U+T:U],Wt=Dt._point,zt=St[J]-Wt._x,Kt=Z[J]-Wt._y;(L||J<Ht)&&Dt.setHandleOut(zt,Kt),(L||J>j)&&Dt.setHandleIn(-zt,-Kt)}}else for(var J=k;J<=G;J++)y[J<0?J+T:J].smooth(p,!L&&J===k,!L&&J===G)},toShape:function(l){if(!this._closed)return null;var c=this._segments,p,x,y,T;function P(H,Y){var B=c[H],z=B.getNext(),$=c[Y],j=$.getNext();return B._handleOut.isZero()&&z._handleIn.isZero()&&$._handleOut.isZero()&&j._handleIn.isZero()&&z._point.subtract(B._point).isCollinear(j._point.subtract($._point))}function I(H){var Y=c[H],B=Y.getPrevious(),z=Y.getNext();return B._handleOut.isZero()&&Y._handleIn.isZero()&&Y._handleOut.isZero()&&z._handleIn.isZero()&&Y._point.subtract(B._point).isOrthogonal(z._point.subtract(Y._point))}function L(H){var Y=c[H],B=Y.getNext(),z=Y._handleOut,$=B._handleIn,j=.5522847498307936;if(z.isOrthogonal($)){var et=Y._point,q=B._point,J=new E(et,z,!0).intersect(new E(q,$,!0),!0);return J&&d.isZero(z.getLength()/J.subtract(et).getLength()-j)&&d.isZero($.getLength()/J.subtract(q).getLength()-j)}return!1}function k(H,Y){return c[H]._point.getDistance(c[Y]._point)}if(!this.hasHandles()&&c.length===4&&P(0,2)&&P(1,3)&&I(1)?(p=D.Rectangle,x=new _(k(0,3),k(0,1)),T=c[1]._point.add(c[2]._point).divide(2)):c.length===8&&L(0)&&L(2)&&L(4)&&L(6)&&P(1,5)&&P(3,7)?(p=D.Rectangle,x=new _(k(1,6),k(0,3)),y=x.subtract(new _(k(0,7),k(1,2))).divide(2),T=c[3]._point.add(c[4]._point).divide(2)):c.length===4&&L(0)&&L(1)&&L(2)&&L(3)&&(d.isZero(k(0,2)-k(1,3))?(p=D.Circle,y=k(0,2)/2):(p=D.Ellipse,y=new _(k(2,0)/2,k(3,1)/2)),T=c[1]._point),p){var G=this.getPosition(!0),V=new p({center:G,size:x,radius:y,insert:!1});return V.copyAttributes(this,!0),V._matrix.prepend(this._matrix),V.rotate(T.subtract(G).getAngle()+90),(l===t||l)&&V.insertAbove(this),V}return null},toPath:"#clone",compare:function l(c){if(!c||c instanceof Q)return l.base.call(this,c);var p=this.getCurves(),x=c.getCurves(),y=p.length,T=x.length;if(!y||!T)return y==T;for(var P=p[0].getValues(),I=[],L=0,k,G=0,V,H=0;H<T;H++){var $=x[H].getValues();I.push($);var Y=nt.getOverlaps(P,$);if(Y){k=!H&&Y[0][0]>0?T-1:H,V=Y[0][1];break}}for(var B=Math.abs,z=1e-8,$=I[k],j;P&&$;){var Y=nt.getOverlaps(P,$);if(Y){var et=Y[0][0];if(B(et-G)<z){G=Y[1][0],G===1&&(P=++L<y?p[L].getValues():null,G=0);var q=Y[0][1];if(B(q-V)<z){if(j||(j=[k,q]),V=Y[1][1],V===1&&(++k>=T&&(k=0),$=I[k]||x[k].getValues(),V=0),!P)return j[0]===k&&j[1]===V;continue}}}break}return!1},_hitTestSelf:function(l,c,p,x){var y=this,T=this.getStyle(),P=this._segments,I=P.length,L=this._closed,k=c._tolerancePadding,G=k,V,H,Y,B,z,$,j=c.stroke&&T.hasStroke(),et=c.fill&&T.hasFill(),q=c.curves,J=j?T.getStrokeWidth()/2:et&&c.tolerance>0||q?0:null;J!==null&&(J>0?(V=T.getStrokeJoin(),H=T.getStrokeCap(),Y=T.getMiterLimit(),G=G.add(W._getStrokePadding(J,x))):V=H="round");function U(St,Z){return l.subtract(St).divide(Z).length<=1}function K(St,Z,ht){if(!c.selected||Z.isSelected()){var vt=St._point;if(Z!==vt&&(Z=Z.add(vt)),U(Z,G))return new gt(ht,y,{segment:St,point:Z})}}function O(St,Z){return(Z||c.segments)&&K(St,St._point,"segment")||!Z&&c.handles&&(K(St,St._handleIn,"handle-in")||K(St,St._handleOut,"handle-out"))}function rt(St){B.add(St)}function lt(St){var Z=L||St._index>0&&St._index<I-1;if((Z?V:H)==="round")return U(St._point,G);if(B=new W({internal:!0,closed:!0}),Z?St.isSmooth()||W._addBevelJoin(St,V,J,Y,null,x,rt,!0):H==="square"&&W._addSquareCap(St,H,J,null,x,rt,!0),!B.isEmpty()){var ht;return B.contains(l)||(ht=B.getNearestLocation(l))&&U(ht.getPoint(),k)}}if(c.ends&&!c.segments&&!L){if($=O(P[0],!0)||O(P[I-1],!0))return $}else if(c.segments||c.handles){for(var pt=0;pt<I;pt++)if($=O(P[pt]))return $}if(J!==null){if(z=this.getNearestLocation(l),z){var bt=z.getTime();bt===0||bt===1&&I>1?lt(z.getSegment())||(z=null):U(z.getPoint(),G)||(z=null)}if(!z&&V==="miter"&&I>1)for(var pt=0;pt<I;pt++){var dt=P[pt];if(l.getDistance(dt._point)<=Y*J&&lt(dt)){z=dt.getLocation();break}}}return!z&&et&&this._contains(l)||z&&!j&&!q?new gt("fill",this):z?new gt(j?"stroke":"curve",this,{location:z,point:z.getPoint()}):null}},n.each(nt._evaluateMethods,function(l){this[l+"At"]=function(c){var p=this.getLocationAt(c);return p&&p[l]()}},{beans:!1,getLocationOf:function(){for(var l=f.read(arguments),c=this.getCurves(),p=0,x=c.length;p<x;p++){var y=c[p].getLocationOf(l);if(y)return y}return null},getOffsetOf:function(){var l=this.getLocationOf.apply(this,arguments);return l?l.getOffset():null},getLocationAt:function(l){if(typeof l=="number"){for(var c=this.getCurves(),p=0,x=0,y=c.length;x<y;x++){var T=p,P=c[x];if(p+=P.getLength(),p>l)return P.getLocationAt(l-T)}if(c.length>0&&l<=this.getLength())return new it(c[c.length-1],1)}else if(l&&l.getPath&&l.getPath()===this)return l;return null},getOffsetsWithTangent:function(){var l=f.read(arguments);if(l.isZero())return[];for(var c=[],p=0,x=this.getCurves(),y=0,T=x.length;y<T;y++){for(var P=x[y],I=P.getTimesWithTangent(l),L=0,k=I.length;L<k;L++){var G=p+P.getOffsetAtTime(I[L]);c.indexOf(G)<0&&c.push(G)}p+=P.length}return c}}),new function(){function l(p,x,y,T){if(T<=0)return;var P=T/2,I=T-2,L=P-1,k=new Array(6),G,V;function H(et){var q=k[et],J=k[et+1];(G!=q||V!=J)&&(p.beginPath(),p.moveTo(G,V),p.lineTo(q,J),p.stroke(),p.beginPath(),p.arc(q,J,P,0,Math.PI*2,!0),p.fill())}for(var Y=0,B=x.length;Y<B;Y++){var z=x[Y],$=z._selection;if(z._transformCoordinates(y,k),G=k[0],V=k[1],$&2&&H(2),$&4&&H(4),p.fillRect(G-P,V-P,T,T),I>0&&!($&1)){var j=p.fillStyle;p.fillStyle="#ffffff",p.fillRect(G-L,V-L,I,I),p.fillStyle=j}}}function c(p,x,y){var T=x._segments,P=T.length,I=new Array(6),L=!0,k,G,V,H,Y,B,z,$;function j(q){if(y)q._transformCoordinates(y,I),k=I[0],G=I[1];else{var J=q._point;k=J._x,G=J._y}if(L)p.moveTo(k,G),L=!1;else{if(y)Y=I[2],B=I[3];else{var U=q._handleIn;Y=k+U._x,B=G+U._y}Y===k&&B===G&&z===V&&$===H?p.lineTo(k,G):p.bezierCurveTo(z,$,Y,B,k,G)}if(V=k,H=G,y)z=I[4],$=I[5];else{var U=q._handleOut;z=V+U._x,$=H+U._y}}for(var et=0;et<P;et++)j(T[et]);x._closed&&P>0&&j(T[0])}return{_draw:function(p,x,y,T){var P=x.dontStart,I=x.dontFinish||x.clip,L=this.getStyle(),k=L.hasFill(),G=L.hasStroke(),V=L.getDashArray(),H=!Ft.support.nativeDash&&G&&V&&V.length;P||p.beginPath(),(k||G&&!H||I)&&(c(p,this,T),this._closed&&p.closePath());function Y(q){return V[(q%H+H)%H]}if(!I&&(k||G)&&(this._setStyles(p,x,y),k&&(p.fill(L.getFillRule()),p.shadowColor="rgba(0,0,0,0)"),G)){if(H){P||p.beginPath();for(var B=new ot(this,.25,32,!1,T),z=B.length,$=-L.getDashOffset(),j,et=0;$>0;)$-=Y(et--)+Y(et--);for(;$<z;)j=$+Y(et++),($>0||j>0)&&B.drawPart(p,Math.max($,0),Math.max(j,0)),$=j+Y(et++)}p.stroke()}},_drawSelected:function(p,x){p.beginPath(),c(p,this,x),p.stroke(),l(p,this._segments,x,Ft.settings.handleSize)}}},new function(){function l(c){var p=c._segments;if(!p.length)throw new Error("Use a moveTo() command first");return p[p.length-1]}return{moveTo:function(){var c=this._segments;c.length===1&&this.removeSegment(0),c.length||this._add([new ut(f.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ut(f.read(arguments))])},cubicCurveTo:function(){var c=arguments,p=f.read(c),x=f.read(c),y=f.read(c),T=l(this);T.setHandleOut(p.subtract(T._point)),this._add([new ut(y,x.subtract(y))])},quadraticCurveTo:function(){var c=arguments,p=f.read(c),x=f.read(c),y=l(this)._point;this.cubicCurveTo(p.add(y.subtract(p).multiply(1/3)),p.add(x.subtract(p).multiply(1/3)),x)},curveTo:function(){var c=arguments,p=f.read(c),x=f.read(c),y=n.pick(n.read(c),.5),T=1-y,P=l(this)._point,I=p.subtract(P.multiply(T*T)).subtract(x.multiply(y*y)).divide(2*y*T);if(I.isNaN())throw new Error("Cannot put a curve through points with parameter = "+y);this.quadraticCurveTo(I,x)},arcTo:function(){var c=arguments,p=Math.abs,x=Math.sqrt,y=l(this),T=y._point,P=f.read(c),I,L=n.peek(c),k=n.pick(L,!0),G,V,H,Y;if(typeof k=="boolean")var B=T.add(P).divide(2),I=B.add(B.subtract(T).rotate(k?-90:90));else if(n.remain(c)<=2)I=P,P=f.read(c);else if(!T.equals(P)){var z=_.read(c),$=d.isZero;if($(z.width)||$(z.height))return this.lineTo(P);var j=n.read(c),k=!!n.read(c),et=!!n.read(c),B=T.add(P).divide(2),q=T.subtract(B).rotate(-j),J=q.x,U=q.y,K=p(z.width),O=p(z.height),rt=K*K,lt=O*O,pt=J*J,bt=U*U,dt=x(pt/rt+bt/lt);if(dt>1&&(K*=dt,O*=dt,rt=K*K,lt=O*O),dt=(rt*lt-rt*bt-lt*pt)/(rt*bt+lt*pt),p(dt)<1e-12&&(dt=0),dt<0)throw new Error("Cannot create an arc with the given arguments");G=new f(K*U/O,-O*J/K).multiply((et===k?-1:1)*x(dt)).rotate(j).add(B),Y=new M().translate(G).rotate(j).scale(K,O),H=Y._inverseTransform(T),V=H.getDirectedAngle(Y._inverseTransform(P)),!k&&V>0?V-=360:k&&V<0&&(V+=360)}if(I){var St=new E(T.add(I).divide(2),I.subtract(T).rotate(90),!0),Z=new E(I.add(P).divide(2),P.subtract(I).rotate(90),!0),ht=new E(T,P),vt=ht.getSide(I);if(G=St.intersect(Z,!0),!G){if(!vt)return this.lineTo(P);throw new Error("Cannot create an arc with the given arguments")}H=T.subtract(G),V=H.getDirectedAngle(P.subtract(G));var _t=ht.getSide(G,!0);_t===0?V=vt*p(V):vt===_t&&(V+=V<0?360:-360)}if(V){for(var Mt=1e-5,kt=p(V),Gt=kt>=360?4:Math.ceil((kt-Mt)/90),Ht=V/Gt,Dt=Ht*Math.PI/360,Wt=4/3*Math.sin(Dt)/(1+Math.cos(Dt)),zt=[],Kt=0;Kt<=Gt;Kt++){var q=P,ee=null;if(Kt<Gt&&(ee=H.rotate(90).multiply(Wt),Y?(q=Y._transformPoint(H),ee=Y._transformPoint(H.add(ee)).subtract(q)):q=G.add(H)),!Kt)y.setHandleOut(ee);else{var ue=H.rotate(-90).multiply(Wt);Y&&(ue=Y._transformPoint(H.add(ue)).subtract(q)),zt.push(new ut(q,ue,ee))}H=H.rotate(Ht)}this._add(zt)}},lineBy:function(){var c=f.read(arguments),p=l(this)._point;this.lineTo(p.add(c))},curveBy:function(){var c=arguments,p=f.read(c),x=f.read(c),y=n.read(c),T=l(this)._point;this.curveTo(T.add(p),T.add(x),y)},cubicCurveBy:function(){var c=arguments,p=f.read(c),x=f.read(c),y=f.read(c),T=l(this)._point;this.cubicCurveTo(T.add(p),T.add(x),T.add(y))},quadraticCurveBy:function(){var c=arguments,p=f.read(c),x=f.read(c),y=l(this)._point;this.quadraticCurveTo(y.add(p),y.add(x))},arcBy:function(){var c=arguments,p=l(this)._point,x=p.add(f.read(c)),y=n.pick(n.peek(c),!0);typeof y=="boolean"?this.arcTo(x,y):this.arcTo(x,p.add(f.read(c)))},closePath:function(c){this.setClosed(!0),this.join(this,c)}}},{_getBounds:function(l,c){var p=c.handle?"getHandleBounds":c.stroke?"getStrokeBounds":"getBounds";return W[p](this._segments,this._closed,this,l,c)},statics:{getBounds:function(l,c,p,x,y,T){var P=l[0];if(!P)return new b;var I=new Array(6),L=P._transformCoordinates(x,new Array(6)),k=L.slice(0,2),G=k.slice(),V=new Array(2);function H(z){z._transformCoordinates(x,I);for(var $=0;$<2;$++)nt._addBounds(L[$],L[$+4],I[$+2],I[$],$,T?T[$]:0,k,G,V);var j=L;L=I,I=j}for(var Y=1,B=l.length;Y<B;Y++)H(l[Y]);return c&&H(P),new b(k[0],k[1],G[0]-k[0],G[1]-k[1])},getStrokeBounds:function(l,c,p,x,y){var T=p.getStyle(),P=T.hasStroke(),I=T.getStrokeWidth(),L=P&&p._getStrokeMatrix(x,y),k=P&&W._getStrokePadding(I,L),G=W.getBounds(l,c,p,x,y,k);if(!P)return G;var V=I/2,H=T.getStrokeJoin(),Y=T.getStrokeCap(),B=T.getMiterLimit(),z=new b(new _(k));function $(K){G=G.include(K)}function j(K){G=G.unite(z.setCenter(K._point.transform(x)))}function et(K,O){O==="round"||K.isSmooth()?j(K):W._addBevelJoin(K,O,V,B,x,L,$)}function q(K,O){O==="round"?j(K):W._addSquareCap(K,O,V,x,L,$)}var J=l.length-(c?0:1);if(J>0){for(var U=1;U<J;U++)et(l[U],H);c?et(l[0],H):(q(l[0],Y),q(l[l.length-1],Y))}return G},_getStrokePadding:function(l,c){if(!c)return[l,l];var p=new f(l,0).transform(c),x=new f(0,l).transform(c),y=p.getAngleInRadians(),T=p.getLength(),P=x.getLength(),I=Math.sin(y),L=Math.cos(y),k=Math.tan(y),G=Math.atan2(P*k,T),V=Math.atan2(P,k*T);return[Math.abs(T*Math.cos(G)*L+P*Math.sin(G)*I),Math.abs(P*Math.sin(V)*L+T*Math.cos(V)*I)]},_addBevelJoin:function(l,c,p,x,y,T,P,I){var L=l.getCurve(),k=L.getPrevious(),G=L.getPoint1().transform(y),V=k.getNormalAtTime(1).multiply(p).transform(T),H=L.getNormalAtTime(0).multiply(p).transform(T),Y=V.getDirectedAngle(H);if((Y<0||Y>=180)&&(V=V.negate(),H=H.negate()),I&&P(G),P(G.add(V)),c==="miter"){var B=new E(G.add(V),new f(-V.y,V.x),!0).intersect(new E(G.add(H),new f(-H.y,H.x),!0),!0);B&&G.getDistance(B)<=x*p&&P(B)}P(G.add(H))},_addSquareCap:function(l,c,p,x,y,T,P){var I=l._point.transform(x),L=l.getLocation(),k=L.getNormal().multiply(L.getTime()===0?p:-p).transform(y);c==="square"&&(P&&(T(I.subtract(k)),T(I.add(k))),I=I.add(k.rotate(-90))),T(I.add(k)),T(I.subtract(k))},getHandleBounds:function(l,c,p,x,y){var T=p.getStyle(),P=y.stroke&&T.hasStroke(),I,L;if(P){var k=p._getStrokeMatrix(x,y),G=T.getStrokeWidth()/2,V=G;T.getStrokeJoin()==="miter"&&(V=G*T.getMiterLimit()),T.getStrokeCap()==="square"&&(V=Math.max(V,G*Math.SQRT2)),I=W._getStrokePadding(G,k),L=W._getStrokePadding(V,k)}for(var H=new Array(6),Y=1/0,B=-Y,z=Y,$=B,j=0,et=l.length;j<et;j++){var q=l[j];q._transformCoordinates(x,H);for(var J=0;J<6;J+=2){var U=J?I:L,K=U?U[0]:0,O=U?U[1]:0,rt=H[J],lt=H[J+1],pt=rt-K,bt=rt+K,dt=lt-O,St=lt+O;pt<Y&&(Y=pt),bt>B&&(B=bt),dt<z&&(z=dt),St>$&&($=St)}}return new b(Y,z,B-Y,$-z)}}});W.inject({statics:new function(){var l=.5522847498307936,c=[new ut([-1,0],[0,l],[0,-l]),new ut([0,-1],[-l,0],[l,0]),new ut([1,0],[0,-l],[0,l]),new ut([0,1],[l,0],[-l,0])];function p(y,T,P){var I=n.getNamed(P),L=new W(I&&(I.insert==!0?A.INSERT:I.insert==!1?A.NO_INSERT:null));return L._add(y),L._closed=T,L.set(I,A.INSERT)}function x(y,T,P){for(var I=new Array(4),L=0;L<4;L++){var k=c[L];I[L]=new ut(k._point.multiply(T).add(y),k._handleIn.multiply(T),k._handleOut.multiply(T))}return p(I,!0,P)}return{Line:function(){var y=arguments;return p([new ut(f.readNamed(y,"from")),new ut(f.readNamed(y,"to"))],!1,y)},Circle:function(){var y=arguments,T=f.readNamed(y,"center"),P=n.readNamed(y,"radius");return x(T,new _(P),y)},Rectangle:function(){var y=arguments,T=b.readNamed(y,"rectangle"),P=_.readNamed(y,"radius",0,{readNull:!0}),I=T.getBottomLeft(!0),L=T.getTopLeft(!0),k=T.getTopRight(!0),G=T.getBottomRight(!0),V;if(!P||P.isZero())V=[new ut(I),new ut(L),new ut(k),new ut(G)];else{P=_.min(P,T.getSize(!0).divide(2));var H=P.width,Y=P.height,B=H*l,z=Y*l;V=[new ut(I.add(H,0),null,[-B,0]),new ut(I.subtract(0,Y),[0,z]),new ut(L.add(0,Y),null,[0,-z]),new ut(L.add(H,0),[-B,0],null),new ut(k.subtract(H,0),null,[B,0]),new ut(k.add(0,Y),[0,-z],null),new ut(G.subtract(0,Y),null,[0,z]),new ut(G.subtract(H,0),[B,0])]}return p(V,!0,y)},RoundRectangle:"#Rectangle",Ellipse:function(){var y=arguments,T=D._readEllipse(y);return x(T.center,T.radius,y)},Oval:"#Ellipse",Arc:function(){var y=arguments,T=f.readNamed(y,"from"),P=f.readNamed(y,"through"),I=f.readNamed(y,"to"),L=n.getNamed(y),k=new W(L&&L.insert==!1&&A.NO_INSERT);return k.moveTo(T),k.arcTo(P,I),k.set(L)},RegularPolygon:function(){for(var y=arguments,T=f.readNamed(y,"center"),P=n.readNamed(y,"sides"),I=n.readNamed(y,"radius"),L=360/P,k=P%3==0,G=new f(0,k?-I:I),V=k?-1:.5,H=new Array(P),Y=0;Y<P;Y++)H[Y]=new ut(T.add(G.rotate((Y+V)*L)));return p(H,!0,y)},Star:function(){for(var y=arguments,T=f.readNamed(y,"center"),P=n.readNamed(y,"points")*2,I=n.readNamed(y,"radius1"),L=n.readNamed(y,"radius2"),k=360/P,G=new f(0,-1),V=new Array(P),H=0;H<P;H++)V[H]=new ut(T.add(G.rotate(k*H).multiply(H%2?L:I)));return p(V,!0,y)}}}});var Q=tt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(c){this._children=[],this._namedChildren={},this._initialize(c)||(typeof c=="string"?this.setPathData(c):this.addChildren(Array.isArray(c)?c:arguments))},insertChildren:function l(c,p){var x=p,y=x[0];y&&typeof y[0]=="number"&&(x=[x]);for(var T=p.length-1;T>=0;T--){var P=x[T];x===p&&!(P instanceof W)&&(x=n.slice(x)),Array.isArray(P)?x[T]=new W({segments:P,insert:!1}):P instanceof Q&&(x.splice.apply(x,[T,1].concat(P.removeChildren())),P.remove())}return l.base.call(this,c,x)},reduce:function l(c){for(var p=this._children,x=p.length-1;x>=0;x--){var y=p[x].reduce(c);y.isEmpty()&&y.remove()}if(!p.length){var y=new W(A.NO_INSERT);return y.copyAttributes(this),y.insertAbove(this),this.remove(),y}return l.base.call(this)},isClosed:function(){for(var l=this._children,c=0,p=l.length;c<p;c++)if(!l[c]._closed)return!1;return!0},setClosed:function(l){for(var c=this._children,p=0,x=c.length;p<x;p++)c[p].setClosed(l)},getFirstSegment:function(){var l=this.getFirstChild();return l&&l.getFirstSegment()},getLastSegment:function(){var l=this.getLastChild();return l&&l.getLastSegment()},getCurves:function(){for(var l=this._children,c=[],p=0,x=l.length;p<x;p++)n.push(c,l[p].getCurves());return c},getFirstCurve:function(){var l=this.getFirstChild();return l&&l.getFirstCurve()},getLastCurve:function(){var l=this.getLastChild();return l&&l.getLastCurve()},getArea:function(){for(var l=this._children,c=0,p=0,x=l.length;p<x;p++)c+=l[p].getArea();return c},getLength:function(){for(var l=this._children,c=0,p=0,x=l.length;p<x;p++)c+=l[p].getLength();return c},getPathData:function(l,c){for(var p=this._children,x=[],y=0,T=p.length;y<T;y++){var P=p[y],I=P._matrix;x.push(P.getPathData(l&&!I.isIdentity()?l.appended(I):l,c))}return x.join("")},_hitTestChildren:function l(c,p,x){return l.base.call(this,c,p.class===W||p.type==="path"?p:n.set({},p,{fill:!1}),x)},_draw:function(l,c,p,x){var y=this._children;if(!!y.length){c=c.extend({dontStart:!0,dontFinish:!0}),l.beginPath();for(var T=0,P=y.length;T<P;T++)y[T].draw(l,c,x);if(!c.clip){this._setStyles(l,c,p);var I=this._style;I.hasFill()&&(l.fill(I.getFillRule()),l.shadowColor="rgba(0,0,0,0)"),I.hasStroke()&&l.stroke()}}},_drawSelected:function(l,c,p){for(var x=this._children,y=0,T=x.length;y<T;y++){var P=x[y],I=P._matrix;p[P._id]||P._drawSelected(l,I.isIdentity()?c:c.appended(I))}}},new function(){function l(c,p){var x=c._children;if(p&&!x.length)throw new Error("Use a moveTo() command first");return x[x.length-1]}return n.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(c){this[c]=function(){var p=l(this,!0);p[c].apply(p,arguments)}},{moveTo:function(){var c=l(this),p=c&&c.isEmpty()?c:new W(A.NO_INSERT);p!==c&&this.addChild(p),p.moveTo.apply(p,arguments)},moveBy:function(){var c=l(this,!0),p=c&&c.getLastSegment(),x=f.read(arguments);this.moveTo(p?x.add(p._point):x)},closePath:function(c){l(this,!0).closePath(c)}})},n.each(["reverse","flatten","simplify","smooth"],function(l){this[l]=function(c){for(var p=this._children,x,y=0,T=p.length;y<T;y++)x=p[y][l](c)||x;return x}},{}));tt.inject(new function(){var l=Math.min,c=Math.max,p=Math.abs,x={unite:{"1":!0,"2":!0},intersect:{"2":!0},subtract:{"1":!0},exclude:{"1":!0,"-1":!0}};function y(j){return j._children||[j]}function T(j,et){var q=j.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(et){for(var J=y(q),U=0,K=J.length;U<K;U++){var j=J[U];!j._closed&&!j.isEmpty()&&(j.closePath(1e-12),j.getFirstSegment().setHandleIn(0,0),j.getLastSegment().setHandleOut(0,0))}q=q.resolveCrossings().reorient(q.getFillRule()==="nonzero",!0)}return q}function P(j,et,q,J,U){var K=new Q(A.NO_INSERT);return K.addChildren(j,!0),K=K.reduce({simplify:et}),U&&U.insert==!1||K.insertAbove(J&&q.isSibling(J)&&q.getIndex()<J.getIndex()?J:q),K.copyAttributes(q,!0),K}function I(j){return j.hasOverlap()||j.isCrossing()}function L(j,et,q,J){if(J&&(J.trace==!1||J.stroke)&&/^(subtract|intersect)$/.test(q))return k(j,et,q);var U=T(j,!0),K=et&&j!==et&&T(et,!0),O=x[q];O[q]=!0,K&&(O.subtract||O.exclude)^(K.isClockwise()^U.isClockwise())&&K.reverse();var rt=Y(it.expand(U.getIntersections(K,I))),lt=y(U),pt=K&&y(K),bt=[],dt=[],St;function Z(ee){for(var ue=0,ne=ee.length;ue<ne;ue++){var me=ee[ue];n.push(bt,me._segments),n.push(dt,me.getCurves()),me._overlapsOnly=!0}}function ht(ee){for(var ue=[],ne=0,me=ee&&ee.length;ne<me;ne++)ue.push(dt[ee[ne]]);return ue}if(rt.length){Z(lt),pt&&Z(pt);for(var vt=new Array(dt.length),_t=0,Mt=dt.length;_t<Mt;_t++)vt[_t]=dt[_t].getValues();for(var kt=h.findCurveBoundsCollisions(vt,vt,0,!0),Gt={},_t=0;_t<dt.length;_t++){var Ht=dt[_t],Dt=Ht._path._id,Wt=Gt[Dt]=Gt[Dt]||{};Wt[Ht.getIndex()]={hor:ht(kt[_t].hor),ver:ht(kt[_t].ver)}}for(var _t=0,Mt=rt.length;_t<Mt;_t++)z(rt[_t]._segment,U,K,Gt,O);for(var _t=0,Mt=bt.length;_t<Mt;_t++){var zt=bt[_t],Kt=zt._intersection;zt._winding||z(zt,U,K,Gt,O),Kt&&Kt._overlap||(zt._path._overlapsOnly=!1)}St=$(bt,O)}else St=H(pt?lt.concat(pt):lt.slice(),function(ee){return!!O[ee]});return P(St,!0,j,et,J)}function k(j,et,q){var J=T(j),U=T(et),K=J.getIntersections(U,I),O=q==="subtract",rt=q==="divide",lt={},pt=[];function bt(Z){if(!lt[Z._id]&&(rt||U.contains(Z.getPointAt(Z.getLength()/2))^O))return pt.unshift(Z),lt[Z._id]=!0}for(var dt=K.length-1;dt>=0;dt--){var St=K[dt].split();St&&(bt(St)&&St.getFirstSegment().setHandleIn(0,0),J.getLastSegment().setHandleOut(0,0))}return bt(J),P(pt,!1,j,et)}function G(j,et){for(var q=j;q;){if(q===et)return;q=q._previous}for(;j._next&&j._next!==et;)j=j._next;if(!j._next){for(;et._previous;)et=et._previous;j._next=et,et._previous=j}}function V(j){for(var et=j.length-1;et>=0;et--)j[et].clearHandles()}function H(j,et,q){var J=j&&j.length;if(J){var U=n.each(j,function(kt,Gt){this[kt._id]={container:null,winding:kt.isClockwise()?1:-1,index:Gt}},{}),K=j.slice().sort(function(kt,Gt){return p(Gt.getArea())-p(kt.getArea())}),O=K[0],rt=h.findItemBoundsCollisions(K,null,d.GEOMETRIC_EPSILON);q==null&&(q=O.isClockwise());for(var lt=0;lt<J;lt++){var pt=K[lt],bt=U[pt._id],dt=0,St=rt[lt];if(St){for(var Z=null,ht=St.length-1;ht>=0;ht--)if(St[ht]<lt){Z=Z||pt.getInteriorPoint();var vt=K[St[ht]];if(vt.contains(Z)){var _t=U[vt._id];dt=_t.winding,bt.winding+=dt,bt.container=_t.exclude?_t.container:vt;break}}}if(et(bt.winding)===et(dt))bt.exclude=!0,j[bt.index]=null;else{var Mt=bt.container;pt.setClockwise(Mt?!Mt.isClockwise():q)}}}return j}function Y(j,et,q){var J=et&&[],U=1e-8,K=1-U,O=!1,rt=q||[],lt=q&&{},pt,bt,dt;function St(ue){return ue._path._id+"."+ue._segment1._index}for(var Z=(q&&q.length)-1;Z>=0;Z--){var ht=q[Z];ht._path&&(lt[St(ht)]=!0)}for(var Z=j.length-1;Z>=0;Z--){var vt=j[Z],_t=vt._time,Mt=_t,kt=et&&!et(vt),ht=vt._curve,Gt;if(ht&&(ht!==bt?(O=!ht.hasHandles()||lt&&lt[St(ht)],pt=[],dt=null,bt=ht):dt>=U&&(_t/=dt)),kt){pt&&pt.push(vt);continue}else et&&J.unshift(vt);if(dt=Mt,_t<U)Gt=ht._segment1;else if(_t>K)Gt=ht._segment2;else{var Ht=ht.divideAtTime(_t,!0);O&&rt.push(ht,Ht),Gt=Ht._segment1;for(var Dt=pt.length-1;Dt>=0;Dt--){var Wt=pt[Dt];Wt._time=(Wt._time-_t)/(1-_t)}}vt._setSegment(Gt);var zt=Gt._intersection,Kt=vt._intersection;if(zt){G(zt,Kt);for(var ee=zt;ee;)G(ee._intersection,zt),ee=ee._next}else Gt._intersection=Kt}return q||V(rt),J||j}function B(j,et,q,J,U){var K=Array.isArray(et)?et:et[q?"hor":"ver"],O=q?1:0,rt=O^1,lt=[j.x,j.y],pt=lt[O],bt=lt[rt],dt=1e-9,St=1e-6,Z=pt-dt,ht=pt+dt,vt=0,_t=0,Mt=0,kt=0,Gt=!1,Ht=!1,Dt=1,Wt=[],zt,Kt;function ee(Re){var S=Re[rt+0],F=Re[rt+6];if(!(bt<l(S,F)||bt>c(S,F))){var st=Re[O+0],yt=Re[O+2],Ct=Re[O+4],Ot=Re[O+6];if(S===F){(st<ht&&Ot>Z||Ot<ht&&st>Z)&&(Gt=!0);return}var jt=bt===S?0:bt===F||Z>c(st,yt,Ct,Ot)||ht<l(st,yt,Ct,Ot)?1:nt.solveCubic(Re,rt,bt,Wt,0,1)>0?Wt[0]:1,se=jt===0?st:jt===1?Ot:nt.getPoint(Re,jt)[q?"y":"x"],fe=S>F?1:-1,Ce=zt[rt]>zt[rt+6]?1:-1,De=zt[O+6];return bt!==S?(se<Z?Mt+=fe:se>ht?kt+=fe:Gt=!0,se>pt-St&&se<pt+St&&(Dt/=2)):(fe!==Ce?st<Z?Mt+=fe:st>ht&&(kt+=fe):st!=De&&(De<ht&&se>ht?(kt+=fe,Gt=!0):De>Z&&se<Z&&(Mt+=fe,Gt=!0)),Dt/=4),zt=Re,!U&&se>Z&&se<ht&&nt.getTangent(Re,jt)[q?"x":"y"]===0&&B(j,et,!q,J,!0)}}function ue(Re){var S=Re[rt+0],F=Re[rt+2],st=Re[rt+4],yt=Re[rt+6];if(bt<=c(S,F,st,yt)&&bt>=l(S,F,st,yt)){for(var Ct=Re[O+0],Ot=Re[O+2],jt=Re[O+4],se=Re[O+6],fe=Z>c(Ct,Ot,jt,se)||ht<l(Ct,Ot,jt,se)?[Re]:nt.getMonoCurves(Re,q),Ce,De=0,pi=fe.length;De<pi;De++)if(Ce=ee(fe[De]))return Ce}}for(var ne=0,me=K.length;ne<me;ne++){var ce=K[ne],ae=ce._path,Ze=ce.getValues(),Ee;if((!ne||K[ne-1]._path!==ae)&&(zt=null,ae._closed||(Kt=nt.getValues(ae.getLastCurve().getSegment2(),ce.getSegment1(),null,!J),Kt[rt]!==Kt[rt+6]&&(zt=Kt)),!zt)){zt=Ze;for(var qe=ae.getLastCurve();qe&&qe!==ce;){var $e=qe.getValues();if($e[rt]!==$e[rt+6]){zt=$e;break}qe=qe.getPrevious()}}if(Ee=ue(Ze))return Ee;if(ne+1===me||K[ne+1]._path!==ae){if(Kt&&(Ee=ue(Kt)))return Ee;Gt&&!Mt&&!kt&&(Mt=kt=ae.isClockwise(J)^q?1:-1),vt+=Mt,_t+=kt,Mt=kt=0,Gt&&(Ht=!0,Gt=!1),Kt=null}}return vt=p(vt),_t=p(_t),{winding:c(vt,_t),windingL:vt,windingR:_t,quality:Dt,onPath:Ht}}function z(j,et,q,J,U){var K=[],O=j,rt=0,lt;do{var pt=j.getCurve();if(pt){var bt=pt.getLength();K.push({segment:j,curve:pt,length:bt}),rt+=bt}j=j.getNext()}while(j&&!j._intersection&&j!==O);for(var dt=[.5,.25,.75],lt={winding:0,quality:-1},St=.001,Z=1-St,ht=0;ht<dt.length&&lt.quality<.5;ht++)for(var bt=rt*dt[ht],vt=0,_t=K.length;vt<_t;vt++){var Mt=K[vt],kt=Mt.length;if(bt<=kt){var pt=Mt.curve,Gt=pt._path,Ht=Gt._parent,Dt=Ht instanceof Q?Ht:Gt,Wt=d.clamp(pt.getTimeAt(bt),St,Z),zt=pt.getPointAtTime(Wt),Kt=p(pt.getTangentAtTime(Wt).y)<Math.SQRT1_2,ee=null;if(U.subtract&&q){var ue=Dt===et?q:et,ne=ue._getWinding(zt,Kt,!0);if(Dt===et&&ne.winding||Dt===q&&!ne.winding){if(ne.quality<1)continue;ee={winding:0,quality:1}}}ee=ee||B(zt,J[Gt._id][pt.getIndex()],Kt,!0),ee.quality>lt.quality&&(lt=ee);break}bt-=kt}for(var vt=K.length-1;vt>=0;vt--)K[vt].segment._winding=lt}function $(j,et){var q=[],J;function U(me){var ce;return!!(me&&!me._visited&&(!et||et[(ce=me._winding||{}).winding]&&!(et.unite&&ce.winding===2&&ce.windingL&&ce.windingR)))}function K(me){if(me){for(var ce=0,ae=J.length;ce<ae;ce++)if(me===J[ce])return!0}return!1}function O(me){for(var ce=me._segments,ae=0,Ze=ce.length;ae<Ze;ae++)ce[ae]._visited=!0}function rt(me,ce){var ae=me._intersection,Ze=ae,Ee=[];ce&&(J=[me]);function qe($e,Re){for(;$e&&$e!==Re;){var S=$e._segment,F=S&&S._path;if(F){var st=S.getNext()||F.getFirstSegment(),yt=st._intersection;S!==me&&(K(S)||K(st)||st&&U(S)&&(U(st)||yt&&U(yt._segment)))&&Ee.push(S),ce&&J.push(S)}$e=$e._next}}if(ae){for(qe(ae);ae&&ae._previous;)ae=ae._previous;qe(ae,Ze)}return Ee}j.sort(function(me,ce){var ae=me._intersection,Ze=ce._intersection,Ee=!!(ae&&ae._overlap),qe=!!(Ze&&Ze._overlap),$e=me._path,Re=ce._path;return Ee^qe?Ee?1:-1:!ae^!Ze?ae?1:-1:$e!==Re?$e._id-Re._id:me._index-ce._index});for(var lt=0,pt=j.length;lt<pt;lt++){var bt=j[lt],dt=U(bt),St=null,Z=!1,ht=!0,vt=[],_t,Mt,kt;if(dt&&bt._path._overlapsOnly){var Gt=bt._path,Ht=bt._intersection._segment._path;Gt.compare(Ht)&&(Gt.getArea()&&q.push(Gt.clone(!1)),O(Gt),O(Ht),dt=!1)}for(;dt;){var Dt=!St,Wt=rt(bt,Dt),zt=Wt.shift(),Z=!Dt&&(K(bt)||K(zt)),Kt=!Z&&zt;if(Dt&&(St=new W(A.NO_INSERT),_t=null),Z){(bt.isFirst()||bt.isLast())&&(ht=bt._path._closed),bt._visited=!0;break}if(Kt&&_t&&(vt.push(_t),_t=null),_t||(Kt&&Wt.push(bt),_t={start:St._segments.length,crossings:Wt,visited:Mt=[],handleIn:kt}),Kt&&(bt=zt),!U(bt)){St.removeSegments(_t.start);for(var ee=0,ue=Mt.length;ee<ue;ee++)Mt[ee]._visited=!1;Mt.length=0;do bt=_t&&_t.crossings.shift(),(!bt||!bt._path)&&(bt=null,_t=vt.pop(),_t&&(Mt=_t.visited,kt=_t.handleIn));while(_t&&!U(bt));if(!bt)break}var ne=bt.getNext();St.add(new ut(bt._point,kt,ne&&bt._handleOut)),bt._visited=!0,Mt.push(bt),bt=ne||bt._path.getFirstSegment(),kt=ne&&ne._handleIn}Z&&(ht&&(St.getFirstSegment().setHandleIn(kt),St.setClosed(ht)),St.getArea()!==0&&q.push(St))}return q}return{_getWinding:function(j,et,q){return B(j,this.getCurves(),et,q)},unite:function(j,et){return L(this,j,"unite",et)},intersect:function(j,et){return L(this,j,"intersect",et)},subtract:function(j,et){return L(this,j,"subtract",et)},exclude:function(j,et){return L(this,j,"exclude",et)},divide:function(j,et){return et&&(et.trace==!1||et.stroke)?k(this,j,"divide"):P([this.subtract(j,et),this.intersect(j,et)],!0,this,j,et)},resolveCrossings:function(){var j=this._children,et=j||[this];function q(_t,Mt){var kt=_t&&_t._intersection;return kt&&kt._overlap&&kt._path===Mt}var J=!1,U=!1,K=this.getIntersections(null,function(_t){return _t.hasOverlap()&&(J=!0)||_t.isCrossing()&&(U=!0)}),O=J&&U&&[];if(K=it.expand(K),J)for(var rt=Y(K,function(_t){return _t.hasOverlap()},O),lt=rt.length-1;lt>=0;lt--){var pt=rt[lt],bt=pt._path,dt=pt._segment,St=dt.getPrevious(),Z=dt.getNext();q(St,bt)&&q(Z,bt)&&(dt.remove(),St._handleOut._set(0,0),Z._handleIn._set(0,0),St!==dt&&!St.getCurve().hasLength()&&(Z._handleIn.set(St._handleIn),St.remove()))}U&&(Y(K,J&&function(_t){var Mt=_t.getCurve(),kt=_t.getSegment(),Gt=_t._intersection,Ht=Gt._curve,Dt=Gt._segment;if(Mt&&Ht&&Mt._path&&Ht._path)return!0;kt&&(kt._intersection=null),Dt&&(Dt._intersection=null)},O),O&&V(O),et=$(n.each(et,function(_t){n.push(this,_t._segments)},[])));var ht=et.length,vt;return ht>1&&j?(et!==j&&this.setChildren(et),vt=this):ht===1&&!j&&(et[0]!==this&&this.setSegments(et[0].removeSegments()),vt=this),vt||(vt=new Q(A.NO_INSERT),vt.addChildren(et),vt=vt.reduce(),vt.copyAttributes(this),this.replaceWith(vt)),vt},reorient:function(j,et){var q=this._children;return q&&q.length?this.setChildren(H(this.removeChildren(),function(J){return!!(j?J:J&1)},et)):et!==t&&this.setClockwise(et),this},getInteriorPoint:function(){var j=this.getBounds(),et=j.getCenter(!0);if(!this.contains(et)){for(var q=this.getCurves(),J=et.y,U=[],K=[],O=0,rt=q.length;O<rt;O++){var lt=q[O].getValues(),pt=lt[1],bt=lt[3],dt=lt[5],St=lt[7];if(J>=l(pt,bt,dt,St)&&J<=c(pt,bt,dt,St))for(var Z=nt.getMonoCurves(lt),ht=0,vt=Z.length;ht<vt;ht++){var _t=Z[ht],Mt=_t[1],kt=_t[7];if(Mt!==kt&&(J>=Mt&&J<=kt||J>=kt&&J<=Mt)){var Gt=J===Mt?_t[0]:J===kt?_t[6]:nt.solveCubic(_t,1,J,K,0,1)===1?nt.getPoint(_t,K[0]).x:(_t[0]+_t[6])/2;U.push(Gt)}}}U.length>1&&(U.sort(function(Ht,Dt){return Ht-Dt}),et.x=(U[0]+U[1])/2)}return et}}});var ot=n.extend({_class:"PathFlattener",initialize:function(l,c,p,x,y){var T=[],P=[],I=0,L=1/(p||32),k=l._segments,G=k[0],V;function H($,j){var et=nt.getValues($,j,y);T.push(et),Y(et,$._index,0,1)}function Y($,j,et,q){if(q-et>L&&!(x&&nt.isStraight($))&&!nt.isFlatEnough($,c||.25)){var J=nt.subdivide($,.5),U=(et+q)/2;Y(J[0],j,et,U),Y(J[1],j,U,q)}else{var K=$[6]-$[0],O=$[7]-$[1],rt=Math.sqrt(K*K+O*O);rt>0&&(I+=rt,P.push({offset:I,curve:$,index:j,time:q}))}}for(var B=1,z=k.length;B<z;B++)V=k[B],H(G,V),G=V;l._closed&&H(V||G,k[0]),this.curves=T,this.parts=P,this.length=I,this.index=0},_get:function(l){for(var c=this.parts,p=c.length,x,y,T=this.index;y=T,!(!T||c[--T].offset<l););for(;y<p;y++){var P=c[y];if(P.offset>=l){this.index=y;var I=c[y-1],L=I&&I.index===P.index?I.time:0,k=I?I.offset:0;return{index:P.index,time:L+(P.time-L)*(l-k)/(P.offset-k)}}}return{index:c[p-1].index,time:1}},drawPart:function(l,c,p){for(var x=this._get(c),y=this._get(p),T=x.index,P=y.index;T<=P;T++){var I=nt.getPart(this.curves[T],T===x.index?x.time:0,T===y.index?y.time:1);T===x.index&&l.moveTo(I[0],I[1]),l.bezierCurveTo.apply(l,I.slice(2))}}},n.each(nt._evaluateMethods,function(l){this[l+"At"]=function(c){var p=this._get(c);return nt[l](this.curves[p.index],p.time)}},{})),ct=n.extend({initialize:function(l){for(var c=this.points=[],p=l._segments,x=l._closed,y=0,T,P=p.length;y<P;y++){var I=p[y].point;(!T||!T.equals(I))&&c.push(T=I.clone())}x&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=x},fit:function(l){var c=this.points,p=c.length,x=null;return p>0&&(x=[new ut(c[0])],p>1&&(this.fitCubic(x,l,0,p-1,c[1].subtract(c[0]),c[p-2].subtract(c[p-1])),this.closed&&(x.shift(),x.pop()))),x},fitCubic:function(l,c,p,x,y,T){var P=this.points;if(x-p==1){var I=P[p],L=P[x],k=I.getDistance(L)/3;this.addCurve(l,[I,I.add(y.normalize(k)),L.add(T.normalize(k)),L]);return}for(var G=this.chordLengthParameterize(p,x),V=Math.max(c,c*c),H,Y=!0,B=0;B<=4;B++){var z=this.generateBezier(p,x,G,y,T),$=this.findMaxError(p,x,z,G);if($.error<c&&Y){this.addCurve(l,z);return}if(H=$.index,$.error>=V)break;Y=this.reparameterize(p,x,G,z),V=$.error}var j=P[H-1].subtract(P[H+1]);this.fitCubic(l,c,p,H,y,j),this.fitCubic(l,c,H,x,j.negate(),T)},addCurve:function(l,c){var p=l[l.length-1];p.setHandleOut(c[1].subtract(c[0])),l.push(new ut(c[3],c[2].subtract(c[3])))},generateBezier:function(l,c,p,x,y){for(var T=1e-12,P=Math.abs,I=this.points,L=I[l],k=I[c],G=[[0,0],[0,0]],V=[0,0],H=0,Y=c-l+1;H<Y;H++){var B=p[H],z=1-B,$=3*B*z,j=z*z*z,et=$*z,q=$*B,J=B*B*B,U=x.normalize(et),K=y.normalize(q),O=I[l+H].subtract(L.multiply(j+et)).subtract(k.multiply(q+J));G[0][0]+=U.dot(U),G[0][1]+=U.dot(K),G[1][0]=G[0][1],G[1][1]+=K.dot(K),V[0]+=U.dot(O),V[1]+=K.dot(O)}var rt=G[0][0]*G[1][1]-G[1][0]*G[0][1],lt,pt;if(P(rt)>T){var bt=G[0][0]*V[1]-G[1][0]*V[0],dt=V[0]*G[1][1]-V[1]*G[0][1];lt=dt/rt,pt=bt/rt}else{var St=G[0][0]+G[0][1],Z=G[1][0]+G[1][1];lt=pt=P(St)>T?V[0]/St:P(Z)>T?V[1]/Z:0}var ht=k.getDistance(L),vt=T*ht,_t,Mt;if(lt<vt||pt<vt)lt=pt=ht/3;else{var kt=k.subtract(L);_t=x.normalize(lt),Mt=y.normalize(pt),_t.dot(kt)-Mt.dot(kt)>ht*ht&&(lt=pt=ht/3,_t=Mt=null)}return[L,L.add(_t||x.normalize(lt)),k.add(Mt||y.normalize(pt)),k]},reparameterize:function(l,c,p,x){for(var y=l;y<=c;y++)p[y-l]=this.findRoot(x,this.points[y],p[y-l]);for(var y=1,T=p.length;y<T;y++)if(p[y]<=p[y-1])return!1;return!0},findRoot:function(l,c,p){for(var x=[],y=[],T=0;T<=2;T++)x[T]=l[T+1].subtract(l[T]).multiply(3);for(var T=0;T<=1;T++)y[T]=x[T+1].subtract(x[T]).multiply(2);var P=this.evaluate(3,l,p),I=this.evaluate(2,x,p),L=this.evaluate(1,y,p),k=P.subtract(c),G=I.dot(I)+k.dot(L);return d.isMachineZero(G)?p:p-k.dot(I)/G},evaluate:function(l,c,p){for(var x=c.slice(),y=1;y<=l;y++)for(var T=0;T<=l-y;T++)x[T]=x[T].multiply(1-p).add(x[T+1].multiply(p));return x[0]},chordLengthParameterize:function(l,c){for(var p=[0],x=l+1;x<=c;x++)p[x-l]=p[x-l-1]+this.points[x].getDistance(this.points[x-1]);for(var x=1,y=c-l;x<=y;x++)p[x]/=p[y];return p},findMaxError:function(l,c,p,x){for(var y=Math.floor((c-l+1)/2),T=0,P=l+1;P<c;P++){var I=this.evaluate(3,p,x[P-l]),L=I.subtract(this.points[P]),k=L.x*L.x+L.y*L.y;k>=T&&(T=k,y=P)}return{error:T,index:y}}}),Tt=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(c){this._content="",this._lines=[];var p=c&&n.isPlainObject(c)&&c.x===t&&c.y===t;this._initialize(p&&c,!p&&f.read(arguments))},_equals:function(l){return this._content===l._content},copyContent:function(l){this.setContent(l._content)},getContent:function(){return this._content},setContent:function(l){this._content=""+l,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Rt=Tt.extend({_class:"PointText",initialize:function(){Tt.apply(this,arguments)},getPoint:function(){var l=this._matrix.getTranslation();return new m(l.x,l.y,this,"setPoint")},setPoint:function(){var l=f.read(arguments);this.translate(l.subtract(this._matrix.getTranslation()))},_draw:function(l,c,p){if(!!this._content){this._setStyles(l,c,p);var x=this._lines,y=this._style,T=y.hasFill(),P=y.hasStroke(),I=y.getLeading(),L=l.shadowColor;l.font=y.getFontStyle(),l.textAlign=y.getJustification();for(var k=0,G=x.length;k<G;k++){l.shadowColor=L;var V=x[k];T&&(l.fillText(V,0,0),l.shadowColor="rgba(0,0,0,0)"),P&&l.strokeText(V,0,0),l.translate(0,I)}}},_getBounds:function(l,c){var p=this._style,x=this._lines,y=x.length,T=p.getJustification(),P=p.getLeading(),I=this.getView().getTextWidth(p.getFontStyle(),x),L=0;T!=="left"&&(L-=I/(T==="center"?2:1));var k=new b(L,y?-.75*P:0,I,y*P);return l?l._transformBounds(k,k):k}}),Pt=n.extend(new function(){var l={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},c={},p={transparent:[0,0,0,0]},x;function y(I){var L=I.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||I.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),k="rgb",G;if(L){var V=L[4]?4:3;G=new Array(V);for(var H=0;H<V;H++){var Y=L[H+1];G[H]=parseInt(Y.length==1?Y+Y:Y,16)/255}}else if(L=I.match(/^(rgb|hsl)a?\((.*)\)$/)){k=L[1],G=L[2].trim().split(/[,\s]+/g);for(var B=k==="hsl",H=0,z=Math.min(G.length,4);H<z;H++){var $=G[H],Y=parseFloat($);if(B)if(H===0){var j=$.match(/([a-z]*)$/)[1];Y*={turn:360,rad:180/Math.PI,grad:.9}[j]||1}else H<3&&(Y/=100);else H<3&&(Y/=/%$/.test($)?100:255);G[H]=Y}}else{var et=p[I];if(!et)if(e){x||(x=de.getContext(1,1,{willReadFrequently:!0}),x.globalCompositeOperation="copy"),x.fillStyle="rgba(0,0,0,0)",x.fillStyle=I,x.fillRect(0,0,1,1);var q=x.getImageData(0,0,1,1).data;et=p[I]=[q[0]/255,q[1]/255,q[2]/255]}else et=[0,0,0];G=et.slice()}return[k,G]}var T=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],P={"rgb-hsb":function(I,L,k){var G=Math.max(I,L,k),V=Math.min(I,L,k),H=G-V,Y=H===0?0:(G==I?(L-k)/H+(L<k?6:0):G==L?(k-I)/H+2:(I-L)/H+4)*60;return[Y,G===0?0:H/G,G]},"hsb-rgb":function(I,L,k){I=(I/60%6+6)%6;var G=Math.floor(I),V=I-G,G=T[G],H=[k,k*(1-L),k*(1-L*V),k*(1-L*(1-V))];return[H[G[0]],H[G[1]],H[G[2]]]},"rgb-hsl":function(I,L,k){var G=Math.max(I,L,k),V=Math.min(I,L,k),H=G-V,Y=H===0,B=Y?0:(G==I?(L-k)/H+(L<k?6:0):G==L?(k-I)/H+2:(I-L)/H+4)*60,z=(G+V)/2,$=Y?0:z<.5?H/(G+V):H/(2-G-V);return[B,$,z]},"hsl-rgb":function(I,L,k){if(I=(I/360%1+1)%1,L===0)return[k,k,k];for(var G=[I+1/3,I,I-1/3],V=k<.5?k*(1+L):k+L-k*L,H=2*k-V,Y=[],B=0;B<3;B++){var z=G[B];z<0&&(z+=1),z>1&&(z-=1),Y[B]=6*z<1?H+(V-H)*6*z:2*z<1?V:3*z<2?H+(V-H)*(2/3-z)*6:H}return Y},"rgb-gray":function(I,L,k){return[I*.2989+L*.587+k*.114]},"gray-rgb":function(I){return[I,I,I]},"gray-hsb":function(I){return[0,0,I]},"gray-hsl":function(I){return[0,0,I]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return n.each(l,function(I,L){c[L]=[],n.each(I,function(k,G){var V=n.capitalize(k),H=/^(hue|saturation)$/.test(k),Y=c[L][G]=L==="gradient"?k==="gradient"?function(B){var z=this._components[0];return B=Nt.read(Array.isArray(B)?B:arguments,0,{readNull:!0}),z!==B&&(z&&z._removeOwner(this),B&&B._addOwner(this)),B}:function(){return f.read(arguments,0,{readNull:k==="highlight",clone:!0})}:function(B){return B==null||isNaN(B)?0:+B};this["get"+V]=function(){return this._type===L||H&&/^hs[bl]$/.test(this._type)?this._components[G]:this._convert(L)[G]},this["set"+V]=function(B){this._type!==L&&!(H&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(L),this._properties=l[L],this._type=L),this._components[G]=Y.call(this,B),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function I(L){var k=arguments,G=this.__read,V=0,H,Y,B,z;Array.isArray(L)&&(k=L,L=k[0]);var $=L!=null&&typeof L;if($==="string"&&L in l&&(H=L,L=k[1],Array.isArray(L)?(Y=L,B=k[2]):(G&&(V=1),k=n.slice(k,1),$=typeof L)),!Y){if(z=$==="number"?k:$==="object"&&L.length!=null?L:null,z){H||(H=z.length>=3?"rgb":"gray");var j=l[H].length;B=z[j],G&&(V+=z===arguments?j+(B!=null?1:0):1),z.length>j&&(z=n.slice(z,0,j))}else if($==="string"){var et=y(L);H=et[0],Y=et[1],Y.length===4&&(B=Y[3],Y.length--)}else if($==="object")if(L.constructor===I){if(H=L._type,Y=L._components.slice(),B=L._alpha,H==="gradient")for(var q=1,J=Y.length;q<J;q++){var U=Y[q];U&&(Y[q]=U.clone())}}else if(L.constructor===Nt)H="gradient",z=k;else{H="hue"in L?"lightness"in L?"hsl":"hsb":"gradient"in L||"stops"in L||"radial"in L?"gradient":"gray"in L?"gray":"rgb";var K=l[H],O=c[H];this._components=Y=[];for(var q=0,J=K.length;q<J;q++){var rt=L[K[q]];rt==null&&!q&&H==="gradient"&&"stops"in L&&(rt={stops:L.stops,radial:L.radial}),rt=O[q].call(this,rt),rt!=null&&(Y[q]=rt)}B=L.alpha}G&&H&&(V=1)}if(this._type=H||"rgb",!Y){this._components=Y=[];for(var O=c[this._type],q=0,J=O.length;q<J;q++){var rt=O[q].call(this,z&&z[q]);rt!=null&&(Y[q]=rt)}}return this._components=Y,this._properties=l[this._type],this._alpha=B,G&&(this.__read=V),this},set:"#initialize",_serialize:function(I,L){var k=this.getComponents();return n.serialize(/^(gray|rgb)$/.test(this._type)?k:[this._type].concat(k),I,!0,L)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(I){var L;return this._type===I?this._components.slice():(L=P[this._type+"-"+I])?L.apply(this,this._components):P["rgb-"+I].apply(this,P[this._type+"-rgb"].apply(this,this._components))},convert:function(I){return new Pt(I,this._convert(I),this._alpha)},getType:function(){return this._type},setType:function(I){this._components=this._convert(I),this._properties=l[I],this._type=I},getComponents:function(){var I=this._components.slice();return this._alpha!=null&&I.push(this._alpha),I},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(I){this._alpha=I==null?null:Math.min(Math.max(I,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(I){var L=n.isPlainValue(I,!0)?Pt.read(arguments):I;return L===this||L&&this._class===L._class&&this._type===L._type&&this.getAlpha()===L.getAlpha()&&n.equals(this._components,L._components)||!1},toString:function(){for(var I=this._properties,L=[],k=this._type==="gradient",G=u.instance,V=0,H=I.length;V<H;V++){var Y=this._components[V];Y!=null&&L.push(I[V]+": "+(k?Y:G.number(Y)))}return this._alpha!=null&&L.push("alpha: "+G.number(this._alpha)),"{ "+L.join(", ")+" }"},toCSS:function(I){var L=this._convert("rgb"),k=I||this._alpha==null?1:this._alpha;function G(V){return Math.round((V<0?0:V>1?1:V)*255)}return L=[G(L[0]),G(L[1]),G(L[2])],k<1&&L.push(k<0?0:k),I?"#"+((1<<24)+(L[0]<<16)+(L[1]<<8)+L[2]).toString(16).slice(1):(L.length==4?"rgba(":"rgb(")+L.join(",")+")"},toCanvasStyle:function(I,L){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var k=this._components,G=k[0],V=G._stops,H=k[1],Y=k[2],B=k[3],z=L&&L.inverted(),$;if(z&&(H=z._transformPoint(H),Y=z._transformPoint(Y),B&&(B=z._transformPoint(B))),G._radial){var j=Y.getDistance(H);if(B){var et=B.subtract(H);et.getLength()>j&&(B=H.add(et.normalize(j-.1)))}var q=B||H;$=I.createRadialGradient(q.x,q.y,0,H.x,H.y,j)}else $=I.createLinearGradient(H.x,H.y,Y.x,Y.y);for(var J=0,U=V.length;J<U;J++){var K=V[J],O=K._offset;$.addColorStop(O??J/(U-1),K._color.toCanvasStyle())}return this._canvasStyle=$},transform:function(I){if(this._type==="gradient"){for(var L=this._components,k=1,G=L.length;k<G;k++){var V=L[k];I._transformPoint(V,V,!0)}this._changed()}},statics:{_types:l,random:function(){var I=Math.random;return new Pt(I(),I(),I())},_setOwner:function(I,L,k){return I&&(I._owner&&L&&I._owner!==L&&(I=I.clone()),!I._owner^!L&&(I._owner=L||null,I._setter=k||null)),I}}})},new function(){var l={add:function(c,p){return c+p},subtract:function(c,p){return c-p},multiply:function(c,p){return c*p},divide:function(c,p){return c/p}};return n.each(l,function(c,p){this[p]=function(x){x=Pt.read(arguments);for(var y=this._type,T=this._components,P=x._convert(y),I=0,L=T.length;I<L;I++)P[I]=c(T[I],P[I]);return new Pt(y,P,this._alpha!=null?c(this._alpha,x.getAlpha()):null)}},{})}),Nt=n.extend({_class:"Gradient",initialize:function(c,p){this._id=g.get(),c&&n.isPlainObject(c)&&(this.set(c),c=p=null),this._stops==null&&this.setStops(c||["white","black"]),this._radial==null&&this.setRadial(typeof p=="string"&&p==="radial"||p||!1)},_serialize:function(l,c){return c.add(this,function(){return n.serialize([this._stops,this._radial],l,!0,c)})},_changed:function(){for(var l=0,c=this._owners&&this._owners.length;l<c;l++)this._owners[l]._changed()},_addOwner:function(l){this._owners||(this._owners=[]),this._owners.push(l)},_removeOwner:function(l){var c=this._owners?this._owners.indexOf(l):-1;c!=-1&&(this._owners.splice(c,1),this._owners.length||(this._owners=t))},clone:function(){for(var l=[],c=0,p=this._stops.length;c<p;c++)l[c]=this._stops[c].clone();return new Nt(l,this._radial)},getStops:function(){return this._stops},setStops:function(l){if(l.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var c=this._stops;if(c)for(var p=0,x=c.length;p<x;p++)c[p]._owner=t;c=this._stops=At.readList(l,0,{clone:!0});for(var p=0,x=c.length;p<x;p++)c[p]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(l){this._radial=l,this._changed()},equals:function(l){if(l===this)return!0;if(l&&this._class===l._class){var c=this._stops,p=l._stops,x=c.length;if(x===p.length){for(var y=0;y<x;y++)if(!c[y].equals(p[y]))return!1;return!0}}return!1}}),At=n.extend({_class:"GradientStop",initialize:function(c,p){var x=c,y=p;typeof c=="object"&&p===t&&(Array.isArray(c)&&typeof c[0]!="number"?(x=c[0],y=c[1]):("color"in c||"offset"in c||"rampPoint"in c)&&(x=c.color,y=c.offset||c.rampPoint||0)),this.setColor(x),this.setOffset(y)},clone:function(){return new At(this._color.clone(),this._offset)},_serialize:function(l,c){var p=this._color,x=this._offset;return n.serialize(x==null?[p]:[p,x],l,!0,c)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(l){this._offset=l,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Pt._setOwner(this._color,null),this._color=Pt._setOwner(Pt.read(arguments,0),this,"setColor"),this._changed()},equals:function(l){return l===this||l&&this._class===l._class&&this._color.equals(l._color)&&this._offset==l._offset||!1}}),Qt=n.extend(new function(){var l={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new f,selectedColor:null},c=n.set({},l,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),p=n.set({},c,{fillColor:new Pt}),x={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},y={beans:!0},T={_class:"Style",beans:!0,initialize:function(I,L,k){this._values={},this._owner=L,this._project=L&&L._project||k||Ft.project,this._defaults=!L||L instanceof R?c:L instanceof Tt?p:l,I&&this.set(I)}};return n.each(c,function(P,I){var L=/Color$/.test(I),k=I==="shadowOffset",G=n.capitalize(I),V=x[I],H="set"+G,Y="get"+G;T[H]=function(B){var z=this._owner,$=z&&z._children,j=$&&$.length>0&&!(z instanceof Q);if(j)for(var et=0,q=$.length;et<q;et++)$[et]._style[H](B);if((I==="selectedColor"||!j)&&I in this._defaults){var J=this._values[I];J!==B&&(L&&(J&&(Pt._setOwner(J,null),J._canvasStyle=null),B&&B.constructor===Pt&&(B=Pt._setOwner(B,z,j&&H))),this._values[I]=B,z&&z._changed(V||129))}},T[Y]=function(B){var z=this._owner,$=z&&z._children,j=$&&$.length>0&&!(z instanceof Q),et;if(j&&!B)for(var q=0,J=$.length;q<J;q++){var U=$[q]._style[Y]();if(!q)et=U;else if(!n.equals(et,U))return t}else if(I in this._defaults){var et=this._values[I];if(et===t)et=this._defaults[I],et&&et.clone&&(et=et.clone());else{var K=L?Pt:k?f:null;K&&!(et&&et.constructor===K)&&(this._values[I]=et=K.read([et],0,{readNull:!0,clone:!0}))}}return et&&L&&(et=Pt._setOwner(et,z,j&&H)),et},y[Y]=function(B){return this._style[Y](B)},y[H]=function(B){this._style[H](B)}}),n.each({Font:"FontFamily",WindingRule:"FillRule"},function(P,I){var L="get"+I,k="set"+I;T[L]=y[L]="#get"+P,T[k]=y[k]="#set"+P}),A.inject(y),T},{set:function(l){var c=l instanceof Qt,p=c?l._values:l;if(p){for(var x in p)if(x in this._defaults){var y=p[x];this[x]=y&&c&&y.clone?y.clone():y}}},equals:function(l){function c(p,x,y){var T=p._values,P=x._values,I=x._defaults;for(var L in T){var k=T[L],G=P[L];if(!(y&&L in P)&&!n.equals(k,G===t?I[L]:G))return!1}return!0}return l===this||l&&this._class===l._class&&c(this,l)&&c(l,this,!0)||!1},_dispose:function(){var l;l=this.getFillColor(),l&&(l._canvasStyle=null),l=this.getStrokeColor(),l&&(l._canvasStyle=null),l=this.getShadowColor(),l&&(l._canvasStyle=null)},hasFill:function(){var l=this.getFillColor();return!!l&&l.alpha>0},hasStroke:function(){var l=this.getStrokeColor();return!!l&&l.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var l=this.getShadowColor();return!!l&&l.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var l=this.getFontSize();return this.getFontWeight()+" "+l+(/[a-z]/i.test(l+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function l(){var c=l.base.call(this),p=this.getFontSize();return/pt|em|%|px/.test(p)&&(p=this.getView().getPixelSize(p)),c??p*1.2}}),Vt=new function(){function l(c,p,x,y){for(var T=["","webkit","moz","Moz","ms","o"],P=p[0].toUpperCase()+p.substring(1),I=0;I<6;I++){var L=T[I],k=L?L+P:p;if(k in c){if(x)c[k]=y;else return c[k];break}}}return{getStyles:function(c){var p=c&&c.nodeType!==9?c.ownerDocument:c,x=p&&p.defaultView;return x&&x.getComputedStyle(c,"")},getBounds:function(c,p){var x=c.ownerDocument,y=x.body,T=x.documentElement,P;try{P=c.getBoundingClientRect()}catch{P={left:0,top:0,width:0,height:0}}var I=P.left-(T.clientLeft||y.clientLeft||0),L=P.top-(T.clientTop||y.clientTop||0);if(!p){var k=x.defaultView;I+=k.pageXOffset||T.scrollLeft||y.scrollLeft,L+=k.pageYOffset||T.scrollTop||y.scrollTop}return new b(I,L,P.width,P.height)},getViewportBounds:function(c){var p=c.ownerDocument,x=p.defaultView,y=p.documentElement;return new b(0,0,x.innerWidth||y.clientWidth,x.innerHeight||y.clientHeight)},getOffset:function(c,p){return Vt.getBounds(c,p).getPoint()},getSize:function(c){return Vt.getBounds(c,!0).getSize()},isInvisible:function(c){return Vt.getSize(c).equals(new _(0,0))},isInView:function(c){return!Vt.isInvisible(c)&&Vt.getViewportBounds(c).intersects(Vt.getBounds(c,!0))},isInserted:function(c){return i.body.contains(c)},getPrefixed:function(c,p){return c&&l(c,p)},setPrefixed:function(c,p,x){if(typeof p=="object")for(var y in p)l(c,y,!0,p[y]);else l(c,p,!0,x)}}},Yt={add:function(l,c){if(l)for(var p in c)for(var x=c[p],y=p.split(/[\s,]+/g),T=0,P=y.length;T<P;T++){var I=y[T],L=l===i&&(I==="touchstart"||I==="touchmove")?{passive:!1}:!1;l.addEventListener(I,x,L)}},remove:function(l,c){if(l)for(var p in c)for(var x=c[p],y=p.split(/[\s,]+/g),T=0,P=y.length;T<P;T++)l.removeEventListener(y[T],x,!1)},getPoint:function(l){var c=l.targetTouches?l.targetTouches.length?l.targetTouches[0]:l.changedTouches[0]:l;return new f(c.pageX||c.clientX+i.documentElement.scrollLeft,c.pageY||c.clientY+i.documentElement.scrollTop)},getTarget:function(l){return l.target||l.srcElement},getRelatedTarget:function(l){return l.relatedTarget||l.toElement},getOffset:function(l,c){return Yt.getPoint(l).subtract(Vt.getOffset(c||Yt.getTarget(l)))}};Yt.requestAnimationFrame=new function(){var l=Vt.getPrefixed(e,"requestAnimationFrame"),c=!1,p=[],x;function y(){var T=p;p=[];for(var P=0,I=T.length;P<I;P++)T[P]();c=l&&p.length,c&&l(y)}return function(T){p.push(T),l?c||(l(y),c=!0):x||(x=setInterval(y,1e3/60))}};var Xt=n.extend(s,{_class:"View",initialize:function l(c,p){function x(V){return p[V]||parseInt(p.getAttribute(V),10)}function y(){var V=Vt.getSize(p);return V.isNaN()||V.isZero()?new _(x("width"),x("height")):V}var T;if(e&&p){this._id=p.getAttribute("id"),this._id==null&&p.setAttribute("id",this._id="paper-view-"+l._id++),Yt.add(p,this._viewEvents);var P="none";if(Vt.setPrefixed(p.style,{userDrag:P,userSelect:P,touchCallout:P,contentZooming:P,tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(p,"resize")){var I=this;Yt.add(e,this._windowEvents={resize:function(){I.setViewSize(y())}})}if(T=y(),a.hasAttribute(p,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var L=this._stats.domElement,k=L.style,G=Vt.getOffset(p);k.position="absolute",k.left=G.x+"px",k.top=G.y+"px",i.body.appendChild(L)}}else T=new _(p),p=null;this._project=c,this._scope=c._scope,this._element=p,this._pixelRatio||(this._pixelRatio=e&&e.devicePixelRatio||1),this._setElementSize(T.width,T.height),this._viewSize=T,l._views.push(this),l._viewsById[this._id]=this,(this._matrix=new M)._owner=this,l._focused||(l._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ft.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Xt._focused===this&&(Xt._focused=null),Xt._views.splice(Xt._views.indexOf(this),1),delete Xt._viewsById[this._id];var l=this._project;return l._view===this&&(l._view=null),Yt.remove(this._element,this._viewEvents),Yt.remove(e,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:n.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(l){this[l]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(l){this._autoUpdate=l,l&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var l=this;Yt.requestAnimationFrame(function(){if(l._requested=!1,l._animate){l.requestUpdate();var c=l._element;(!Vt.getPrefixed(i,"hidden")||a.getAttribute(c,"keepalive")==="true")&&Vt.isInView(c)&&l._handleFrame()}l._autoUpdate&&l.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ft=this._scope;var l=Date.now()/1e3,c=this._last?l-this._last:0;this._last=l,this.emit("frame",new n({delta:c,time:this._time+=c,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(l,c){var p=this._frameItems;c?(p[l._id]={item:l,time:0,count:0},++this._frameItemCount==1&&this.on("frame",this._handleFrameItems)):(delete p[l._id],--this._frameItemCount==0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(l){for(var c in this._frameItems){var p=this._frameItems[c];p.item.emit("frame",new n(l,{time:p.time+=l.delta,count:p.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=t},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var l=this._viewSize;return new v(l.width,l.height,this,"setViewSize")},setViewSize:function(){var l=_.read(arguments),c=l.subtract(this._viewSize);c.isZero()||(this._setElementSize(l.width,l.height),this._viewSize.set(l),this._changed(),this.emit("resize",{size:l,delta:c}),this._autoUpdate&&this.update())},_setElementSize:function(l,c){var p=this._element;p&&(p.width!==l&&(p.width=l),p.height!==c&&(p.height=c))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new b(new f,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Vt.isInView(this._element)},isInserted:function(){return Vt.isInserted(this._element)},getPixelSize:function(l){var c=this._element,p;if(c){var x=c.parentNode,y=i.createElement("div");y.style.fontSize=l,x.appendChild(y),p=parseFloat(Vt.getStyles(y).fontSize),x.removeChild(y)}else p=parseFloat(p);return p},getTextWidth:function(l,c){return 0}},n.each(["rotate","scale","shear","skew"],function(l){var c=l==="rotate";this[l]=function(){var p=arguments,x=(c?n:f).read(p),y=f.read(p,0,{readNull:!0});return this.transform(new M()[l](x,y||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var l=new M;return this.transform(l.translate.apply(l,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var l=f.read(arguments);this.translate(this.getCenter().subtract(l))},getZoom:function(){var l=this._decompose().scaling;return(l.x+l.y)/2},setZoom:function(l){this.transform(new M().scale(l/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(l){var c=this.getRotation();c!=null&&l!=null&&this.rotate(l-c)},getScaling:function(){var l=this._decompose().scaling;return new m(l.x,l.y,this,"setScaling")},setScaling:function(){var l=this.getScaling(),c=f.read(arguments,0,{clone:!0,readNull:!0});l&&c&&this.scale(c.x/l.x,c.y/l.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var l=this._matrix;l.set.apply(l,arguments)},transform:function(l){this._matrix.append(l)},scrollBy:function(){this.translate(f.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(f.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(f.read(arguments))},getEventPoint:function(l){return this.viewToProject(Yt.getOffset(l,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(l,c){i&&typeof c=="string"&&(c=i.getElementById(c));var p=e?re:Xt;return new p(l,c)}}},new function(){if(!e)return;var l,c,p=!1,x=!1;function y(St){var Z=Yt.getTarget(St);return Z.getAttribute&&Xt._viewsById[Z.getAttribute("id")]}function T(){var St=Xt._focused;if(!St||!St.isVisible()){for(var Z=0,ht=Xt._views.length;Z<ht;Z++)if((St=Xt._views[Z]).isVisible()){Xt._focused=c=St;break}}}function P(St,Z,ht){St._handleMouseEvent("mousemove",Z,ht)}var I=e.navigator,L,k,G;I.pointerEnabled||I.msPointerEnabled?(L="pointerdown MSPointerDown",k="pointermove MSPointerMove",G="pointerup pointercancel MSPointerUp MSPointerCancel"):(L="touchstart",k="touchmove",G="touchend touchcancel","ontouchstart"in e&&I.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(L+=" mousedown",k+=" mousemove",G+=" mouseup"));var V={},H={mouseout:function(St){var Z=Xt._focused,ht=Yt.getRelatedTarget(St);if(Z&&(!ht||ht.nodeName==="HTML")){var vt=Yt.getOffset(St,Z._element),_t=vt.x,Mt=Math.abs,kt=Mt(_t),Gt=1<<25,Ht=kt-Gt;vt.x=Mt(Ht)<kt?Ht*(_t<0?-1:1):_t,P(Z,St,Z.viewToProject(vt))}},scroll:T};V[L]=function(St){var Z=Xt._focused=y(St);p||(p=!0,Z._handleMouseEvent("mousedown",St))},H[k]=function(St){var Z=Xt._focused;if(!x){var ht=y(St);ht?Z!==ht&&(Z&&P(Z,St),l||(l=Z),Z=Xt._focused=c=ht):c&&c===Z&&(l&&!l.isInserted()&&(l=null),Z=Xt._focused=l,l=null,T())}Z&&P(Z,St)},H[L]=function(){x=!0},H[G]=function(St){var Z=Xt._focused;Z&&p&&Z._handleMouseEvent("mouseup",St),x=p=!1},Yt.add(i,H),Yt.add(e,{load:T});var Y=!1,B=!1,z={doubleclick:"click",mousedrag:"mousemove"},$=!1,j,et,q,J,U,K,O,rt,lt;function pt(St,Z,ht,vt,_t,Mt,kt){var Gt=!1,Ht;function Dt(Wt,zt){if(Wt.responds(zt)){if(Ht||(Ht=new te(zt,vt,_t,Z||Wt,Mt?_t.subtract(Mt):null)),Wt.emit(zt,Ht)&&(Y=!0,Ht.prevented&&(B=!0),Ht.stopped))return Gt=!0}else{var Kt=z[zt];if(Kt)return Dt(Wt,Kt)}}for(;St&&St!==kt&&!Dt(St,ht);)St=St._parent;return Gt}function bt(St,Z,ht,vt,_t,Mt){return St._project.removeOn(ht),B=Y=!1,K&&pt(K,null,ht,vt,_t,Mt)||Z&&Z!==K&&!Z.isDescendant(K)&&pt(Z,null,ht==="mousedrag"?"mousemove":ht,vt,_t,Mt,K)||pt(St,K||Z||St,ht,vt,_t,Mt)}var dt={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:V,_handleMouseEvent:function(St,Z,ht){var vt=this._itemEvents,_t=vt.native[St],Mt=St==="mousemove",kt=this._scope.tool,Gt=this;function Ht(ne){return vt.virtual[ne]||Gt.responds(ne)||kt&&kt.responds(ne)}Mt&&p&&Ht("mousedrag")&&(St="mousedrag"),ht||(ht=this.getEventPoint(Z));var Dt=this.getBounds().contains(ht),Wt=_t&&Dt&&Gt._project.hitTest(ht,{tolerance:0,fill:!0,stroke:!0}),zt=Wt&&Wt.item||null,Kt=!1,ee={};if(ee[St.substr(5)]=!0,_t&&zt!==U&&(U&&pt(U,null,"mouseleave",Z,ht),zt&&pt(zt,null,"mouseenter",Z,ht),U=zt),$^Dt&&(pt(this,null,Dt?"mouseenter":"mouseleave",Z,ht),j=Dt?this:null,Kt=!0),(Dt||ee.drag)&&!ht.equals(q)&&(bt(this,zt,Mt?St:"mousemove",Z,ht,q),Kt=!0),$=Dt,ee.down&&Dt||ee.up&&et){if(bt(this,zt,St,Z,ht,et),ee.down){if(lt=zt===O&&Date.now()-rt<300,J=O=zt,!B&&zt){for(var ue=zt;ue&&!ue.responds("mousedrag");)ue=ue._parent;ue&&(K=zt)}et=ht}else ee.up&&(!B&&zt===J&&(rt=Date.now(),bt(this,zt,lt?"doubleclick":"click",Z,ht,et),lt=!1),J=K=null);$=!1,Kt=!0}q=ht,Kt&&kt&&(Y=kt._handleMouseEvent(St,Z,ht,ee)||Y),Z.cancelable!==!1&&(Y&&!ee.move||ee.down&&Ht("mouseup"))&&Z.preventDefault()},_handleKeyEvent:function(St,Z,ht,vt){var _t=this._scope,Mt=_t.tool,kt;function Gt(Ht){Ht.responds(St)&&(Ft=_t,Ht.emit(St,kt=kt||new Ut(St,Z,ht,vt)))}this.isVisible()&&(Gt(this),Mt&&Mt.responds(St)&&Gt(Mt))},_countItemEvent:function(St,Z){var ht=this._itemEvents,vt=ht.native,_t=ht.virtual;for(var Mt in dt)vt[Mt]=(vt[Mt]||0)+(dt[Mt][St]||0)*Z;_t[St]=(_t[St]||0)+Z},statics:{updateFocus:T,_resetState:function(){p=x=Y=$=!1,l=c=j=et=q=J=U=K=O=rt=lt=null}}}}),re=Xt.extend({_class:"CanvasView",initialize:function(c,p){if(!(p instanceof e.HTMLCanvasElement)){var x=_.read(arguments,1);if(x.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+n.slice(arguments,1));p=de.getCanvas(x)}var y=this._context=p.getContext("2d");if(y.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(p,"hidpi"))){var T=e.devicePixelRatio||1,P=Vt.getPrefixed(y,"backingStorePixelRatio")||1;this._pixelRatio=T/P}Xt.call(this,c,p),this._needsUpdate=!0},remove:function l(){return this._context.restore(),l.base.call(this)},_setElementSize:function l(c,p){var x=this._pixelRatio;if(l.base.call(this,c*x,p*x),x!==1){var y=this._element,T=this._context;if(!a.hasAttribute(y,"resize")){var P=y.style;P.width=c+"px",P.height=p+"px"}T.restore(),T.save(),T.scale(x,x)}},getContext:function(){return this._context},getPixelSize:function l(c){var p=Ft.agent,x;if(p&&p.firefox)x=l.base.call(this,c);else{var y=this._context,T=y.font;y.font=c+" serif",x=parseFloat(y.font),y.font=T}return x},getTextWidth:function(l,c){var p=this._context,x=p.font,y=0;p.font=l;for(var T=0,P=c.length;T<P;T++)y=Math.max(y,p.measureText(c[T]).width);return p.font=x,y},update:function(){if(!this._needsUpdate)return!1;var l=this._project,c=this._context,p=this._viewSize;return c.clearRect(0,0,p.width+1,p.height+1),l&&l.draw(c,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),qt=n.extend({_class:"Event",initialize:function(c){this.event=c,this.type=c&&c.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Lt.modifiers}}),Ut=qt.extend({_class:"KeyEvent",initialize:function(c,p,x,y){this.type=c,this.event=p,this.key=x,this.character=y},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Lt=new function(){var l={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},c={tab:"	",space:" ",enter:"\r"},p={},x={},y,T,P=new n({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var k=Ft&&Ft.agent;return k&&k.mac?this.meta:this.control}}});function I(k){var G=k.key||k.keyIdentifier;return G=/^U\+/.test(G)?String.fromCharCode(parseInt(G.substr(2),16)):/^Arrow[A-Z]/.test(G)?G.substr(5):G==="Unidentified"||G===t?String.fromCharCode(k.keyCode):G,l[G]||(G.length>1?n.hyphenate(G):G.toLowerCase())}function L(k,G,V,H){var Y=k?"keydown":"keyup",B=Xt._focused,z;if(p[G]=k,k?x[G]=V:delete x[G],G.length>1&&(z=n.camelize(G))in P){P[z]=k;var $=Ft&&Ft.agent;if(z==="meta"&&$&&$.mac)if(k)y={};else{for(var j in y)j in x&&L(!1,j,y[j],H);y=null}}else k&&y&&(y[G]=V);B&&B._handleKeyEvent(k?"keydown":"keyup",H,G,V)}return Yt.add(i,{keydown:function(k){var G=I(k),V=Ft&&Ft.agent;G.length>1||V&&V.chrome&&(k.altKey||V.mac&&k.metaKey||!V.mac&&k.ctrlKey)?L(!0,G,c[G]||(G.length>1?"":G),k):T=G},keypress:function(k){if(T){var G=I(k),V=k.charCode,H=V>=32?String.fromCharCode(V):G.length>1?"":G;G!==T&&(G=H.toLowerCase()),L(!0,G,H,k),T=null}},keyup:function(k){var G=I(k);G in x&&L(!1,G,x[G],k)}}),Yt.add(e,{blur:function(k){for(var G in x)L(!1,G,x[G],k)}}),{modifiers:P,isDown:function(k){return!!p[k]}}},te=qt.extend({_class:"MouseEvent",initialize:function(c,p,x,y,T){this.type=c,this.event=p,this.point=x,this.target=y,this.delta=T},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ge=qt.extend({_class:"ToolEvent",_item:null,initialize:function(c,p,x){this.tool=c,this.type=p,this.event=x},_choosePoint:function(l,c){return l||(c?c.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(l){this._point=l},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(l){this._lastPoint=l},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(l){this._downPoint=l},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(l){this._middlePoint=l},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(l){this._delta=l},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(l){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=l},getItem:function(){if(!this._item){var l=this.tool._scope.project.hitTest(this.getPoint());if(l){for(var c=l.item,p=c._parent;/^(Group|CompoundPath)$/.test(p._class);)c=p,p=p._parent;this._item=c}}return this._item},setItem:function(l){this._item=l},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Bt=o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(c){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(c)},getMinDistance:function(){return this._minDistance},setMinDistance:function(l){this._minDistance=l,l!=null&&this._maxDistance!=null&&l>this._maxDistance&&(this._maxDistance=l)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(l){this._maxDistance=l,this._minDistance!=null&&l!=null&&l<this._minDistance&&(this._minDistance=l)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(l){this._minDistance=this._maxDistance=l},_handleMouseEvent:function(l,c,p,x){Ft=this._scope,x.drag&&!this.responds(l)&&(l="mousemove");var y=x.move||x.drag,T=this.responds(l),P=this.minDistance,I=this.maxDistance,L=!1,k=this;function G(H,Y){var B=p,z=y?k._point:k._downPoint||B;if(y){if(k._moveCount>=0&&B.equals(z))return!1;if(z&&(H!=null||Y!=null)){var $=B.subtract(z),j=$.getLength();if(j<(H||0))return!1;Y&&(B=z.add($.normalize(Math.min(j,Y))))}k._moveCount++}return k._point=B,k._lastPoint=z||B,x.down&&(k._moveCount=-1,k._downPoint=B,k._downCount++),!0}function V(){T&&(L=k.emit(l,new ge(k,l,c))||L)}if(x.down)G(),V();else if(x.up)G(null,I),V();else if(T)for(;G(P,I);)V();return L}}),oe=n.extend(s,{_class:"Tween",statics:{easings:new n({linear:function(l){return l},easeInQuad:function(l){return l*l},easeOutQuad:function(l){return l*(2-l)},easeInOutQuad:function(l){return l<.5?2*l*l:-1+2*(2-l)*l},easeInCubic:function(l){return l*l*l},easeOutCubic:function(l){return--l*l*l+1},easeInOutCubic:function(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1},easeInQuart:function(l){return l*l*l*l},easeOutQuart:function(l){return 1- --l*l*l*l},easeInOutQuart:function(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l},easeInQuint:function(l){return l*l*l*l*l},easeOutQuint:function(l){return 1+--l*l*l*l*l},easeInOutQuint:function(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}})},initialize:function l(c,p,x,y,T,P){this.object=c;var I=typeof T,L=I==="function";this.type=L?I:I==="string"?T:"linear",this.easing=L?T:l.easings[this.type],this.duration=y,this.running=!1,this._then=null,this._startTime=null;var k=p||x;this._keys=k?Object.keys(k):[],this._parsedKeys=this._parseKeys(this._keys),this._from=k&&this._getState(p),this._to=k&&this._getState(x),P!==!1&&this.start()},then:function(l){return this._then=l,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(l){if(this.running){l>=1&&(l=1,this.running=!1);for(var c=this.easing(l),p=this._keys,x=function(G){return typeof G=="function"?G(c,l):G},y=0,T=p&&p.length;y<T;y++){var P=p[y],I=x(this._from[P]),L=x(this._to[P]),k=I&&L&&I.__add&&L.__add?L.__subtract(I).__multiply(c).__add(I):(L-I)*c+I;this._setProperty(this._parsedKeys[P],k)}this.responds("update")&&this.emit("update",new n({progress:l,factor:c})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(l){var c=this._startTime,p=c?(l-c)/this.duration:0;c||(this._startTime=l),this.update(p)},_getState:function(l){for(var c=this._keys,p={},x=0,y=c.length;x<y;x++){var T=c[x],P=this._parsedKeys[T],I=this._getProperty(P),L;if(l){var k=this._resolveValue(I,l[T]);this._setProperty(P,k),L=this._getProperty(P),L=L&&L.clone?L.clone():L,this._setProperty(P,I)}else L=I&&I.clone?I.clone():I;p[T]=L}return p},_resolveValue:function(l,c){if(c){if(Array.isArray(c)&&c.length===2){var p=c[0];return p&&p.match&&p.match(/^[+\-\*\/]=/)?this._calculate(l,p[0],c[1]):c}else if(typeof c=="string"){var x=c.match(/^[+\-*/]=(.*)/);if(x){var y=JSON.parse(x[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(l,c[0],y)}}}return c},_calculate:function(l,c,p){return Ft.PaperScript.calculateBinary(l,c,p)},_parseKeys:function(l){for(var c={},p=0,x=l.length;p<x;p++){var y=l[p],T=y.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");c[y]=T.split("/")}return c},_getProperty:function(l,c){for(var p=this.object,x=0,y=l.length-(c||0);x<y&&p;x++)p=p[l[x]];return p},_setProperty:function(l,c){var p=this._getProperty(l,1);p&&(p[l[l.length-1]]=c)}}),le={request:function(l){var c=new r.XMLHttpRequest;return c.open((l.method||"get").toUpperCase(),l.url,n.pick(l.async,!0)),l.mimeType&&c.overrideMimeType(l.mimeType),c.onload=function(){var p=c.status;p===0||p===200?l.onLoad&&l.onLoad.call(c,c.responseText):c.onerror()},c.onerror=function(){var p=c.status,x='Could not load "'+l.url+'" (Status: '+p+")";if(l.onError)l.onError(x,p);else throw new Error(x)},c.send(null)}},de=n.exports.CanvasProvider={canvases:[],getCanvas:function(l,c,p){if(!e)return null;var x,y=!0;typeof l=="object"&&(c=l.height,l=l.width),this.canvases.length?x=this.canvases.pop():(x=i.createElement("canvas"),y=!1);var T=x.getContext("2d",p||{});if(!T)throw new Error("Canvas "+x+" is unable to provide a 2D context.");return x.width===l&&x.height===c?y&&T.clearRect(0,0,l+1,c+1):(x.width=l,x.height=c),T.save(),x},getContext:function(l,c,p){var x=this.getCanvas(l,c,p);return x?x.getContext("2d",p||{}):null},release:function(l){var c=l&&l.canvas?l.canvas:l;c&&c.getContext&&(c.getContext("2d").restore(),this.canvases.push(c))}},Se=new function(){var l=Math.min,c=Math.max,p=Math.abs,x,y,T,P,I,L,k,G,V,H,Y;function B(U,K,O){return .2989*U+.587*K+.114*O}function z(U,K,O,rt){var lt=rt-B(U,K,O);V=U+lt,H=K+lt,Y=O+lt;var rt=B(V,H,Y),pt=l(V,H,Y),bt=c(V,H,Y);if(pt<0){var dt=rt-pt;V=rt+(V-rt)*rt/dt,H=rt+(H-rt)*rt/dt,Y=rt+(Y-rt)*rt/dt}if(bt>255){var St=255-rt,Z=bt-rt;V=rt+(V-rt)*St/Z,H=rt+(H-rt)*St/Z,Y=rt+(Y-rt)*St/Z}}function $(U,K,O){return c(U,K,O)-l(U,K,O)}function j(U,K,O,rt){var lt=[U,K,O],pt=c(U,K,O),bt=l(U,K,O),dt;bt=bt===U?0:bt===K?1:2,pt=pt===U?0:pt===K?1:2,dt=l(bt,pt)===0?c(bt,pt)===1?2:1:0,lt[pt]>lt[bt]?(lt[dt]=(lt[dt]-lt[bt])*rt/(lt[pt]-lt[bt]),lt[pt]=rt):lt[dt]=lt[pt]=0,lt[bt]=0,V=lt[0],H=lt[1],Y=lt[2]}var et={multiply:function(){V=I*x/255,H=L*y/255,Y=k*T/255},screen:function(){V=I+x-I*x/255,H=L+y-L*y/255,Y=k+T-k*T/255},overlay:function(){V=I<128?2*I*x/255:255-2*(255-I)*(255-x)/255,H=L<128?2*L*y/255:255-2*(255-L)*(255-y)/255,Y=k<128?2*k*T/255:255-2*(255-k)*(255-T)/255},"soft-light":function(){var U=x*I/255;V=U+I*(255-(255-I)*(255-x)/255-U)/255,U=y*L/255,H=U+L*(255-(255-L)*(255-y)/255-U)/255,U=T*k/255,Y=U+k*(255-(255-k)*(255-T)/255-U)/255},"hard-light":function(){V=x<128?2*x*I/255:255-2*(255-x)*(255-I)/255,H=y<128?2*y*L/255:255-2*(255-y)*(255-L)/255,Y=T<128?2*T*k/255:255-2*(255-T)*(255-k)/255},"color-dodge":function(){V=I===0?0:x===255?255:l(255,255*I/(255-x)),H=L===0?0:y===255?255:l(255,255*L/(255-y)),Y=k===0?0:T===255?255:l(255,255*k/(255-T))},"color-burn":function(){V=I===255?255:x===0?0:c(0,255-(255-I)*255/x),H=L===255?255:y===0?0:c(0,255-(255-L)*255/y),Y=k===255?255:T===0?0:c(0,255-(255-k)*255/T)},darken:function(){V=I<x?I:x,H=L<y?L:y,Y=k<T?k:T},lighten:function(){V=I>x?I:x,H=L>y?L:y,Y=k>T?k:T},difference:function(){V=I-x,V<0&&(V=-V),H=L-y,H<0&&(H=-H),Y=k-T,Y<0&&(Y=-Y)},exclusion:function(){V=I+x*(255-I-I)/255,H=L+y*(255-L-L)/255,Y=k+T*(255-k-k)/255},hue:function(){j(x,y,T,$(I,L,k)),z(V,H,Y,B(I,L,k))},saturation:function(){j(I,L,k,$(x,y,T)),z(V,H,Y,B(I,L,k))},luminosity:function(){z(I,L,k,B(x,y,T))},color:function(){z(x,y,T,B(I,L,k))},add:function(){V=l(I+x,255),H=l(L+y,255),Y=l(k+T,255)},subtract:function(){V=c(I-x,0),H=c(L-y,0),Y=c(k-T,0)},average:function(){V=(I+x)/2,H=(L+y)/2,Y=(k+T)/2},negation:function(){V=255-p(255-x-I),H=255-p(255-y-L),Y=255-p(255-T-k)}},q=this.nativeModes=n.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(U){this[U]=!0},{}),J=de.getContext(1,1,{willReadFrequently:!0});J&&(n.each(et,function(U,K){var O=K==="darken",rt=!1;J.save();try{J.fillStyle=O?"#300":"#a00",J.fillRect(0,0,1,1),J.globalCompositeOperation=K,J.globalCompositeOperation===K&&(J.fillStyle=O?"#a00":"#300",J.fillRect(0,0,1,1),rt=J.getImageData(0,0,1,1).data[0]!==O?170:51)}catch{}J.restore(),q[K]=rt}),de.release(J)),this.process=function(U,K,O,rt,lt){var pt=K.canvas,bt=U==="normal";if(bt||q[U])O.save(),O.setTransform(1,0,0,1,0,0),O.globalAlpha=rt,bt||(O.globalCompositeOperation=U),O.drawImage(pt,lt.x,lt.y),O.restore();else{var dt=et[U];if(!dt)return;for(var St=O.getImageData(lt.x,lt.y,pt.width,pt.height),Z=St.data,ht=K.getImageData(0,0,pt.width,pt.height).data,vt=0,_t=Z.length;vt<_t;vt+=4){x=ht[vt],I=Z[vt],y=ht[vt+1],L=Z[vt+1],T=ht[vt+2],k=Z[vt+2],P=ht[vt+3],G=Z[vt+3],dt();var Mt=P*rt/255,kt=1-Mt;Z[vt]=Mt*V+kt*I,Z[vt+1]=Mt*H+kt*L,Z[vt+2]=Mt*Y+kt*k,Z[vt+3]=P*rt+kt*G}O.putImageData(St,lt.x,lt.y)}}},wt=new function(){var l="http://www.w3.org/2000/svg",c="http://www.w3.org/2000/xmlns",p="http://www.w3.org/1999/xlink",x={href:p,xlink:c,xmlns:c+"/","xmlns:xlink":c+"/"};function y(I,L,k){return P(i.createElementNS(l,I),L,k)}function T(I,L){var k=x[L],G=k?I.getAttributeNS(k,L):I.getAttribute(L);return G==="null"?null:G}function P(I,L,k){for(var G in L){var V=L[G],H=x[G];typeof V=="number"&&k&&(V=k.number(V)),H?I.setAttributeNS(H,G,V):I.setAttribute(G,V)}return I}return{svg:l,xmlns:c,xlink:p,create:y,get:T,set:P}},mt=n.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(l,c){return!c&&(l instanceof tt||l instanceof D||l instanceof Tt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(l,c){var p=n.capitalize(c),x=l[2];this[c]={type:l[1],property:c,attribute:l[0],toSVG:x,fromSVG:x&&n.each(x,function(y,T){this[y]=T},{}),exportFilter:l[3],get:"get"+p,set:"set"+p}},{});new function(){var l;function c(et,q,J){var U=new n,K=et.getTranslation();if(q){var O;et.isInvertible()?(et=et._shiftless(),O=et._inverseTransform(K),K=null):O=new f,U[J?"cx":"x"]=O.x,U[J?"cy":"y"]=O.y}if(!et.isIdentity()){var rt=et.decompose();if(rt){var lt=[],pt=rt.rotation,bt=rt.scaling,dt=rt.skewing;K&&!K.isZero()&&lt.push("translate("+l.point(K)+")"),pt&&lt.push("rotate("+l.number(pt)+")"),(!d.isZero(bt.x-1)||!d.isZero(bt.y-1))&&lt.push("scale("+l.point(bt)+")"),dt.x&&lt.push("skewX("+l.number(dt.x)+")"),dt.y&&lt.push("skewY("+l.number(dt.y)+")"),U.transform=lt.join(" ")}else U.transform="matrix("+et.getValues().join(",")+")"}return U}function p(et,q){for(var J=c(et._matrix),U=et._children,K=wt.create("g",J,l),O=0,rt=U.length;O<rt;O++){var lt=U[O],pt=$(lt,q);if(pt)if(lt.isClipMask()){var bt=wt.create("clipPath");bt.appendChild(pt),B(lt,bt,"clip"),wt.set(K,{"clip-path":"url(#"+bt.id+")"})}else K.appendChild(pt)}return K}function x(et,q){var J=c(et._matrix,!0),U=et.getSize(),K=et.getImage();return J.x-=U.width/2,J.y-=U.height/2,J.width=U.width,J.height=U.height,J.href=q.embedImages==!1&&K&&K.src||et.toDataURL(),wt.create("image",J,l)}function y(et,q){var J=q.matchShapes;if(J){var U=et.toShape(!1);if(U)return T(U,q)}var K=et._segments,O=K.length,rt,lt=c(et._matrix);if(J&&O>=2&&!et.hasHandles())if(O>2){rt=et._closed?"polygon":"polyline";for(var pt=[],bt=0;bt<O;bt++)pt.push(l.point(K[bt]._point));lt.points=pt.join(" ")}else{rt="line";var dt=K[0]._point,St=K[1]._point;lt.set({x1:dt.x,y1:dt.y,x2:St.x,y2:St.y})}else rt="path",lt.d=et.getPathData(null,q.precision);return wt.create(rt,lt,l)}function T(et){var q=et._type,J=et._radius,U=c(et._matrix,!0,q!=="rectangle");if(q==="rectangle"){q="rect";var K=et._size,O=K.width,rt=K.height;U.x-=O/2,U.y-=rt/2,U.width=O,U.height=rt,J.isZero()&&(J=null)}return J&&(q==="circle"?U.r=J:(U.rx=J.width,U.ry=J.height)),wt.create(q,U,l)}function P(et,q){var J=c(et._matrix),U=et.getPathData(null,q.precision);return U&&(J.d=U),wt.create("path",J,l)}function I(et,q){var J=c(et._matrix,!0),U=et._definition,K=Y(U,"symbol"),O=U._item,rt=O.getStrokeBounds();return K||(K=wt.create("symbol",{viewBox:l.rectangle(rt)}),K.appendChild($(O,q)),B(U,K,"symbol")),J.href="#"+K.id,J.x+=rt.x,J.y+=rt.y,J.width=rt.width,J.height=rt.height,J.overflow="visible",wt.create("use",J,l)}function L(et){var q=Y(et,"color");if(!q){var J=et.getGradient(),U=J._radial,K=et.getOrigin(),O=et.getDestination(),rt;if(U){rt={cx:K.x,cy:K.y,r:K.getDistance(O)};var lt=et.getHighlight();lt&&(rt.fx=lt.x,rt.fy=lt.y)}else rt={x1:K.x,y1:K.y,x2:O.x,y2:O.y};rt.gradientUnits="userSpaceOnUse",q=wt.create((U?"radial":"linear")+"Gradient",rt,l);for(var pt=J._stops,bt=0,dt=pt.length;bt<dt;bt++){var St=pt[bt],Z=St._color,ht=Z.getAlpha(),vt=St._offset;rt={offset:vt??bt/(dt-1)},Z&&(rt["stop-color"]=Z.toCSS(!0)),ht<1&&(rt["stop-opacity"]=ht),q.appendChild(wt.create("stop",rt,l))}B(et,q,"color")}return"url(#"+q.id+")"}function k(et){var q=wt.create("text",c(et._matrix,!0),l);return q.textContent=et._content,q}var G={Group:p,Layer:p,Raster:x,Path:y,Shape:T,CompoundPath:P,SymbolItem:I,PointText:k};function V(et,q,J){var U={},K=!J&&et.getParent(),O=[];return et._name!=null&&(U.id=et._name),n.each(mt,function(rt){var lt=rt.get,pt=rt.type,bt=et[lt]();if(rt.exportFilter?rt.exportFilter(et,bt):!K||!n.equals(K[lt](),bt)){if(pt==="color"&&bt!=null){var dt=bt.getAlpha();dt<1&&(U[rt.attribute+"-opacity"]=dt)}pt==="style"?O.push(rt.attribute+": "+bt):U[rt.attribute]=bt==null?"none":pt==="color"?bt.gradient?L(bt,et):bt.toCSS(!0):pt==="array"?bt.join(","):pt==="lookup"?rt.toSVG[bt]:bt}}),O.length&&(U.style=O.join(";")),U.opacity===1&&delete U.opacity,et._visible||(U.visibility="hidden"),wt.set(q,U,l)}var H;function Y(et,q){return H||(H={ids:{},svgs:{}}),et&&H.svgs[q+"-"+(et._id||et.__id||(et.__id=g.get("svg")))]}function B(et,q,J){H||Y();var U=H.ids[J]=(H.ids[J]||0)+1;q.id=J+"-"+U,H.svgs[J+"-"+(et._id||et.__id)]=q}function z(et,q){var J=et,U=null;if(H){J=et.nodeName.toLowerCase()==="svg"&&et;for(var K in H.svgs)U||(J||(J=wt.create("svg"),J.appendChild(et)),U=J.insertBefore(wt.create("defs"),J.firstChild)),U.appendChild(H.svgs[K]);H=null}return q.asString?new r.XMLSerializer().serializeToString(J):J}function $(et,q,J){var U=G[et._class],K=U&&U(et,q);if(K){var O=q.onExport;O&&(K=O(et,K,q)||K);var rt=JSON.stringify(et._data);rt&&rt!=="{}"&&rt!=="null"&&K.setAttribute("data-paper-data",rt)}return K&&V(et,K,J)}function j(et){return et||(et={}),l=new u(et.precision),et}A.inject({exportSVG:function(et){return et=j(et),z($(this,et,!0),et)}}),w.inject({exportSVG:function(et){et=j(et);var q=this._children,J=this.getView(),U=n.pick(et.bounds,"view"),K=et.matrix||U==="view"&&J._matrix,O=K&&M.read([K]),rt=U==="view"?new b([0,0],J.getViewSize()):U==="content"?A._getBounds(q,O,{stroke:!0}).rect:b.read([U],0,{readNull:!0}),lt={version:"1.1",xmlns:wt.svg,"xmlns:xlink":wt.xlink};rt&&(lt.width=rt.width,lt.height=rt.height,(rt.x||rt.x===0||rt.y||rt.y===0)&&(lt.viewBox=l.rectangle(rt)));var pt=wt.create("svg",lt,l),bt=pt;O&&!O.isIdentity()&&(bt=pt.appendChild(wt.create("g",c(O),l)));for(var dt=0,St=q.length;dt<St;dt++)bt.appendChild($(q[dt],et,!0));return z(pt,et)}})},new function(){var l={},c;function p(q,J,U,K,O,rt){var lt=wt.get(q,J)||rt,pt=lt==null?K?null:U?"":0:U?lt:parseFloat(lt);return/%\s*$/.test(lt)?pt/100*(O?1:c[/x|^width/.test(J)?"width":"height"]):pt}function x(q,J,U,K,O,rt,lt){return J=p(q,J||"x",!1,K,O,rt),U=p(q,U||"y",!1,K,O,lt),K&&(J==null||U==null)?null:new f(J,U)}function y(q,J,U,K,O){return J=p(q,J||"width",!1,K,O),U=p(q,U||"height",!1,K,O),K&&(J==null||U==null)?null:new _(J,U)}function T(q,J,U){return q==="none"?null:J==="number"?parseFloat(q):J==="array"?q?q.split(/[\s,]+/g).map(parseFloat):[]:J==="color"?$(q)||q:J==="lookup"?U[q]:q}function P(q,J,U,K){var O=q.childNodes,rt=J==="clippath",lt=J==="defs",pt=new R,bt=pt._project,dt=bt._currentStyle,St=[];if(!rt&&!lt&&(pt=z(pt,q,K),bt._currentStyle=pt._style.clone()),K)for(var Z=q.querySelectorAll("defs"),ht=0,vt=Z.length;ht<vt;ht++)j(Z[ht],U,!1);for(var ht=0,vt=O.length;ht<vt;ht++){var _t=O[ht],Mt;_t.nodeType===1&&!/^defs$/i.test(_t.nodeName)&&(Mt=j(_t,U,!1))&&!(Mt instanceof ft)&&St.push(Mt)}return pt.addChildren(St),rt&&(pt=z(pt.reduce(),q,K)),bt._currentStyle=dt,(rt||lt)&&(pt.remove(),pt=null),pt}function I(q,J){for(var U=q.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),K=[],O=0,rt=U.length;O<rt;O+=2)K.push(new f(parseFloat(U[O]),parseFloat(U[O+1])));var lt=new W(K);return J==="polygon"&&lt.closePath(),lt}function L(q){return tt.create(q.getAttribute("d"))}function k(q,J){var U=(p(q,"href",!0)||"").substring(1),K=J==="radialgradient",O;if(U)O=l[U].getGradient(),O._radial^K&&(O=O.clone(),O._radial=K);else{for(var rt=q.childNodes,lt=[],pt=0,bt=rt.length;pt<bt;pt++){var dt=rt[pt];dt.nodeType===1&&lt.push(z(new At,dt))}O=new Nt(lt,K)}var St,Z,ht,vt=p(q,"gradientUnits",!0)!=="userSpaceOnUse";K?(St=x(q,"cx","cy",!1,vt,"50%","50%"),Z=St.add(p(q,"r",!1,!1,vt,"50%"),0),ht=x(q,"fx","fy",!0,vt)):(St=x(q,"x1","y1",!1,vt,"0%","0%"),Z=x(q,"x2","y2",!1,vt,"100%","0%"));var _t=z(new Pt(O,St,Z,ht),q);return _t._scaleToBounds=vt,null}var G={"#document":function(q,J,U,K){for(var O=q.childNodes,rt=0,lt=O.length;rt<lt;rt++){var pt=O[rt];if(pt.nodeType===1)return j(pt,U,K)}},g:P,svg:P,clippath:P,polygon:I,polyline:I,path:L,lineargradient:k,radialgradient:k,image:function(q){var J=new X(p(q,"href",!0));return J.on("load",function(){var U=y(q);this.setSize(U);var K=x(q).add(U.divide(2));this._matrix.append(new M().translate(K))}),J},symbol:function(q,J,U,K){return new ft(P(q,J,U,K),!0)},defs:P,use:function(q){var J=(p(q,"href",!0)||"").substring(1),U=l[J],K=x(q);return U?U instanceof ft?U.place(K):U.clone().translate(K):null},circle:function(q){return new D.Circle(x(q,"cx","cy"),p(q,"r"))},ellipse:function(q){return new D.Ellipse({center:x(q,"cx","cy"),radius:y(q,"rx","ry")})},rect:function(q){return new D.Rectangle(new b(x(q),y(q)),y(q,"rx","ry"))},line:function(q){return new W.Line(x(q,"x1","y1"),x(q,"x2","y2"))},text:function(q){var J=new Rt(x(q).add(x(q,"dx","dy")));return J.setContent(q.textContent.trim()||""),J},switch:P};function V(q,J,U,K){if(q.transform){for(var O=(K.getAttribute(U)||"").split(/\)\s*/g),rt=new M,lt=0,pt=O.length;lt<pt;lt++){var bt=O[lt];if(!bt)break;for(var dt=bt.split(/\(\s*/),St=dt[0],Z=dt[1].split(/[\s,]+/g),ht=0,vt=Z.length;ht<vt;ht++)Z[ht]=parseFloat(Z[ht]);switch(St){case"matrix":rt.append(new M(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]));break;case"rotate":rt.rotate(Z[0],Z[1]||0,Z[2]||0);break;case"translate":rt.translate(Z[0],Z[1]||0);break;case"scale":rt.scale(Z);break;case"skewX":rt.skew(Z[0],0);break;case"skewY":rt.skew(0,Z[0]);break}}q.transform(rt)}}function H(q,J,U){var K=U==="fill-opacity"?"getFillColor":"getStrokeColor",O=q[K]&&q[K]();O&&O.setAlpha(parseFloat(J))}var Y=n.set(n.each(mt,function(q){this[q.attribute]=function(J,U){if(J[q.set]&&(J[q.set](T(U,q.type,q.fromSVG)),q.type==="color")){var K=J[q.get]();if(K&&K._scaleToBounds){var O=J.getBounds();K.transform(new M().translate(O.getPoint()).scale(O.getSize()))}}}},{}),{id:function(q,J){l[J]=q,q.setName&&q.setName(J)},"clip-path":function(q,J){var U=$(J);if(U)if(U=U.clone(),U.setClipMask(!0),q instanceof R)q.insertChild(0,U);else return new R(U,q)},gradientTransform:V,transform:V,"fill-opacity":H,"stroke-opacity":H,visibility:function(q,J){q.setVisible&&q.setVisible(J==="visible")},display:function(q,J){q.setVisible&&q.setVisible(J!==null)},"stop-color":function(q,J){q.setColor&&q.setColor(J)},"stop-opacity":function(q,J){q._color&&q._color.setAlpha(parseFloat(J))},offset:function(q,J){if(q.setOffset){var U=J.match(/(.*)%$/);q.setOffset(U?U[1]/100:parseFloat(J))}},viewBox:function(q,J,U,K,O){var rt=new b(T(J,"array")),lt=y(K,null,null,!0),pt,bt;if(q instanceof R){var dt=lt?lt.divide(rt.getSize()):1,bt=new M().scale(dt).translate(rt.getPoint().negate());pt=q}else q instanceof ft&&(lt&&rt.setSize(lt),pt=q._item);if(pt){if(B(K,"overflow",O)!=="visible"){var St=new D.Rectangle(rt);St.setClipMask(!0),pt.addChild(St)}bt&&pt.transform(bt)}}});function B(q,J,U){var K=q.attributes[J],O=K&&K.value;if(!O&&q.style){var rt=n.camelize(J);O=q.style[rt],!O&&U.node[rt]!==U.parent[rt]&&(O=U.node[rt])}return O?O==="none"?null:O:t}function z(q,J,U){var K=J.parentNode,O={node:Vt.getStyles(J)||{},parent:!U&&!/^defs$/i.test(K.tagName)&&Vt.getStyles(K)||{}};return n.each(Y,function(rt,lt){var pt=B(J,lt,O);q=pt!==t&&rt(q,pt,lt,J,O)||q}),q}function $(q){var J=q&&q.match(/\((?:["'#]*)([^"')]+)/),U=J&&J[1],K=U&&l[e?U.replace(e.location.href.split("#")[0]+"#",""):U];return K&&K._scaleToBounds&&(K=K.clone(),K._scaleToBounds=!0),K}function j(q,J,U){var K=q.nodeName.toLowerCase(),O=K!=="#document",rt=i.body,lt,pt,bt;U&&O&&(c=Ft.getView().getSize(),c=y(q,null,null,!0)||c,lt=wt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),pt=q.parentNode,bt=q.nextSibling,lt.appendChild(q),rt.appendChild(lt));var dt=Ft.settings,St=dt.applyMatrix,Z=dt.insertItems;dt.applyMatrix=!1,dt.insertItems=!1;var ht=G[K],vt=ht&&ht(q,K,J,U)||null;if(dt.insertItems=Z,dt.applyMatrix=St,vt){O&&!(vt instanceof R)&&(vt=z(vt,q,U));var _t=J.onImport,Mt=O&&q.getAttribute("data-paper-data");_t&&(vt=_t(q,vt,J)||vt),J.expandShapes&&vt instanceof D&&(vt.remove(),vt=vt.toPath()),Mt&&(vt._data=JSON.parse(Mt))}return lt&&(rt.removeChild(lt),pt&&(bt?pt.insertBefore(q,bt):pt.appendChild(q))),U&&(l={},vt&&n.pick(J.applyMatrix,St)&&vt.matrix.apply(!0,!0)),vt}function et(q,J,U){if(!q)return null;J=typeof J=="function"?{onLoad:J}:J||{};var K=Ft,O=null;function rt(dt){try{var St=typeof dt=="object"?dt:new r.DOMParser().parseFromString(dt.trim(),"image/svg+xml");if(!St.nodeName)throw St=null,new Error("Unsupported SVG source: "+q);Ft=K,O=j(St,J,!0),(!J||J.insert!==!1)&&U._insertItem(t,O);var Z=J.onLoad;Z&&Z(O,dt)}catch(ht){lt(ht)}}function lt(dt,St){var Z=J.onError;if(Z)Z(dt,St);else throw new Error(dt)}if(typeof q=="string"&&!/^[\s\S]*</.test(q)){var pt=i.getElementById(q);pt?rt(pt):le.request({url:q,async:!0,onLoad:rt,onError:lt})}else if(typeof File!="undefined"&&q instanceof File){var bt=new FileReader;return bt.onload=function(){rt(bt.result)},bt.onerror=function(){lt(bt.error)},bt.readAsText(q)}else rt(q);return O}A.inject({importSVG:function(q,J){return et(q,J,this)}}),w.inject({importSVG:function(q,J){return this.activate(),et(q,J,this)}})},n.exports.PaperScript=function(){var l=this,c=l.acorn;if(!c&&typeof f_!="undefined")try{c=Ww()}catch{}if(!c){var p,x;c=p=x={},function(z,$){if(typeof p=="object"&&typeof x=="object")return $(p);if(typeof define=="function"&&define.amd)return define(["exports"],$);$(z.acorn||(z.acorn={}))}(this,function(z){"use strict";z.version="0.5.0";var $,j,et,q;z.parse=function(Et,It){return j=String(Et),et=j.length,U(It),e_(),vE($.program)};var J=z.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function U(Et){$=Et||{};for(var It in J)Object.prototype.hasOwnProperty.call($,It)||($[It]=J[It]);q=$.sourceFile||null}var K=z.getLineInfo=function(Et,It){for(var Jt=1,ie=0;;){ko.lastIndex=ie;var xe=ko.exec(Et);if(xe&&xe.index<It)++Jt,ie=xe.index+xe[0].length;else break}return{line:Jt,column:It-ie}};z.tokenize=function(Et,It){j=String(Et),et=j.length,U(It),e_();var Jt={};function ie(xe){return Mt=lt,Aa(xe),Jt.start=rt,Jt.end=lt,Jt.startLoc=pt,Jt.endLoc=bt,Jt.type=dt,Jt.value=St,Jt}return ie.jumpTo=function(xe,we){if(O=xe,$.locations){ht=1,vt=ko.lastIndex=0;for(var Te;(Te=ko.exec(j))&&Te.index<xe;)++ht,vt=Te.index+Te[0].length}Z=we,Oo()},ie};var O,rt,lt,pt,bt,dt,St,Z,ht,vt,_t,Mt,kt,Gt,Ht,Dt;function Wt(Et,It){var Jt=K(j,Et);It+=" ("+Jt.line+":"+Jt.column+")";var ie=new SyntaxError(It);throw ie.pos=Et,ie.loc=Jt,ie.raisedAt=O,ie}var zt=[],Kt={type:"num"},ee={type:"regexp"},ue={type:"string"},ne={type:"name"},me={type:"eof"},ce={keyword:"break"},ae={keyword:"case",beforeExpr:!0},Ze={keyword:"catch"},Ee={keyword:"continue"},qe={keyword:"debugger"},$e={keyword:"default"},Re={keyword:"do",isLoop:!0},S={keyword:"else",beforeExpr:!0},F={keyword:"finally"},st={keyword:"for",isLoop:!0},yt={keyword:"function"},Ct={keyword:"if"},Ot={keyword:"return",beforeExpr:!0},jt={keyword:"switch"},se={keyword:"throw",beforeExpr:!0},fe={keyword:"try"},Ce={keyword:"var"},De={keyword:"while",isLoop:!0},pi={keyword:"with"},Dn={keyword:"new",beforeExpr:!0},es={keyword:"this"},Ca={keyword:"null",atomValue:null},is={keyword:"true",atomValue:!0},rs={keyword:"false",atomValue:!1},Yu={keyword:"in",binop:7,beforeExpr:!0},Id={break:ce,case:ae,catch:Ze,continue:Ee,debugger:qe,default:$e,do:Re,else:S,finally:F,for:st,function:yt,if:Ct,return:Ot,switch:jt,throw:se,try:fe,var:Ce,while:De,with:pi,null:Ca,true:is,false:rs,new:Dn,in:Yu,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:es,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ju={type:"[",beforeExpr:!0},Zu={type:"]"},Ro={type:"{",beforeExpr:!0},Ea={type:"}"},Ln={type:"(",beforeExpr:!0},on={type:")"},ns={type:",",beforeExpr:!0},Rn={type:";",beforeExpr:!0},Fo={type:":",beforeExpr:!0},Dd={type:"."},Ld={type:"?",beforeExpr:!0},Rd={binop:10,beforeExpr:!0},Fd={isAssign:!0,beforeExpr:!0},Ma={isAssign:!0,beforeExpr:!0},WC={postfix:!0,prefix:!0,isUpdate:!0},Y0={prefix:!0,beforeExpr:!0},j0={binop:1,beforeExpr:!0},Z0={binop:2,beforeExpr:!0},XC={binop:3,beforeExpr:!0},qC={binop:4,beforeExpr:!0},YC={binop:5,beforeExpr:!0},jC={binop:6,beforeExpr:!0},ZC={binop:7,beforeExpr:!0},$C={binop:8,beforeExpr:!0},JC={binop:9,prefix:!0,beforeExpr:!0},KC={binop:10,beforeExpr:!0};z.tokTypes={bracketL:ju,bracketR:Zu,braceL:Ro,braceR:Ea,parenL:Ln,parenR:on,comma:ns,semi:Rn,colon:Fo,dot:Dd,question:Ld,slash:Rd,eq:Fd,name:ne,eof:me,num:Kt,regexp:ee,string:ue};for(var $0 in Id)z.tokTypes["_"+$0]=Id[$0];function ph(Et){Et=Et.split(" ");var It="",Jt=[];t:for(var ie=0;ie<Et.length;++ie){for(var xe=0;xe<Jt.length;++xe)if(Jt[xe][0].length==Et[ie].length){Jt[xe].push(Et[ie]);continue t}Jt.push([Et[ie]])}function we(Ge){if(Ge.length==1)return It+="return str === "+JSON.stringify(Ge[0])+";";It+="switch(str){";for(var hn=0;hn<Ge.length;++hn)It+="case "+JSON.stringify(Ge[hn])+":";It+="return true}return false;"}if(Jt.length>3){Jt.sort(function(Ge,hn){return hn.length-Ge.length}),It+="switch(str.length){";for(var ie=0;ie<Jt.length;++ie){var Te=Jt[ie];It+="case "+Te[0].length+":",we(Te)}It+="}"}else we(Et);return new Function("str",It)}var QC=ph("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),tE=ph("class enum extends super const export import"),J0=ph("implements interface let package private protected public static yield"),$u=ph("eval arguments"),eE=ph("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),iE=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,K0="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",rE="\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u0620-\u0649\u0672-\u06D3\u06E7-\u06E8\u06FB-\u06FC\u0730-\u074A\u0800-\u0814\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0840-\u0857\u08E4-\u08FE\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09D7\u09DF-\u09E0\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B60\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2-\u0CE3\u0CE6-\u0CEF\u0D02\u0D03\u0D46-\u0D48\u0D57\u0D62-\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E34-\u0E3A\u0E40-\u0E45\u0E50-\u0E59\u0EB4-\u0EB9\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F41-\u0F47\u0F71-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1029\u1040-\u1049\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u170E-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17B2\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1920-\u192B\u1930-\u193B\u1951-\u196D\u19B0-\u19C0\u19C8-\u19C9\u19D0-\u19D9\u1A00-\u1A15\u1A20-\u1A53\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1B46-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C00-\u1C22\u1C40-\u1C49\u1C5B-\u1C7D\u1CD0-\u1CD2\u1D00-\u1DBE\u1E01-\u1F15\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2D81-\u2D96\u2DE0-\u2DFF\u3021-\u3028\u3099\u309A\uA640-\uA66D\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA7F8-\uA800\uA806\uA80B\uA823-\uA827\uA880-\uA881\uA8B4-\uA8C4\uA8D0-\uA8D9\uA8F3-\uA8F7\uA900-\uA909\uA926-\uA92D\uA930-\uA945\uA980-\uA983\uA9B3-\uA9C0\uAA00-\uAA27\uAA40-\uAA41\uAA4C-\uAA4D\uAA50-\uAA59\uAA7B\uAAE0-\uAAE9\uAAF2-\uAAF3\uABC0-\uABE1\uABEC\uABED\uABF0-\uABF9\uFB20-\uFB28\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",Q0=new RegExp("["+K0+"]"),nE=new RegExp("["+K0+rE+"]"),Ju=/[\n\r\u2028\u2029]/,ko=/\r\n|[\n\r\u2028\u2029]/g,Ku=z.isIdentifierStart=function(Et){return Et<65?Et===36:Et<91?!0:Et<97?Et===95:Et<123?!0:Et>=170&&Q0.test(String.fromCharCode(Et))},t_=z.isIdentifierChar=function(Et){return Et<48?Et===36:Et<58?!0:Et<65?!1:Et<91?!0:Et<97?Et===95:Et<123?!0:Et>=170&&nE.test(String.fromCharCode(Et))};function Pa(){this.line=ht,this.column=O-vt}function e_(){ht=1,O=vt=0,Z=!0,Oo()}function Ri(Et,It){lt=O,$.locations&&(bt=new Pa),dt=Et,Oo(),St=It,Z=Et.beforeExpr}function sE(){var Et=$.onComment&&$.locations&&new Pa,It=O,Jt=j.indexOf("*/",O+=2);if(Jt===-1&&Wt(O-2,"Unterminated comment"),O=Jt+2,$.locations){ko.lastIndex=It;for(var ie;(ie=ko.exec(j))&&ie.index<O;)++ht,vt=ie.index+ie[0].length}$.onComment&&$.onComment(!0,j.slice(It+2,Jt),It,O,Et,$.locations&&new Pa)}function kd(){for(var Et=O,It=$.onComment&&$.locations&&new Pa,Jt=j.charCodeAt(O+=2);O<et&&Jt!==10&&Jt!==13&&Jt!==8232&&Jt!==8233;)++O,Jt=j.charCodeAt(O);$.onComment&&$.onComment(!1,j.slice(Et+2,O),Et,O,It,$.locations&&new Pa)}function Oo(){for(;O<et;){var Et=j.charCodeAt(O);if(Et===32)++O;else if(Et===13){++O;var It=j.charCodeAt(O);It===10&&++O,$.locations&&(++ht,vt=O)}else if(Et===10||Et===8232||Et===8233)++O,$.locations&&(++ht,vt=O);else if(Et>8&&Et<14)++O;else if(Et===47){var It=j.charCodeAt(O+1);if(It===42)sE();else if(It===47)kd();else break}else if(Et===160)++O;else if(Et>=5760&&iE.test(String.fromCharCode(Et)))++O;else break}}function aE(){var Et=j.charCodeAt(O+1);return Et>=48&&Et<=57?r_(!0):(++O,Ri(Dd))}function oE(){var Et=j.charCodeAt(O+1);return Z?(++O,i_()):Et===61?Fi(Ma,2):Fi(Rd,1)}function lE(){var Et=j.charCodeAt(O+1);return Et===61?Fi(Ma,2):Fi(KC,1)}function hE(Et){var It=j.charCodeAt(O+1);return It===Et?Fi(Et===124?j0:Z0,2):It===61?Fi(Ma,2):Fi(Et===124?XC:YC,1)}function uE(){var Et=j.charCodeAt(O+1);return Et===61?Fi(Ma,2):Fi(qC,1)}function cE(Et){var It=j.charCodeAt(O+1);return It===Et?It==45&&j.charCodeAt(O+2)==62&&Ju.test(j.slice(Mt,O))?(O+=3,kd(),Oo(),Aa()):Fi(WC,2):It===61?Fi(Ma,2):Fi(JC,1)}function fE(Et){var It=j.charCodeAt(O+1),Jt=1;return It===Et?(Jt=Et===62&&j.charCodeAt(O+2)===62?3:2,j.charCodeAt(O+Jt)===61?Fi(Ma,Jt+1):Fi($C,Jt)):It==33&&Et==60&&j.charCodeAt(O+2)==45&&j.charCodeAt(O+3)==45?(O+=4,kd(),Oo(),Aa()):(It===61&&(Jt=j.charCodeAt(O+2)===61?3:2),Fi(ZC,Jt))}function dE(Et){var It=j.charCodeAt(O+1);return It===61?Fi(jC,j.charCodeAt(O+2)===61?3:2):Fi(Et===61?Fd:Y0,1)}function pE(Et){switch(Et){case 46:return aE();case 40:return++O,Ri(Ln);case 41:return++O,Ri(on);case 59:return++O,Ri(Rn);case 44:return++O,Ri(ns);case 91:return++O,Ri(ju);case 93:return++O,Ri(Zu);case 123:return++O,Ri(Ro);case 125:return++O,Ri(Ea);case 58:return++O,Ri(Fo);case 63:return++O,Ri(Ld);case 48:var It=j.charCodeAt(O+1);if(It===120||It===88)return mE();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r_(!1);case 34:case 39:return gE(Et);case 47:return oE(Et);case 37:case 42:return lE();case 124:case 38:return hE(Et);case 94:return uE();case 43:case 45:return cE(Et);case 60:case 62:return fE(Et);case 61:case 33:return dE(Et);case 126:return Fi(Y0,1)}return!1}function Aa(Et){if(Et?O=rt+1:rt=O,$.locations&&(pt=new Pa),Et)return i_();if(O>=et)return Ri(me);var It=j.charCodeAt(O);if(Ku(It)||It===92)return s_();var Jt=pE(It);if(Jt===!1){var ie=String.fromCharCode(It);if(ie==="\\"||Q0.test(ie))return s_();Wt(O,"Unexpected character '"+ie+"'")}return Jt}function Fi(Et,It){var Jt=j.slice(O,O+It);O+=It,Ri(Et,Jt)}function i_(){for(var Et="",It,Jt,ie=O;;){O>=et&&Wt(ie,"Unterminated regular expression");var xe=j.charAt(O);if(Ju.test(xe)&&Wt(ie,"Unterminated regular expression"),It)It=!1;else{if(xe==="[")Jt=!0;else if(xe==="]"&&Jt)Jt=!1;else if(xe==="/"&&!Jt)break;It=xe==="\\"}++O}var Et=j.slice(ie,O);++O;var we=n_();we&&!/^[gmsiy]*$/.test(we)&&Wt(ie,"Invalid regexp flag");try{var Te=new RegExp(Et,we)}catch(Ge){Ge instanceof SyntaxError&&Wt(ie,Ge.message),Wt(Ge)}return Ri(ee,Te)}function mh(Et,It){for(var Jt=O,ie=0,xe=0,we=It??1/0;xe<we;++xe){var Te=j.charCodeAt(O),Ge;if(Te>=97?Ge=Te-97+10:Te>=65?Ge=Te-65+10:Te>=48&&Te<=57?Ge=Te-48:Ge=1/0,Ge>=Et)break;++O,ie=ie*Et+Ge}return O===Jt||It!=null&&O-Jt!==It?null:ie}function mE(){O+=2;var Et=mh(16);return Et==null&&Wt(rt+2,"Expected hexadecimal number"),Ku(j.charCodeAt(O))&&Wt(O,"Identifier directly after number"),Ri(Kt,Et)}function r_(Et){var It=O,Jt=!1,ie=j.charCodeAt(O)===48;!Et&&mh(10)===null&&Wt(It,"Invalid number"),j.charCodeAt(O)===46&&(++O,mh(10),Jt=!0);var xe=j.charCodeAt(O);(xe===69||xe===101)&&(xe=j.charCodeAt(++O),(xe===43||xe===45)&&++O,mh(10)===null&&Wt(It,"Invalid number"),Jt=!0),Ku(j.charCodeAt(O))&&Wt(O,"Identifier directly after number");var we=j.slice(It,O),Te;return Jt?Te=parseFloat(we):!ie||we.length===1?Te=parseInt(we,10):/[89]/.test(we)||Dt?Wt(It,"Invalid number"):Te=parseInt(we,8),Ri(Kt,Te)}function gE(Et){O++;for(var It="";;){O>=et&&Wt(rt,"Unterminated string constant");var Jt=j.charCodeAt(O);if(Jt===Et)return++O,Ri(ue,It);if(Jt===92){Jt=j.charCodeAt(++O);var ie=/^[0-7]+/.exec(j.slice(O,O+3));for(ie&&(ie=ie[0]);ie&&parseInt(ie,8)>255;)ie=ie.slice(0,-1);if(ie==="0"&&(ie=null),++O,ie)Dt&&Wt(O-2,"Octal literal in strict mode"),It+=String.fromCharCode(parseInt(ie,8)),O+=ie.length-1;else switch(Jt){case 110:It+=`
`;break;case 114:It+="\r";break;case 120:It+=String.fromCharCode(Qu(2));break;case 117:It+=String.fromCharCode(Qu(4));break;case 85:It+=String.fromCharCode(Qu(8));break;case 116:It+="	";break;case 98:It+="\b";break;case 118:It+="\v";break;case 102:It+="\f";break;case 48:It+="\0";break;case 13:j.charCodeAt(O)===10&&++O;case 10:$.locations&&(vt=O,++ht);break;default:It+=String.fromCharCode(Jt);break}}else(Jt===13||Jt===10||Jt===8232||Jt===8233)&&Wt(rt,"Unterminated string constant"),It+=String.fromCharCode(Jt),++O}}function Qu(Et){var It=mh(16,Et);return It===null&&Wt(rt,"Bad character escape sequence"),It}var No;function n_(){No=!1;for(var Et,It=!0,Jt=O;;){var ie=j.charCodeAt(O);if(t_(ie))No&&(Et+=j.charAt(O)),++O;else if(ie===92){No||(Et=j.slice(Jt,O)),No=!0,j.charCodeAt(++O)!=117&&Wt(O,"Expecting Unicode escape sequence \\uXXXX"),++O;var xe=Qu(4),we=String.fromCharCode(xe);we||Wt(O-1,"Invalid Unicode escape"),(It?Ku(xe):t_(xe))||Wt(O-4,"Invalid Unicode escape"),Et+=we}else break;It=!1}return No?Et:j.slice(Jt,O)}function s_(){var Et=n_(),It=ne;return!No&&eE(Et)&&(It=Id[Et]),Ri(It,Et)}function Be(){_t=rt,Mt=lt,kt=bt,Aa()}function Od(Et){if(Dt=Et,O=rt,$.locations)for(;O<vt;)vt=j.lastIndexOf(`
`,vt-2)+1,--ht;Oo(),Aa()}function a_(){this.type=null,this.start=rt,this.end=null}function o_(){this.start=pt,this.end=null,q!==null&&(this.source=q)}function zi(){var Et=new a_;return $.locations&&(Et.loc=new o_),$.directSourceFile&&(Et.sourceFile=$.directSourceFile),$.ranges&&(Et.range=[rt,0]),Et}function Fs(Et){var It=new a_;return It.start=Et.start,$.locations&&(It.loc=new o_,It.loc.start=Et.loc.start),$.ranges&&(It.range=[Et.range[0],0]),It}function Me(Et,It){return Et.type=It,Et.end=Mt,$.locations&&(Et.loc.end=kt),$.ranges&&(Et.range[1]=Mt),Et}function Nd(Et){return $.ecmaVersion>=5&&Et.type==="ExpressionStatement"&&Et.expression.type==="Literal"&&Et.expression.value==="use strict"}function ri(Et){if(dt===Et)return Be(),!0}function tc(){return!$.strictSemicolons&&(dt===me||dt===Ea||Ju.test(j.slice(Mt,rt)))}function Ia(){!ri(Rn)&&!tc()&&ss()}function xi(Et){dt===Et?Be():ss()}function ss(){Wt(rt,"Unexpected token")}function ec(Et){Et.type!=="Identifier"&&Et.type!=="MemberExpression"&&Wt(Et.start,"Assigning to rvalue"),Dt&&Et.type==="Identifier"&&$u(Et.name)&&Wt(Et.start,"Assigning to "+Et.name+" in strict mode")}function vE(Et){_t=Mt=O,$.locations&&(kt=new Pa),Gt=Dt=null,Ht=[],Aa();var It=Et||zi(),Jt=!0;for(Et||(It.body=[]);dt!==me;){var ie=ln();It.body.push(ie),Jt&&Nd(ie)&&Od(!0),Jt=!1}return Me(It,"Program")}var Bd={kind:"loop"},_E={kind:"switch"};function ln(){(dt===Rd||dt===Ma&&St=="/=")&&Aa(!0);var Et=dt,It=zi();switch(Et){case ce:case Ee:Be();var Jt=Et===ce;ri(Rn)||tc()?It.label=null:dt!==ne?ss():(It.label=ks(),Ia());for(var ie=0;ie<Ht.length;++ie){var xe=Ht[ie];if((It.label==null||xe.name===It.label.name)&&(xe.kind!=null&&(Jt||xe.kind==="loop")||It.label&&Jt))break}return ie===Ht.length&&Wt(It.start,"Unsyntactic "+Et.keyword),Me(It,Jt?"BreakStatement":"ContinueStatement");case qe:return Be(),Ia(),Me(It,"DebuggerStatement");case Re:return Be(),Ht.push(Bd),It.body=ln(),Ht.pop(),xi(De),It.test=gh(),Ia(),Me(It,"DoWhileStatement");case st:if(Be(),Ht.push(Bd),xi(Ln),dt===Rn)return zd(It,null);if(dt===Ce){var we=zi();return Be(),h_(we,!0),Me(we,"VariableDeclaration"),we.declarations.length===1&&ri(Yu)?l_(It,we):zd(It,we)}var we=qi(!1,!0);return ri(Yu)?(ec(we),l_(It,we)):zd(It,we);case yt:return Be(),Wd(It,!0);case Ct:return Be(),It.test=gh(),It.consequent=ln(),It.alternate=ri(S)?ln():null,Me(It,"IfStatement");case Ot:return!Gt&&!$.allowReturnOutsideFunction&&Wt(rt,"'return' outside of function"),Be(),ri(Rn)||tc()?It.argument=null:(It.argument=qi(),Ia()),Me(It,"ReturnStatement");case jt:Be(),It.discriminant=gh(),It.cases=[],xi(Ro),Ht.push(_E);for(var Te,Ge;dt!=Ea;)if(dt===ae||dt===$e){var hn=dt===ae;Te&&Me(Te,"SwitchCase"),It.cases.push(Te=zi()),Te.consequent=[],Be(),hn?Te.test=qi():(Ge&&Wt(_t,"Multiple default clauses"),Ge=!0,Te.test=null),xi(Fo)}else Te||ss(),Te.consequent.push(ln());return Te&&Me(Te,"SwitchCase"),Be(),Ht.pop(),Me(It,"SwitchStatement");case se:return Be(),Ju.test(j.slice(Mt,rt))&&Wt(Mt,"Illegal newline after throw"),It.argument=qi(),Ia(),Me(It,"ThrowStatement");case fe:if(Be(),It.block=vh(),It.handler=null,dt===Ze){var Da=zi();Be(),xi(Ln),Da.param=ks(),Dt&&$u(Da.param.name)&&Wt(Da.param.start,"Binding "+Da.param.name+" in strict mode"),xi(on),Da.guard=null,Da.body=vh(),It.handler=Me(Da,"CatchClause")}return It.guardedHandlers=zt,It.finalizer=ri(F)?vh():null,!It.handler&&!It.finalizer&&Wt(It.start,"Missing catch or finally clause"),Me(It,"TryStatement");case Ce:return Be(),h_(It),Ia(),Me(It,"VariableDeclaration");case De:return Be(),It.test=gh(),Ht.push(Bd),It.body=ln(),Ht.pop(),Me(It,"WhileStatement");case pi:return Dt&&Wt(rt,"'with' in strict mode"),Be(),It.object=gh(),It.body=ln(),Me(It,"WithStatement");case Ro:return vh();case Rn:return Be(),Me(It,"EmptyStatement");default:var qd=St,ic=qi();if(Et===ne&&ic.type==="Identifier"&&ri(Fo)){for(var ie=0;ie<Ht.length;++ie)Ht[ie].name===qd&&Wt(ic.start,"Label '"+qd+"' is already declared");var TE=dt.isLoop?"loop":dt===jt?"switch":null;return Ht.push({name:qd,kind:TE}),It.body=ln(),Ht.pop(),It.label=ic,Me(It,"LabeledStatement")}else return It.expression=ic,Ia(),Me(It,"ExpressionStatement")}}function gh(){xi(Ln);var Et=qi();return xi(on),Et}function vh(Et){var It=zi(),Jt=!0,ie=!1,xe;for(It.body=[],xi(Ro);!ri(Ea);){var we=ln();It.body.push(we),Jt&&Et&&Nd(we)&&(xe=ie,Od(ie=!0)),Jt=!1}return ie&&!xe&&Od(!1),Me(It,"BlockStatement")}function zd(Et,It){return Et.init=It,xi(Rn),Et.test=dt===Rn?null:qi(),xi(Rn),Et.update=dt===on?null:qi(),xi(on),Et.body=ln(),Ht.pop(),Me(Et,"ForStatement")}function l_(Et,It){return Et.left=It,Et.right=qi(),xi(on),Et.body=ln(),Ht.pop(),Me(Et,"ForInStatement")}function h_(Et,It){for(Et.declarations=[],Et.kind="var";;){var Jt=zi();if(Jt.id=ks(),Dt&&$u(Jt.id.name)&&Wt(Jt.id.start,"Binding "+Jt.id.name+" in strict mode"),Jt.init=ri(Fd)?qi(!0,It):null,Et.declarations.push(Me(Jt,"VariableDeclarator")),!ri(ns))break}return Et}function qi(Et,It){var Jt=Vd(It);if(!Et&&dt===ns){var ie=Fs(Jt);for(ie.expressions=[Jt];ri(ns);)ie.expressions.push(Vd(It));return Me(ie,"SequenceExpression")}return Jt}function Vd(Et){var It=yE(Et);if(dt.isAssign){var Jt=Fs(It);return Jt.operator=St,Jt.left=It,Be(),Jt.right=Vd(Et),ec(It),Me(Jt,"AssignmentExpression")}return It}function yE(Et){var It=xE(Et);if(ri(Ld)){var Jt=Fs(It);return Jt.test=It,Jt.consequent=qi(!0),xi(Fo),Jt.alternate=qi(!0,Et),Me(Jt,"ConditionalExpression")}return It}function xE(Et){return Ud(Gd(),-1,Et)}function Ud(Et,It,Jt){var ie=dt.binop;if(ie!=null&&(!Jt||dt!==Yu)&&ie>It){var xe=Fs(Et);xe.left=Et,xe.operator=St;var we=dt;Be(),xe.right=Ud(Gd(),ie,Jt);var Te=Me(xe,we===j0||we===Z0?"LogicalExpression":"BinaryExpression");return Ud(Te,It,Jt)}return Et}function Gd(){if(dt.prefix){var Et=zi(),It=dt.isUpdate;return Et.operator=St,Et.prefix=!0,Z=!0,Be(),Et.argument=Gd(),It?ec(Et.argument):Dt&&Et.operator==="delete"&&Et.argument.type==="Identifier"&&Wt(Et.start,"Deleting local variable in strict mode"),Me(Et,It?"UpdateExpression":"UnaryExpression")}for(var Jt=bE();dt.postfix&&!tc();){var Et=Fs(Jt);Et.operator=St,Et.prefix=!1,Et.argument=Jt,ec(Jt),Be(),Jt=Me(Et,"UpdateExpression")}return Jt}function bE(){return _h(Hd())}function _h(Et,It){if(ri(Dd)){var Jt=Fs(Et);return Jt.object=Et,Jt.property=ks(!0),Jt.computed=!1,_h(Me(Jt,"MemberExpression"),It)}else if(ri(ju)){var Jt=Fs(Et);return Jt.object=Et,Jt.property=qi(),Jt.computed=!0,xi(Zu),_h(Me(Jt,"MemberExpression"),It)}else if(!It&&ri(Ln)){var Jt=Fs(Et);return Jt.callee=Et,Jt.arguments=Xd(on,!1),_h(Me(Jt,"CallExpression"),It)}else return Et}function Hd(){switch(dt){case es:var Et=zi();return Be(),Me(Et,"ThisExpression");case ne:return ks();case Kt:case ue:case ee:var Et=zi();return Et.value=St,Et.raw=j.slice(rt,lt),Be(),Me(Et,"Literal");case Ca:case is:case rs:var Et=zi();return Et.value=dt.atomValue,Et.raw=dt.keyword,Be(),Me(Et,"Literal");case Ln:var It=pt,Jt=rt;Be();var ie=qi();return ie.start=Jt,ie.end=lt,$.locations&&(ie.loc.start=It,ie.loc.end=bt),$.ranges&&(ie.range=[Jt,lt]),xi(on),ie;case ju:var Et=zi();return Be(),Et.elements=Xd(Zu,!0,!0),Me(Et,"ArrayExpression");case Ro:return SE();case yt:var Et=zi();return Be(),Wd(Et,!1);case Dn:return wE();default:ss()}}function wE(){var Et=zi();return Be(),Et.callee=_h(Hd(),!0),ri(Ln)?Et.arguments=Xd(on,!1):Et.arguments=zt,Me(Et,"NewExpression")}function SE(){var Et=zi(),It=!0,Jt=!1;for(Et.properties=[],Be();!ri(Ea);){if(It)It=!1;else if(xi(ns),$.allowTrailingCommas&&ri(Ea))break;var ie={key:u_()},xe=!1,we;if(ri(Fo)?(ie.value=qi(!0),we=ie.kind="init"):$.ecmaVersion>=5&&ie.key.type==="Identifier"&&(ie.key.name==="get"||ie.key.name==="set")?(xe=Jt=!0,we=ie.kind=ie.key.name,ie.key=u_(),dt!==Ln&&ss(),ie.value=Wd(zi(),!1)):ss(),ie.key.type==="Identifier"&&(Dt||Jt))for(var Te=0;Te<Et.properties.length;++Te){var Ge=Et.properties[Te];if(Ge.key.name===ie.key.name){var hn=we==Ge.kind||xe&&Ge.kind==="init"||we==="init"&&(Ge.kind==="get"||Ge.kind==="set");hn&&!Dt&&we==="init"&&Ge.kind==="init"&&(hn=!1),hn&&Wt(ie.key.start,"Redefinition of property")}}Et.properties.push(ie)}return Me(Et,"ObjectExpression")}function u_(){return dt===Kt||dt===ue?Hd():ks(!0)}function Wd(Et,It){dt===ne?Et.id=ks():It?ss():Et.id=null,Et.params=[];var Jt=!0;for(xi(Ln);!ri(on);)Jt?Jt=!1:xi(ns),Et.params.push(ks());var ie=Gt,xe=Ht;if(Gt=!0,Ht=[],Et.body=vh(!0),Gt=ie,Ht=xe,Dt||Et.body.body.length&&Nd(Et.body.body[0]))for(var we=Et.id?-1:0;we<Et.params.length;++we){var Te=we<0?Et.id:Et.params[we];if((J0(Te.name)||$u(Te.name))&&Wt(Te.start,"Defining '"+Te.name+"' in strict mode"),we>=0)for(var Ge=0;Ge<we;++Ge)Te.name===Et.params[Ge].name&&Wt(Te.start,"Argument name clash in strict mode")}return Me(Et,It?"FunctionDeclaration":"FunctionExpression")}function Xd(Et,It,Jt){for(var ie=[],xe=!0;!ri(Et);){if(xe)xe=!1;else if(xi(ns),It&&$.allowTrailingCommas&&ri(Et))break;Jt&&dt===ns?ie.push(null):ie.push(qi(!0))}return ie}function ks(Et){var It=zi();return Et&&$.forbidReserved=="everywhere"&&(Et=!1),dt===ne?(!Et&&($.forbidReserved&&($.ecmaVersion===3?QC:tE)(St)||Dt&&J0(St))&&j.slice(rt,lt).indexOf("\\")==-1&&Wt(rt,"The keyword '"+St+"' is reserved"),It.name=St):Et&&dt.keyword?It.name=dt.keyword:ss(),Z=!1,Be(),Me(It,"Identifier")}}),c.version||(c=null)}function y(z,$){return(l.acorn||c).parse(z,$)}var T={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},P={"-":"__negate","+":"__self"},I=n.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(z){this["__"+z]="#"+z},{__self:function(){return this}});f.inject(I),_.inject(I),Pt.inject(I);function L(z,$,j){var et=T[$];if(z&&z[et]){var q=z[et](j);return $==="!="?!q:q}switch($){case"+":return z+j;case"-":return z-j;case"*":return z*j;case"/":return z/j;case"%":return z%j;case"==":return z==j;case"!=":return z!=j}}function k(z,$){var j=P[z];if($&&$[j])return $[j]();switch(z){case"+":return+$;case"-":return-$}}function G(z,$){if(!z)return"";$=$||{};var j=[];function et(Dt){for(var Wt=0,zt=j.length;Wt<zt;Wt++){var Kt=j[Wt];if(Kt[0]>=Dt)break;Dt+=Kt[1]}return Dt}function q(Dt){return z.substring(et(Dt.range[0]),et(Dt.range[1]))}function J(Dt,Wt){return z.substring(et(Dt.range[1]),et(Wt.range[0]))}function U(Dt,Wt){for(var zt=et(Dt.range[0]),Kt=et(Dt.range[1]),ee=0,ue=j.length-1;ue>=0;ue--)if(zt>j[ue][0]){ee=ue+1;break}j.splice(ee,0,[zt,Wt.length-Kt+zt]),z=z.substring(0,zt)+Wt+z.substring(Kt)}function K(Dt,Wt){switch(Dt.type){case"UnaryExpression":if(Dt.operator in P&&Dt.argument.type!=="Literal"){var zt=q(Dt.argument);U(Dt,'$__("'+Dt.operator+'", '+zt+")")}break;case"BinaryExpression":if(Dt.operator in T&&Dt.left.type!=="Literal"){var Kt=q(Dt.left),ee=q(Dt.right),ue=J(Dt.left,Dt.right),ne=Dt.operator;U(Dt,"__$__("+Kt+","+ue.replace(new RegExp("\\"+ne),'"'+ne+'"')+", "+ee+")")}break;case"UpdateExpression":case"AssignmentExpression":var me=Wt&&Wt.type;if(!(me==="ForStatement"||me==="BinaryExpression"&&/^[=!<>]/.test(Wt.operator)||me==="MemberExpression"&&Wt.computed)){if(Dt.type==="UpdateExpression"){var zt=q(Dt.argument),ce="__$__("+zt+', "'+Dt.operator[0]+'", 1)',ae=zt+" = "+ce;Dt.prefix?ae="("+ae+")":(me==="AssignmentExpression"||me==="VariableDeclarator"||me==="BinaryExpression")&&(q(Wt.left||Wt.id)===zt&&(ae=ce),ae=zt+"; "+ae),U(Dt,ae)}else if(/^.=$/.test(Dt.operator)&&Dt.left.type!=="Literal"){var Kt=q(Dt.left),ee=q(Dt.right),ce=Kt+" = __$__("+Kt+', "'+Dt.operator[0]+'", '+ee+")";U(Dt,/^\(.*\)$/.test(q(Dt))?"("+ce+")":ce)}}break}}function O(Dt){switch(Dt.type){case"ExportDefaultDeclaration":U({range:[Dt.start,Dt.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Wt=Dt.declaration,zt=Dt.specifiers;if(Wt){var Kt=Wt.declarations;Kt&&(Kt.forEach(function(ue){U(ue,"module.exports."+q(ue))}),U({range:[Dt.start,Wt.start+Wt.kind.length]},""))}else if(zt){var ee=zt.map(function(ue){var ne=q(ue);return"module.exports."+ne+" = "+ne+"; "}).join("");ee&&U(Dt,ee)}break}}function rt(Dt,Wt,zt){if(Dt){for(var Kt in Dt)if(Kt!=="range"&&Kt!=="loc"){var ee=Dt[Kt];if(Array.isArray(ee))for(var ue=0,ne=ee.length;ue<ne;ue++)rt(ee[ue],Dt,zt);else ee&&typeof ee=="object"&&rt(ee,Dt,zt)}zt.operatorOverloading!==!1&&K(Dt,Wt),zt.moduleExports!==!1&&O(Dt)}}function lt(Dt){var Wt="",zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Dt=(Math.abs(Dt)<<1)+(Dt<0?1:0);Dt||!Wt;){var Kt=Dt&32-1;Dt>>=5,Dt&&(Kt|=32),Wt+=zt[Kt]}return Wt}var pt=$.url||"",bt=$.sourceMaps,dt=$.paperFeatures||{},St=$.source||z,Z=$.offset||0,ht=Ft.agent,vt=ht.versionNumber,_t=!1,Mt=/\r\n|\n|\r/mg,kt;if(bt&&(ht.chrome&&vt>=30||ht.webkit&&vt>=537.76||ht.firefox&&vt>=23||ht.node)){if(ht.node)Z-=2;else if(e&&pt&&!e.location.href.indexOf(pt)){var Gt=i.getElementsByTagName("html")[0].innerHTML;Z=Gt.substr(0,Gt.indexOf(z)+1).match(Mt).length+1}_t=Z>0&&!(ht.chrome&&vt>=36||ht.safari&&vt>=600||ht.firefox&&vt>=40||ht.node);var Ht=["AA"+lt(_t?0:Z)+"A"];Ht.length=(z.match(Mt)||[]).length+1+(_t?Z:0),kt={version:3,file:pt,names:[],mappings:Ht.join(";AACA"),sourceRoot:"",sources:[pt],sourcesContent:[St]}}return(dt.operatorOverloading!==!1||dt.moduleExports!==!1)&&rt(y(z,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,dt),kt&&(_t&&(z=new Array(Z+1).join(`
`)+z),/^(inline|both)$/.test(bt)&&(z+=`
//# sourceMappingURL=data:application/json;base64,`+r.btoa(unescape(encodeURIComponent(JSON.stringify(kt))))),z+=`
//# sourceURL=`+(pt||"paperscript")),{url:pt,source:St,code:z,map:kt}}function V(z,$,j){Ft=$;var et=$.getView(),q=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(z)&&!/\bnew\s+Tool\b/.test(z)?new Bt:null,J=q?q._events:[],U=["onFrame","onResize"].concat(J),K=[],O=[],rt,lt=typeof z=="object"?z:G(z,j);z=lt.code;function pt(vt,_t){for(var Mt in vt)(_t||!/^_/.test(Mt))&&new RegExp("([\\b\\s\\W]|^)"+Mt.replace(/\$/g,"\\$")+"\\b").test(z)&&(K.push(Mt),O.push(vt[Mt]))}pt({__$__:L,$__:k,paper:$,tool:q},!0),pt($),z="var module = { exports: {} }; "+z;var bt=n.each(U,function(vt){new RegExp("\\s+"+vt+"\\b").test(z)&&(K.push(vt),this.push("module.exports."+vt+" = "+vt+";"))},[]).join(`
`);bt&&(z+=`
`+bt),z+=`
return module.exports;`;var dt=Ft.agent;if(i&&(dt.chrome||dt.firefox&&dt.versionNumber<40)){var St=i.createElement("script"),Z=i.head||i.getElementsByTagName("head")[0];dt.firefox&&(z=`
`+z),St.appendChild(i.createTextNode("document.__paperscript__ = function("+K+") {"+z+`
}`)),Z.appendChild(St),rt=i.__paperscript__,delete i.__paperscript__,Z.removeChild(St)}else rt=Function(K,z);var bt=rt&&rt.apply($,O),ht=bt||{};return n.each(J,function(vt){var _t=ht[vt];_t&&(q[vt]=_t)}),et&&(ht.onResize&&et.setOnResize(ht.onResize),et.emit("resize",{size:et.size,delta:new f}),ht.onFrame&&et.setOnFrame(ht.onFrame),et.requestUpdate()),bt}function H(z){if(/^text\/(?:x-|)paperscript$/.test(z.type)&&a.getAttribute(z,"ignore")!=="true"){var $=a.getAttribute(z,"canvas"),j=i.getElementById($),et=z.src||z.getAttribute("data-src"),q=a.hasAttribute(z,"async"),J="data-paper-scope";if(!j)throw new Error('Unable to find canvas with id "'+$+'"');var U=a.get(j.getAttribute(J))||new a().setup(j);return j.setAttribute(J,U._id),et?le.request({url:et,async:q,mimeType:"text/plain",onLoad:function(K){V(K,U,et)}}):V(z.innerHTML,U,z.baseURI),z.setAttribute("data-paper-ignore","true"),U}}function Y(){n.each(i&&i.getElementsByTagName("script"),H)}function B(z){return z?H(z):Y()}return e&&(i.readyState==="complete"?setTimeout(Y):Yt.add(e,{load:Y})),{compile:G,execute:V,load:B,parse:y,calculateBinary:L,calculateUnary:k}}.call(this);var Ft=new(a.inject(n.exports,{Base:n,Numerical:d,Key:Lt,DomEvent:Yt,DomElement:Vt,document:i,window:e,Symbol:ft,PlacedSymbol:at}));return Ft.agent.node&&Xw()(Ft),typeof define=="function"&&define.amd?define("paper",Ft):typeof Nl=="object"&&Nl&&(Nl.exports=Ft),Ft}.call(qw,typeof self=="object"?self:null)});var uS=mi((Av,Iv)=>{(function(r,t){typeof Av=="object"&&typeof Iv!="undefined"?Iv.exports=t():typeof define=="function"&&define.amd?define(t):(r=r||self).barba=t()})(Av,function(){function r(p,x){for(var y=0;y<x.length;y++){var T=x[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(p,T.key,T)}}function t(p,x,y){return x&&r(p.prototype,x),y&&r(p,y),p}function e(){return(e=Object.assign||function(p){for(var x=1;x<arguments.length;x++){var y=arguments[x];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(p[T]=y[T])}return p}).apply(this,arguments)}function i(p,x){p.prototype=Object.create(x.prototype),p.prototype.constructor=p,p.__proto__=x}function n(p){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)})(p)}function s(p,x){return(s=Object.setPrototypeOf||function(y,T){return y.__proto__=T,y})(p,x)}function a(p,x,y){return(a=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(T,P,I){var L=[null];L.push.apply(L,P);var k=new(Function.bind.apply(T,L));return I&&s(k,I.prototype),k}).apply(null,arguments)}function o(p){var x=typeof Map=="function"?new Map:void 0;return(o=function(y){if(y===null||Function.toString.call(y).indexOf("[native code]")===-1)return y;if(typeof y!="function")throw new TypeError("Super expression must either be null or a function");if(x!==void 0){if(x.has(y))return x.get(y);x.set(y,T)}function T(){return a(y,arguments,n(this).constructor)}return T.prototype=Object.create(y.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),s(T,y)})(p)}function h(p,x){try{var y=p()}catch(T){return x(T)}return y&&y.then?y.then(void 0,x):y}typeof Symbol!="undefined"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol!="undefined"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var u,d="2.9.7",g=function(){};(function(p){p[p.off=0]="off",p[p.error=1]="error",p[p.warning=2]="warning",p[p.info=3]="info",p[p.debug=4]="debug"})(u||(u={}));var f=u.off,m=function(){function p(y){this.t=y}p.getLevel=function(){return f},p.setLevel=function(y){return f=u[y]};var x=p.prototype;return x.error=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];this.i(console.error,u.error,T)},x.warn=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];this.i(console.warn,u.warning,T)},x.info=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];this.i(console.info,u.info,T)},x.debug=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];this.i(console.log,u.debug,T)},x.i=function(y,T,P){T<=p.getLevel()&&y.apply(console,["["+this.t+"] "].concat(P))},p}(),_=gt,v=R,b=A,C=N,M=ft,E="/",w=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function A(p,x){for(var y,T=[],P=0,I=0,L="",k=x&&x.delimiter||E,G=x&&x.whitelist||void 0,V=!1;(y=w.exec(p))!==null;){var H=y[0],Y=y[1],B=y.index;if(L+=p.slice(I,B),I=B+H.length,Y)L+=Y[1],V=!0;else{var z="",$=y[2],j=y[3],et=y[4],q=y[5];if(!V&&L.length){var J=L.length-1,U=L[J];(!G||G.indexOf(U)>-1)&&(z=U,L=L.slice(0,J))}L&&(T.push(L),L="",V=!1);var K=j||et,O=z||k;T.push({name:$||P++,prefix:z,delimiter:O,optional:q==="?"||q==="*",repeat:q==="+"||q==="*",pattern:K?X(K):"[^"+D(O===k?O:O+k)+"]+?"})}}return(L||I<p.length)&&T.push(L+p.substr(I)),T}function R(p,x){return function(y,T){var P=p.exec(y);if(!P)return!1;for(var I=P[0],L=P.index,k={},G=T&&T.decode||decodeURIComponent,V=1;V<P.length;V++)if(P[V]!==void 0){var H=x[V-1];k[H.name]=H.repeat?P[V].split(H.delimiter).map(function(Y){return G(Y,H)}):G(P[V],H)}return{path:I,index:L,params:k}}}function N(p,x){for(var y=new Array(p.length),T=0;T<p.length;T++)typeof p[T]=="object"&&(y[T]=new RegExp("^(?:"+p[T].pattern+")$",at(x)));return function(P,I){for(var L="",k=I&&I.encode||encodeURIComponent,G=!I||I.validate!==!1,V=0;V<p.length;V++){var H=p[V];if(typeof H!="string"){var Y,B=P?P[H.name]:void 0;if(Array.isArray(B)){if(!H.repeat)throw new TypeError('Expected "'+H.name+'" to not repeat, but got array');if(B.length===0){if(H.optional)continue;throw new TypeError('Expected "'+H.name+'" to not be empty')}for(var z=0;z<B.length;z++){if(Y=k(B[z],H),G&&!y[V].test(Y))throw new TypeError('Expected all "'+H.name+'" to match "'+H.pattern+'"');L+=(z===0?H.prefix:H.delimiter)+Y}}else if(typeof B!="string"&&typeof B!="number"&&typeof B!="boolean"){if(!H.optional)throw new TypeError('Expected "'+H.name+'" to be '+(H.repeat?"an array":"a string"))}else{if(Y=k(String(B),H),G&&!y[V].test(Y))throw new TypeError('Expected "'+H.name+'" to match "'+H.pattern+'", but got "'+Y+'"');L+=H.prefix+Y}}else L+=H}return L}}function D(p){return p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function X(p){return p.replace(/([=!:$/()])/g,"\\$1")}function at(p){return p&&p.sensitive?"":"i"}function ft(p,x,y){for(var T=(y=y||{}).strict,P=y.start!==!1,I=y.end!==!1,L=y.delimiter||E,k=[].concat(y.endsWith||[]).map(D).concat("$").join("|"),G=P?"^":"",V=0;V<p.length;V++){var H=p[V];if(typeof H=="string")G+=D(H);else{var Y=H.repeat?"(?:"+H.pattern+")(?:"+D(H.delimiter)+"(?:"+H.pattern+"))*":H.pattern;x&&x.push(H),G+=H.optional?H.prefix?"(?:"+D(H.prefix)+"("+Y+"))?":"("+Y+")?":D(H.prefix)+"("+Y+")"}}if(I)T||(G+="(?:"+D(L)+")?"),G+=k==="$"?"$":"(?="+k+")";else{var B=p[p.length-1],z=typeof B=="string"?B[B.length-1]===L:B===void 0;T||(G+="(?:"+D(L)+"(?="+k+"))?"),z||(G+="(?="+D(L)+"|"+k+")")}return new RegExp(G,at(y))}function gt(p,x,y){return p instanceof RegExp?function(T,P){if(!P)return T;var I=T.source.match(/\((?!\?)/g);if(I)for(var L=0;L<I.length;L++)P.push({name:L,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return T}(p,x):Array.isArray(p)?function(T,P,I){for(var L=[],k=0;k<T.length;k++)L.push(gt(T[k],P,I).source);return new RegExp("(?:"+L.join("|")+")",at(I))}(p,x,y):function(T,P,I){return ft(A(T,I),P,I)}(p,x,y)}_.match=function(p,x){var y=[];return R(gt(p,y,x),y)},_.regexpToFunction=v,_.parse=b,_.compile=function(p,x){return N(A(p,x),x)},_.tokensToFunction=C,_.tokensToRegExp=M;var ut={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},xt=new(function(){function p(){this.o=ut,this.u=new DOMParser}var x=p.prototype;return x.toString=function(y){return y.outerHTML},x.toDocument=function(y){return this.u.parseFromString(y,"text/html")},x.toElement=function(y){var T=document.createElement("div");return T.innerHTML=y,T},x.getHtml=function(y){return y===void 0&&(y=document),this.toString(y.documentElement)},x.getWrapper=function(y){return y===void 0&&(y=document),y.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},x.getContainer=function(y){return y===void 0&&(y=document),y.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},x.removeContainer=function(y){document.body.contains(y)&&y.parentNode.removeChild(y)},x.addContainer=function(y,T){var P=this.getContainer();P?this.s(y,P):T.appendChild(y)},x.getNamespace=function(y){y===void 0&&(y=document);var T=y.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return T?T.getAttribute(this.o.prefix+"-"+this.o.namespace):null},x.getHref=function(y){if(y.tagName&&y.tagName.toLowerCase()==="a"){if(typeof y.href=="string")return y.href;var T=y.getAttribute("href")||y.getAttribute("xlink:href");if(T)return this.resolveUrl(T.baseVal||T)}return null},x.resolveUrl=function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];var I=T.length;if(I===0)throw new Error("resolveUrl requires at least one argument; got none.");var L=document.createElement("base");if(L.href=arguments[0],I===1)return L.href;var k=document.getElementsByTagName("head")[0];k.insertBefore(L,k.firstChild);for(var G,V=document.createElement("a"),H=1;H<I;H++)V.href=arguments[H],L.href=G=V.href;return k.removeChild(L),G},x.s=function(y,T){T.parentNode.insertBefore(y,T.nextSibling)},p}()),nt=new(function(){function p(){this.h=[],this.v=-1}var x=p.prototype;return x.init=function(y,T){this.l="barba";var P={ns:T,scroll:{x:window.scrollX,y:window.scrollY},url:y};this.h.push(P),this.v=0;var I={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(I,"",y)},x.change=function(y,T,P){if(P&&P.state){var I=P.state,L=I.index;T=this.m(this.v-L),this.replace(I.states),this.v=L}else this.add(y,T);return T},x.add=function(y,T){var P=this.size,I=this.p(T),L={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:y};this.h.push(L),this.v=P;var k={from:this.l,index:P,states:[].concat(this.h)};switch(I){case"push":window.history&&window.history.pushState(k,"",y);break;case"replace":window.history&&window.history.replaceState(k,"",y)}},x.update=function(y,T){var P=T||this.v,I=e({},this.get(P),{},y);this.set(P,I)},x.remove=function(y){y?this.h.splice(y,1):this.h.pop(),this.v--},x.clear=function(){this.h=[],this.v=-1},x.replace=function(y){this.h=y},x.get=function(y){return this.h[y]},x.set=function(y,T){return this.h[y]=T},x.p=function(y){var T="push",P=y,I=ut.prefix+"-"+ut.history;return P.hasAttribute&&P.hasAttribute(I)&&(T=P.getAttribute(I)),T},x.m=function(y){return Math.abs(y)>1?y>0?"forward":"back":y===0?"popstate":y>0?"back":"forward"},t(p,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),p}()),it=function(p,x){try{var y=function(){if(!x.next.html)return Promise.resolve(p).then(function(T){var P=x.next;if(T){var I=xt.toElement(T);P.namespace=xt.getNamespace(I),P.container=xt.getContainer(I),P.html=T,nt.update({ns:P.namespace});var L=xt.toDocument(T);document.title=L.title}})}();return Promise.resolve(y&&y.then?y.then(function(){}):void 0)}catch(T){return Promise.reject(T)}},tt=_,W={__proto__:null,update:it,nextTick:function(){return new Promise(function(p){window.requestAnimationFrame(p)})},pathToRegexp:tt},Q=function(){return window.location.origin},ot=function(p){return p===void 0&&(p=window.location.href),ct(p).port},ct=function(p){var x,y=p.match(/:\d+/);if(y===null)/^http/.test(p)&&(x=80),/^https/.test(p)&&(x=443);else{var T=y[0].substring(1);x=parseInt(T,10)}var P,I=p.replace(Q(),""),L={},k=I.indexOf("#");k>=0&&(P=I.slice(k+1),I=I.slice(0,k));var G=I.indexOf("?");return G>=0&&(L=Tt(I.slice(G+1)),I=I.slice(0,G)),{hash:P,path:I,port:x,query:L}},Tt=function(p){return p.split("&").reduce(function(x,y){var T=y.split("=");return x[T[0]]=T[1],x},{})},Rt=function(p){return p===void 0&&(p=window.location.href),p.replace(/(\/#.*|\/|#.*)$/,"")},Pt={__proto__:null,getHref:function(){return window.location.href},getOrigin:Q,getPort:ot,getPath:function(p){return p===void 0&&(p=window.location.href),ct(p).path},parse:ct,parseQuery:Tt,clean:Rt};function Nt(p,x,y){return x===void 0&&(x=2e3),new Promise(function(T,P){var I=new XMLHttpRequest;I.onreadystatechange=function(){if(I.readyState===XMLHttpRequest.DONE){if(I.status===200)T(I.responseText);else if(I.status){var L={status:I.status,statusText:I.statusText};y(p,L),P(L)}}},I.ontimeout=function(){var L=new Error("Timeout error ["+x+"]");y(p,L),P(L)},I.onerror=function(){var L=new Error("Fetch error");y(p,L),P(L)},I.open("GET",p),I.timeout=x,I.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),I.setRequestHeader("x-barba","yes"),I.send()})}var At=function(p){return!!p&&(typeof p=="object"||typeof p=="function")&&typeof p.then=="function"};function Qt(p,x){return x===void 0&&(x={}),function(){for(var y=arguments.length,T=new Array(y),P=0;P<y;P++)T[P]=arguments[P];var I=!1,L=new Promise(function(k,G){x.async=function(){return I=!0,function(H,Y){H?G(H):k(Y)}};var V=p.apply(x,T);I||(At(V)?V.then(k,G):k(V))});return L}}var Vt=new(function(p){function x(){var T;return(T=p.call(this)||this).logger=new m("@barba/core"),T.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],T.registered=new Map,T.init(),T}i(x,p);var y=x.prototype;return y.init=function(){var T=this;this.registered.clear(),this.all.forEach(function(P){T[P]||(T[P]=function(I,L){T.registered.has(P)||T.registered.set(P,new Set),T.registered.get(P).add({ctx:L||{},fn:I})})})},y.do=function(T){for(var P=this,I=arguments.length,L=new Array(I>1?I-1:0),k=1;k<I;k++)L[k-1]=arguments[k];if(this.registered.has(T)){var G=Promise.resolve();return this.registered.get(T).forEach(function(V){G=G.then(function(){return Qt(V.fn,V.ctx).apply(void 0,L)})}),G.catch(function(V){P.logger.debug("Hook error ["+T+"]"),P.logger.error(V)})}return Promise.resolve()},y.clear=function(){var T=this;this.all.forEach(function(P){delete T[P]}),this.init()},y.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var T=[];this.registered.forEach(function(P,I){return T.push(I)}),this.logger.info("Registered hooks: "+T.join(","))},x}(g)),Yt=function(){function p(x){if(this.P=[],typeof x=="boolean")this.g=x;else{var y=Array.isArray(x)?x:[x];this.P=y.map(function(T){return tt(T)})}}return p.prototype.checkHref=function(x){if(typeof this.g=="boolean")return this.g;var y=ct(x).path;return this.P.some(function(T){return T.exec(y)!==null})},p}(),Xt=function(p){function x(T){var P;return(P=p.call(this,T)||this).k=new Map,P}i(x,p);var y=x.prototype;return y.set=function(T,P,I){return this.k.set(T,{action:I,request:P}),{action:I,request:P}},y.get=function(T){return this.k.get(T)},y.getRequest=function(T){return this.k.get(T).request},y.getAction=function(T){return this.k.get(T).action},y.has=function(T){return!this.checkHref(T)&&this.k.has(T)},y.delete=function(T){return this.k.delete(T)},y.update=function(T,P){var I=e({},this.k.get(T),{},P);return this.k.set(T,I),I},x}(Yt),re=function(){return!window.history.pushState},qt=function(p){return!p.el||!p.href},Ut=function(p){var x=p.event;return x.which>1||x.metaKey||x.ctrlKey||x.shiftKey||x.altKey},Lt=function(p){var x=p.el;return x.hasAttribute("target")&&x.target==="_blank"},te=function(p){var x=p.el;return x.protocol!==void 0&&window.location.protocol!==x.protocol||x.hostname!==void 0&&window.location.hostname!==x.hostname},ge=function(p){var x=p.el;return x.port!==void 0&&ot()!==ot(x.href)},Bt=function(p){var x=p.el;return x.getAttribute&&typeof x.getAttribute("download")=="string"},oe=function(p){return p.el.hasAttribute(ut.prefix+"-"+ut.prevent)},le=function(p){return Boolean(p.el.closest("["+ut.prefix+"-"+ut.prevent+'="all"]'))},de=function(p){var x=p.href;return Rt(x)===Rt()&&ot(x)===ot()},Se=function(p){function x(T){var P;return(P=p.call(this,T)||this).suite=[],P.tests=new Map,P.init(),P}i(x,p);var y=x.prototype;return y.init=function(){this.add("pushState",re),this.add("exists",qt),this.add("newTab",Ut),this.add("blank",Lt),this.add("corsDomain",te),this.add("corsPort",ge),this.add("download",Bt),this.add("preventSelf",oe),this.add("preventAll",le),this.add("sameUrl",de,!1)},y.add=function(T,P,I){I===void 0&&(I=!0),this.tests.set(T,P),I&&this.suite.push(T)},y.run=function(T,P,I,L){return this.tests.get(T)({el:P,event:I,href:L})},y.checkLink=function(T,P,I){var L=this;return this.suite.some(function(k){return L.run(k,T,P,I)})},x}(Yt),wt=function(p){function x(y,T){var P;T===void 0&&(T="Barba error");for(var I=arguments.length,L=new Array(I>2?I-2:0),k=2;k<I;k++)L[k-2]=arguments[k];return(P=p.call.apply(p,[this].concat(L))||this).error=y,P.label=T,Error.captureStackTrace&&Error.captureStackTrace(function(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}(P),x),P.name="BarbaError",P}return i(x,p),x}(o(Error)),mt=function(){function p(y){y===void 0&&(y=[]),this.logger=new m("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],y&&(this.all=this.all.concat(y)),this.update()}var x=p.prototype;return x.add=function(y,T){switch(y){case"rule":this.A.splice(T.position||0,0,T.value);break;case"transition":default:this.all.push(T)}this.update()},x.resolve=function(y,T){var P=this;T===void 0&&(T={});var I=T.once?this.once:this.page;I=I.filter(T.self?function(B){return B.name&&B.name==="self"}:function(B){return!B.name||B.name!=="self"});var L=new Map,k=I.find(function(B){var z=!0,$={};return!(!T.self||B.name!=="self")||(P.A.reverse().forEach(function(j){z&&(z=P.R(B,j,y,$),B.from&&B.to&&(z=P.R(B,j,y,$,"from")&&P.R(B,j,y,$,"to")),B.from&&!B.to&&(z=P.R(B,j,y,$,"from")),!B.from&&B.to&&(z=P.R(B,j,y,$,"to")))}),L.set(B,$),z)}),G=L.get(k),V=[];if(V.push(T.once?"once":"page"),T.self&&V.push("self"),G){var H,Y=[k];Object.keys(G).length>0&&Y.push(G),(H=this.logger).info.apply(H,["Transition found ["+V.join(",")+"]"].concat(Y))}else this.logger.info("No transition found ["+V.join(",")+"]");return k},x.update=function(){var y=this;this.all=this.all.map(function(T){return y.T(T)}).sort(function(T,P){return T.priority-P.priority}).reverse().map(function(T){return delete T.priority,T}),this.page=this.all.filter(function(T){return T.leave!==void 0||T.enter!==void 0}),this.once=this.all.filter(function(T){return T.once!==void 0})},x.R=function(y,T,P,I,L){var k=!0,G=!1,V=y,H=T.name,Y=H,B=H,z=H,$=L?V[L]:V,j=L==="to"?P.next:P.current;if(L?$&&$[H]:$[H]){switch(T.type){case"strings":default:var et=Array.isArray($[Y])?$[Y]:[$[Y]];j[Y]&&et.indexOf(j[Y])!==-1&&(G=!0),et.indexOf(j[Y])===-1&&(k=!1);break;case"object":var q=Array.isArray($[B])?$[B]:[$[B]];j[B]?(j[B].name&&q.indexOf(j[B].name)!==-1&&(G=!0),q.indexOf(j[B].name)===-1&&(k=!1)):k=!1;break;case"function":$[z](P)?G=!0:k=!1}G&&(L?(I[L]=I[L]||{},I[L][H]=V[L][H]):I[H]=V[H])}return k},x.O=function(y,T,P){var I=0;return(y[T]||y.from&&y.from[T]||y.to&&y.to[T])&&(I+=Math.pow(10,P),y.from&&y.from[T]&&(I+=1),y.to&&y.to[T]&&(I+=2)),I},x.T=function(y){var T=this;y.priority=0;var P=0;return this.A.forEach(function(I,L){P+=T.O(y,I.name,L+1)}),y.priority=P,y},p}(),Ft=function(){function p(y){y===void 0&&(y=[]),this.logger=new m("@barba/core"),this.S=!1,this.store=new mt(y)}var x=p.prototype;return x.get=function(y,T){return this.store.resolve(y,T)},x.doOnce=function(y){var T=y.data,P=y.transition;try{var I=function(){L.S=!1},L=this,k=P||{};L.S=!0;var G=h(function(){return Promise.resolve(L.j("beforeOnce",T,k)).then(function(){return Promise.resolve(L.once(T,k)).then(function(){return Promise.resolve(L.j("afterOnce",T,k)).then(function(){})})})},function(V){L.S=!1,L.logger.debug("Transition error [before/after/once]"),L.logger.error(V)});return Promise.resolve(G&&G.then?G.then(I):I())}catch(V){return Promise.reject(V)}},x.doPage=function(y){var T=y.data,P=y.transition,I=y.page,L=y.wrapper;try{var k=function(z){if(G)return z;V.S=!1},G=!1,V=this,H=P||{},Y=H.sync===!0||!1;V.S=!0;var B=h(function(){function z(){return Promise.resolve(V.j("before",T,H)).then(function(){var j=!1;function et(J){return j?J:Promise.resolve(V.remove(T)).then(function(){return Promise.resolve(V.j("after",T,H)).then(function(){})})}var q=function(){if(Y)return h(function(){return Promise.resolve(V.add(T,L)).then(function(){return Promise.resolve(V.j("beforeLeave",T,H)).then(function(){return Promise.resolve(V.j("beforeEnter",T,H)).then(function(){return Promise.resolve(Promise.all([V.leave(T,H),V.enter(T,H)])).then(function(){return Promise.resolve(V.j("afterLeave",T,H)).then(function(){return Promise.resolve(V.j("afterEnter",T,H)).then(function(){})})})})})})},function(O){if(V.M(O))throw new wt(O,"Transition error [sync]")});var J=function(O){return j?O:h(function(){var rt=function(){if(U!==!1)return Promise.resolve(V.add(T,L)).then(function(){return Promise.resolve(V.j("beforeEnter",T,H)).then(function(){return Promise.resolve(V.enter(T,H,U)).then(function(){return Promise.resolve(V.j("afterEnter",T,H)).then(function(){})})})})}();if(rt&&rt.then)return rt.then(function(){})},function(rt){if(V.M(rt))throw new wt(rt,"Transition error [before/after/enter]")})},U=!1,K=h(function(){return Promise.resolve(V.j("beforeLeave",T,H)).then(function(){return Promise.resolve(Promise.all([V.leave(T,H),it(I,T)]).then(function(O){return O[0]})).then(function(O){return U=O,Promise.resolve(V.j("afterLeave",T,H)).then(function(){})})})},function(O){if(V.M(O))throw new wt(O,"Transition error [before/after/leave]")});return K&&K.then?K.then(J):J(K)}();return q&&q.then?q.then(et):et(q)})}var $=function(){if(Y)return Promise.resolve(it(I,T)).then(function(){})}();return $&&$.then?$.then(z):z()},function(z){throw V.S=!1,z.name&&z.name==="BarbaError"?(V.logger.debug(z.label),V.logger.error(z.error),z):(V.logger.debug("Transition error [page]"),V.logger.error(z),z)});return Promise.resolve(B&&B.then?B.then(k):k(B))}catch(z){return Promise.reject(z)}},x.once=function(y,T){try{return Promise.resolve(Vt.do("once",y,T)).then(function(){return T.once?Qt(T.once,T)(y):Promise.resolve()})}catch(P){return Promise.reject(P)}},x.leave=function(y,T){try{return Promise.resolve(Vt.do("leave",y,T)).then(function(){return T.leave?Qt(T.leave,T)(y):Promise.resolve()})}catch(P){return Promise.reject(P)}},x.enter=function(y,T,P){try{return Promise.resolve(Vt.do("enter",y,T)).then(function(){return T.enter?Qt(T.enter,T)(y,P):Promise.resolve()})}catch(I){return Promise.reject(I)}},x.add=function(y,T){try{return xt.addContainer(y.next.container,T),Vt.do("nextAdded",y),Promise.resolve()}catch(P){return Promise.reject(P)}},x.remove=function(y){try{return xt.removeContainer(y.current.container),Vt.do("currentRemoved",y),Promise.resolve()}catch(T){return Promise.reject(T)}},x.M=function(y){return y.message?!/Timeout error|Fetch error/.test(y.message):!y.status},x.j=function(y,T,P){try{return Promise.resolve(Vt.do(y,T,P)).then(function(){return P[y]?Qt(P[y],P)(T):Promise.resolve()})}catch(I){return Promise.reject(I)}},t(p,[{key:"isRunning",get:function(){return this.S},set:function(y){this.S=y}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(y){return y.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(y){return y.to&&!y.to.route||y.sync})}}]),p}(),l=function(){function p(x){var y=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,x.length!==0&&(x.forEach(function(T){y.byNamespace.set(T.namespace,T)}),this.names.forEach(function(T){Vt[T](y.L(T))}))}return p.prototype.L=function(x){var y=this;return function(T){var P=x.match(/enter/i)?T.next:T.current,I=y.byNamespace.get(P.namespace);return I&&I[x]?Qt(I[x],I)(T):Promise.resolve()}},p}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(p){var x=this;do{if(x.matches(p))return x;x=x.parentElement||x.parentNode}while(x!==null&&x.nodeType===1);return null});var c={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return new(function(){function p(){this.version=d,this.schemaPage=c,this.Logger=m,this.logger=new m("@barba/core"),this.plugins=[],this.hooks=Vt,this.dom=xt,this.helpers=W,this.history=nt,this.request=Nt,this.url=Pt}var x=p.prototype;return x.use=function(y,T){var P=this.plugins;P.indexOf(y)>-1?this.logger.warn("Plugin ["+y.name+"] already installed."):typeof y.install=="function"?(y.install(this,T),P.push(y)):this.logger.warn("Plugin ["+y.name+'] has no "install" method.')},x.init=function(y){var T=y===void 0?{}:y,P=T.transitions,I=P===void 0?[]:P,L=T.views,k=L===void 0?[]:L,G=T.schema,V=G===void 0?ut:G,H=T.requestError,Y=T.timeout,B=Y===void 0?2e3:Y,z=T.cacheIgnore,$=z!==void 0&&z,j=T.prefetchIgnore,et=j!==void 0&&j,q=T.preventRunning,J=q!==void 0&&q,U=T.prevent,K=U===void 0?null:U,O=T.debug,rt=T.logLevel;if(m.setLevel((O!==void 0&&O)===!0?"debug":rt===void 0?"off":rt),this.logger.info(this.version),Object.keys(V).forEach(function(bt){ut[bt]&&(ut[bt]=V[bt])}),this.$=H,this.timeout=B,this.cacheIgnore=$,this.prefetchIgnore=et,this.preventRunning=J,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var lt=this.data.current;if(!lt.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new Xt($),this.prevent=new Se(et),this.transitions=new Ft(I),this.views=new l(k),K!==null){if(typeof K!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",K)}this.history.init(lt.url.href,lt.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(bt){return bt.init()});var pt=this.data;pt.trigger="barba",pt.next=pt.current,pt.current=e({},this.schemaPage),this.hooks.do("ready",pt),this.once(pt),this.q()},x.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},x.force=function(y){window.location.assign(y)},x.go=function(y,T,P){var I;if(T===void 0&&(T="barba"),this.transitions.isRunning)this.force(y);else if(!(I=T==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(y):this.prevent.run("sameUrl",null,null,y))||this.transitions.hasSelf)return T=this.history.change(y,T,P),P&&(P.stopPropagation(),P.preventDefault()),this.page(y,T,I)},x.once=function(y){try{var T=this;return Promise.resolve(T.hooks.do("beforeEnter",y)).then(function(){function P(){return Promise.resolve(T.hooks.do("afterEnter",y)).then(function(){})}var I=function(){if(T.transitions.hasOnce){var L=T.transitions.get(y,{once:!0});return Promise.resolve(T.transitions.doOnce({transition:L,data:y})).then(function(){})}}();return I&&I.then?I.then(P):P()})}catch(P){return Promise.reject(P)}},x.page=function(y,T,P){try{var I=function(){var V=L.data;return Promise.resolve(L.hooks.do("page",V)).then(function(){var H=h(function(){var Y=L.transitions.get(V,{once:!1,self:P});return Promise.resolve(L.transitions.doPage({data:V,page:k,transition:Y,wrapper:L._})).then(function(){L.q()})},function(){m.getLevel()===0&&L.force(V.current.url.href)});if(H&&H.then)return H.then(function(){})})},L=this;L.data.next.url=e({href:y},L.url.parse(y)),L.data.trigger=T;var k=L.cache.has(y)?L.cache.update(y,{action:"click"}).request:L.cache.set(y,L.request(y,L.timeout,L.onRequestError.bind(L,T)),"click").request,G=function(){if(L.transitions.shouldWait)return Promise.resolve(it(k,L.data)).then(function(){})}();return Promise.resolve(G&&G.then?G.then(I):I())}catch(V){return Promise.reject(V)}},x.onRequestError=function(y){this.transitions.isRunning=!1;for(var T=arguments.length,P=new Array(T>1?T-1:0),I=1;I<T;I++)P[I-1]=arguments[I];var L=P[0],k=P[1],G=this.cache.getAction(L);return this.cache.delete(L),!(this.$&&this.$(y,G,L,k)===!1||(G==="click"&&this.force(L),1))},x.prefetch=function(y){var T=this;this.cache.has(y)||this.cache.set(y,this.request(y,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(P){T.logger.error(P)}),"prefetch")},x.F=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},x.H=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},x.B=function(y){var T=this,P=this.I(y);if(P){var I=this.dom.getHref(P);this.prevent.checkHref(I)||this.cache.has(I)||this.cache.set(I,this.request(I,this.timeout,this.onRequestError.bind(this,P)).catch(function(L){T.logger.error(L)}),"enter")}},x.U=function(y){var T=this.I(y);if(T)return this.transitions.isRunning&&this.preventRunning?(y.preventDefault(),void y.stopPropagation()):void this.go(this.dom.getHref(T),T,y)},x.D=function(y){this.go(this.url.getHref(),"popstate",y)},x.I=function(y){for(var T=y.target;T&&!this.dom.getHref(T);)T=T.parentNode;if(T&&!this.prevent.checkLink(T,y,this.dom.getHref(T)))return T},x.q=function(){var y=this.url.getHref(),T={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:e({href:y},this.url.parse(y))};this.C={current:T,next:e({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},t(p,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),p}())})});var _S=mi((RV,Rv)=>{function Lv(){}Lv.prototype={on:function(r,t,e){var i=this.e||(this.e={});return(i[r]||(i[r]=[])).push({fn:t,ctx:e}),this},once:function(r,t,e){var i=this;function n(){i.off(r,n),t.apply(e,arguments)}return n._=t,this.on(r,n,e)},emit:function(r){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[r]||[]).slice(),i=0,n=e.length;for(i;i<n;i++)e[i].fn.apply(e[i].ctx,t);return this},off:function(r,t){var e=this.e||(this.e={}),i=e[r],n=[];if(i&&t)for(var s=0,a=i.length;s<a;s++)i[s].fn!==t&&i[s].fn._!==t&&n.push(i[s]);return n.length?e[r]=n:delete e[r],this}};Rv.exports=Lv;Rv.exports.TinyEmitter=Lv});var yS=mi((Fv,kv)=>{(function(r,t){typeof Fv=="object"&&typeof kv!="undefined"?kv.exports=t():typeof define=="function"&&define.amd?define(t):(r||self).virtualScroll=t()})(Fv,function(){var r=0;function t(m){return"__private_"+r+++"_"+m}function e(m,_){if(!Object.prototype.hasOwnProperty.call(m,_))throw new TypeError("attempted to use private field on non-instance");return m}function i(){}i.prototype={on:function(m,_,v){var b=this.e||(this.e={});return(b[m]||(b[m]=[])).push({fn:_,ctx:v}),this},once:function(m,_,v){var b=this;function C(){b.off(m,C),_.apply(v,arguments)}return C._=_,this.on(m,C,v)},emit:function(m){for(var _=[].slice.call(arguments,1),v=((this.e||(this.e={}))[m]||[]).slice(),b=0,C=v.length;b<C;b++)v[b].fn.apply(v[b].ctx,_);return this},off:function(m,_){var v=this.e||(this.e={}),b=v[m],C=[];if(b&&_)for(var M=0,E=b.length;M<E;M++)b[M].fn!==_&&b[M].fn._!==_&&C.push(b[M]);return C.length?v[m]=C:delete v[m],this}};var n=i;n.TinyEmitter=i;var s,a="virtualscroll",o=t("options"),h=t("el"),u=t("emitter"),d=t("event"),g=t("touchStart"),f=t("bodyTouchAction");return function(){function m(v){var b=this;Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),this._onWheel=function(C){var M=e(b,o)[o],E=e(b,d)[d];E.deltaX=C.wheelDeltaX||-1*C.deltaX,E.deltaY=C.wheelDeltaY||-1*C.deltaY,s.isFirefox&&C.deltaMode===1&&(E.deltaX*=M.firefoxMultiplier,E.deltaY*=M.firefoxMultiplier),E.deltaX*=M.mouseMultiplier,E.deltaY*=M.mouseMultiplier,b._notify(C)},this._onMouseWheel=function(C){var M=e(b,d)[d];M.deltaX=C.wheelDeltaX?C.wheelDeltaX:0,M.deltaY=C.wheelDeltaY?C.wheelDeltaY:C.wheelDelta,b._notify(C)},this._onTouchStart=function(C){var M=C.targetTouches?C.targetTouches[0]:C;e(b,g)[g].x=M.pageX,e(b,g)[g].y=M.pageY},this._onTouchMove=function(C){var M=e(b,o)[o];M.preventTouch&&!C.target.classList.contains(M.unpreventTouchClass)&&C.preventDefault();var E=e(b,d)[d],w=C.targetTouches?C.targetTouches[0]:C;E.deltaX=(w.pageX-e(b,g)[g].x)*M.touchMultiplier,E.deltaY=(w.pageY-e(b,g)[g].y)*M.touchMultiplier,e(b,g)[g].x=w.pageX,e(b,g)[g].y=w.pageY,b._notify(C)},this._onKeyDown=function(C){var M=e(b,d)[d];M.deltaX=M.deltaY=0;var E=window.innerHeight-40;switch(C.keyCode){case 37:case 38:M.deltaY=e(b,o)[o].keyStep;break;case 39:case 40:M.deltaY=-e(b,o)[o].keyStep;break;case 32:M.deltaY=E*(C.shiftKey?1:-1);break;default:return}b._notify(C)},e(this,h)[h]=window,v&&v.el&&(e(this,h)[h]=v.el,delete v.el),s||(s={hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in document,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}),e(this,o)[o]=Object.assign({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",useKeyboard:!0,useTouch:!0},v),e(this,u)[u]=new n,e(this,d)[d]={y:0,x:0,deltaX:0,deltaY:0},e(this,g)[g]={x:null,y:null},e(this,f)[f]=null,e(this,o)[o].passive!==void 0&&(this.listenerOptions={passive:e(this,o)[o].passive})}var _=m.prototype;return _._notify=function(v){var b=e(this,d)[d];b.x+=b.deltaX,b.y+=b.deltaY,e(this,u)[u].emit(a,{x:b.x,y:b.y,deltaX:b.deltaX,deltaY:b.deltaY,originalEvent:v})},_._bind=function(){s.hasWheelEvent&&e(this,h)[h].addEventListener("wheel",this._onWheel,this.listenerOptions),s.hasMouseWheelEvent&&e(this,h)[h].addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),s.hasTouch&&e(this,o)[o].useTouch&&(e(this,h)[h].addEventListener("touchstart",this._onTouchStart,this.listenerOptions),e(this,h)[h].addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),s.hasPointer&&s.hasTouchWin&&(e(this,f)[f]=document.body.style.msTouchAction,document.body.style.msTouchAction="none",e(this,h)[h].addEventListener("MSPointerDown",this._onTouchStart,!0),e(this,h)[h].addEventListener("MSPointerMove",this._onTouchMove,!0)),s.hasKeyDown&&e(this,o)[o].useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},_._unbind=function(){s.hasWheelEvent&&e(this,h)[h].removeEventListener("wheel",this._onWheel),s.hasMouseWheelEvent&&e(this,h)[h].removeEventListener("mousewheel",this._onMouseWheel),s.hasTouch&&(e(this,h)[h].removeEventListener("touchstart",this._onTouchStart),e(this,h)[h].removeEventListener("touchmove",this._onTouchMove)),s.hasPointer&&s.hasTouchWin&&(document.body.style.msTouchAction=e(this,f)[f],e(this,h)[h].removeEventListener("MSPointerDown",this._onTouchStart,!0),e(this,h)[h].removeEventListener("MSPointerMove",this._onTouchMove,!0)),s.hasKeyDown&&e(this,o)[o].useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},_.on=function(v,b){e(this,u)[u].on(a,v,b);var C=e(this,u)[u].e;C&&C[a]&&C[a].length===1&&this._bind()},_.off=function(v,b){e(this,u)[u].off(a,v,b);var C=e(this,u)[u].e;(!C[a]||C[a].length<=0)&&this._unbind()},_.destroy=function(){e(this,u)[u].off(),this._unbind()},m}()})});var zC=mi((KV,q0)=>{(function(){function r(_,v){document.addEventListener?_.addEventListener("scroll",v,!1):_.attachEvent("scroll",v)}function t(_){document.body?_():document.addEventListener?document.addEventListener("DOMContentLoaded",function v(){document.removeEventListener("DOMContentLoaded",v),_()}):document.attachEvent("onreadystatechange",function v(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",v),_())})}function e(_){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(_)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(_,v){_.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+v+";"}function n(_){var v=_.g.offsetWidth,b=v+100;return _.j.style.width=b+"px",_.i.scrollLeft=b,_.h.scrollLeft=_.h.scrollWidth+100,_.l!==v?(_.l=v,!0):!1}function s(_,v){function b(){var M=C;n(M)&&M.g.parentNode!==null&&v(M.l)}var C=_;r(_.h,b),r(_.i,b),n(_)}function a(_,v,b){v=v||{},b=b||window,this.family=_,this.style=v.style||"normal",this.weight=v.weight||"normal",this.stretch=v.stretch||"normal",this.context=b}var o=null,h=null,u=null,d=null;function g(_){return h===null&&(f(_)&&/Apple/.test(window.navigator.vendor)?(_=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),h=!!_&&603>parseInt(_[1],10)):h=!1),h}function f(_){return d===null&&(d=!!_.document.fonts),d}function m(_,v){var b=_.style,C=_.weight;if(u===null){var M=document.createElement("div");try{M.style.font="condensed 100px sans-serif"}catch{}u=M.style.font!==""}return[b,C,u?_.stretch:"","100px",v].join(" ")}a.prototype.load=function(_,v){var b=this,C=_||"BESbswy",M=0,E=v||3e3,w=new Date().getTime();return new Promise(function(A,R){if(f(b.context)&&!g(b.context)){var N=new Promise(function(X,at){function ft(){new Date().getTime()-w>=E?at(Error(""+E+"ms timeout exceeded")):b.context.document.fonts.load(m(b,'"'+b.family+'"'),C).then(function(gt){1<=gt.length?X():setTimeout(ft,25)},at)}ft()}),D=new Promise(function(X,at){M=setTimeout(function(){at(Error(""+E+"ms timeout exceeded"))},E)});Promise.race([D,N]).then(function(){clearTimeout(M),A(b)},R)}else t(function(){function X(){var ct;(ct=xt!=-1&&nt!=-1||xt!=-1&&it!=-1||nt!=-1&&it!=-1)&&((ct=xt!=nt&&xt!=it&&nt!=it)||(o===null&&(ct=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!ct&&(536>parseInt(ct[1],10)||parseInt(ct[1],10)===536&&11>=parseInt(ct[2],10))),ct=o&&(xt==tt&&nt==tt&&it==tt||xt==W&&nt==W&&it==W||xt==Q&&nt==Q&&it==Q)),ct=!ct),ct&&(ot.parentNode!==null&&ot.parentNode.removeChild(ot),clearTimeout(M),A(b))}function at(){if(new Date().getTime()-w>=E)ot.parentNode!==null&&ot.parentNode.removeChild(ot),R(Error(""+E+"ms timeout exceeded"));else{var ct=b.context.document.hidden;(ct===!0||ct===void 0)&&(xt=ft.g.offsetWidth,nt=gt.g.offsetWidth,it=ut.g.offsetWidth,X()),M=setTimeout(at,50)}}var ft=new e(C),gt=new e(C),ut=new e(C),xt=-1,nt=-1,it=-1,tt=-1,W=-1,Q=-1,ot=document.createElement("div");ot.dir="ltr",i(ft,m(b,"sans-serif")),i(gt,m(b,"serif")),i(ut,m(b,"monospace")),ot.appendChild(ft.g),ot.appendChild(gt.g),ot.appendChild(ut.g),b.context.document.body.appendChild(ot),tt=ft.g.offsetWidth,W=gt.g.offsetWidth,Q=ut.g.offsetWidth,at(),s(ft,function(ct){xt=ct,X()}),i(ft,m(b,'"'+b.family+'",sans-serif')),s(gt,function(ct){nt=ct,X()}),i(gt,m(b,'"'+b.family+'",serif')),s(ut,function(ct){it=ct,X()}),i(ut,m(b,'"'+b.family+'",monospace'))})})},typeof q0=="object"?q0.exports=a:(window.FontFaceObserver=a,window.FontFaceObserver.prototype.load=a.prototype.load)})()});function as(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function d_(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var dr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Bo={duration:.5,overwrite:!1,delay:0},Yd,pr,bi,Hr=1e8,Xe=1/Hr,jd=Math.PI*2,LE=jd/4,RE=0,p_=Math.sqrt,FE=Math.cos,kE=Math.sin,Ei=function(t){return typeof t=="string"},hi=function(t){return typeof t=="function"},os=function(t){return typeof t=="number"},nc=function(t){return typeof t=="undefined"},Fn=function(t){return typeof t=="object"},mr=function(t){return t!==!1},m_=function(){return typeof window!="undefined"},sc=function(t){return hi(t)||Ei(t)},g_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Yi=Array.isArray,Zd=/(?:-?\.?\d|\.)+/gi,$d=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,La=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Jd=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Kd=/[+-]=-?[.\d]+/,v_=/[^,'"\[\]\s]+/gi,OE=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ni,Wr,Qd,tp,Ir={},ac={},__,y_=function(t){return(ac=Fa(t,Ir))&&ir},oc=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},lc=function(t,e){return!e&&console.warn(t)},x_=function(t,e){return t&&(Ir[t]=e)&&ac&&(ac[t]=e)||Ir},yh=function(){return 0},NE={suppressEvents:!0,isStart:!0,kill:!1},hc={suppressEvents:!0,kill:!1},BE={suppressEvents:!0},ep={},Os=[],ip={},b_,gr={},rp={},w_=30,uc=[],np="",sp=function(t){var e=t[0],i,n;if(Fn(e)||hi(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=uc.length;n--&&!uc[n].targetTest(e););i=uc[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new gp(t[n],i)))||t.splice(n,1);return t},Ns=function(t){return t._gsap||sp(Yr(t))[0]._gsap},ap=function(t,e,i){return(i=t[e])&&hi(i)?t[e]():nc(i)&&t.getAttribute&&t.getAttribute(e)||i},tr=function(t,e){return(t=t.split(",")).forEach(e)||t},ui=function(t){return Math.round(t*1e5)/1e5||0},Ui=function(t){return Math.round(t*1e7)/1e7||0},Ra=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},zE=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},cc=function(){var t=Os.length,e=Os.slice(0),i,n;for(ip={},Os.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},S_=function(t,e,i,n){Os.length&&cc(),t.render(e,i,n||pr&&e<0&&(t._initted||t._startAt)),Os.length&&cc()},T_=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(v_).length<2?e:Ei(t)?t.trim():t},C_=function(t){return t},Xr=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},VE=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Fa=function(t,e){for(var i in e)t[i]=e[i];return t},E_=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Fn(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},fc=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},xh=function(t){var e=t.parent||ni,i=t.keyframes?VE(Yi(t.keyframes)):Xr;if(mr(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},UE=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},M_=function(t,e,i,n,s){i===void 0&&(i="_first"),n===void 0&&(n="_last");var a=t[n],o;if(s)for(o=e[s];a&&a[s]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t,e},dc=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,a=e._next;s?s._next=a:t[i]===e&&(t[i]=a),a?a._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},Bs=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},ka=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},GE=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},op=function(t,e,i,n){return t._startAt&&(pr?t._startAt.revert(hc):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},HE=function r(t){return!t||t._ts&&r(t.parent)},P_=function(t){return t._repeat?zo(t._tTime,t=t.duration()+t._rDelay)*t:0},zo=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},pc=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},mc=function(t){return t._end=Ui(t._start+(t._tDur/Math.abs(t._ts||t._rts||Xe)||0))},gc=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ui(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),mc(t),i._dirty||ka(i,t)),t},A_=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=pc(t.rawTime(),e),(!e._dur||wh(0,e.totalDuration(),i)-e._tTime>Xe)&&e.render(i,!0)),ka(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Xe}},kn=function(t,e,i,n){return e.parent&&Bs(e),e._start=Ui((os(i)?i:i||t!==ni?qr(t,i,e):t._time)+e._delay),e._end=Ui(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),M_(t,e,"_first","_last",t._sort?"_start":0),lp(e)||(t._recent=e),n||A_(t,e),t._ts<0&&gc(t,t._tTime),t},I_=function(t,e){return(Ir.ScrollTrigger||oc("scrollTrigger",e))&&Ir.ScrollTrigger.create(e,t)},D_=function(t,e,i,n,s){if(xp(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!pr&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&b_!==vr.frame)return Os.push(t),t._lazy=[s,n],1},WE=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},lp=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},XE=function(t,e,i,n){var s=t.ratio,a=e<0||!e&&(!t._start&&WE(t)&&!(!t._initted&&lp(t))||(t._ts<0||t._dp._ts<0)&&!lp(t))?0:1,o=t._rDelay,h=0,u,d,g;if(o&&t._repeat&&(h=wh(0,t._tDur,e),d=zo(h,o),t._yoyo&&d&1&&(a=1-a),d!==zo(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||pr||n||t._zTime===Xe||!e&&t._zTime){if(!t._initted&&D_(t,e,n,i,h))return;for(g=t._zTime,t._zTime=e||(i?Xe:0),i||(i=e&&!g),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=h,u=t._pt;u;)u.r(a,u.d),u=u._next;e<0&&op(t,e,i,!0),t._onUpdate&&!i&&jr(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&jr(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&Bs(t,1),!i&&!pr&&(jr(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},qE=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Vo=function(t,e,i,n){var s=t._repeat,a=Ui(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:Ui(a*(s+1)+t._rDelay*s):a,o>0&&!n&&gc(t,t._tTime=t._tDur*o),t.parent&&mc(t),i||ka(t.parent,t),t},L_=function(t){return t instanceof ji?ka(t):Vo(t,t._dur)},YE={_start:0,endTime:yh,totalDuration:yh},qr=function r(t,e,i){var n=t.labels,s=t._recent||YE,a=t.duration()>=Hr?s.endTime(!1):t._dur,o,h,u;return Ei(e)&&(isNaN(e)||e in n)?(h=e.charAt(0),u=e.substr(-1)==="%",o=e.indexOf("="),h==="<"||h===">"?(o>=0&&(e=e.replace(/=/,"")),(h==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(u?(o<0?s:i).totalDuration()/100:1)):o<0?(e in n||(n[e]=a),n[e]):(h=parseFloat(e.charAt(o-1)+e.substr(o+1)),u&&i&&(h=h/100*(Yi(i)?i[0]:i).totalDuration()),o>1?r(t,e.substr(0,o-1),i)+h:a+h)):e==null?a:+e},bh=function(t,e,i){var n=os(e[1]),s=(n?2:1)+(t<2?0:1),a=e[s],o,h;if(n&&(a.duration=e[1]),a.parent=i,t){for(o=a,h=i;h&&!("immediateRender"in o);)o=h.vars.defaults||{},h=mr(h.vars.inherit)&&h.parent;a.immediateRender=mr(o.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new wi(e[0],a,e[s+1])},zs=function(t,e){return t||t===0?e(t):e},wh=function(t,e,i){return i<t?t:i>e?e:i},Gi=function(t,e){return!Ei(t)||!(e=OE.exec(t))?"":e[1]},jE=function(t,e,i){return zs(i,function(n){return wh(t,e,n)})},hp=[].slice,R_=function(t,e){return t&&Fn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Fn(t[0]))&&!t.nodeType&&t!==Wr},ZE=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return Ei(n)&&!e||R_(n,1)?(s=i).push.apply(s,Yr(n)):i.push(n)})||i},Yr=function(t,e,i){return bi&&!e&&bi.selector?bi.selector(t):Ei(t)&&!i&&(Qd||!Ho())?hp.call((e||tp).querySelectorAll(t),0):Yi(t)?ZE(t,i):R_(t)?hp.call(t,0):t?[t]:[]},up=function(t){return t=Yr(t)[0]||lc("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Yr(e,i.querySelectorAll?i:i===t?lc("Invalid scope")||tp.createElement("div"):t)}},F_=function(t){return t.sort(function(){return .5-Math.random()})},k_=function(t){if(hi(t))return t;var e=Fn(t)?t:{each:t},i=Oa(e.ease),n=e.from||0,s=parseFloat(e.base)||0,a={},o=n>0&&n<1,h=isNaN(n)||o,u=e.axis,d=n,g=n;return Ei(n)?d=g={center:.5,edges:.5,end:1}[n]||0:!o&&h&&(d=n[0],g=n[1]),function(f,m,_){var v=(_||e).length,b=a[v],C,M,E,w,A,R,N,D,X;if(!b){if(X=e.grid==="auto"?0:(e.grid||[1,Hr])[1],!X){for(N=-Hr;N<(N=_[X++].getBoundingClientRect().left)&&X<v;);X--}for(b=a[v]=[],C=h?Math.min(X,v)*d-.5:n%X,M=X===Hr?0:h?v*g/X-.5:n/X|0,N=0,D=Hr,R=0;R<v;R++)E=R%X-C,w=M-(R/X|0),b[R]=A=u?Math.abs(u==="y"?w:E):p_(E*E+w*w),A>N&&(N=A),A<D&&(D=A);n==="random"&&F_(b),b.max=N-D,b.min=D,b.v=v=(parseFloat(e.amount)||parseFloat(e.each)*(X>v?v-1:u?u==="y"?v/X:X:Math.max(X,v/X))||0)*(n==="edges"?-1:1),b.b=v<0?s-v:s,b.u=Gi(e.amount||e.each)||0,i=i&&v<0?W_(i):i}return v=(b[f]-b.min)/b.max||0,Ui(b.b+(i?i(v):v)*b.v)+b.u}},cp=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=Ui(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(os(i)?0:Gi(i))}},O_=function(t,e){var i=Yi(t),n,s;return!i&&Fn(t)&&(n=i=t.radius||Hr,t.values?(t=Yr(t.values),(s=!os(t[0]))&&(n*=n)):t=cp(t.increment)),zs(e,i?hi(t)?function(a){return s=t(a),Math.abs(s-a)<=n?s:a}:function(a){for(var o=parseFloat(s?a.x:a),h=parseFloat(s?a.y:0),u=Hr,d=0,g=t.length,f,m;g--;)s?(f=t[g].x-o,m=t[g].y-h,f=f*f+m*m):f=Math.abs(t[g]-o),f<u&&(u=f,d=g);return d=!n||u<=n?t[d]:a,s||d===a||os(a)?d:d+Gi(a)}:cp(t))},N_=function(t,e,i,n){return zs(Yi(t)?!e:i===!0?!!(i=0):!n,function(){return Yi(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},$E=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,a){return a(s)},n)}},JE=function(t,e){return function(i){return t(parseFloat(i))+(e||Gi(i))}},KE=function(t,e,i){return z_(t,e,0,1,i)},B_=function(t,e,i){return zs(i,function(n){return t[~~e(n)]})},QE=function r(t,e,i){var n=e-t;return Yi(t)?B_(t,r(0,t.length),e):zs(i,function(s){return(n+(s-t)%n)%n+t})},tM=function r(t,e,i){var n=e-t,s=n*2;return Yi(t)?B_(t,r(0,t.length-1),e):zs(i,function(a){return a=(s+(a-t)%s)%s||0,t+(a>n?s-a:a)})},Uo=function(t){for(var e=0,i="",n,s,a,o;~(n=t.indexOf("random(",e));)a=t.indexOf(")",n),o=t.charAt(n+7)==="[",s=t.substr(n+7,a-n-7).match(o?v_:Zd),i+=t.substr(e,n-e)+N_(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),e=a+1;return i+t.substr(e,t.length-e)},z_=function(t,e,i,n,s){var a=e-t,o=n-i;return zs(s,function(h){return i+((h-t)/a*o||0)})},eM=function r(t,e,i,n){var s=isNaN(t+e)?0:function(m){return(1-m)*t+m*e};if(!s){var a=Ei(t),o={},h,u,d,g,f;if(i===!0&&(n=1)&&(i=null),a)t={p:t},e={p:e};else if(Yi(t)&&!Yi(e)){for(d=[],g=t.length,f=g-2,u=1;u<g;u++)d.push(r(t[u-1],t[u]));g--,s=function(_){_*=g;var v=Math.min(f,~~_);return d[v](_-v)},i=e}else n||(t=Fa(Yi(t)?[]:{},t));if(!d){for(h in e)vp.call(o,t,h,"get",e[h]);s=function(_){return Sp(_,o)||(a?t.p:t)}}}return zs(i,s)},V_=function(t,e,i){var n=t.labels,s=Hr,a,o,h;for(a in n)o=n[a]-e,o<0==!!i&&o&&s>(o=Math.abs(o))&&(h=a,s=o);return h},jr=function(t,e,i){var n=t.vars,s=n[e],a=bi,o=t._ctx,h,u,d;if(!!s)return h=n[e+"Params"],u=n.callbackScope||t,i&&Os.length&&cc(),o&&(bi=o),d=h?s.apply(u,h):s.call(u),bi=a,d},Sh=function(t){return Bs(t),t.scrollTrigger&&t.scrollTrigger.kill(!!pr),t.progress()<1&&jr(t,"onInterrupt"),t},Go,iM=function(t){t=!t.name&&t.default||t;var e=t.name,i=hi(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:yh,render:Sp,add:vp,kill:_M,modifier:vM,rawVars:0},a={targetTest:0,get:0,getSetter:vc,aliases:{},register:0};if(Ho(),t!==n){if(gr[e])return;Xr(n,Xr(fc(t,s),a)),Fa(n.prototype,Fa(s,fc(t,a))),gr[n.prop=e]=n,t.targetTest&&(uc.push(n),ep[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}x_(e,n),t.register&&t.register(ir,n,er)},Ye=255,Th={aqua:[0,Ye,Ye],lime:[0,Ye,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ye],navy:[0,0,128],white:[Ye,Ye,Ye],olive:[128,128,0],yellow:[Ye,Ye,0],orange:[Ye,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ye,0,0],pink:[Ye,192,203],cyan:[0,Ye,Ye],transparent:[Ye,Ye,Ye,0]},fp=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*Ye+.5|0},U_=function(t,e,i){var n=t?os(t)?[t>>16,t>>8&Ye,t&Ye]:0:Th.black,s,a,o,h,u,d,g,f,m,_;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Th[t])n=Th[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+s+s+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&Ye,n&Ye,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&Ye,t&Ye]}else if(t.substr(0,3)==="hsl"){if(n=_=t.match(Zd),!e)h=+n[0]%360/360,u=+n[1]/100,d=+n[2]/100,a=d<=.5?d*(u+1):d+u-d*u,s=d*2-a,n.length>3&&(n[3]*=1),n[0]=fp(h+1/3,s,a),n[1]=fp(h,s,a),n[2]=fp(h-1/3,s,a);else if(~t.indexOf("="))return n=t.match($d),i&&n.length<4&&(n[3]=1),n}else n=t.match(Zd)||Th.transparent;n=n.map(Number)}return e&&!_&&(s=n[0]/Ye,a=n[1]/Ye,o=n[2]/Ye,g=Math.max(s,a,o),f=Math.min(s,a,o),d=(g+f)/2,g===f?h=u=0:(m=g-f,u=d>.5?m/(2-g-f):m/(g+f),h=g===s?(a-o)/m+(a<o?6:0):g===a?(o-s)/m+2:(s-a)/m+4,h*=60),n[0]=~~(h+.5),n[1]=~~(u*100+.5),n[2]=~~(d*100+.5)),i&&n.length<4&&(n[3]=1),n},G_=function(t){var e=[],i=[],n=-1;return t.split(ls).forEach(function(s){var a=s.match(La)||[];e.push.apply(e,a),i.push(n+=a.length+1)}),e.c=i,e},H_=function(t,e,i){var n="",s=(t+n).match(ls),a=e?"hsla(":"rgba(",o=0,h,u,d,g;if(!s)return t;if(s=s.map(function(f){return(f=U_(f,e,1))&&a+(e?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(d=G_(t),h=i.c,h.join(n)!==d.c.join(n)))for(u=t.replace(ls,"1").split(La),g=u.length-1;o<g;o++)n+=u[o]+(~h.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!u)for(u=t.split(ls),g=u.length-1;o<g;o++)n+=u[o]+s[o];return n+u[g]},ls=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Th)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),rM=/hsl[a]?\(/,dp=function(t){var e=t.join(" "),i;if(ls.lastIndex=0,ls.test(e))return i=rM.test(e),t[1]=H_(t[1],i),t[0]=H_(t[0],i,G_(t[1])),!0},Ch,vr=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,a=s,o=[],h,u,d,g,f,m,_=function v(b){var C=r()-n,M=b===!0,E,w,A,R;if(C>t&&(i+=C-e),n+=C,A=n-i,E=A-a,(E>0||M)&&(R=++g.frame,f=A-g.time*1e3,g.time=A=A/1e3,a+=E+(E>=s?4:s-E),w=1),M||(h=u(v)),w)for(m=0;m<o.length;m++)o[m](A,f,R,b)};return g={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(b){return f/(1e3/(b||60))},wake:function(){__&&(!Qd&&m_()&&(Wr=Qd=window,tp=Wr.document||{},Ir.gsap=ir,(Wr.gsapVersions||(Wr.gsapVersions=[])).push(ir.version),y_(ac||Wr.GreenSockGlobals||!Wr.gsap&&Wr||{}),d=Wr.requestAnimationFrame),h&&g.sleep(),u=d||function(b){return setTimeout(b,a-g.time*1e3+1|0)},Ch=1,_(2))},sleep:function(){(d?Wr.cancelAnimationFrame:clearTimeout)(h),Ch=0,u=yh},lagSmoothing:function(b,C){t=b||1/Xe,e=Math.min(C,t,0)},fps:function(b){s=1e3/(b||240),a=g.time*1e3+s},add:function(b,C,M){var E=C?function(w,A,R,N){b(w,A,R,N),g.remove(E)}:b;return g.remove(b),o[M?"unshift":"push"](E),Ho(),E},remove:function(b,C){~(C=o.indexOf(b))&&o.splice(C,1)&&m>=C&&m--},_listeners:o},g}(),Ho=function(){return!Ch&&vr.wake()},Oe={},nM=/^[\d.\-M][\d.\-,\s]/,sM=/["']/g,aM=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,a=i.length,o,h,u;s<a;s++)h=i[s],o=s!==a-1?h.lastIndexOf(","):h.length,u=h.substr(0,o),e[n]=isNaN(u)?u.replace(sM,"").trim():+u,n=h.substr(o+1).trim();return e},oM=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},lM=function(t){var e=(t+"").split("("),i=Oe[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[aM(e[1])]:oM(t).split(",").map(T_)):Oe._CE&&nM.test(t)?Oe._CE("",t):i},W_=function(t){return function(e){return 1-t(1-e)}},X_=function r(t,e){for(var i=t._first,n;i;)i instanceof ji?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Oa=function(t,e){return t&&(hi(t)?t:Oe[t]||lM(t))||e},Na=function(t,e,i,n){i===void 0&&(i=function(h){return 1-e(1-h)}),n===void 0&&(n=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},a;return tr(t,function(o){Oe[o]=Ir[o]=s,Oe[a=o.toLowerCase()]=i;for(var h in s)Oe[a+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=Oe[o+"."+h]=s[h]}),s},q_=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},pp=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),a=s/jd*(Math.asin(1/n)||0),o=function(d){return d===1?1:n*Math.pow(2,-10*d)*kE((d-a)*s)+1},h=t==="out"?o:t==="in"?function(u){return 1-o(1-u)}:q_(o);return s=jd/s,h.config=function(u,d){return r(t,u,d)},h},mp=function r(t,e){e===void 0&&(e=1.70158);var i=function(a){return a?--a*a*((e+1)*a+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:q_(i);return n.config=function(s){return r(t,s)},n};tr("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;Na(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn;Na("Elastic",pp("in"),pp("out"),pp());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(o){return o<e?r*o*o:o<i?r*Math.pow(o-1.5/t,2)+.75:o<n?r*(o-=2.25/t)*o+.9375:r*Math.pow(o-2.625/t,2)+.984375};Na("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Na("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});Na("Circ",function(r){return-(p_(1-r*r)-1)});Na("Sine",function(r){return r===1?1:-FE(r*LE)+1});Na("Back",mp("in"),mp("out"),mp());Oe.SteppedEase=Oe.steps=Ir.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,a=1-Xe;return function(o){return((n*wh(0,a,o)|0)+s)*i}}};Bo.ease=Oe["quad.out"];tr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return np+=r+","+r+"Params,"});var gp=function(t,e){this.id=RE++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:ap,this.set=e?e.getSetter:vc},Wo=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Vo(this,+e.duration,1,1),this.data=e.data,bi&&(this._ctx=bi,bi.data.push(this)),Ch||vr.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Vo(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(Ho(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(gc(this,i),!s._dp||s.parent||A_(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&kn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Xe||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),S_(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+P_(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+P_(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?zo(this._tTime,s)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-Xe?0:this._rts;if(this._rts===i)return this;var n=this.parent&&this._ts?pc(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Xe?0:this._rts,this.totalTime(wh(-this._delay,this._tDur,n),!0),mc(this),GE(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ho(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Xe&&(this._tTime-=Xe)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&kn(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(mr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?pc(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=BE);var n=pr;return pr=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),pr=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(n._ts||1),n=n._dp;return!this.parent&&this.vars.immediateRender?-1:s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,L_(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,L_(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(qr(this,i),mr(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,mr(n))},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Xe:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Xe,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-Xe)},t.eventCallback=function(i,n,s){var a=this.vars;return arguments.length>1?(n?(a[i]=n,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},t.then=function(i){var n=this;return new Promise(function(s){var a=hi(i)?i:C_,o=function(){var u=n.then;n.then=null,hi(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=u),s(a),n.then=u};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){Sh(this)},r}();Xr(Wo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Xe,_prom:0,_ps:!1,_rts:1});var ji=function(r){d_(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=mr(i.sortChildren),ni&&kn(i.parent||ni,as(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&I_(as(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,a){return bh(0,arguments,this),this},e.from=function(n,s,a){return bh(1,arguments,this),this},e.fromTo=function(n,s,a,o){return bh(2,arguments,this),this},e.set=function(n,s,a){return s.duration=0,s.parent=this,xh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new wi(n,s,qr(this,a),1),this},e.call=function(n,s,a){return kn(this,wi.delayedCall(0,n,s),a)},e.staggerTo=function(n,s,a,o,h,u,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=d,a.parent=this,new wi(n,a,qr(this,h)),this},e.staggerFrom=function(n,s,a,o,h,u,d){return a.runBackwards=1,xh(a).immediateRender=mr(a.immediateRender),this.staggerTo(n,s,a,o,h,u,d)},e.staggerFromTo=function(n,s,a,o,h,u,d,g){return o.startAt=a,xh(o).immediateRender=mr(o.immediateRender),this.staggerTo(n,s,o,h,u,d,g)},e.render=function(n,s,a){var o=this._time,h=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=n<=0?0:Ui(n),g=this._zTime<0!=n<0&&(this._initted||!u),f,m,_,v,b,C,M,E,w,A,R,N;if(this!==ni&&d>h&&n>=0&&(d=h),d!==this._tTime||a||g){if(o!==this._time&&u&&(d+=this._time-o,n+=this._time-o),f=d,w=this._start,E=this._ts,C=!E,g&&(u||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(R=this._yoyo,b=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(b*100+n,s,a);if(f=Ui(d%b),d===h?(v=this._repeat,f=u):(v=~~(d/b),v&&v===d/b&&(f=u,v--),f>u&&(f=u)),A=zo(this._tTime,b),!o&&this._tTime&&A!==v&&(A=v),R&&v&1&&(f=u-f,N=1),v!==A&&!this._lock){var D=R&&A&1,X=D===(R&&v&1);if(v<A&&(D=!D),o=D?0:u,this._lock=1,this.render(o||(N?0:Ui(v*b)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&jr(this,"onRepeat"),this.vars.repeatRefresh&&!N&&(this.invalidate()._lock=1),o&&o!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,h=this._tDur,X&&(this._lock=2,o=D?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!N&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;X_(this,N)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=qE(this,Ui(o),Ui(f)),M&&(d-=f-(f=M._start))),this._tTime=d,this._time=f,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&f&&!s&&(jr(this,"onStart"),this._tTime!==d))return this;if(f>=o&&n>=0)for(m=this._first;m;){if(_=m._next,(m._act||f>=m._start)&&m._ts&&M!==m){if(m.parent!==this)return this.render(n,s,a);if(m.render(m._ts>0?(f-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(f-m._start)*m._ts,s,a),f!==this._time||!this._ts&&!C){M=0,_&&(d+=this._zTime=-Xe);break}}m=_}else{m=this._last;for(var at=n<0?n:f;m;){if(_=m._prev,(m._act||at<=m._end)&&m._ts&&M!==m){if(m.parent!==this)return this.render(n,s,a);if(m.render(m._ts>0?(at-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(at-m._start)*m._ts,s,a||pr&&(m._initted||m._startAt)),f!==this._time||!this._ts&&!C){M=0,_&&(d+=this._zTime=at?-Xe:Xe);break}}m=_}}if(M&&!s&&(this.pause(),M.render(f>=o?0:-Xe)._zTime=f>=o?1:-1,this._ts))return this._start=w,mc(this),this.render(n,s,a);this._onUpdate&&!s&&jr(this,"onUpdate",!0),(d===h&&this._tTime>=this.totalDuration()||!d&&o)&&(w===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(d===h&&this._ts>0||!d&&this._ts<0)&&Bs(this,1),!s&&!(n<0&&!o)&&(d||o||!h)&&(jr(this,d===h&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var a=this;if(os(s)||(s=qr(this,s,n)),!(n instanceof Wo)){if(Yi(n))return n.forEach(function(o){return a.add(o,s)}),this;if(Ei(n))return this.addLabel(n,s);if(hi(n))n=wi.delayedCall(0,n);else return this}return this!==n?kn(this,n,s):this},e.getChildren=function(n,s,a,o){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Hr);for(var h=[],u=this._first;u;)u._start>=o&&(u instanceof wi?s&&h.push(u):(a&&h.push(u),n&&h.push.apply(h,u.getChildren(!0,s,a)))),u=u._next;return h},e.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},e.remove=function(n){return Ei(n)?this.removeLabel(n):hi(n)?this.killTweensOf(n):(dc(this,n),n===this._recent&&(this._recent=this._last),ka(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ui(vr.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=qr(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,a){var o=wi.delayedCall(0,s||yh,a);return o.data="isPause",this._hasPause=1,kn(this,o,qr(this,n))},e.removePause=function(n){var s=this._first;for(n=qr(this,n);s;)s._start===n&&s.data==="isPause"&&Bs(s),s=s._next},e.killTweensOf=function(n,s,a){for(var o=this.getTweensOf(n,a),h=o.length;h--;)Vs!==o[h]&&o[h].kill(n,s);return this},e.getTweensOf=function(n,s){for(var a=[],o=Yr(n),h=this._first,u=os(s),d;h;)h instanceof wi?zE(h._targets,o)&&(u?(!Vs||h._initted&&h._ts)&&h.globalTime(0)<=s&&h.globalTime(h.totalDuration())>s:!s||h.isActive())&&a.push(h):(d=h.getTweensOf(o,s)).length&&a.push.apply(a,d),h=h._next;return a},e.tweenTo=function(n,s){s=s||{};var a=this,o=qr(a,n),h=s,u=h.startAt,d=h.onStart,g=h.onStartParams,f=h.immediateRender,m,_=wi.to(a,Xr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||Xe,onStart:function(){if(a.pause(),!m){var b=s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());_._dur!==b&&Vo(_,b,0,1).render(_._time,!0,!0),m=1}d&&d.apply(_,g||[])}},s));return f?_.render(0):_},e.tweenFromTo=function(n,s,a){return this.tweenTo(s,Xr({startAt:{time:qr(this,n)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),V_(this,qr(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),V_(this,qr(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Xe)},e.shiftChildren=function(n,s,a){a===void 0&&(a=0);for(var o=this._first,h=this.labels,u;o;)o._start>=a&&(o._start+=n,o._end+=n),o=o._next;if(s)for(u in h)h[u]>=a&&(h[u]+=n);return ka(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ka(this)},e.totalDuration=function(n){var s=0,a=this,o=a._last,h=Hr,u,d,g;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(g=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>h&&a._sort&&o._ts&&!a._lock?(a._lock=1,kn(a,o,d-o._delay,1)._lock=0):h=d,d<0&&o._ts&&(s-=d,(!g&&!a._dp||g&&g.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),h=0),o._end>s&&o._ts&&(s=o._end),o=u;Vo(a,a===ni&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(n){if(ni._ts&&(S_(ni,pc(n,ni)),b_=vr.frame),vr.frame>=w_){w_+=dr.autoSleep||120;var s=ni._first;if((!s||!s._ts)&&dr.autoSleep&&vr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||vr.sleep()}}},t}(Wo);Xr(ji.prototype,{_lock:0,_hasPause:0,_forcing:0});var hM=function(t,e,i,n,s,a,o){var h=new er(this._pt,t,e,0,1,wp,null,s),u=0,d=0,g,f,m,_,v,b,C,M;for(h.b=i,h.e=n,i+="",n+="",(C=~n.indexOf("random("))&&(n=Uo(n)),a&&(M=[i,n],a(M,t,e),i=M[0],n=M[1]),f=i.match(Jd)||[];g=Jd.exec(n);)_=g[0],v=n.substring(u,g.index),m?m=(m+1)%5:v.substr(-5)==="rgba("&&(m=1),_!==f[d++]&&(b=parseFloat(f[d-1])||0,h._pt={_next:h._pt,p:v||d===1?v:",",s:b,c:_.charAt(1)==="="?Ra(b,_)-b:parseFloat(_)-b,m:m&&m<4?Math.round:0},u=Jd.lastIndex);return h.c=u<n.length?n.substring(u,n.length):"",h.fp=o,(Kd.test(n)||C)&&(h.e=0),this._pt=h,h},vp=function(t,e,i,n,s,a,o,h,u,d){hi(n)&&(n=n(s||0,t,a));var g=t[e],f=i!=="get"?i:hi(g)?u?t[e.indexOf("set")||!hi(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():g,m=hi(g)?u?pM:Z_:bp,_;if(Ei(n)&&(~n.indexOf("random(")&&(n=Uo(n)),n.charAt(1)==="="&&(_=Ra(f,n)+(Gi(f)||0),(_||_===0)&&(n=_))),!d||f!==n||yp)return!isNaN(f*n)&&n!==""?(_=new er(this._pt,t,e,+f||0,n-(f||0),typeof g=="boolean"?gM:$_,0,m),u&&(_.fp=u),o&&_.modifier(o,this,t),this._pt=_):(!g&&!(e in t)&&oc(e,n),hM.call(this,t,e,f,n,m,h||dr.stringFilter,u))},uM=function(t,e,i,n,s){if(hi(t)&&(t=Eh(t,s,e,i,n)),!Fn(t)||t.style&&t.nodeType||Yi(t)||g_(t))return Ei(t)?Eh(t,s,e,i,n):t;var a={},o;for(o in t)a[o]=Eh(t[o],s,e,i,n);return a},_p=function(t,e,i,n,s,a){var o,h,u,d;if(gr[t]&&(o=new gr[t]).init(s,o.rawVars?e[t]:uM(e[t],n,s,a,i),i,n,a)!==!1&&(i._pt=h=new er(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==Go))for(u=i._ptLookup[i._targets.indexOf(s)],d=o._props.length;d--;)u[o._props[d]]=h;return o},Vs,yp,xp=function r(t,e,i){var n=t.vars,s=n.ease,a=n.startAt,o=n.immediateRender,h=n.lazy,u=n.onUpdate,d=n.onUpdateParams,g=n.callbackScope,f=n.runBackwards,m=n.yoyoEase,_=n.keyframes,v=n.autoRevert,b=t._dur,C=t._startAt,M=t._targets,E=t.parent,w=E&&E.data==="nested"?E.vars.targets:M,A=t._overwrite==="auto"&&!Yd,R=t.timeline,N,D,X,at,ft,gt,ut,xt,nt,it,tt,W,Q;if(R&&(!_||!s)&&(s="none"),t._ease=Oa(s,Bo.ease),t._yEase=m?W_(Oa(m===!0?s:m,Bo.ease)):0,m&&t._yoyo&&!t._repeat&&(m=t._yEase,t._yEase=t._ease,t._ease=m),t._from=!R&&!!n.runBackwards,!R||_&&!n.stagger){if(xt=M[0]?Ns(M[0]).harness:0,W=xt&&n[xt.prop],N=fc(n,ep),C&&(C._zTime<0&&C.progress(1),e<0&&f&&o&&!v?C.render(-1,!0):C.revert(f&&b?hc:NE),C._lazy=0),a){if(Bs(t._startAt=wi.set(M,Xr({data:"isStart",overwrite:!1,parent:E,immediateRender:!0,lazy:mr(h),startAt:null,delay:0,onUpdate:u,onUpdateParams:d,callbackScope:g,stagger:0},a))),t._startAt._dp=0,e<0&&(pr||!o&&!v)&&t._startAt.revert(hc),o&&b&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(f&&b&&!C){if(e&&(o=!1),X=Xr({overwrite:!1,data:"isFromStart",lazy:o&&mr(h),immediateRender:o,stagger:0,parent:E},N),W&&(X[xt.prop]=W),Bs(t._startAt=wi.set(M,X)),t._startAt._dp=0,e<0&&(pr?t._startAt.revert(hc):t._startAt.render(-1,!0)),t._zTime=e,!o)r(t._startAt,Xe,Xe);else if(!e)return}for(t._pt=t._ptCache=0,h=b&&mr(h)||h&&!b,D=0;D<M.length;D++){if(ft=M[D],ut=ft._gsap||sp(M)[D]._gsap,t._ptLookup[D]=it={},ip[ut.id]&&Os.length&&cc(),tt=w===M?D:w.indexOf(ft),xt&&(nt=new xt).init(ft,W||N,t,tt,w)!==!1&&(t._pt=at=new er(t._pt,ft,nt.name,0,1,nt.render,nt,0,nt.priority),nt._props.forEach(function(ot){it[ot]=at}),nt.priority&&(gt=1)),!xt||W)for(X in N)gr[X]&&(nt=_p(X,N,t,tt,ft,w))?nt.priority&&(gt=1):it[X]=at=vp.call(t,ft,X,"get",N[X],tt,w,0,n.stringFilter);t._op&&t._op[D]&&t.kill(ft,t._op[D]),A&&t._pt&&(Vs=t,ni.killTweensOf(ft,it,t.globalTime(e)),Q=!t.parent,Vs=0),t._pt&&h&&(ip[ut.id]=1)}gt&&Tp(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!Q,_&&e<=0&&R.render(Hr,!0,!0)},cM=function(t,e,i,n,s,a,o){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,d,g,f;if(!h)for(h=t._ptCache[e]=[],g=t._ptLookup,f=t._targets.length;f--;){if(u=g[f][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return yp=1,t.vars[e]="+=0",xp(t,o),yp=0,1;h.push(u)}for(f=h.length;f--;)d=h[f],u=d._pt||d,u.s=(n||n===0)&&!s?n:u.s+(n||0)+a*u.c,u.c=i-u.s,d.e&&(d.e=ui(i)+Gi(d.e)),d.b&&(d.b=u.s+Gi(d.b))},fM=function(t,e){var i=t[0]?Ns(t[0]).harness:0,n=i&&i.aliases,s,a,o,h;if(!n)return e;s=Fa({},e);for(a in n)if(a in s)for(h=n[a].split(","),o=h.length;o--;)s[h[o]]=s[a];return s},dM=function(t,e,i,n){var s=e.ease||n||"power1.inOut",a,o;if(Yi(e))o=i[t]||(i[t]=[]),e.forEach(function(h,u){return o.push({t:u/(e.length-1)*100,v:h,e:s})});else for(a in e)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:e[a],e:s})},Eh=function(t,e,i,n,s){return hi(t)?t.call(e,i,n,s):Ei(t)&&~t.indexOf("random(")?Uo(t):t},Y_=np+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",j_={};tr(Y_+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return j_[r]=1});var wi=function(r){d_(t,r);function t(i,n,s,a){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=r.call(this,a?n:xh(n))||this;var h=o.vars,u=h.duration,d=h.delay,g=h.immediateRender,f=h.stagger,m=h.overwrite,_=h.keyframes,v=h.defaults,b=h.scrollTrigger,C=h.yoyoEase,M=n.parent||ni,E=(Yi(i)||g_(i)?os(i[0]):"length"in n)?[i]:Yr(i),w,A,R,N,D,X,at,ft;if(o._targets=E.length?sp(E):lc("GSAP target "+i+" not found. https://greensock.com",!dr.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=m,_||f||sc(u)||sc(d)){if(n=o.vars,w=o.timeline=new ji({data:"nested",defaults:v||{},targets:M&&M.data==="nested"?M.vars.targets:E}),w.kill(),w.parent=w._dp=as(o),w._start=0,f||sc(u)||sc(d)){if(N=E.length,at=f&&k_(f),Fn(f))for(D in f)~Y_.indexOf(D)&&(ft||(ft={}),ft[D]=f[D]);for(A=0;A<N;A++)R=fc(n,j_),R.stagger=0,C&&(R.yoyoEase=C),ft&&Fa(R,ft),X=E[A],R.duration=+Eh(u,as(o),A,X,E),R.delay=(+Eh(d,as(o),A,X,E)||0)-o._delay,!f&&N===1&&R.delay&&(o._delay=d=R.delay,o._start+=d,R.delay=0),w.to(X,R,at?at(A,X,E):0),w._ease=Oe.none;w.duration()?u=d=0:o.timeline=0}else if(_){xh(Xr(w.vars.defaults,{ease:"none"})),w._ease=Oa(_.ease||n.ease||"none");var gt=0,ut,xt,nt;if(Yi(_))_.forEach(function(it){return w.to(E,it,">")}),w.duration();else{R={};for(D in _)D==="ease"||D==="easeEach"||dM(D,_[D],R,_.easeEach);for(D in R)for(ut=R[D].sort(function(it,tt){return it.t-tt.t}),gt=0,A=0;A<ut.length;A++)xt=ut[A],nt={ease:xt.e,duration:(xt.t-(A?ut[A-1].t:0))/100*u},nt[D]=xt.v,w.to(E,nt,gt),gt+=nt.duration;w.duration()<u&&w.to({},{duration:u-w.duration()})}}u||o.duration(u=w.duration())}else o.timeline=0;return m===!0&&!Yd&&(Vs=as(o),ni.killTweensOf(E),Vs=0),kn(M,as(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(g||!u&&!_&&o._start===Ui(M._time)&&mr(g)&&HE(as(o))&&M.data!=="nested")&&(o._tTime=-Xe,o.render(Math.max(0,-d)||0)),b&&I_(as(o),b),o}var e=t.prototype;return e.render=function(n,s,a){var o=this._time,h=this._tDur,u=this._dur,d=n<0,g=n>h-Xe&&!d?h:n<Xe?0:n,f,m,_,v,b,C,M,E,w;if(!u)XE(this,n,s,a);else if(g!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(f=g,E=this.timeline,this._repeat){if(v=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(v*100+n,s,a);if(f=Ui(g%v),g===h?(_=this._repeat,f=u):(_=~~(g/v),_&&_===g/v&&(f=u,_--),f>u&&(f=u)),C=this._yoyo&&_&1,C&&(w=this._yEase,f=u-f),b=zo(this._tTime,v),f===o&&!a&&this._initted)return this._tTime=g,this;_!==b&&(E&&this._yEase&&X_(E,C),this.vars.repeatRefresh&&!C&&!this._lock&&(this._lock=a=1,this.render(Ui(v*_),!0).invalidate()._lock=0))}if(!this._initted){if(D_(this,d?n:f,a,s,g))return this._tTime=0,this;if(o!==this._time)return this;if(u!==this._dur)return this.render(n,s,a)}if(this._tTime=g,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(w||this._ease)(f/u),this._from&&(this.ratio=M=1-M),f&&!o&&!s&&(jr(this,"onStart"),this._tTime!==g))return this;for(m=this._pt;m;)m.r(M,m.d),m=m._next;E&&E.render(n<0?n:!f&&C?-Xe:E._dur*E._ease(f/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(d&&op(this,n,s,a),jr(this,"onUpdate")),this._repeat&&_!==b&&this.vars.onRepeat&&!s&&this.parent&&jr(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(d&&!this._onUpdate&&op(this,n,!0,!0),(n||!u)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Bs(this,1),!s&&!(d&&!o)&&(g||o||C)&&(jr(this,g===h?"onComplete":"onReverseComplete",!0),this._prom&&!(g<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,a,o){Ch||vr.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||xp(this,h),u=this._ease(h/this._dur),cM(this,n,s,a,o,u,h)?this.resetTo(n,s,a,o):(gc(this,0),this.parent||M_(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Sh(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Vs&&Vs.vars.overwrite!==!0)._first||Sh(this),this.parent&&a!==this.timeline.totalDuration()&&Vo(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,h=n?Yr(n):o,u=this._ptLookup,d=this._pt,g,f,m,_,v,b,C;if((!s||s==="all")&&UE(o,h))return s==="all"&&(this._pt=0),Sh(this);for(g=this._op=this._op||[],s!=="all"&&(Ei(s)&&(v={},tr(s,function(M){return v[M]=1}),s=v),s=fM(o,s)),C=o.length;C--;)if(~h.indexOf(o[C])){f=u[C],s==="all"?(g[C]=s,_=f,m={}):(m=g[C]=g[C]||{},_=s);for(v in _)b=f&&f[v],b&&((!("kill"in b.d)||b.d.kill(v)===!0)&&dc(this,b,"_pt"),delete f[v]),m!=="all"&&(m[v]=1)}return this._initted&&!this._pt&&d&&Sh(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return bh(1,arguments)},t.delayedCall=function(n,s,a,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(n,s,a){return bh(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,a){return ni.killTweensOf(n,s,a)},t}(Wo);Xr(wi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});tr("staggerTo,staggerFrom,staggerFromTo",function(r){wi[r]=function(){var t=new ji,e=hp.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var bp=function(t,e,i){return t[e]=i},Z_=function(t,e,i){return t[e](i)},pM=function(t,e,i,n){return t[e](n.fp,i)},mM=function(t,e,i){return t.setAttribute(e,i)},vc=function(t,e){return hi(t[e])?Z_:nc(t[e])&&t.setAttribute?mM:bp},$_=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},gM=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},wp=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Sp=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},vM=function(t,e,i,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(t,e,i),s=a},_M=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?dc(this,e,"_pt"):e.dep||(i=1),e=n;return!i},yM=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},Tp=function(t){for(var e=t._pt,i,n,s,a;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:a)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:a=e,e=i}t._pt=s},er=function(){function r(e,i,n,s,a,o,h,u,d){this.t=i,this.s=s,this.c=a,this.p=n,this.r=o||$_,this.d=h||this,this.set=u||bp,this.pr=d||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=yM,this.m=i,this.mt=s,this.tween=n},r}();tr(np+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return ep[r]=1});Ir.TweenMax=Ir.TweenLite=wi;Ir.TimelineLite=Ir.TimelineMax=ji;ni=new ji({sortChildren:!1,defaults:Bo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});dr.stringFilter=dp;var Xo=[],_c={},xM=[],J_=0,Cp=function(t){return(_c[t]||xM).map(function(e){return e()})},Ep=function(){var t=Date.now(),e=[];t-J_>2&&(Cp("matchMediaInit"),Xo.forEach(function(i){var n=i.queries,s=i.conditions,a,o,h,u;for(o in n)a=Wr.matchMedia(n[o]).matches,a&&(h=1),a!==s[o]&&(s[o]=a,u=1);u&&(i.revert(),h&&e.push(i))}),Cp("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i)}),J_=t,Cp("matchMedia"))},K_=function(){function r(e,i){this.selector=i&&up(i),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){hi(i)&&(s=n,n=i,i=hi);var a=this,o=function(){var u=bi,d=a.selector,g;return u&&u!==a&&u.data.push(a),s&&(a.selector=up(s)),bi=a,g=n.apply(a,arguments),hi(g)&&a._r.push(g),bi=u,a.selector=d,a.isReverted=!1,g};return a.last=o,i===hi?o(a):i?a[i]=o:o},t.ignore=function(i){var n=bi;bi=null,i(this),bi=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof wi&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i){var a=this.getTweens();this.data.forEach(function(h){h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}))}),a.map(function(h){return{g:h.globalTime(0),t:h}}).sort(function(h,u){return u.g-h.g||-1}).forEach(function(h){return h.t.revert(i)}),this.data.forEach(function(h){return!(h instanceof Wo)&&h.revert&&h.revert(i)}),this._r.forEach(function(h){return h(i,s)}),this.isReverted=!0}else this.data.forEach(function(h){return h.kill&&h.kill()});if(this.clear(),n){var o=Xo.indexOf(this);!!~o&&Xo.splice(o,1)}},t.revert=function(i){this.kill(i||{})},r}(),bM=function(){function r(e){this.contexts=[],this.scope=e}var t=r.prototype;return t.add=function(i,n,s){Fn(i)||(i={matches:i});var a=new K_(0,s||this.scope),o=a.conditions={},h,u,d;this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(u in i)u==="all"?d=1:(h=Wr.matchMedia(i[u]),h&&(Xo.indexOf(a)<0&&Xo.push(a),(o[u]=h.matches)&&(d=1),h.addListener?h.addListener(Ep):h.addEventListener("change",Ep)));return d&&n(a),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),yc={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return iM(n)})},timeline:function(t){return new ji(t)},getTweensOf:function(t,e){return ni.getTweensOf(t,e)},getProperty:function(t,e,i,n){Ei(t)&&(t=Yr(t)[0]);var s=Ns(t||{}).get,a=i?C_:T_;return i==="native"&&(i=""),t&&(e?a((gr[e]&&gr[e].get||s)(t,e,i,n)):function(o,h,u){return a((gr[o]&&gr[o].get||s)(t,o,h,u))})},quickSetter:function(t,e,i){if(t=Yr(t),t.length>1){var n=t.map(function(d){return ir.quickSetter(d,e,i)}),s=n.length;return function(d){for(var g=s;g--;)n[g](d)}}t=t[0]||{};var a=gr[e],o=Ns(t),h=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(d){var g=new a;Go._pt=0,g.init(t,i?d+i:d,Go,0,[t]),g.render(1,g),Go._pt&&Sp(1,Go)}:o.set(t,h);return a?u:function(d){return u(t,h,i?d+i:d,o,1)}},quickTo:function(t,e,i){var n,s=ir.to(t,Fa((n={},n[e]="+=0.1",n.paused=!0,n),i||{})),a=function(h,u,d){return s.resetTo(e,h,u,d)};return a.tween=s,a},isTweening:function(t){return ni.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Oa(t.ease,Bo.ease)),E_(Bo,t||{})},config:function(t){return E_(dr,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!gr[o]&&!Ir[o]&&lc(e+" effect requires "+o+" plugin.")}),rp[e]=function(o,h,u){return i(Yr(o),Xr(h||{},s),u)},a&&(ji.prototype[e]=function(o,h,u){return this.add(rp[e](o,Fn(h)?h:(u=h)&&{},this),u)})},registerEase:function(t,e){Oe[t]=Oa(e)},parseEase:function(t,e){return arguments.length?Oa(t,e):Oe},getById:function(t){return ni.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new ji(t),n,s;for(i.smoothChildTiming=mr(t.smoothChildTiming),ni.remove(i),i._dp=0,i._time=i._tTime=ni._time,n=ni._first;n;)s=n._next,(e||!(!n._dur&&n instanceof wi&&n.vars.onComplete===n._targets[0]))&&kn(i,n,n._start-n._delay),n=s;return kn(ni,i,0),i},context:function(t,e){return t?new K_(t,e):bi},matchMedia:function(t){return new bM(t)},matchMediaRefresh:function(){return Xo.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||Ep()},addEventListener:function(t,e){var i=_c[t]||(_c[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=_c[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:QE,wrapYoyo:tM,distribute:k_,random:N_,snap:O_,normalize:KE,getUnit:Gi,clamp:jE,splitColor:U_,toArray:Yr,selector:up,mapRange:z_,pipe:$E,unitize:JE,interpolate:eM,shuffle:F_},install:y_,effects:rp,ticker:vr,updateRoot:ji.updateRoot,plugins:gr,globalTimeline:ni,core:{PropTween:er,globals:x_,Tween:wi,Timeline:ji,Animation:Wo,getCache:Ns,_removeLinkedListItem:dc,reverting:function(){return pr},context:function(t){return t&&bi&&(bi.data.push(t),t._ctx=bi),bi},suppressOverwrites:function(t){return Yd=t}}};tr("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return yc[r]=wi[r]});vr.add(ji.updateRoot);Go=yc.to({},{duration:0});var wM=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},SM=function(t,e){var i=t._targets,n,s,a;for(n in e)for(s=i.length;s--;)a=t._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=wM(a,n)),a&&a.modifier&&a.modifier(e[n],t,i[s],n))},Mp=function(t,e){return{name:t,rawVars:1,init:function(n,s,a){a._onInit=function(o){var h,u;if(Ei(s)&&(h={},tr(s,function(d){return h[d]=1}),s=h),e){h={};for(u in s)h[u]=e(s[u]);s=h}SM(o,s)}}}},ir=yc.registerPlugin({name:"attr",init:function(t,e,i,n,s){var a,o,h;this.tween=i;for(a in e)h=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(h||0)+"",e[a],n,s,0,0,a),o.op=a,o.b=h,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)pr?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Mp("roundProps",cp),Mp("modifiers"),Mp("snap",O_))||yc;wi.version=ji.version=ir.version="3.11.3";__=1;m_()&&Ho();var TM=Oe.Power0,CM=Oe.Power1,EM=Oe.Power2,MM=Oe.Power3,PM=Oe.Power4,AM=Oe.Linear,IM=Oe.Quad,DM=Oe.Cubic,LM=Oe.Quart,RM=Oe.Quint,FM=Oe.Strong,kM=Oe.Elastic,OM=Oe.Back,NM=Oe.SteppedEase,BM=Oe.Bounce,zM=Oe.Sine,VM=Oe.Expo,UM=Oe.Circ;var Q_,Us,qo,Pp,Ba,GM,ty,Ap,HM=function(){return typeof window!="undefined"},hs={},za=180/Math.PI,Yo=Math.PI/180,jo=Math.atan2,ey=1e8,Ip=/([A-Z])/g,WM=/(left|right|width|margin|padding|x)/i,XM=/[\s,\(]\S/,us={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Dp=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},qM=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},YM=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},jM=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},iy=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},ry=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},ZM=function(t,e,i){return t.style[e]=i},$M=function(t,e,i){return t.style.setProperty(e,i)},JM=function(t,e,i){return t._gsap[e]=i},KM=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},QM=function(t,e,i,n,s){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},tP=function(t,e,i,n,s){var a=t._gsap;a[e]=i,a.renderTransform(s,a)},si="transform",un=si+"Origin",eP=function(t,e){var i=this,n=this.target,s=n.style;if(t in hs){if(this.tfm=this.tfm||{},t!=="transform"&&(t=us[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=cs(n,a)}):this.tfm[t]=n._gsap.x?n._gsap[t]:cs(n,t)),this.props.indexOf(si)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(un,e,"")),t=si}(s||e)&&this.props.push(t,e,s[t])},ny=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},iP=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,a;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].replace(Ip,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Ap(),s&&!s.isStart&&!i[si]&&(ny(i),n.uncache=1)}},sy=function(t,e){var i={target:t,props:[],revert:iP,save:eP};return e&&e.split(",").forEach(function(n){return i.save(n)}),i},ay,Lp=function(t,e){var i=Us.createElementNS?Us.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Us.createElement(t);return i.style?i:Us.createElement(t)},On=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Ip,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,Zo(e)||e,1)||""},oy="O,Moz,ms,Ms,Webkit".split(","),Zo=function(t,e,i){var n=e||Ba,s=n.style,a=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(oy[a]+t in s););return a<0?null:(a===3?"ms":a>=0?oy[a]:"")+t},Rp=function(){HM()&&window.document&&(Q_=window,Us=Q_.document,qo=Us.documentElement,Ba=Lp("div")||{style:{}},GM=Lp("div"),si=Zo(si),un=si+"Origin",Ba.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ay=!!Zo("perspective"),Ap=ir.core.reverting,Pp=1)},Fp=function r(t){var e=Lp("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,s=this.style.cssText,a;if(qo.appendChild(e),e.appendChild(this),this.style.display="block",t)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),qo.removeChild(e),this.style.cssText=s,a},ly=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},hy=function(t){var e;try{e=t.getBBox()}catch{e=Fp.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Fp||(e=Fp.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+ly(t,["x","cx","x1"])||0,y:+ly(t,["y","cy","y1"])||0,width:0,height:0}:e},uy=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&hy(t))},Mh=function(t,e){if(e){var i=t.style;e in hs&&e!==un&&(e=si),i.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(e.replace(Ip,"-$1").toLowerCase())):i.removeAttribute(e)}},Gs=function(t,e,i,n,s,a){var o=new er(t._pt,e,i,0,1,a?ry:iy);return t._pt=o,o.b=n,o.e=s,t._props.push(i),o},cy={deg:1,rad:1,turn:1},rP={grid:1,flex:1},Hs=function r(t,e,i,n){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Ba.style,h=WM.test(e),u=t.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(h?"Width":"Height"),g=100,f=n==="px",m=n==="%",_,v,b,C;return n===a||!s||cy[n]||cy[a]?s:(a!=="px"&&!f&&(s=r(t,e,i,"px")),C=t.getCTM&&uy(t),(m||a==="%")&&(hs[e]||~e.indexOf("adius"))?(_=C?t.getBBox()[h?"width":"height"]:t[d],ui(m?s/_*g:s/100*_)):(o[h?"width":"height"]=g+(f?a:n),v=~e.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,C&&(v=(t.ownerSVGElement||{}).parentNode),(!v||v===Us||!v.appendChild)&&(v=Us.body),b=v._gsap,b&&m&&b.width&&h&&b.time===vr.time&&!b.uncache?ui(s/b.width*g):((m||a==="%")&&!rP[On(v,"display")]&&(o.position=On(t,"position")),v===t&&(o.position="static"),v.appendChild(Ba),_=Ba[d],v.removeChild(Ba),o.position="absolute",h&&m&&(b=Ns(v),b.time=vr.time,b.width=v[d]),ui(f?_*s/g:_&&s?g/_*s:0))))},cs=function(t,e,i,n){var s;return Pp||Rp(),e in us&&e!=="transform"&&(e=us[e],~e.indexOf(",")&&(e=e.split(",")[0])),hs[e]&&e!=="transform"?(s=Ah(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:bc(On(t,un))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=xc[e]&&xc[e](t,e,i)||On(t,e)||ap(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Hs(t,e,s,i)+i:s},nP=function(t,e,i,n){if(!i||i==="none"){var s=Zo(e,t,1),a=s&&On(t,s,1);a&&a!==i?(e=s,i=a):e==="borderColor"&&(i=On(t,"borderTopColor"))}var o=new er(this._pt,t.style,e,0,1,wp),h=0,u=0,d,g,f,m,_,v,b,C,M,E,w,A;if(o.b=i,o.e=n,i+="",n+="",n==="auto"&&(t.style[e]=n,n=On(t,e)||n,t.style[e]=i),d=[i,n],dp(d),i=d[0],n=d[1],f=i.match(La)||[],A=n.match(La)||[],A.length){for(;g=La.exec(n);)b=g[0],M=n.substring(h,g.index),_?_=(_+1)%5:(M.substr(-5)==="rgba("||M.substr(-5)==="hsla(")&&(_=1),b!==(v=f[u++]||"")&&(m=parseFloat(v)||0,w=v.substr((m+"").length),b.charAt(1)==="="&&(b=Ra(m,b)+w),C=parseFloat(b),E=b.substr((C+"").length),h=La.lastIndex-E.length,E||(E=E||dr.units[e]||w,h===n.length&&(n+=E,o.e+=E)),w!==E&&(m=Hs(t,e,v,E)||0),o._pt={_next:o._pt,p:M||u===1?M:",",s:m,c:C-m,m:_&&_<4||e==="zIndex"?Math.round:0});o.c=h<n.length?n.substring(h,n.length):""}else o.r=e==="display"&&n==="none"?ry:iy;return Kd.test(n)&&(o.e=0),this._pt=o,o},fy={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},sP=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=fy[i]||i,e[1]=fy[n]||n,e.join(" ")},aP=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,a=i._gsap,o,h,u;if(s==="all"||s===!0)n.cssText="",h=1;else for(s=s.split(","),u=s.length;--u>-1;)o=s[u],hs[o]&&(h=1,o=o==="transformOrigin"?un:si),Mh(i,o);h&&(Mh(i,si),a&&(a.svg&&i.removeAttribute("transform"),Ah(i,1),a.uncache=1,ny(n)))}},xc={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var a=t._pt=new er(t._pt,e,i,0,0,aP);return a.u=n,a.pr=-10,a.tween=s,t._props.push(i),1}}},Ph=[1,0,0,1,0,0],dy={},py=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},my=function(t){var e=On(t,si);return py(e)?Ph:e.substr(7).match($d).map(ui)},kp=function(t,e){var i=t._gsap||Ns(t),n=t.style,s=my(t),a,o,h,u;return i.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,s=[h.a,h.b,h.c,h.d,h.e,h.f],s.join(",")==="1,0,0,1,0,0"?Ph:s):(s===Ph&&!t.offsetParent&&t!==qo&&!i.svg&&(h=n.display,n.display="block",a=t.parentNode,(!a||!t.offsetParent)&&(u=1,o=t.nextElementSibling,qo.appendChild(t)),s=my(t),h?n.display=h:Mh(t,"display"),u&&(o?a.insertBefore(t,o):a?a.appendChild(t):qo.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Op=function(t,e,i,n,s,a){var o=t._gsap,h=s||kp(t,!0),u=o.xOrigin||0,d=o.yOrigin||0,g=o.xOffset||0,f=o.yOffset||0,m=h[0],_=h[1],v=h[2],b=h[3],C=h[4],M=h[5],E=e.split(" "),w=parseFloat(E[0])||0,A=parseFloat(E[1])||0,R,N,D,X;i?h!==Ph&&(N=m*b-_*v)&&(D=w*(b/N)+A*(-v/N)+(v*M-b*C)/N,X=w*(-_/N)+A*(m/N)-(m*M-_*C)/N,w=D,A=X):(R=hy(t),w=R.x+(~E[0].indexOf("%")?w/100*R.width:w),A=R.y+(~(E[1]||E[0]).indexOf("%")?A/100*R.height:A)),n||n!==!1&&o.smooth?(C=w-u,M=A-d,o.xOffset=g+(C*m+M*v)-C,o.yOffset=f+(C*_+M*b)-M):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=A,o.smooth=!!n,o.origin=e,o.originIsAbsolute=!!i,t.style[un]="0px 0px",a&&(Gs(a,o,"xOrigin",u,w),Gs(a,o,"yOrigin",d,A),Gs(a,o,"xOffset",g,o.xOffset),Gs(a,o,"yOffset",f,o.yOffset)),t.setAttribute("data-svg-origin",w+" "+A)},Ah=function(t,e){var i=t._gsap||new gp(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,a="px",o="deg",h=getComputedStyle(t),u=On(t,un)||"0",d,g,f,m,_,v,b,C,M,E,w,A,R,N,D,X,at,ft,gt,ut,xt,nt,it,tt,W,Q,ot,ct,Tt,Rt,Pt,Nt;return d=g=f=v=b=C=M=E=w=0,m=_=1,i.svg=!!(t.getCTM&&uy(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(n[si]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[si]!=="none"?h[si]:"")),n.scale=n.rotate=n.translate="none"),N=kp(t,i.svg),i.svg&&(i.uncache?(W=t.getBBox(),u=i.xOrigin-W.x+"px "+(i.yOrigin-W.y)+"px",tt=""):tt=!e&&t.getAttribute("data-svg-origin"),Op(t,tt||u,!!tt||i.originIsAbsolute,i.smooth!==!1,N)),A=i.xOrigin||0,R=i.yOrigin||0,N!==Ph&&(ft=N[0],gt=N[1],ut=N[2],xt=N[3],d=nt=N[4],g=it=N[5],N.length===6?(m=Math.sqrt(ft*ft+gt*gt),_=Math.sqrt(xt*xt+ut*ut),v=ft||gt?jo(gt,ft)*za:0,M=ut||xt?jo(ut,xt)*za+v:0,M&&(_*=Math.abs(Math.cos(M*Yo))),i.svg&&(d-=A-(A*ft+R*ut),g-=R-(A*gt+R*xt))):(Nt=N[6],Rt=N[7],ot=N[8],ct=N[9],Tt=N[10],Pt=N[11],d=N[12],g=N[13],f=N[14],D=jo(Nt,Tt),b=D*za,D&&(X=Math.cos(-D),at=Math.sin(-D),tt=nt*X+ot*at,W=it*X+ct*at,Q=Nt*X+Tt*at,ot=nt*-at+ot*X,ct=it*-at+ct*X,Tt=Nt*-at+Tt*X,Pt=Rt*-at+Pt*X,nt=tt,it=W,Nt=Q),D=jo(-ut,Tt),C=D*za,D&&(X=Math.cos(-D),at=Math.sin(-D),tt=ft*X-ot*at,W=gt*X-ct*at,Q=ut*X-Tt*at,Pt=xt*at+Pt*X,ft=tt,gt=W,ut=Q),D=jo(gt,ft),v=D*za,D&&(X=Math.cos(D),at=Math.sin(D),tt=ft*X+gt*at,W=nt*X+it*at,gt=gt*X-ft*at,it=it*X-nt*at,ft=tt,nt=W),b&&Math.abs(b)+Math.abs(v)>359.9&&(b=v=0,C=180-C),m=ui(Math.sqrt(ft*ft+gt*gt+ut*ut)),_=ui(Math.sqrt(it*it+Nt*Nt)),D=jo(nt,it),M=Math.abs(D)>2e-4?D*za:0,w=Pt?1/(Pt<0?-Pt:Pt):0),i.svg&&(tt=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!py(On(t,si)),tt&&t.setAttribute("transform",tt))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(m*=-1,M+=v<=0?180:-180,v+=v<=0?180:-180):(_*=-1,M+=M<=0?180:-180)),e=e||i.uncache,i.x=d-((i.xPercent=d&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=g-((i.yPercent=g&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-g)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=f+a,i.scaleX=ui(m),i.scaleY=ui(_),i.rotation=ui(v)+o,i.rotationX=ui(b)+o,i.rotationY=ui(C)+o,i.skewX=M+o,i.skewY=E+o,i.transformPerspective=w+a,(i.zOrigin=parseFloat(u.split(" ")[2])||0)&&(n[un]=bc(u)),i.xOffset=i.yOffset=0,i.force3D=dr.force3D,i.renderTransform=i.svg?lP:ay?gy:oP,i.uncache=0,i},bc=function(t){return(t=t.split(" "))[0]+" "+t[1]},Np=function(t,e,i){var n=Gi(e);return ui(parseFloat(e)+parseFloat(Hs(t,"x",i+"px",n)))+n},oP=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,gy(t,e)},Va="0deg",Ih="0px",Ua=") ",gy=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,h=i.z,u=i.rotation,d=i.rotationY,g=i.rotationX,f=i.skewX,m=i.skewY,_=i.scaleX,v=i.scaleY,b=i.transformPerspective,C=i.force3D,M=i.target,E=i.zOrigin,w="",A=C==="auto"&&t&&t!==1||C===!0;if(E&&(g!==Va||d!==Va)){var R=parseFloat(d)*Yo,N=Math.sin(R),D=Math.cos(R),X;R=parseFloat(g)*Yo,X=Math.cos(R),a=Np(M,a,N*X*-E),o=Np(M,o,-Math.sin(R)*-E),h=Np(M,h,D*X*-E+E)}b!==Ih&&(w+="perspective("+b+Ua),(n||s)&&(w+="translate("+n+"%, "+s+"%) "),(A||a!==Ih||o!==Ih||h!==Ih)&&(w+=h!==Ih||A?"translate3d("+a+", "+o+", "+h+") ":"translate("+a+", "+o+Ua),u!==Va&&(w+="rotate("+u+Ua),d!==Va&&(w+="rotateY("+d+Ua),g!==Va&&(w+="rotateX("+g+Ua),(f!==Va||m!==Va)&&(w+="skew("+f+", "+m+Ua),(_!==1||v!==1)&&(w+="scale("+_+", "+v+Ua),M.style[si]=w||"translate(0, 0)"},lP=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,h=i.rotation,u=i.skewX,d=i.skewY,g=i.scaleX,f=i.scaleY,m=i.target,_=i.xOrigin,v=i.yOrigin,b=i.xOffset,C=i.yOffset,M=i.forceCSS,E=parseFloat(a),w=parseFloat(o),A,R,N,D,X;h=parseFloat(h),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,h+=d),h||u?(h*=Yo,u*=Yo,A=Math.cos(h)*g,R=Math.sin(h)*g,N=Math.sin(h-u)*-f,D=Math.cos(h-u)*f,u&&(d*=Yo,X=Math.tan(u-d),X=Math.sqrt(1+X*X),N*=X,D*=X,d&&(X=Math.tan(d),X=Math.sqrt(1+X*X),A*=X,R*=X)),A=ui(A),R=ui(R),N=ui(N),D=ui(D)):(A=g,D=f,R=N=0),(E&&!~(a+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(E=Hs(m,"x",a,"px"),w=Hs(m,"y",o,"px")),(_||v||b||C)&&(E=ui(E+_-(_*A+v*N)+b),w=ui(w+v-(_*R+v*D)+C)),(n||s)&&(X=m.getBBox(),E=ui(E+n/100*X.width),w=ui(w+s/100*X.height)),X="matrix("+A+","+R+","+N+","+D+","+E+","+w+")",m.setAttribute("transform",X),M&&(m.style[si]=X)},hP=function(t,e,i,n,s){var a=360,o=Ei(s),h=parseFloat(s)*(o&&~s.indexOf("rad")?za:1),u=h-n,d=n+u+"deg",g,f;return o&&(g=s.split("_")[1],g==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),g==="cw"&&u<0?u=(u+a*ey)%a-~~(u/a)*a:g==="ccw"&&u>0&&(u=(u-a*ey)%a-~~(u/a)*a)),t._pt=f=new er(t._pt,e,i,n,u,qM),f.e=d,f.u="deg",t._props.push(i),f},vy=function(t,e){for(var i in e)t[i]=e[i];return t},uP=function(t,e,i){var n=vy({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,h,u,d,g,f,m,_;n.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),a[si]=e,o=Ah(i,1),Mh(i,si),i.setAttribute("transform",u)):(u=getComputedStyle(i)[si],a[si]=e,o=Ah(i,1),a[si]=u);for(h in hs)u=n[h],d=o[h],u!==d&&s.indexOf(h)<0&&(m=Gi(u),_=Gi(d),g=m!==_?Hs(i,h,u,_):parseFloat(u),f=parseFloat(d),t._pt=new er(t._pt,o,h,g,f-g,Dp),t._pt.u=_||0,t._props.push(h));vy(o,n)};tr("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",a=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(o){return t<2?r+o:"border"+o+r});xc[t>1?"border"+r:r]=function(o,h,u,d,g){var f,m;if(arguments.length<4)return f=a.map(function(_){return cs(o,_,u)}),m=f.join(" "),m.split(f[0]).length===5?f[0]:m;f=(d+"").split(" "),m={},a.forEach(function(_,v){return m[_]=f[v]=f[v]||f[(v-1)/2|0]}),o.init(h,m,g)}});var Bp={name:"css",register:Rp,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var a=this._props,o=t.style,h=i.vars.startAt,u,d,g,f,m,_,v,b,C,M,E,w,A,R,N,D;Pp||Rp(),this.styles=this.styles||sy(t),D=this.styles.props,this.tween=i;for(v in e)if(v!=="autoRound"&&(d=e[v],!(gr[v]&&_p(v,e,i,n,t,s)))){if(m=typeof d,_=xc[v],m==="function"&&(d=d.call(i,n,t,s),m=typeof d),m==="string"&&~d.indexOf("random(")&&(d=Uo(d)),_)_(this,t,v,d,i)&&(N=1);else if(v.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(v)+"").trim(),d+="",ls.lastIndex=0,ls.test(u)||(b=Gi(u),C=Gi(d)),C?b!==C&&(u=Hs(t,v,u,C)+C):b&&(d+=b),this.add(o,"setProperty",u,d,n,s,0,0,v),a.push(v),D.push(v,0,o[v]);else if(m!=="undefined"){if(h&&v in h?(u=typeof h[v]=="function"?h[v].call(i,n,t,s):h[v],Ei(u)&&~u.indexOf("random(")&&(u=Uo(u)),Gi(u+"")||(u+=dr.units[v]||Gi(cs(t,v))||""),(u+"").charAt(1)==="="&&(u=cs(t,v))):u=cs(t,v),f=parseFloat(u),M=m==="string"&&d.charAt(1)==="="&&d.substr(0,2),M&&(d=d.substr(2)),g=parseFloat(d),v in us&&(v==="autoAlpha"&&(f===1&&cs(t,"visibility")==="hidden"&&g&&(f=0),D.push("visibility",0,o.visibility),Gs(this,o,"visibility",f?"inherit":"hidden",g?"inherit":"hidden",!g)),v!=="scale"&&v!=="transform"&&(v=us[v],~v.indexOf(",")&&(v=v.split(",")[0]))),E=v in hs,E){if(this.styles.save(v),w||(A=t._gsap,A.renderTransform&&!e.parseTransform||Ah(t,e.parseTransform),R=e.smoothOrigin!==!1&&A.smooth,w=this._pt=new er(this._pt,o,si,0,1,A.renderTransform,A,0,-1),w.dep=1),v==="scale")this._pt=new er(this._pt,A,"scaleY",f,(M?Ra(f,M+g):g)-f||0,Dp),this._pt.u=0,a.push("scaleY",v),v+="X";else if(v==="transformOrigin"){D.push(un,0,o[un]),d=sP(d),A.svg?Op(t,d,0,R,0,this):(C=parseFloat(d.split(" ")[2])||0,C!==A.zOrigin&&Gs(this,A,"zOrigin",A.zOrigin,C),Gs(this,o,v,bc(u),bc(d)));continue}else if(v==="svgOrigin"){Op(t,d,1,R,0,this);continue}else if(v in dy){hP(this,A,v,f,M?Ra(f,M+d):d);continue}else if(v==="smoothOrigin"){Gs(this,A,"smooth",A.smooth,d);continue}else if(v==="force3D"){A[v]=d;continue}else if(v==="transform"){uP(this,d,t);continue}}else v in o||(v=Zo(v)||v);if(E||(g||g===0)&&(f||f===0)&&!XM.test(d)&&v in o)b=(u+"").substr((f+"").length),g||(g=0),C=Gi(d)||(v in dr.units?dr.units[v]:b),b!==C&&(f=Hs(t,v,u,C)),this._pt=new er(this._pt,E?A:o,v,f,(M?Ra(f,M+g):g)-f,!E&&(C==="px"||v==="zIndex")&&e.autoRound!==!1?jM:Dp),this._pt.u=C||0,b!==C&&C!=="%"&&(this._pt.b=u,this._pt.r=YM);else if(v in o)nP.call(this,t,v,u,M?M+d:d);else if(v in t)this.add(t,v,u||t[v],M?M+d:d,n,s);else{oc(v,d);continue}E||(v in o?D.push(v,0,o[v]):D.push(v,1,u||t[v])),a.push(v)}}N&&Tp(this)},render:function(t,e){if(e.tween._time||!Ap())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:cs,aliases:us,getSetter:function(t,e,i){var n=us[e];return n&&n.indexOf(",")<0&&(e=n),e in hs&&e!==un&&(t._gsap.x||cs(t,"x"))?i&&ty===i?e==="scale"?KM:JM:(ty=i||{})&&(e==="scale"?QM:tP):t.style&&!nc(t.style[e])?ZM:~e.indexOf("-")?$M:vc(t,e)},core:{_removeProperty:Mh,_getMatrix:kp}};ir.utils.checkPrefix=Zo;ir.core.getStyleSaver=sy;(function(r,t,e,i){var n=tr(r+","+t+","+e,function(s){hs[s]=1});tr(t,function(s){dr.units[s]="deg",dy[s]=1}),us[n[13]]=r+","+t,tr(i,function(s){var a=s.split(":");us[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");tr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){dr.units[r]="px"});ir.registerPlugin(Bp);var Zt=ir.registerPlugin(Bp)||ir,_N=Zt.core.Tween;function _y(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function cP(r,t,e){return t&&_y(r.prototype,t),e&&_y(r,e),r}var Zi,zp,fP,Dr,Ws,Xs,$o,yy,Ga,Dh,xy,fs,cn,by=function(){return Zi||typeof window!="undefined"&&(Zi=window.gsap)&&Zi.registerPlugin&&Zi};var wy=1,Jo=[],ke=[],fn=[],Lh=Date.now,Vp=function(t,e){return e},dP=function(){var t=Dh.core,e=t.bridge||{},i=t._scrollers,n=t._proxies;i.push.apply(i,ke),n.push.apply(n,fn),ke=i,fn=n,Vp=function(a,o){return e[a](o)}},ds=function(t,e){return~fn.indexOf(t)&&fn[fn.indexOf(t)+1][e]},Rh=function(t){return!!~xy.indexOf(t)},_r=function(t,e,i,n,s){return t.addEventListener(e,i,{passive:!n,capture:!!s})},rr=function(t,e,i,n){return t.removeEventListener(e,i,!!n)},wc="scrollLeft",Sc="scrollTop",Up=function(){return fs&&fs.isPressed||ke.cache++},Tc=function(t,e){var i=function n(s){if(s||s===0){wy&&(Dr.history.scrollRestoration="manual");var a=fs&&fs.isPressed;s=n.v=Math.round(s)||(fs&&fs.iOS?1:0),t(s),n.cacheID=ke.cache,a&&Vp("ss",s)}else(e||ke.cache!==n.cacheID||Vp("ref"))&&(n.cacheID=ke.cache,n.v=t());return n.v+n.offset};return i.offset=0,t&&i},$i={s:wc,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Tc(function(r){return arguments.length?Dr.scrollTo(r,Si.sc()):Dr.pageXOffset||Ws[wc]||Xs[wc]||$o[wc]||0})},Si={s:Sc,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:$i,sc:Tc(function(r){return arguments.length?Dr.scrollTo($i.sc(),r):Dr.pageYOffset||Ws[Sc]||Xs[Sc]||$o[Sc]||0})},nr=function(t){return Zi.utils.toArray(t)[0]||(typeof t=="string"&&Zi.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},ps=function(t,e){var i=e.s,n=e.sc;Rh(t)&&(t=Ws.scrollingElement||Xs);var s=ke.indexOf(t),a=n===Si.sc?1:2;!~s&&(s=ke.push(t)-1),ke[s+a]||t.addEventListener("scroll",Up);var o=ke[s+a],h=o||(ke[s+a]=Tc(ds(t,i),!0)||(Rh(t)?n:Tc(function(u){return arguments.length?t[i]=u:t[i]})));return h.target=t,o||(h.smooth=Zi.getProperty(t,"scrollBehavior")==="smooth"),h},Cc=function(t,e,i){var n=t,s=t,a=Lh(),o=a,h=e||50,u=Math.max(500,h*3),d=function(_,v){var b=Lh();v||b-a>h?(s=n,n=_,o=a,a=b):i?n+=_:n=s+(_-s)/(b-o)*(a-o)},g=function(){s=n=i?0:n,o=a=0},f=function(_){var v=o,b=s,C=Lh();return(_||_===0)&&_!==n&&d(_),a===o||C-o>u?0:(n+(i?b:-b))/((i?C:a)-v)*1e3};return{update:d,reset:g,getVelocity:f}},Fh=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},Sy=function(t){var e=Math.max.apply(Math,t),i=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(i)?e:i},Ty=function(){Dh=Zi.core.globals().ScrollTrigger,Dh&&Dh.core&&dP()},Cy=function(t){return Zi=t||by(),Zi&&typeof document!="undefined"&&document.body&&(Dr=window,Ws=document,Xs=Ws.documentElement,$o=Ws.body,xy=[Dr,Ws,Xs,$o],fP=Zi.utils.clamp,Ga="onpointerenter"in $o?"pointer":"mouse",yy=gi.isTouch=Dr.matchMedia&&Dr.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Dr||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,cn=gi.eventTypes=("ontouchstart"in Xs?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Xs?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return wy=0},500),Ty(),zp=1),zp};$i.op=Si;ke.cache=0;var gi=function(){function r(e){this.init(e)}var t=r.prototype;return t.init=function(i){zp||Cy(Zi)||console.warn("Please gsap.registerPlugin(Observer)"),Dh||Ty();var n=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,h=i.lineHeight,u=i.debounce,d=i.preventDefault,g=i.onStop,f=i.onStopDelay,m=i.ignore,_=i.wheelSpeed,v=i.event,b=i.onDragStart,C=i.onDragEnd,M=i.onDrag,E=i.onPress,w=i.onRelease,A=i.onRight,R=i.onLeft,N=i.onUp,D=i.onDown,X=i.onChangeX,at=i.onChangeY,ft=i.onChange,gt=i.onToggleX,ut=i.onToggleY,xt=i.onHover,nt=i.onHoverEnd,it=i.onMove,tt=i.ignoreCheck,W=i.isNormalizer,Q=i.onGestureStart,ot=i.onGestureEnd,ct=i.onWheel,Tt=i.onEnable,Rt=i.onDisable,Pt=i.onClick,Nt=i.scrollSpeed,At=i.capture,Qt=i.allowClicks,Vt=i.lockAxis,Yt=i.onLockAxis;this.target=o=nr(o)||Xs,this.vars=i,m&&(m=Zi.utils.toArray(m)),n=n||1e-9,s=s||0,_=_||1,Nt=Nt||1,a=a||"wheel,touch,pointer",u=u!==!1,h||(h=parseFloat(Dr.getComputedStyle($o).lineHeight)||22);var Xt,re,qt,Ut,Lt,te,ge,Bt=this,oe=0,le=0,de=ps(o,$i),Se=ps(o,Si),wt=de(),mt=Se(),Ft=~a.indexOf("touch")&&!~a.indexOf("pointer")&&cn[0]==="pointerdown",l=Rh(o),c=o.ownerDocument||Ws,p=[0,0,0],x=[0,0,0],y=0,T=function(){return y=Lh()},P=function(O,rt){return(Bt.event=O)&&m&&~m.indexOf(O.target)||rt&&Ft&&O.pointerType!=="touch"||tt&&tt(O,rt)},I=function(){Bt._vx.reset(),Bt._vy.reset(),re.pause(),g&&g(Bt)},L=function(){var O=Bt.deltaX=Sy(p),rt=Bt.deltaY=Sy(x),lt=Math.abs(O)>=n,pt=Math.abs(rt)>=n;ft&&(lt||pt)&&ft(Bt,O,rt,p,x),lt&&(A&&Bt.deltaX>0&&A(Bt),R&&Bt.deltaX<0&&R(Bt),X&&X(Bt),gt&&Bt.deltaX<0!=oe<0&&gt(Bt),oe=Bt.deltaX,p[0]=p[1]=p[2]=0),pt&&(D&&Bt.deltaY>0&&D(Bt),N&&Bt.deltaY<0&&N(Bt),at&&at(Bt),ut&&Bt.deltaY<0!=le<0&&ut(Bt),le=Bt.deltaY,x[0]=x[1]=x[2]=0),(Ut||qt)&&(it&&it(Bt),qt&&(M(Bt),qt=!1),Ut=!1),te&&!(te=!1)&&Yt&&Yt(Bt),Lt&&(ct(Bt),Lt=!1),Xt=0},k=function(O,rt,lt){p[lt]+=O,x[lt]+=rt,Bt._vx.update(O),Bt._vy.update(rt),u?Xt||(Xt=requestAnimationFrame(L)):L()},G=function(O,rt){Vt&&!ge&&(Bt.axis=ge=Math.abs(O)>Math.abs(rt)?"x":"y",te=!0),ge!=="y"&&(p[2]+=O,Bt._vx.update(O,!0)),ge!=="x"&&(x[2]+=rt,Bt._vy.update(rt,!0)),u?Xt||(Xt=requestAnimationFrame(L)):L()},V=function(O){if(!P(O,1)){O=Fh(O,d);var rt=O.clientX,lt=O.clientY,pt=rt-Bt.x,bt=lt-Bt.y,dt=Bt.isDragging;Bt.x=rt,Bt.y=lt,(dt||Math.abs(Bt.startX-rt)>=s||Math.abs(Bt.startY-lt)>=s)&&(M&&(qt=!0),dt||(Bt.isDragging=!0),G(pt,bt),dt||b&&b(Bt))}},H=Bt.onPress=function(K){P(K,1)||(Bt.axis=ge=null,re.pause(),Bt.isPressed=!0,K=Fh(K),oe=le=0,Bt.startX=Bt.x=K.clientX,Bt.startY=Bt.y=K.clientY,Bt._vx.reset(),Bt._vy.reset(),_r(W?o:c,cn[1],V,d,!0),Bt.deltaX=Bt.deltaY=0,E&&E(Bt))},Y=function(O){if(!P(O,1)){rr(W?o:c,cn[1],V,!0);var rt=Bt.isDragging&&(Math.abs(Bt.x-Bt.startX)>3||Math.abs(Bt.y-Bt.startY)>3),lt=Fh(O);rt||(Bt._vx.reset(),Bt._vy.reset(),d&&Qt&&Zi.delayedCall(.08,function(){if(Lh()-y>300&&!O.defaultPrevented){if(O.target.click)O.target.click();else if(c.createEvent){var pt=c.createEvent("MouseEvents");pt.initMouseEvent("click",!0,!0,Dr,1,lt.screenX,lt.screenY,lt.clientX,lt.clientY,!1,!1,!1,!1,0,null),O.target.dispatchEvent(pt)}}})),Bt.isDragging=Bt.isGesturing=Bt.isPressed=!1,g&&!W&&re.restart(!0),C&&rt&&C(Bt),w&&w(Bt,rt)}},B=function(O){return O.touches&&O.touches.length>1&&(Bt.isGesturing=!0)&&Q(O,Bt.isDragging)},z=function(){return(Bt.isGesturing=!1)||ot(Bt)},$=function(O){if(!P(O)){var rt=de(),lt=Se();k((rt-wt)*Nt,(lt-mt)*Nt,1),wt=rt,mt=lt,g&&re.restart(!0)}},j=function(O){if(!P(O)){O=Fh(O,d),ct&&(Lt=!0);var rt=(O.deltaMode===1?h:O.deltaMode===2?Dr.innerHeight:1)*_;k(O.deltaX*rt,O.deltaY*rt,0),g&&!W&&re.restart(!0)}},et=function(O){if(!P(O)){var rt=O.clientX,lt=O.clientY,pt=rt-Bt.x,bt=lt-Bt.y;Bt.x=rt,Bt.y=lt,Ut=!0,(pt||bt)&&G(pt,bt)}},q=function(O){Bt.event=O,xt(Bt)},J=function(O){Bt.event=O,nt(Bt)},U=function(O){return P(O)||Fh(O,d)&&Pt(Bt)};re=Bt._dc=Zi.delayedCall(f||.25,I).pause(),Bt.deltaX=Bt.deltaY=0,Bt._vx=Cc(0,50,!0),Bt._vy=Cc(0,50,!0),Bt.scrollX=de,Bt.scrollY=Se,Bt.isDragging=Bt.isGesturing=Bt.isPressed=!1,Bt.enable=function(K){return Bt.isEnabled||(_r(l?c:o,"scroll",Up),a.indexOf("scroll")>=0&&_r(l?c:o,"scroll",$,d,At),a.indexOf("wheel")>=0&&_r(o,"wheel",j,d,At),(a.indexOf("touch")>=0&&yy||a.indexOf("pointer")>=0)&&(_r(o,cn[0],H,d,At),_r(c,cn[2],Y),_r(c,cn[3],Y),Qt&&_r(o,"click",T,!1,!0),Pt&&_r(o,"click",U),Q&&_r(c,"gesturestart",B),ot&&_r(c,"gestureend",z),xt&&_r(o,Ga+"enter",q),nt&&_r(o,Ga+"leave",J),it&&_r(o,Ga+"move",et)),Bt.isEnabled=!0,K&&K.type&&H(K),Tt&&Tt(Bt)),Bt},Bt.disable=function(){Bt.isEnabled&&(Jo.filter(function(K){return K!==Bt&&Rh(K.target)}).length||rr(l?c:o,"scroll",Up),Bt.isPressed&&(Bt._vx.reset(),Bt._vy.reset(),rr(W?o:c,cn[1],V,!0)),rr(l?c:o,"scroll",$,At),rr(o,"wheel",j,At),rr(o,cn[0],H,At),rr(c,cn[2],Y),rr(c,cn[3],Y),rr(o,"click",T,!0),rr(o,"click",U),rr(c,"gesturestart",B),rr(c,"gestureend",z),rr(o,Ga+"enter",q),rr(o,Ga+"leave",J),rr(o,Ga+"move",et),Bt.isEnabled=Bt.isPressed=Bt.isDragging=!1,Rt&&Rt(Bt))},Bt.kill=function(){Bt.disable();var K=Jo.indexOf(Bt);K>=0&&Jo.splice(K,1),fs===Bt&&(fs=0)},Jo.push(Bt),W&&Rh(o)&&(fs=Bt),Bt.enable(v)},cP(r,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),r}();gi.version="3.11.3";gi.create=function(r){return new gi(r)};gi.register=Cy;gi.getAll=function(){return Jo.slice()};gi.getById=function(r){return Jo.filter(function(t){return t.vars.id===r})[0]};by()&&Zi.registerPlugin(gi);var ve,Ko,Ne,ai,Nn,ci,Ey,Ec,Mc,Qo,Pc,Ac,Ji,Ic,Gp,sr,My,Py,tl,Ay,Hp,Iy,Lr,Dy,Ly,Ry,qs,Wp,Xp,qp,Dc=1,ar=Date.now,Yp=ar(),Zr=0,Lc=0,Fy=function(){return Ic=1},ky=function(){return Ic=0},Bn=function(t){return t},kh=function(t){return Math.round(t*1e5)/1e5||0},Oy=function(){return typeof window!="undefined"},Ny=function(){return ve||Oy()&&(ve=window.gsap)&&ve.registerPlugin&&ve},Ha=function(t){return!!~Ey.indexOf(t)},By=function(t){return ds(t,"getBoundingClientRect")||(Ha(t)?function(){return Xc.width=Ne.innerWidth,Xc.height=Ne.innerHeight,Xc}:function(){return ms(t)})},pP=function(t,e,i){var n=i.d,s=i.d2,a=i.a;return(a=ds(t,"getBoundingClientRect"))?function(){return a()[n]}:function(){return(e?Ne["inner"+s]:t["client"+s])||0}},mP=function(t,e){return!e||~fn.indexOf(t)?By(t):function(){return Xc}},Ys=function(t,e){var i=e.s,n=e.d2,s=e.d,a=e.a;return(i="scroll"+n)&&(a=ds(t,i))?a()-By(t)()[s]:Ha(t)?(Nn[i]||ci[i])-(Ne["inner"+n]||Nn["client"+n]||ci["client"+n]):t[i]-t["offset"+n]},Rc=function(t,e){for(var i=0;i<tl.length;i+=3)(!e||~e.indexOf(tl[i+1]))&&t(tl[i],tl[i+1],tl[i+2])},dn=function(t){return typeof t=="string"},or=function(t){return typeof t=="function"},Oh=function(t){return typeof t=="number"},Fc=function(t){return typeof t=="object"};var Nh=function(t,e,i){return t&&t.progress(e?0:1)&&i&&t.pause()},jp=function(t,e){if(t.enabled){var i=e(t);i&&i.totalTime&&(t.callbackAnimation=i)}},el=Math.abs;var zy="left",Vy="top",Zp="right",$p="bottom",Wa="width",Xa="height",Bh="Right",zh="Left",Vh="Top",Uh="Bottom",vi="padding",$r="margin",il="Width",Jp="Height",Hi="px",zn=function(t){return Ne.getComputedStyle(t)},gP=function(t){var e=zn(t).position;t.style.position=e==="absolute"||e==="fixed"?e:"relative"},Uy=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},ms=function(t,e){var i=e&&zn(t)[Gp]!=="matrix(1, 0, 0, 1, 0, 0)"&&ve.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return i&&i.progress(0).kill(),n},Kp=function(t,e){var i=e.d2;return t["offset"+i]||t["client"+i]||0},Gy=function(t){var e=[],i=t.labels,n=t.duration(),s;for(s in i)e.push(i[s]/n);return e},vP=function(t){return function(e){return ve.utils.snap(Gy(t),e)}},Qp=function(t){var e=ve.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort(function(n,s){return n-s});return i?function(n,s,a){a===void 0&&(a=.001);var o;if(!s)return e(n);if(s>0){for(n-=a,o=0;o<i.length;o++)if(i[o]>=n)return i[o];return i[o-1]}else for(o=i.length,n+=a;o--;)if(i[o]<=n)return i[o];return i[0]}:function(n,s,a){a===void 0&&(a=.001);var o=e(n);return!s||Math.abs(o-n)<a||o-n<0==s<0?o:e(s<0?n-t:n+t)}},_P=function(t){return function(e,i){return Qp(Gy(t))(e,i.direction)}},kc=function(t,e,i,n){return i.split(",").forEach(function(s){return t(e,s,n)})},Wi=function(t,e,i,n,s){return t.addEventListener(e,i,{passive:!n,capture:!!s})},ki=function(t,e,i,n){return t.removeEventListener(e,i,!!n)},Oc=function(t,e,i){return i&&i.wheelHandler&&t(e,"wheel",i)},Hy={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Nc={toggleActions:"play",anticipatePin:0},Bc={top:0,left:0,center:.5,bottom:1,right:1},zc=function(t,e){if(dn(t)){var i=t.indexOf("="),n=~i?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(n*=e/100),t=t.substr(0,i-1)),t=n+(t in Bc?Bc[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Vc=function(t,e,i,n,s,a,o,h){var u=s.startColor,d=s.endColor,g=s.fontSize,f=s.indent,m=s.fontWeight,_=ai.createElement("div"),v=Ha(i)||ds(i,"pinType")==="fixed",b=t.indexOf("scroller")!==-1,C=v?ci:i,M=t.indexOf("start")!==-1,E=M?u:d,w="border-color:"+E+";font-size:"+g+";color:"+E+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((b||h)&&v?"fixed;":"absolute;"),(b||h||!v)&&(w+=(n===Si?Zp:$p)+":"+(a+parseFloat(f))+"px;"),o&&(w+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),_._isStart=M,_.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),_.style.cssText=w,_.innerText=e||e===0?t+"-"+e:t,C.children[0]?C.insertBefore(_,C.children[0]):C.appendChild(_),_._offset=_["offset"+n.op.d2],Uc(_,0,n,M),_},Uc=function(t,e,i,n){var s={display:"block"},a=i[n?"os2":"p2"],o=i[n?"p2":"os2"];t._isFlipped=n,s[i.a+"Percent"]=n?-100:0,s[i.a]=n?"1px":0,s["border"+a+il]=1,s["border"+o+il]=0,s[i.p]=e+"px",ve.set(t,s)},Le=[],tm={},Gh,Wy=function(){return ar()-Zr>34&&(Gh||(Gh=requestAnimationFrame(Ja)))},rl=function(){(!Lr||!Lr.isPressed||Lr.startX>ci.clientWidth)&&(ke.cache++,Lr?Gh||(Gh=requestAnimationFrame(Ja)):Ja(),Zr||Ya("scrollStart"),Zr=ar())},em=function(){Ry=Ne.innerWidth,Ly=Ne.innerHeight},Hh=function(){ke.cache++,!Ji&&!Iy&&!ai.fullscreenElement&&!ai.webkitFullscreenElement&&(!Dy||Ry!==Ne.innerWidth||Math.abs(Ne.innerHeight-Ly)>Ne.innerHeight*.25)&&Ec.restart(!0)},qa={},yP=[],Xy=function r(){return ki(Fe,"scrollEnd",r)||Za(!0)},Ya=function(t){return qa[t]&&qa[t].map(function(e){return e()})||yP},Rr=[],qy=function(t){for(var e=0;e<Rr.length;e+=5)(!t||Rr[e+4]&&Rr[e+4].query===t)&&(Rr[e].style.cssText=Rr[e+1],Rr[e].getBBox&&Rr[e].setAttribute("transform",Rr[e+2]||""),Rr[e+3].uncache=1)},im=function(t,e){var i;for(sr=0;sr<Le.length;sr++)i=Le[sr],i&&(!e||i._ctx===e)&&(t?i.kill(1):i.revert(!0,!0));e&&qy(e),e||Ya("revert")},Yy=function(t,e){ke.cache++,(e||!pn)&&ke.forEach(function(i){return or(i)&&i.cacheID++&&(i.rec=0)}),dn(t)&&(Ne.history.scrollRestoration=Xp=t)},pn,ja=0,jy,xP=function(){if(jy!==ja){var t=jy=ja;requestAnimationFrame(function(){return t===ja&&Za(!0)})}},Za=function(t,e){if(Zr&&!t){Wi(Fe,"scrollEnd",Xy);return}pn=Fe.isRefreshing=!0,ke.forEach(function(n){return or(n)&&n.cacheID++&&(n.rec=n())});var i=Ya("refreshInit");Ay&&Fe.sort(),e||im(),ke.forEach(function(n){or(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),Le.slice(0).forEach(function(n){return n.refresh()}),Le.forEach(function(n,s){if(n._subPinOffset&&n.pin){var a=n.vars.horizontal?"offsetWidth":"offsetHeight",o=n.pin[a];n.revert(!0,1),n.adjustPinSpacing(n.pin[a]-o),n.revert(!1,1)}}),Le.forEach(function(n){return n.vars.end==="max"&&n.setPositions(n.start,Math.max(n.start+1,Ys(n.scroller,n._dir)))}),i.forEach(function(n){return n&&n.render&&n.render(-1)}),ke.forEach(function(n){or(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),Yy(Xp,1),Ec.pause(),ja++,Ja(2),Le.forEach(function(n){return or(n.vars.onRefresh)&&n.vars.onRefresh(n)}),pn=Fe.isRefreshing=!1,Ya("refresh")},Zy=0,Gc=1,$a,Ja=function(t){if(!pn||t===2){Fe.isUpdating=!0,$a&&$a.update(0);var e=Le.length,i=ar(),n=i-Yp>=50,s=e&&Le[0].scroll();if(Gc=Zy>s?-1:1,Zy=s,n&&(Zr&&!Ic&&i-Zr>200&&(Zr=0,Ya("scrollEnd")),Pc=Yp,Yp=i),Gc<0){for(sr=e;sr-- >0;)Le[sr]&&Le[sr].update(0,n);Gc=1}else for(sr=0;sr<e;sr++)Le[sr]&&Le[sr].update(0,n);Fe.isUpdating=!1}Gh=0},rm=[zy,Vy,$p,Zp,$r+Uh,$r+Bh,$r+Vh,$r+zh,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Hc=rm.concat([Wa,Xa,"boxSizing","max"+il,"max"+Jp,"position",$r,vi,vi+Vh,vi+Bh,vi+Uh,vi+zh]),bP=function(t,e,i){nl(i);var n=t._gsap;if(n.spacerIsNative)nl(n.spacerState);else if(t._gsap.swappedIn){var s=e.parentNode;s&&(s.insertBefore(t,e),s.removeChild(e))}t._gsap.swappedIn=!1},nm=function(t,e,i,n){if(!t._gsap.swappedIn){for(var s=rm.length,a=e.style,o=t.style,h;s--;)h=rm[s],a[h]=i[h];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[$p]=o[Zp]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[Wa]=Kp(t,$i)+Hi,a[Xa]=Kp(t,Si)+Hi,a[vi]=o[$r]=o[Vy]=o[zy]="0",nl(n),o[Wa]=o["max"+il]=i[Wa],o[Xa]=o["max"+Jp]=i[Xa],o[vi]=i[vi],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},wP=/([A-Z])/g,nl=function(t){if(t){var e=t.t.style,i=t.length,n=0,s,a;for((t.t._gsap||ve.core.getCache(t.t)).uncache=1;n<i;n+=2)a=t[n+1],s=t[n],a?e[s]=a:e[s]&&e.removeProperty(s.replace(wP,"-$1").toLowerCase())}},Wc=function(t){for(var e=Hc.length,i=t.style,n=[],s=0;s<e;s++)n.push(Hc[s],i[Hc[s]]);return n.t=t,n},SP=function(t,e,i){for(var n=[],s=t.length,a=i?8:0,o;a<s;a+=2)o=t[a],n.push(o,o in e?e[o]:t[a+1]);return n.t=t.t,n},Xc={left:0,top:0},$y=function(t,e,i,n,s,a,o,h,u,d,g,f,m){or(t)&&(t=t(h)),dn(t)&&t.substr(0,3)==="max"&&(t=f+(t.charAt(4)==="="?zc("0"+t.substr(3),i):0));var _=m?m.time():0,v,b,C;if(m&&m.seek(0),Oh(t))o&&Uc(o,i,n,!0);else{or(e)&&(e=e(h));var M=(t||"0").split(" "),E,w,A,R;C=nr(e)||ci,E=ms(C)||{},(!E||!E.left&&!E.top)&&zn(C).display==="none"&&(R=C.style.display,C.style.display="block",E=ms(C),R?C.style.display=R:C.style.removeProperty("display")),w=zc(M[0],E[n.d]),A=zc(M[1]||"0",i),t=E[n.p]-u[n.p]-d+w+s-A,o&&Uc(o,A,n,i-A<20||o._isStart&&A>20),i-=i-A}if(a){var N=t+i,D=a._isStart;v="scroll"+n.d2,Uc(a,N,n,D&&N>20||!D&&(g?Math.max(ci[v],Nn[v]):a.parentNode[v])<=N+1),g&&(u=ms(o),g&&(a.style[n.op.p]=u[n.op.p]-n.op.m-a._offset+Hi))}return m&&C&&(v=ms(C),m.seek(f),b=ms(C),m._caScrollDist=v[n.p]-b[n.p],t=t/m._caScrollDist*f),m&&m.seek(_),m?t:Math.round(t)},TP=/(webkit|moz|length|cssText|inset)/i,Jy=function(t,e,i,n){if(t.parentNode!==e){var s=t.style,a,o;if(e===ci){t._stOrig=s.cssText,o=zn(t);for(a in o)!+a&&!TP.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=n}else s.cssText=t._stOrig;ve.core.getCache(t).uncache=1,e.appendChild(t)}},Ky=function(t,e){var i=ps(t,e),n="_scroll"+e.p2,s,a,o=function h(u,d,g,f,m){var _=h.tween,v=d.onComplete,b={};return g=g||i(),m=f&&m||0,f=f||u-g,_&&_.kill(),s=Math.round(g),d[n]=u,d.modifiers=b,b[n]=function(C){return C=Math.round(i()),C!==s&&C!==a&&Math.abs(C-s)>3&&Math.abs(C-a)>3?(_.kill(),h.tween=0):C=g+f*_.ratio+m*_.ratio*_.ratio,a=s,s=Math.round(C)},d.onComplete=function(){h.tween=0,v&&v.call(_)},_=h.tween=ve.to(t,d),_};return t[n]=i,i.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},Wi(t,"wheel",i.wheelHandler),o},Fe=function(){function r(e,i){Ko||r.register(ve)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,i)}var t=r.prototype;return t.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Lc){this.update=this.refresh=this.kill=Bn;return}i=Uy(dn(i)||Oh(i)||i.nodeType?{trigger:i}:i,Nc);var s=i,a=s.onUpdate,o=s.toggleClass,h=s.id,u=s.onToggle,d=s.onRefresh,g=s.scrub,f=s.trigger,m=s.pin,_=s.pinSpacing,v=s.invalidateOnRefresh,b=s.anticipatePin,C=s.onScrubComplete,M=s.onSnapComplete,E=s.once,w=s.snap,A=s.pinReparent,R=s.pinSpacer,N=s.containerAnimation,D=s.fastScrollEnd,X=s.preventOverlaps,at=i.horizontal||i.containerAnimation&&i.horizontal!==!1?$i:Si,ft=!g&&g!==0,gt=nr(i.scroller||Ne),ut=ve.core.getCache(gt),xt=Ha(gt),nt=("pinType"in i?i.pinType:ds(gt,"pinType")||xt&&"fixed")==="fixed",it=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],tt=ft&&i.toggleActions.split(" "),W="markers"in i?i.markers:Nc.markers,Q=xt?0:parseFloat(zn(gt)["border"+at.p2+il])||0,ot=this,ct=i.onRefreshInit&&function(){return i.onRefreshInit(ot)},Tt=pP(gt,xt,at),Rt=mP(gt,xt),Pt=0,Nt=0,At=ps(gt,at),Qt,Vt,Yt,Xt,re,qt,Ut,Lt,te,ge,Bt,oe,le,de,Se,wt,mt,Ft,l,c,p,x,y,T,P,I,L,k,G,V,H,Y,B,z,$,j,et,q;if(Wp(ot),ot._dir=at,b*=45,ot.scroller=gt,ot.scroll=N?N.time.bind(N):At,Xt=At(),ot.vars=i,n=n||i.animation,"refreshPriority"in i&&(Ay=1,i.refreshPriority===-9999&&($a=ot)),ut.tweenScroll=ut.tweenScroll||{top:Ky(gt,Si),left:Ky(gt,$i)},ot.tweenTo=Qt=ut.tweenScroll[at.p],ot.scrubDuration=function(O){H=Oh(O)&&O,H?V?V.duration(O):V=ve.to(n,{ease:"expo",totalProgress:"+=0.001",duration:H,paused:!0,onComplete:function(){return C&&C(ot)}}):(V&&V.progress(1).kill(),V=0)},n&&(n.vars.lazy=!1,n._initted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),ot.animation=n.pause(),n.scrollTrigger=ot,ot.scrubDuration(g),k=0,h||(h=n.vars.id)),Le.push(ot),w&&((!Fc(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in ci.style&&ve.set(xt?[ci,Nn]:gt,{scrollBehavior:"auto"}),ke.forEach(function(O){return or(O)&&O.target===(xt?ai.scrollingElement||Nn:gt)&&(O.smooth=!1)}),Yt=or(w.snapTo)?w.snapTo:w.snapTo==="labels"?vP(n):w.snapTo==="labelsDirectional"?_P(n):w.directional!==!1?function(O,rt){return Qp(w.snapTo)(O,ar()-Nt<500?0:rt.direction)}:ve.utils.snap(w.snapTo),Y=w.duration||{min:.1,max:2},Y=Fc(Y)?Qo(Y.min,Y.max):Qo(Y,Y),B=ve.delayedCall(w.delay||H/2||.1,function(){var O=At(),rt=ar()-Nt<500,lt=Qt.tween;if((rt||Math.abs(ot.getVelocity())<10)&&!lt&&!Ic&&Pt!==O){var pt=(O-qt)/le,bt=n&&!ft?n.totalProgress():pt,dt=rt?0:(bt-G)/(ar()-Pc)*1e3||0,St=ve.utils.clamp(-pt,1-pt,el(dt/2)*dt/.185),Z=pt+(w.inertia===!1?0:St),ht=Qo(0,1,Yt(Z,ot)),vt=Math.round(qt+ht*le),_t=w,Mt=_t.onStart,kt=_t.onInterrupt,Gt=_t.onComplete;if(O<=Ut&&O>=qt&&vt!==O){if(lt&&!lt._initted&&lt.data<=el(vt-O))return;w.inertia===!1&&(St=ht-pt),Qt(vt,{duration:Y(el(Math.max(el(Z-bt),el(ht-bt))*.185/dt/.05||0)),ease:w.ease||"power3",data:el(vt-O),onInterrupt:function(){return B.restart(!0)&&kt&&kt(ot)},onComplete:function(){ot.update(),Pt=At(),k=G=n&&!ft?n.totalProgress():ot.progress,M&&M(ot),Gt&&Gt(ot)}},O,St*le,vt-O-St*le),Mt&&Mt(ot,Qt.tween)}}else ot.isActive&&Pt!==O&&B.restart(!0)}).pause()),h&&(tm[h]=ot),f=ot.trigger=nr(f||m),q=f&&f._gsap&&f._gsap.stRevert,q&&(q=q(ot)),m=m===!0?f:nr(m),dn(o)&&(o={targets:f,className:o}),m&&(_===!1||_===$r||(_=!_&&m.parentNode&&m.parentNode.style&&zn(m.parentNode).display==="flex"?!1:vi),ot.pin=m,Vt=ve.core.getCache(m),Vt.spacer?de=Vt.pinState:(R&&(R=nr(R),R&&!R.nodeType&&(R=R.current||R.nativeElement),Vt.spacerIsNative=!!R,R&&(Vt.spacerState=Wc(R))),Vt.spacer=mt=R||ai.createElement("div"),mt.classList.add("pin-spacer"),h&&mt.classList.add("pin-spacer-"+h),Vt.pinState=de=Wc(m)),i.force3D!==!1&&ve.set(m,{force3D:!0}),ot.spacer=mt=Vt.spacer,L=zn(m),y=L[_+at.os2],l=ve.getProperty(m),c=ve.quickSetter(m,at.a,Hi),nm(m,mt,L),wt=Wc(m)),W){oe=Fc(W)?Uy(W,Hy):Hy,ge=Vc("scroller-start",h,gt,at,oe,0),Bt=Vc("scroller-end",h,gt,at,oe,0,ge),Ft=ge["offset"+at.op.d2];var J=nr(ds(gt,"content")||gt);Lt=this.markerStart=Vc("start",h,J,at,oe,Ft,0,N),te=this.markerEnd=Vc("end",h,J,at,oe,Ft,0,N),N&&(et=ve.quickSetter([Lt,te],at.a,Hi)),!nt&&!(fn.length&&ds(gt,"fixedMarkers")===!0)&&(gP(xt?ci:gt),ve.set([ge,Bt],{force3D:!0}),P=ve.quickSetter(ge,at.a,Hi),I=ve.quickSetter(Bt,at.a,Hi))}if(N){var U=N.vars.onUpdate,K=N.vars.onUpdateParams;N.eventCallback("onUpdate",function(){ot.update(0,0,1),U&&U.apply(K||[])})}ot.previous=function(){return Le[Le.indexOf(ot)-1]},ot.next=function(){return Le[Le.indexOf(ot)+1]},ot.revert=function(O,rt){if(!rt)return ot.kill(!0);var lt=O!==!1||!ot.enabled,pt=Ji;lt!==ot.isReverted&&(lt&&($=Math.max(At(),ot.scroll.rec||0),z=ot.progress,j=n&&n.progress()),Lt&&[Lt,te,ge,Bt].forEach(function(bt){return bt.style.display=lt?"none":"block"}),lt&&(Ji=1,ot.update(lt)),m&&(lt?bP(m,mt,de):(!A||!ot.isActive)&&nm(m,mt,zn(m),T)),lt||ot.update(lt),Ji=pt,ot.isReverted=lt)},ot.refresh=function(O,rt){if(!((Ji||!ot.enabled)&&!rt)){if(m&&O&&Zr){Wi(r,"scrollEnd",Xy);return}!pn&&ct&&ct(ot),Ji=1,Nt=ar(),Qt.tween&&(Qt.tween.kill(),Qt.tween=0),V&&V.pause(),v&&n&&n.revert({kill:!1}).invalidate(),ot.isReverted||ot.revert(!0,!0),ot._subPinOffset=!1;for(var lt=Tt(),pt=Rt(),bt=N?N.duration():Ys(gt,at),dt=0,St=0,Z=i.end,ht=i.endTrigger||f,vt=i.start||(i.start===0||!f?0:m?"0 0":"0 100%"),_t=ot.pinnedContainer=i.pinnedContainer&&nr(i.pinnedContainer),Mt=f&&Math.max(0,Le.indexOf(ot))||0,kt=Mt,Gt,Ht,Dt,Wt,zt,Kt,ee,ue,ne,me;kt--;)Kt=Le[kt],Kt.end||Kt.refresh(0,1)||(Ji=1),ee=Kt.pin,ee&&(ee===f||ee===m)&&!Kt.isReverted&&(me||(me=[]),me.unshift(Kt),Kt.revert(!0,!0)),Kt!==Le[kt]&&(Mt--,kt--);for(or(vt)&&(vt=vt(ot)),qt=$y(vt,f,lt,at,At(),Lt,ge,ot,pt,Q,nt,bt,N)||(m?-.001:0),or(Z)&&(Z=Z(ot)),dn(Z)&&!Z.indexOf("+=")&&(~Z.indexOf(" ")?Z=(dn(vt)?vt.split(" ")[0]:"")+Z:(dt=zc(Z.substr(2),lt),Z=dn(vt)?vt:qt+dt,ht=f)),Ut=Math.max(qt,$y(Z||(ht?"100% 0":bt),ht,lt,at,At()+dt,te,Bt,ot,pt,Q,nt,bt,N))||-.001,le=Ut-qt||(qt-=.01)&&.001,dt=0,kt=Mt;kt--;)Kt=Le[kt],ee=Kt.pin,ee&&Kt.start-Kt._pinPush<=qt&&!N&&Kt.end>0&&(Gt=Kt.end-Kt.start,(ee===f&&Kt.start-Kt._pinPush<qt||ee===_t)&&!Oh(vt)&&(dt+=Gt*(1-Kt.progress)),ee===m&&(St+=Gt));if(qt+=dt,Ut+=dt,ot._pinPush=St,Lt&&dt&&(Gt={},Gt[at.a]="+="+dt,_t&&(Gt[at.p]="-="+At()),ve.set([Lt,te],Gt)),m)Gt=zn(m),Wt=at===Si,Dt=At(),p=parseFloat(l(at.a))+St,!bt&&Ut>1&&((xt?ci:gt).style["overflow-"+at.a]="scroll"),nm(m,mt,Gt),wt=Wc(m),Ht=ms(m,!0),ue=nt&&ps(gt,Wt?$i:Si)(),_&&(T=[_+at.os2,le+St+Hi],T.t=mt,kt=_===vi?Kp(m,at)+le+St:0,kt&&T.push(at.d,kt+Hi),nl(T),_t&&Le.forEach(function(ce){ce.pin===_t&&ce.vars.pinSpacing!==!1&&(ce._subPinOffset=!0)}),nt&&At($)),nt&&(zt={top:Ht.top+(Wt?Dt-qt:ue)+Hi,left:Ht.left+(Wt?ue:Dt-qt)+Hi,boxSizing:"border-box",position:"fixed"},zt[Wa]=zt["max"+il]=Math.ceil(Ht.width)+Hi,zt[Xa]=zt["max"+Jp]=Math.ceil(Ht.height)+Hi,zt[$r]=zt[$r+Vh]=zt[$r+Bh]=zt[$r+Uh]=zt[$r+zh]="0",zt[vi]=Gt[vi],zt[vi+Vh]=Gt[vi+Vh],zt[vi+Bh]=Gt[vi+Bh],zt[vi+Uh]=Gt[vi+Uh],zt[vi+zh]=Gt[vi+zh],Se=SP(de,zt,A),pn&&At(0)),n?(ne=n._initted,Hp(1),n.render(n.duration(),!0,!0),x=l(at.a)-p+le+St,le!==x&&nt&&Se.splice(Se.length-2,2),n.render(0,!0,!0),ne||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),Hp(0)):x=le;else if(f&&At()&&!N)for(Ht=f.parentNode;Ht&&Ht!==ci;)Ht._pinOffset&&(qt-=Ht._pinOffset,Ut-=Ht._pinOffset),Ht=Ht.parentNode;me&&me.forEach(function(ce){return ce.revert(!1,!0)}),ot.start=qt,ot.end=Ut,Xt=re=pn?$:At(),!N&&!pn&&(Xt<$&&At($),ot.scroll.rec=0),ot.revert(!1,!0),B&&(Pt=-1,ot.isActive&&At(qt+le*z),B.restart(!0)),Ji=0,n&&ft&&(n._initted||j)&&n.progress()!==j&&n.progress(j,!0).render(n.time(),!0,!0),(z!==ot.progress||N)&&(n&&!ft&&n.totalProgress(z,!0),ot.progress=(Xt-qt)/le===z?0:z),m&&_&&(mt._pinOffset=Math.round(ot.progress*x)),d&&!pn&&d(ot)}},ot.getVelocity=function(){return(At()-re)/(ar()-Pc)*1e3||0},ot.endAnimation=function(){Nh(ot.callbackAnimation),n&&(V?V.progress(1):n.paused()?ft||Nh(n,ot.direction<0,1):Nh(n,n.reversed()))},ot.labelToScroll=function(O){return n&&n.labels&&(qt||ot.refresh()||qt)+n.labels[O]/n.duration()*le||0},ot.getTrailing=function(O){var rt=Le.indexOf(ot),lt=ot.direction>0?Le.slice(0,rt).reverse():Le.slice(rt+1);return(dn(O)?lt.filter(function(pt){return pt.vars.preventOverlaps===O}):lt).filter(function(pt){return ot.direction>0?pt.end<=qt:pt.start>=Ut})},ot.update=function(O,rt,lt){if(!(N&&!lt&&!O)){var pt=pn?$:ot.scroll(),bt=O?0:(pt-qt)/le,dt=bt<0?0:bt>1?1:bt||0,St=ot.progress,Z,ht,vt,_t,Mt,kt,Gt,Ht;if(rt&&(re=Xt,Xt=N?At():pt,w&&(G=k,k=n&&!ft?n.totalProgress():dt)),b&&!dt&&m&&!Ji&&!Dc&&Zr&&qt<pt+(pt-re)/(ar()-Pc)*b&&(dt=1e-4),dt!==St&&ot.enabled){if(Z=ot.isActive=!!dt&&dt<1,ht=!!St&&St<1,kt=Z!==ht,Mt=kt||!!dt!=!!St,ot.direction=dt>St?1:-1,ot.progress=dt,Mt&&!Ji&&(vt=dt&&!St?0:dt===1?1:St===1?2:3,ft&&(_t=!kt&&tt[vt+1]!=="none"&&tt[vt+1]||tt[vt],Ht=n&&(_t==="complete"||_t==="reset"||_t in n))),X&&(kt||Ht)&&(Ht||g||!n)&&(or(X)?X(ot):ot.getTrailing(X).forEach(function(Kt){return Kt.endAnimation()})),ft||(V&&!Ji&&!Dc?((N||$a&&$a!==ot)&&V.render(V._dp._time-V._start),V.resetTo?V.resetTo("totalProgress",dt,n._tTime/n._tDur):(V.vars.totalProgress=dt,V.invalidate().restart())):n&&n.totalProgress(dt,!!Ji)),m){if(O&&_&&(mt.style[_+at.os2]=y),!nt)c(kh(p+x*dt));else if(Mt){if(Gt=!O&&dt>St&&Ut+1>pt&&pt+1>=Ys(gt,at),A)if(!O&&(Z||Gt)){var Dt=ms(m,!0),Wt=pt-qt;Jy(m,ci,Dt.top+(at===Si?Wt:0)+Hi,Dt.left+(at===Si?0:Wt)+Hi)}else Jy(m,mt);nl(Z||Gt?Se:wt),x!==le&&dt<1&&Z||c(p+(dt===1&&!Gt?x:0))}}w&&!Qt.tween&&!Ji&&!Dc&&B.restart(!0),o&&(kt||E&&dt&&(dt<1||!qp))&&Mc(o.targets).forEach(function(Kt){return Kt.classList[Z||E?"add":"remove"](o.className)}),a&&!ft&&!O&&a(ot),Mt&&!Ji?(ft&&(Ht&&(_t==="complete"?n.pause().totalProgress(1):_t==="reset"?n.restart(!0).pause():_t==="restart"?n.restart(!0):n[_t]()),a&&a(ot)),(kt||!qp)&&(u&&kt&&jp(ot,u),it[vt]&&jp(ot,it[vt]),E&&(dt===1?ot.kill(!1,1):it[vt]=0),kt||(vt=dt===1?1:3,it[vt]&&jp(ot,it[vt]))),D&&!Z&&Math.abs(ot.getVelocity())>(Oh(D)?D:2500)&&(Nh(ot.callbackAnimation),V?V.progress(1):Nh(n,_t==="reverse"?1:!dt,1))):ft&&a&&!Ji&&a(ot)}if(I){var zt=N?pt/N.duration()*(N._caScrollDist||0):pt;P(zt+(ge._isFlipped?1:0)),I(zt)}et&&et(-pt/N.duration()*(N._caScrollDist||0))}},ot.enable=function(O,rt){ot.enabled||(ot.enabled=!0,Wi(gt,"resize",Hh),Wi(xt?ai:gt,"scroll",rl),ct&&Wi(r,"refreshInit",ct),O!==!1&&(ot.progress=z=0,Xt=re=Pt=At()),rt!==!1&&ot.refresh())},ot.getTween=function(O){return O&&Qt?Qt.tween:V},ot.setPositions=function(O,rt){m&&(p+=O-qt,x+=rt-O-le,_===vi&&ot.adjustPinSpacing(rt-O-le)),ot.start=qt=O,ot.end=Ut=rt,le=rt-O,ot.update()},ot.adjustPinSpacing=function(O){if(T){var rt=T.indexOf(at.d)+1;T[rt]=parseFloat(T[rt])+O+Hi,T[1]=parseFloat(T[1])+O+Hi,nl(T)}},ot.disable=function(O,rt){if(ot.enabled&&(O!==!1&&ot.revert(!0,!0),ot.enabled=ot.isActive=!1,rt||V&&V.pause(),$=0,Vt&&(Vt.uncache=1),ct&&ki(r,"refreshInit",ct),B&&(B.pause(),Qt.tween&&Qt.tween.kill()&&(Qt.tween=0)),!xt)){for(var lt=Le.length;lt--;)if(Le[lt].scroller===gt&&Le[lt]!==ot)return;ki(gt,"resize",Hh),ki(gt,"scroll",rl)}},ot.kill=function(O,rt){ot.disable(O,rt),V&&!rt&&V.kill(),h&&delete tm[h];var lt=Le.indexOf(ot);lt>=0&&Le.splice(lt,1),lt===sr&&Gc>0&&sr--,lt=0,Le.forEach(function(pt){return pt.scroller===ot.scroller&&(lt=1)}),lt||pn||(ot.scroll.rec=0),n&&(n.scrollTrigger=null,O&&n.revert({kill:!1}),rt||n.kill()),Lt&&[Lt,te,ge,Bt].forEach(function(pt){return pt.parentNode&&pt.parentNode.removeChild(pt)}),$a===ot&&($a=0),m&&(Vt&&(Vt.uncache=1),lt=0,Le.forEach(function(pt){return pt.pin===m&&lt++}),lt||(Vt.spacer=0)),i.onKill&&i.onKill(ot)},ot.enable(!1,!1),q&&q(ot),!n||!n.add||le?ot.refresh():ve.delayedCall(.01,function(){return qt||Ut||ot.refresh()})&&(le=.01)&&(qt=Ut=0),m&&xP()},r.register=function(i){return Ko||(ve=i||Ny(),Oy()&&window.document&&r.enable(),Ko=Lc),Ko},r.defaults=function(i){if(i)for(var n in i)Nc[n]=i[n];return Nc},r.disable=function(i,n){Lc=0,Le.forEach(function(a){return a[n?"kill":"disable"](i)}),ki(Ne,"wheel",rl),ki(ai,"scroll",rl),clearInterval(Ac),ki(ai,"touchcancel",Bn),ki(ci,"touchstart",Bn),kc(ki,ai,"pointerdown,touchstart,mousedown",Fy),kc(ki,ai,"pointerup,touchend,mouseup",ky),Ec.kill(),Rc(ki);for(var s=0;s<ke.length;s+=3)Oc(ki,ke[s],ke[s+1]),Oc(ki,ke[s],ke[s+2])},r.enable=function(){if(Ne=window,ai=document,Nn=ai.documentElement,ci=ai.body,ve&&(Mc=ve.utils.toArray,Qo=ve.utils.clamp,Wp=ve.core.context||Bn,Hp=ve.core.suppressOverwrites||Bn,Xp=Ne.history.scrollRestoration||"auto",ve.core.globals("ScrollTrigger",r),ci)){Lc=1,gi.register(ve),r.isTouch=gi.isTouch,qs=gi.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Wi(Ne,"wheel",rl),Ey=[Ne,ai,Nn,ci],ve.matchMedia?(r.matchMedia=function(h){var u=ve.matchMedia(),d;for(d in h)u.add(d,h[d]);return u},ve.addEventListener("matchMediaInit",function(){return im()}),ve.addEventListener("matchMediaRevert",function(){return qy()}),ve.addEventListener("matchMedia",function(){Za(0,1),Ya("matchMedia")}),ve.matchMedia("(orientation: portrait)",function(){return em(),em})):console.warn("Requires GSAP 3.11.0 or later"),em(),Wi(ai,"scroll",rl);var i=ci.style,n=i.borderTopStyle,s=ve.core.Animation.prototype,a,o;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",a=ms(ci),Si.m=Math.round(a.top+Si.sc())||0,$i.m=Math.round(a.left+$i.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),Ac=setInterval(Wy,250),ve.delayedCall(.5,function(){return Dc=0}),Wi(ai,"touchcancel",Bn),Wi(ci,"touchstart",Bn),kc(Wi,ai,"pointerdown,touchstart,mousedown",Fy),kc(Wi,ai,"pointerup,touchend,mouseup",ky),Gp=ve.utils.checkPrefix("transform"),Hc.push(Gp),Ko=ar(),Ec=ve.delayedCall(.2,Za).pause(),tl=[ai,"visibilitychange",function(){var h=Ne.innerWidth,u=Ne.innerHeight;ai.hidden?(My=h,Py=u):(My!==h||Py!==u)&&Hh()},ai,"DOMContentLoaded",Za,Ne,"load",Za,Ne,"resize",Hh],Rc(Wi),Le.forEach(function(h){return h.enable(0,1)}),o=0;o<ke.length;o+=3)Oc(ki,ke[o],ke[o+1]),Oc(ki,ke[o],ke[o+2])}},r.config=function(i){"limitCallbacks"in i&&(qp=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(Ac)||(Ac=n)&&setInterval(Wy,n),"ignoreMobileResize"in i&&(Dy=r.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Rc(ki)||Rc(Wi,i.autoRefreshEvents||"none"),Iy=(i.autoRefreshEvents+"").indexOf("resize")===-1)},r.scrollerProxy=function(i,n){var s=nr(i),a=ke.indexOf(s),o=Ha(s);~a&&ke.splice(a,o?6:2),n&&(o?fn.unshift(Ne,n,ci,n,Nn,n):fn.unshift(s,n))},r.clearMatchMedia=function(i){Le.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},r.isInViewport=function(i,n,s){var a=(dn(i)?nr(i):i).getBoundingClientRect(),o=a[s?Wa:Xa]*n||0;return s?a.right-o>0&&a.left+o<Ne.innerWidth:a.bottom-o>0&&a.top+o<Ne.innerHeight},r.positionInViewport=function(i,n,s){dn(i)&&(i=nr(i));var a=i.getBoundingClientRect(),o=a[s?Wa:Xa],h=n==null?o/2:n in Bc?Bc[n]*o:~n.indexOf("%")?parseFloat(n)*o/100:parseFloat(n)||0;return s?(a.left+h)/Ne.innerWidth:(a.top+h)/Ne.innerHeight},r.killAll=function(i){if(Le.forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var n=qa.killAll||[];qa={},n.forEach(function(s){return s()})}},r}();Fe.version="3.11.3";Fe.saveStyles=function(r){return r?Mc(r).forEach(function(t){if(t&&t.style){var e=Rr.indexOf(t);e>=0&&Rr.splice(e,5),Rr.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),ve.core.getCache(t),Wp())}}):Rr};Fe.revert=function(r,t){return im(!r,t)};Fe.create=function(r,t){return new Fe(r,t)};Fe.refresh=function(r){return r?Hh():(Ko||Fe.register())&&Za(!0)};Fe.update=Ja;Fe.clearScrollMemory=Yy;Fe.maxScroll=function(r,t){return Ys(r,t?$i:Si)};Fe.getScrollFunc=function(r,t){return ps(nr(r),t?$i:Si)};Fe.getById=function(r){return tm[r]};Fe.getAll=function(){return Le.filter(function(r){return r.vars.id!=="ScrollSmoother"})};Fe.isScrolling=function(){return!!Zr};Fe.snapDirectional=Qp;Fe.addEventListener=function(r,t){var e=qa[r]||(qa[r]=[]);~e.indexOf(t)||e.push(t)};Fe.removeEventListener=function(r,t){var e=qa[r],i=e&&e.indexOf(t);i>=0&&e.splice(i,1)};Fe.batch=function(r,t){var e=[],i={},n=t.interval||.016,s=t.batchMax||1e9,a=function(u,d){var g=[],f=[],m=ve.delayedCall(n,function(){d(g,f),g=[],f=[]}).pause();return function(_){g.length||m.restart(!0),g.push(_.trigger),f.push(_),s<=g.length&&m.progress(1)}},o;for(o in t)i[o]=o.substr(0,2)==="on"&&or(t[o])&&o!=="onRefreshInit"?a(o,t[o]):t[o];return or(s)&&(s=s(),Wi(Fe,"refresh",function(){return s=t.batchMax()})),Mc(r).forEach(function(h){var u={};for(o in i)u[o]=i[o];u.trigger=h,e.push(Fe.create(u))}),e};var Qy=function(t,e,i,n){return e>n?t(n):e<0&&t(0),i>n?(n-e)/(i-e):i<0?e/(e-i):1},sm=function r(t,e){e===!0?t.style.removeProperty("touch-action"):t.style.touchAction=e===!0?"auto":e?"pan-"+e+(gi.isTouch?" pinch-zoom":""):"none",t===Nn&&r(ci,e)},tx={auto:1,scroll:1},CP=function(t){var e=t.event,i=t.target,n=t.axis,s=(e.changedTouches?e.changedTouches[0]:e).target,a=s._gsap||ve.core.getCache(s),o=ar(),h;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s.scrollHeight<=s.clientHeight;)s=s.parentNode;a._isScroll=s&&!Ha(s)&&s!==i&&(tx[(h=zn(s)).overflowY]||tx[h.overflowX]),a._isScrollT=o}(a._isScroll||n==="x")&&(e.stopPropagation(),e._gsapAllow=!0)},ex=function(t,e,i,n){return gi.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:n=n&&CP,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&Wi(ai,gi.eventTypes[0],rx,!1,!0)},onDisable:function(){return ki(ai,gi.eventTypes[0],rx,!0)}})},EP=/(input|label|select|textarea)/i,ix,rx=function(t){var e=EP.test(t.target.tagName);(e||ix)&&(t._gsapAllow=!0,ix=e)},MP=function(t){Fc(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e=t,i=e.normalizeScrollX,n=e.momentum,s=e.allowNestedScroll,a,o,h=nr(t.target)||Nn,u=ve.core.globals().ScrollSmoother,d=u&&u.get(),g=qs&&(t.content&&nr(t.content)||d&&t.content!==!1&&!d.smooth()&&d.content()),f=ps(h,Si),m=ps(h,$i),_=1,v=(gi.isTouch&&Ne.visualViewport?Ne.visualViewport.scale*Ne.visualViewport.width:Ne.outerWidth)/Ne.innerWidth,b=0,C=or(n)?function(){return n(a)}:function(){return n||2.8},M,E,w=ex(h,t.type,!0,s),A=function(){return E=!1},R=Bn,N=Bn,D=function(){o=Ys(h,Si),N=Qo(qs?1:0,o),i&&(R=Qo(0,Ys(h,$i))),M=ja},X=function(){g._gsap.y=kh(parseFloat(g._gsap.y)+f.offset)+"px",g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(g._gsap.y)+", 0, 1)",f.offset=f.cacheID=0},at=function(){if(E){requestAnimationFrame(A);var tt=kh(a.deltaY/2),W=N(f.v-tt);if(g&&W!==f.v+f.offset){f.offset=W-f.v;var Q=kh((parseFloat(g&&g._gsap.y)||0)-f.offset);g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Q+", 0, 1)",g._gsap.y=Q+"px",f.cacheID=ke.cache,Ja()}return!0}f.offset&&X(),E=!0},ft,gt,ut,xt,nt=function(){D(),ft.isActive()&&ft.vars.scrollY>o&&(f()>o?ft.progress(1)&&f(o):ft.resetTo("scrollY",o))};return g&&ve.set(g,{y:"+=0"}),t.ignoreCheck=function(it){return qs&&it.type==="touchmove"&&at(it)||_>1.05&&it.type!=="touchstart"||a.isGesturing||it.touches&&it.touches.length>1},t.onPress=function(){var it=_;_=kh((Ne.visualViewport&&Ne.visualViewport.scale||1)/v),ft.pause(),it!==_&&sm(h,_>1.01?!0:i?!1:"x"),gt=m(),ut=f(),D(),M=ja},t.onRelease=t.onGestureStart=function(it,tt){if(f.offset&&X(),!tt)xt.restart(!0);else{ke.cache++;var W=C(),Q,ot;i&&(Q=m(),ot=Q+W*.05*-it.velocityX/.227,W*=Qy(m,Q,ot,Ys(h,$i)),ft.vars.scrollX=R(ot)),Q=f(),ot=Q+W*.05*-it.velocityY/.227,W*=Qy(f,Q,ot,Ys(h,Si)),ft.vars.scrollY=N(ot),ft.invalidate().duration(W).play(.01),(qs&&ft.vars.scrollY>=o||Q>=o-1)&&ve.to({},{onUpdate:nt,duration:W})}},t.onWheel=function(){ft._ts&&ft.pause(),ar()-b>1e3&&(M=0,b=ar())},t.onChange=function(it,tt,W,Q,ot){if(ja!==M&&D(),tt&&i&&m(R(Q[2]===tt?gt+(it.startX-it.x):m()+tt-Q[1])),W){f.offset&&X();var ct=ot[2]===W,Tt=ct?ut+it.startY-it.y:f()+W-ot[1],Rt=N(Tt);ct&&Tt!==Rt&&(ut+=Rt-Tt),f(Rt)}(W||tt)&&Ja()},t.onEnable=function(){sm(h,i?!1:"x"),Fe.addEventListener("refresh",nt),Wi(Ne,"resize",nt),f.smooth&&(f.target.style.scrollBehavior="auto",f.smooth=m.smooth=!1),w.enable()},t.onDisable=function(){sm(h,!0),ki(Ne,"resize",nt),Fe.removeEventListener("refresh",nt),w.kill()},t.lockAxis=t.lockAxis!==!1,a=new gi(t),a.iOS=qs,qs&&!f()&&f(1),qs&&ve.ticker.add(Bn),xt=a._dc,ft=ve.to(a,{ease:"power4",paused:!0,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:xt.vars.onComplete}),a};Fe.sort=function(r){return Le.sort(r||function(t,e){return(t.vars.refreshPriority||0)*-1e6+t.start-(e.start+(e.vars.refreshPriority||0)*-1e6)})};Fe.observe=function(r){return new gi(r)};Fe.normalizeScroll=function(r){if(typeof r=="undefined")return Lr;if(r===!0&&Lr)return Lr.enable();if(r===!1)return Lr&&Lr.kill();var t=r instanceof gi?r:MP(r);return Lr&&Lr.target===t.target&&Lr.kill(),Ha(t.target)&&(Lr=t),t};Fe.core={_getVelocityProp:Cc,_inputObserver:ex,_scrollers:ke,_proxies:fn,bridge:{ss:function(){Zr||Ya("scrollStart"),Zr=ar()},ref:function(){return Ji}}};Ny()&&ve.registerPlugin(Fe);var gs,Ka,am,sl,Wh,qc,Yc,Xh,Jr="transform",om=Jr+"Origin",nx,sx=function(t){var e=t.ownerDocument||t;for(!(Jr in t.style)&&("msTransform"in t.style)&&(Jr="msTransform",om=Jr+"Origin");e.parentNode&&(e=e.parentNode););if(Ka=window,Yc=new js,e){gs=e,am=e.documentElement,sl=e.body,Xh=gs.createElementNS("http://www.w3.org/2000/svg","g"),Xh.style.transform="none";var i=e.createElement("div"),n=e.createElement("div");sl.appendChild(i),i.appendChild(n),i.style.position="static",i.style[Jr]="translate3d(0,0,1px)",nx=n.offsetParent!==i,sl.removeChild(i)}return e},PP=function(t){for(var e,i;t&&t!==sl;)i=t._gsap,i&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),e?e.push(i):e=[i]),t=t.parentNode;return e},ax=[],ox=[],AP=function(){return Ka.pageYOffset||gs.scrollTop||am.scrollTop||sl.scrollTop||0},IP=function(){return Ka.pageXOffset||gs.scrollLeft||am.scrollLeft||sl.scrollLeft||0},lm=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},DP=function r(t){if(Ka.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},hm=function r(t,e){if(t.parentNode&&(gs||sx(t))){var i=lm(t),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?e?"rect":"g":"div",a=e!==2?0:100,o=e===3?100:0,h="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",u=gs.createElementNS?gs.createElementNS(n.replace(/^https/,"http"),s):gs.createElement(s);return e&&(i?(qc||(qc=r(t)),u.setAttribute("width",.01),u.setAttribute("height",.01),u.setAttribute("transform","translate("+a+","+o+")"),qc.appendChild(u)):(Wh||(Wh=r(t),Wh.style.cssText=h),u.style.cssText=h+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",Wh.appendChild(u))),u}throw"Need document and parent."},LP=function(t){for(var e=new js,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e},RP=function(t){var e=t.getCTM(),i;return e||(i=t.style[Jr],t.style[Jr]="none",t.appendChild(Xh),e=Xh.getCTM(),t.removeChild(Xh),i?t.style[Jr]=i:t.style.removeProperty(Jr.replace(/([A-Z])/g,"-$1").toLowerCase())),e||Yc.clone()},FP=function(t,e){var i=lm(t),n=t===i,s=i?ax:ox,a=t.parentNode,o,h,u,d,g,f;if(t===Ka)return t;if(s.length||s.push(hm(t,1),hm(t,2),hm(t,3)),o=i?qc:Wh,i)n?(u=RP(t),d=-u.e/u.a,g=-u.f/u.d,h=Yc):t.getBBox?(u=t.getBBox(),h=t.transform?t.transform.baseVal:{},h=h.numberOfItems?h.numberOfItems>1?LP(h):h.getItem(0).matrix:Yc,d=h.a*u.x+h.c*u.y,g=h.b*u.x+h.d*u.y):(h=new js,d=g=0),e&&t.tagName.toLowerCase()==="g"&&(d=g=0),(n?i:a).appendChild(o),o.setAttribute("transform","matrix("+h.a+","+h.b+","+h.c+","+h.d+","+(h.e+d)+","+(h.f+g)+")");else{if(d=g=0,nx)for(h=t.offsetParent,u=t;u&&(u=u.parentNode)&&u!==h&&u.parentNode;)(Ka.getComputedStyle(u)[Jr]+"").length>4&&(d=u.offsetLeft,g=u.offsetTop,u=0);if(f=Ka.getComputedStyle(t),f.position!=="absolute"&&f.position!=="fixed")for(h=t.offsetParent;a&&a!==h;)d+=a.scrollLeft||0,g+=a.scrollTop||0,a=a.parentNode;u=o.style,u.top=t.offsetTop-g+"px",u.left=t.offsetLeft-d+"px",u[Jr]=f[Jr],u[om]=f[om],u.position=f.position==="fixed"?"fixed":"absolute",t.parentNode.appendChild(o)}return o},um=function(t,e,i,n,s,a,o){return t.a=e,t.b=i,t.c=n,t.d=s,t.e=a,t.f=o,t},js=function(){function r(e,i,n,s,a,o){e===void 0&&(e=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),um(this,e,i,n,s,a,o)}var t=r.prototype;return t.inverse=function(){var i=this.a,n=this.b,s=this.c,a=this.d,o=this.e,h=this.f,u=i*a-n*s||1e-10;return um(this,a/u,-n/u,-s/u,i/u,(s*h-a*o)/u,-(i*h-n*o)/u)},t.multiply=function(i){var n=this.a,s=this.b,a=this.c,o=this.d,h=this.e,u=this.f,d=i.a,g=i.c,f=i.b,m=i.d,_=i.e,v=i.f;return um(this,d*n+f*a,d*s+f*o,g*n+m*a,g*s+m*o,h+_*n+v*a,u+_*s+v*o)},t.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(i){var n=this.a,s=this.b,a=this.c,o=this.d,h=this.e,u=this.f;return n===i.a&&s===i.b&&a===i.c&&o===i.d&&h===i.e&&u===i.f},t.apply=function(i,n){n===void 0&&(n={});var s=i.x,a=i.y,o=this.a,h=this.b,u=this.c,d=this.d,g=this.e,f=this.f;return n.x=s*o+a*u+g||0,n.y=s*h+a*d+f||0,n},r}();function Zs(r,t,e,i){if(!r||!r.parentNode||(gs||sx(r)).documentElement===r)return new js;var n=PP(r),s=lm(r),a=s?ax:ox,o=FP(r,e),h=a[0].getBoundingClientRect(),u=a[1].getBoundingClientRect(),d=a[2].getBoundingClientRect(),g=o.parentNode,f=!i&&DP(r),m=new js((u.left-h.left)/100,(u.top-h.top)/100,(d.left-h.left)/100,(d.top-h.top)/100,h.left+(f?0:IP()),h.top+(f?0:AP()));if(g.removeChild(o),n)for(h=n.length;h--;)u=n[h],u.scaleX=u.scaleY=0,u.renderTransform(1,u);return t?m.inverse():m}function kP(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function OP(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var ze,je,Fr,mn,vs,cm,_s,fm,qh,$s,lx,dm,Yh,pm,jh,gn,Zh,jc,Zc=0,hx=function(){return typeof window!="undefined"},ux=function(){return ze||hx()&&(ze=window.gsap)&&ze.registerPlugin&&ze},Js=function(t){return typeof t=="function"},$h=function(t){return typeof t=="object"},vn=function(t){return typeof t=="undefined"},$c=function(){return!1},Jh="transform",mm="transformOrigin",Ks=function(t){return Math.round(t*1e4)/1e4},Kh=Array.isArray,Jc=function(t,e){var i=Fr.createElementNS?Fr.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Fr.createElement(t);return i.style?i:Fr.createElement(t)},cx=180/Math.PI,Qa=1e20,NP=new js,Qs=Date.now||function(){return new Date().getTime()},to=[],al={},BP=0,zP=/^(?:a|input|textarea|button|select)$/i,fx=0,ol={},ys={},dx=function(t,e){var i={},n;for(n in t)i[n]=e?t[n]*e:t[n];return i},VP=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},px=function r(t,e){for(var i=t.length,n;i--;)e?t[i].style.touchAction=e:t[i].style.removeProperty("touch-action"),n=t[i].children,n&&n.length&&r(n,e)},mx=function(){return to.forEach(function(t){return t()})},UP=function(t){to.push(t),to.length===1&&ze.ticker.add(mx)},gx=function(){return!to.length&&ze.ticker.remove(mx)},vx=function(t){for(var e=to.length;e--;)to[e]===t&&to.splice(e,1);ze.to(gx,{overwrite:!0,delay:15,duration:0,onComplete:gx,data:"_draggable"})},GP=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Mi=function(t,e,i,n){if(t.addEventListener){var s=Yh[e];n=n||(lx?{passive:!1}:null),t.addEventListener(s||e,i,n),s&&e!==s&&t.addEventListener(e,i,n)}},Ti=function(t,e,i){if(t.removeEventListener){var n=Yh[e];t.removeEventListener(n||e,i),n&&e!==n&&t.removeEventListener(e,i)}},Kr=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},HP=function(t,e){for(var i=t.length;i--;)if(t[i].identifier===e)return!0},WP=function r(t){pm=t.touches&&Zc<t.touches.length,Ti(t.target,"touchend",r)},_x=function(t){pm=t.touches&&Zc<t.touches.length,Mi(t.target,"touchend",WP)},ll=function(t){return je.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},hl=function(t){return je.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},yx=function r(t,e){Mi(t,"scroll",e),ul(t.parentNode)||r(t.parentNode,e)},xx=function r(t,e){Ti(t,"scroll",e),ul(t.parentNode)||r(t.parentNode,e)},ul=function(t){return!t||t===mn||t.nodeType===9||t===Fr.body||t===je||!t.nodeType||!t.parentNode},bx=function(t,e){var i=e==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,ul(t)?Math.max(mn[n],vs[n])-(je["inner"+i]||mn[s]||vs[s]):t[n]-t[s])},gm=function r(t,e){var i=bx(t,"x"),n=bx(t,"y");ul(t)?t=ys:r(t.parentNode,e),t._gsMaxScrollX=i,t._gsMaxScrollY=n,e||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},vm=function(t,e,i){var n=t.style;!n||(vn(n[e])&&(e=qh(e,t)||e),i==null?n.removeProperty&&n.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):n[e]=i)},Qh=function(t){return je.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},eo={},cl=function(t){if(t===je)return eo.left=eo.top=0,eo.width=eo.right=mn.clientWidth||t.innerWidth||vs.clientWidth||0,eo.height=eo.bottom=(t.innerHeight||0)-20<mn.clientHeight?mn.clientHeight:t.innerHeight||vs.clientHeight||0,eo;var e=t.ownerDocument||Fr,i=vn(t.pageX)?!t.nodeType&&!vn(t.left)&&!vn(t.top)?t:$s(t)[0].getBoundingClientRect():{left:t.pageX-hl(e),top:t.pageY-ll(e),right:t.pageX-hl(e)+1,bottom:t.pageY-ll(e)+1};return vn(i.right)&&!vn(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):vn(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},_i=function(t,e,i){var n=t.vars,s=n[i],a=t._listeners[e],o;return Js(s)&&(o=s.apply(n.callbackScope||t,n[i+"Params"]||[t.pointerEvent])),a&&t.dispatchEvent(e)===!1&&(o=!1),o},wx=function(t,e){var i=$s(t)[0],n,s,a;return!i.nodeType&&i!==je?vn(t.left)?(s=t.min||t.minX||t.minRotation||0,n=t.min||t.minY||0,{left:s,top:n,width:(t.max||t.maxX||t.maxRotation||0)-s,height:(t.max||t.maxY||0)-n}):(a={x:0,y:0},{left:t.left-a.x,top:t.top-a.y,width:t.width,height:t.height}):XP(i,e)},Qr={},XP=function(t,e){e=$s(e)[0];var i=t.getBBox&&t.ownerSVGElement,n=t.ownerDocument||Fr,s,a,o,h,u,d,g,f,m,_,v,b,C;if(t===je)o=ll(n),s=hl(n),a=s+(n.documentElement.clientWidth||t.innerWidth||n.body.clientWidth||0),h=o+((t.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:t.innerHeight||n.body.clientHeight||0);else{if(e===je||vn(e))return t.getBoundingClientRect();s=o=0,i?(_=t.getBBox(),v=_.width,b=_.height):(t.viewBox&&(_=t.viewBox.baseVal)&&(s=_.x||0,o=_.y||0,v=_.width,b=_.height),v||(C=Qh(t),_=C.boxSizing==="border-box",v=(parseFloat(C.width)||t.clientWidth||0)+(_?0:parseFloat(C.borderLeftWidth)+parseFloat(C.borderRightWidth)),b=(parseFloat(C.height)||t.clientHeight||0)+(_?0:parseFloat(C.borderTopWidth)+parseFloat(C.borderBottomWidth)))),a=v,h=b}return t===e?{left:s,top:o,width:a-s,height:h-o}:(u=Zs(e,!0).multiply(Zs(t)),d=u.apply({x:s,y:o}),g=u.apply({x:a,y:o}),f=u.apply({x:a,y:h}),m=u.apply({x:s,y:h}),s=Math.min(d.x,g.x,f.x,m.x),o=Math.min(d.y,g.y,f.y,m.y),{left:s,top:o,width:Math.max(d.x,g.x,f.x,m.x)-s,height:Math.max(d.y,g.y,f.y,m.y)-o})},_m=function(t,e,i,n,s,a){var o={},h,u,d;if(e)if(s!==1&&e instanceof Array){if(o.end=h=[],d=e.length,$h(e[0]))for(u=0;u<d;u++)h[u]=dx(e[u],s);else for(u=0;u<d;u++)h[u]=e[u]*s;i+=1.1,n-=1.1}else Js(e)?o.end=function(g){var f=e.call(t,g),m,_;if(s!==1)if($h(f)){m={};for(_ in f)m[_]=f[_]*s;f=m}else f*=s;return f}:o.end=e;return(i||i===0)&&(o.max=i),(n||n===0)&&(o.min=n),a&&(o.velocity=0),o},qP=function r(t){var e;return!t||!t.getAttribute||t===vs?!1:(e=t.getAttribute("data-clickable"))==="true"||e!=="false"&&(t.onclick||zP.test(t.nodeName+"")||t.getAttribute("contentEditable")==="true")?!0:r(t.parentNode)},Kc=function(t,e){for(var i=t.length,n;i--;)n=t[i],n.ondragstart=n.onselectstart=e?null:$c,ze.set(n,{lazy:!0,userSelect:e?"text":"none"})},YP=function r(t){if(Qh(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Sx,ym,jP=function(t,e){t=ze.utils.toArray(t)[0],e=e||{};var i=document.createElement("div"),n=i.style,s=t.firstChild,a=0,o=0,h=t.scrollTop,u=t.scrollLeft,d=t.scrollWidth,g=t.scrollHeight,f=0,m=0,_=0,v,b,C,M,E,w;Sx&&e.force3D!==!1?(E="translate3d(",w="px,0px)"):Jh&&(E="translate(",w="px)"),this.scrollTop=function(A,R){if(!arguments.length)return-this.top();this.top(-A,R)},this.scrollLeft=function(A,R){if(!arguments.length)return-this.left();this.left(-A,R)},this.left=function(A,R){if(!arguments.length)return-(t.scrollLeft+o);var N=t.scrollLeft-u,D=o;if((N>2||N<-2)&&!R){u=t.scrollLeft,ze.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-u),e.onKill&&e.onKill();return}A=-A,A<0?(o=A-.5|0,A=0):A>m?(o=A-m|0,A=m):o=0,(o||D)&&(this._skip||(n[Jh]=E+-o+"px,"+-a+w),o+f>=0&&(n.paddingRight=o+f+"px")),t.scrollLeft=A|0,u=t.scrollLeft},this.top=function(A,R){if(!arguments.length)return-(t.scrollTop+a);var N=t.scrollTop-h,D=a;if((N>2||N<-2)&&!R){h=t.scrollTop,ze.killTweensOf(this,{top:1,scrollTop:1}),this.top(-h),e.onKill&&e.onKill();return}A=-A,A<0?(a=A-.5|0,A=0):A>_?(a=A-_|0,A=_):a=0,(a||D)&&(this._skip||(n[Jh]=E+-o+"px,"+-a+w)),t.scrollTop=A|0,h=t.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return m},this.disable=function(){for(s=i.firstChild;s;)M=s.nextSibling,t.appendChild(s),s=M;t===i.parentNode&&t.removeChild(i)},this.enable=function(){if(s=t.firstChild,s!==i){for(;s;)M=s.nextSibling,i.appendChild(s),s=M;t.appendChild(i),this.calibrate()}},this.calibrate=function(A){var R=t.clientWidth===v,N,D,X;h=t.scrollTop,u=t.scrollLeft,!(R&&t.clientHeight===b&&i.offsetHeight===C&&d===t.scrollWidth&&g===t.scrollHeight&&!A)&&((a||o)&&(D=this.left(),X=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),N=Qh(t),(!R||A)&&(n.display="block",n.width="auto",n.paddingRight="0px",f=Math.max(0,t.scrollWidth-t.clientWidth),f&&(f+=parseFloat(N.paddingLeft)+(ym?parseFloat(N.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=f+"px",ym&&(n.paddingBottom=N.paddingBottom),v=t.clientWidth,b=t.clientHeight,d=t.scrollWidth,g=t.scrollHeight,m=t.scrollWidth-v,_=t.scrollHeight-b,C=i.offsetHeight,n.display="block",(D||X)&&(this.left(D),this.top(X)))},this.content=i,this.element=t,this._skip=!1,this.enable()},xm=function(t){if(hx()&&document.body){var e=window&&window.navigator;je=window,Fr=document,mn=Fr.documentElement,vs=Fr.body,cm=Jc("div"),jc=!!window.PointerEvent,_s=Jc("div"),_s.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Zh=_s.style.cursor==="grab"?"grab":"move",jh=e&&e.userAgent.toLowerCase().indexOf("android")!==-1,dm="ontouchstart"in mn&&"orientation"in je||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),ym=function(){var i=Jc("div"),n=Jc("div"),s=n.style,a=vs,o;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),a.appendChild(i),o=n.offsetHeight+18>i.scrollHeight,a.removeChild(i),o}(),Yh=function(i){for(var n=i.split(","),s=("onpointerdown"in cm?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in cm?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),a={},o=4;--o>-1;)a[n[o]]=s[o],a[s[o]]=n[o];try{mn.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){lx=1}}))}catch{}return a}("touchstart,touchmove,touchend,touchcancel"),Mi(Fr,"touchcancel",$c),Mi(je,"touchmove",$c),vs&&vs.addEventListener("touchstart",$c),Mi(Fr,"contextmenu",function(){for(var i in al)al[i].isPressed&&al[i].endDrag()}),ze=fm=ux()}ze?(gn=ze.plugins.inertia,qh=ze.utils.checkPrefix,Jh=qh(Jh),mm=qh(mm),$s=ze.utils.toArray,Sx=!!qh("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},ZP=function(){function r(e){this._listeners={},this.target=e||this}var t=r.prototype;return t.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},t.removeEventListener=function(i,n){var s=this._listeners[i],a=s&&s.indexOf(n);a>=0&&s.splice(a,1)},t.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(a){return a.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),xs=function(r){OP(t,r);function t(e,i){var n;n=r.call(this)||this,fm||xm(1),e=$s(e)[0],gn||(gn=ze.plugins.inertia),n.vars=i=dx(i||{}),n.target=e,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,ze.getProperty(e,"x");var s=(i.type||"x,y").toLowerCase(),a=~s.indexOf("x")||~s.indexOf("y"),o=s.indexOf("rotation")!==-1,h=o?"rotation":a?"x":"left",u=a?"y":"top",d=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),g=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),f=i.minimumMovement||2,m=kP(n),_=$s(i.trigger||i.handle||e),v={},b=0,C=!1,M=i.autoScrollMarginTop||40,E=i.autoScrollMarginRight||40,w=i.autoScrollMarginBottom||40,A=i.autoScrollMarginLeft||40,R=i.clickableTest||qP,N=0,D=e._gsap||ze.core.getCache(e),X=YP(e),at=function(U,K){return parseFloat(D.get(e,U,K))},ft=e.ownerDocument||Fr,gt,ut,xt,nt,it,tt,W,Q,ot,ct,Tt,Rt,Pt,Nt,At,Qt,Vt,Yt,Xt,re,qt,Ut,Lt,te,ge,Bt,oe,le,de,Se,wt,mt,Ft,l=function(U){return Kr(U),U.stopImmediatePropagation&&U.stopImmediatePropagation(),!1},c=function J(U){if(m.autoScroll&&m.isDragging&&(C||Vt)){var K=e,O=m.autoScroll*15,rt,lt,pt,bt,dt,St,Z,ht;for(C=!1,ys.scrollTop=je.pageYOffset!=null?je.pageYOffset:ft.documentElement.scrollTop!=null?ft.documentElement.scrollTop:ft.body.scrollTop,ys.scrollLeft=je.pageXOffset!=null?je.pageXOffset:ft.documentElement.scrollLeft!=null?ft.documentElement.scrollLeft:ft.body.scrollLeft,bt=m.pointerX-ys.scrollLeft,dt=m.pointerY-ys.scrollTop;K&&!lt;)lt=ul(K.parentNode),rt=lt?ys:K.parentNode,pt=lt?{bottom:Math.max(mn.clientHeight,je.innerHeight||0),right:Math.max(mn.clientWidth,je.innerWidth||0),left:0,top:0}:rt.getBoundingClientRect(),St=Z=0,g&&(ht=rt._gsMaxScrollY-rt.scrollTop,ht<0?Z=ht:dt>pt.bottom-w&&ht?(C=!0,Z=Math.min(ht,O*(1-Math.max(0,pt.bottom-dt)/w)|0)):dt<pt.top+M&&rt.scrollTop&&(C=!0,Z=-Math.min(rt.scrollTop,O*(1-Math.max(0,dt-pt.top)/M)|0)),Z&&(rt.scrollTop+=Z)),d&&(ht=rt._gsMaxScrollX-rt.scrollLeft,ht<0?St=ht:bt>pt.right-E&&ht?(C=!0,St=Math.min(ht,O*(1-Math.max(0,pt.right-bt)/E)|0)):bt<pt.left+A&&rt.scrollLeft&&(C=!0,St=-Math.min(rt.scrollLeft,O*(1-Math.max(0,bt-pt.left)/A)|0)),St&&(rt.scrollLeft+=St)),lt&&(St||Z)&&(je.scrollTo(rt.scrollLeft,rt.scrollTop),z(m.pointerX+St,m.pointerY+Z)),K=rt}if(Vt){var vt=m.x,_t=m.y;o?(m.deltaX=vt-parseFloat(D.rotation),m.rotation=vt,D.rotation=vt+"deg",D.renderTransform(1,D)):ut?(g&&(m.deltaY=_t-ut.top(),ut.top(_t)),d&&(m.deltaX=vt-ut.left(),ut.left(vt))):a?(g&&(m.deltaY=_t-parseFloat(D.y),D.y=_t+"px"),d&&(m.deltaX=vt-parseFloat(D.x),D.x=vt+"px"),D.renderTransform(1,D)):(g&&(m.deltaY=_t-parseFloat(e.style.top||0),e.style.top=_t+"px"),d&&(m.deltaX=vt-parseFloat(e.style.left||0),e.style.left=vt+"px")),Q&&!U&&!le&&(le=!0,_i(m,"drag","onDrag")===!1&&(d&&(m.x-=m.deltaX),g&&(m.y-=m.deltaY),J(!0)),le=!1)}Vt=!1},p=function(U,K){var O=m.x,rt=m.y,lt,pt;e._gsap||(D=ze.core.getCache(e)),D.uncache&&ze.getProperty(e,"x"),a?(m.x=parseFloat(D.x),m.y=parseFloat(D.y)):o?m.x=m.rotation=parseFloat(D.rotation):ut?(m.y=ut.top(),m.x=ut.left()):(m.y=parseFloat(e.style.top||(pt=Qh(e))&&pt.top)||0,m.x=parseFloat(e.style.left||(pt||{}).left)||0),(Xt||re||qt)&&!K&&(m.isDragging||m.isThrowing)&&(qt&&(ol.x=m.x,ol.y=m.y,lt=qt(ol),lt.x!==m.x&&(m.x=lt.x,Vt=!0),lt.y!==m.y&&(m.y=lt.y,Vt=!0)),Xt&&(lt=Xt(m.x),lt!==m.x&&(m.x=lt,o&&(m.rotation=lt),Vt=!0)),re&&(lt=re(m.y),lt!==m.y&&(m.y=lt),Vt=!0)),Vt&&c(!0),U||(m.deltaX=m.x-O,m.deltaY=m.y-rt,_i(m,"throwupdate","onThrowUpdate"))},x=function(U,K,O,rt){return K==null&&(K=-Qa),O==null&&(O=Qa),Js(U)?function(lt){var pt=m.isPressed?1-m.edgeResistance:1;return U.call(m,(lt>O?O+(lt-O)*pt:lt<K?K+(lt-K)*pt:lt)*rt)*rt}:Kh(U)?function(lt){for(var pt=U.length,bt=0,dt=Qa,St,Z;--pt>-1;)St=U[pt],Z=St-lt,Z<0&&(Z=-Z),Z<dt&&St>=K&&St<=O&&(bt=pt,dt=Z);return U[bt]}:isNaN(U)?function(lt){return lt}:function(){return U*rt}},y=function(U,K,O,rt,lt,pt,bt){return pt=pt&&pt<Qa?pt*pt:Qa,Js(U)?function(dt){var St=m.isPressed?1-m.edgeResistance:1,Z=dt.x,ht=dt.y,vt,_t,Mt;return dt.x=Z=Z>O?O+(Z-O)*St:Z<K?K+(Z-K)*St:Z,dt.y=ht=ht>lt?lt+(ht-lt)*St:ht<rt?rt+(ht-rt)*St:ht,vt=U.call(m,dt),vt!==dt&&(dt.x=vt.x,dt.y=vt.y),bt!==1&&(dt.x*=bt,dt.y*=bt),pt<Qa&&(_t=dt.x-Z,Mt=dt.y-ht,_t*_t+Mt*Mt>pt&&(dt.x=Z,dt.y=ht)),dt}:Kh(U)?function(dt){for(var St=U.length,Z=0,ht=Qa,vt,_t,Mt,kt;--St>-1;)Mt=U[St],vt=Mt.x-dt.x,_t=Mt.y-dt.y,kt=vt*vt+_t*_t,kt<ht&&(Z=St,ht=kt);return ht<=pt?U[Z]:dt}:function(dt){return dt}},T=function(){var U,K,O,rt;W=!1,ut?(ut.calibrate(),m.minX=Tt=-ut.maxScrollLeft(),m.minY=Pt=-ut.maxScrollTop(),m.maxX=ct=m.maxY=Rt=0,W=!0):i.bounds&&(U=wx(i.bounds,e.parentNode),o?(m.minX=Tt=U.left,m.maxX=ct=U.left+U.width,m.minY=Pt=m.maxY=Rt=0):!vn(i.bounds.maxX)||!vn(i.bounds.maxY)?(U=i.bounds,m.minX=Tt=U.minX,m.minY=Pt=U.minY,m.maxX=ct=U.maxX,m.maxY=Rt=U.maxY):(K=wx(e,e.parentNode),m.minX=Tt=Math.round(at(h,"px")+U.left-K.left),m.minY=Pt=Math.round(at(u,"px")+U.top-K.top),m.maxX=ct=Math.round(Tt+(U.width-K.width)),m.maxY=Rt=Math.round(Pt+(U.height-K.height))),Tt>ct&&(m.minX=ct,m.maxX=ct=Tt,Tt=m.minX),Pt>Rt&&(m.minY=Rt,m.maxY=Rt=Pt,Pt=m.minY),o&&(m.minRotation=Tt,m.maxRotation=ct),W=!0),i.liveSnap&&(O=i.liveSnap===!0?i.snap||{}:i.liveSnap,rt=Kh(O)||Js(O),o?(Xt=x(rt?O:O.rotation,Tt,ct,1),re=null):O.points?qt=y(rt?O:O.points,Tt,ct,Pt,Rt,O.radius,ut?-1:1):(d&&(Xt=x(rt?O:O.x||O.left||O.scrollLeft,Tt,ct,ut?-1:1)),g&&(re=x(rt?O:O.y||O.top||O.scrollTop,Pt,Rt,ut?-1:1))))},P=function(){m.isThrowing=!1,_i(m,"throwcomplete","onThrowComplete")},I=function(){m.isThrowing=!1},L=function(U,K){var O,rt,lt,pt;U&&gn?(U===!0&&(O=i.snap||i.liveSnap||{},rt=Kh(O)||Js(O),U={resistance:(i.throwResistance||i.resistance||1e3)/(o?10:1)},o?U.rotation=_m(m,rt?O:O.rotation,ct,Tt,1,K):(d&&(U[h]=_m(m,rt?O:O.points||O.x||O.left,ct,Tt,ut?-1:1,K||m.lockedAxis==="x")),g&&(U[u]=_m(m,rt?O:O.points||O.y||O.top,Rt,Pt,ut?-1:1,K||m.lockedAxis==="y")),(O.points||Kh(O)&&$h(O[0]))&&(U.linkedProps=h+","+u,U.radius=O.radius))),m.isThrowing=!0,pt=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-m.edgeResistance+.2:i.overshootTolerance,U.duration||(U.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?pt===0||$h(U)&&U.resistance>1e3?0:.5:i.minDuration,overshoot:pt}),m.tween=lt=ze.to(ut||e,{inertia:U,data:"_draggable",onComplete:P,onInterrupt:I,onUpdate:i.fastMode?_i:p,onUpdateParams:i.fastMode?[m,"onthrowupdate","onThrowUpdate"]:O&&O.radius?[!1,!0]:[]}),i.fastMode||(ut&&(ut._skip=!0),lt.render(1e9,!0,!0),p(!0,!0),m.endX=m.x,m.endY=m.y,o&&(m.endRotation=m.x),lt.play(0),p(!0,!0),ut&&(ut._skip=!1))):W&&m.applyBounds()},k=function(U){var K=te,O;te=Zs(e.parentNode,!0),U&&m.isPressed&&!te.equals(K||new js)&&(O=K.inverse().apply({x:xt,y:nt}),te.apply(O,O),xt=O.x,nt=O.y),te.equals(NP)&&(te=null)},G=function(){var U=1-m.edgeResistance,K=X?hl(ft):0,O=X?ll(ft):0,rt,lt,pt;a&&(D.x=at(h,"px")+"px",D.y=at(u,"px")+"px",D.renderTransform()),k(!1),Qr.x=m.pointerX-K,Qr.y=m.pointerY-O,te&&te.apply(Qr,Qr),xt=Qr.x,nt=Qr.y,Vt&&(z(m.pointerX,m.pointerY),c(!0)),mt=Zs(e),ut?(T(),tt=ut.top(),it=ut.left()):(V()?(p(!0,!0),T()):m.applyBounds(),o?(rt=e.ownerSVGElement?[D.xOrigin-e.getBBox().x,D.yOrigin-e.getBBox().y]:(Qh(e)[mm]||"0 0").split(" "),Qt=m.rotationOrigin=Zs(e).apply({x:parseFloat(rt[0])||0,y:parseFloat(rt[1])||0}),p(!0,!0),lt=m.pointerX-Qt.x-K,pt=Qt.y-m.pointerY+O,it=m.x,tt=m.y=Math.atan2(pt,lt)*cx):(tt=at(u,"px"),it=at(h,"px"))),W&&U&&(it>ct?it=ct+(it-ct)/U:it<Tt&&(it=Tt-(Tt-it)/U),o||(tt>Rt?tt=Rt+(tt-Rt)/U:tt<Pt&&(tt=Pt-(Pt-tt)/U))),m.startX=it=Ks(it),m.startY=tt=Ks(tt)},V=function(){return m.tween&&m.tween.isActive()},H=function(){_s.parentNode&&!V()&&!m.isDragging&&_s.parentNode.removeChild(_s)},Y=function(U,K){var O;if(!gt||m.isPressed||!U||(U.type==="mousedown"||U.type==="pointerdown")&&!K&&Qs()-N<30&&Yh[m.pointerEvent.type]){wt&&U&&gt&&Kr(U);return}if(ge=V(),Ft=!1,m.pointerEvent=U,Yh[U.type]?(Lt=~U.type.indexOf("touch")?U.currentTarget||U.target:ft,Mi(Lt,"touchend",$),Mi(Lt,"touchmove",B),Mi(Lt,"touchcancel",$),Mi(ft,"touchstart",_x)):(Lt=null,Mi(ft,"mousemove",B)),oe=null,(!jc||!Lt)&&(Mi(ft,"mouseup",$),U&&U.target&&Mi(U.target,"mouseup",$)),Ut=R.call(m,U.target)&&i.dragClickables===!1&&!K,Ut){Mi(U.target,"change",$),_i(m,"pressInit","onPressInit"),_i(m,"press","onPress"),Kc(_,!0),wt=!1;return}if(Bt=!Lt||d===g||m.vars.allowNativeTouchScrolling===!1||m.vars.allowContextMenu&&U&&(U.ctrlKey||U.which>2)?!1:d?"y":"x",wt=!Bt&&!m.allowEventDefault,wt&&(Kr(U),Mi(je,"touchforcechange",Kr)),U.changedTouches?(U=Nt=U.changedTouches[0],At=U.identifier):U.pointerId?At=U.pointerId:Nt=At=null,Zc++,UP(c),nt=m.pointerY=U.pageY,xt=m.pointerX=U.pageX,_i(m,"pressInit","onPressInit"),(Bt||m.autoScroll)&&gm(e.parentNode),e.parentNode&&m.autoScroll&&!ut&&!o&&e.parentNode._gsMaxScrollX&&!_s.parentNode&&!e.getBBox&&(_s.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(_s)),G(),m.tween&&m.tween.kill(),m.isThrowing=!1,ze.killTweensOf(ut||e,v,!0),ut&&ze.killTweensOf(e,{scrollTo:1},!0),m.tween=m.lockedAxis=null,(i.zIndexBoost||!o&&!ut&&i.zIndexBoost!==!1)&&(e.style.zIndex=t.zIndex++),m.isPressed=!0,Q=!!(i.onDrag||m._listeners.drag),ot=!!(i.onMove||m._listeners.move),i.cursor!==!1||i.activeCursor)for(O=_.length;--O>-1;)ze.set(_[O],{cursor:i.activeCursor||i.cursor||(Zh==="grab"?"grabbing":Zh)});_i(m,"press","onPress")},B=function(U){var K=U,O,rt,lt,pt,bt,dt;if(!gt||pm||!m.isPressed||!U){wt&&U&&gt&&Kr(U);return}if(m.pointerEvent=U,O=U.changedTouches,O){if(U=O[0],U!==Nt&&U.identifier!==At){for(pt=O.length;--pt>-1&&(U=O[pt]).identifier!==At&&U.target!==e;);if(pt<0)return}}else if(U.pointerId&&At&&U.pointerId!==At)return;if(Lt&&Bt&&!oe&&(Qr.x=U.pageX-(X?hl(ft):0),Qr.y=U.pageY-(X?ll(ft):0),te&&te.apply(Qr,Qr),rt=Qr.x,lt=Qr.y,bt=Math.abs(rt-xt),dt=Math.abs(lt-nt),(bt!==dt&&(bt>f||dt>f)||jh&&Bt===oe)&&(oe=bt>dt&&d?"x":"y",Bt&&oe!==Bt&&Mi(je,"touchforcechange",Kr),m.vars.lockAxisOnTouchScroll!==!1&&d&&g&&(m.lockedAxis=oe==="x"?"y":"x",Js(m.vars.onLockAxis)&&m.vars.onLockAxis.call(m,K)),jh&&Bt===oe))){$(K);return}!m.allowEventDefault&&(!Bt||oe&&Bt!==oe)&&K.cancelable!==!1?(Kr(K),wt=!0):wt&&(wt=!1),m.autoScroll&&(C=!0),z(U.pageX,U.pageY,ot)},z=function(U,K,O){var rt=1-m.dragResistance,lt=1-m.edgeResistance,pt=m.pointerX,bt=m.pointerY,dt=tt,St=m.x,Z=m.y,ht=m.endX,vt=m.endY,_t=m.endRotation,Mt=Vt,kt,Gt,Ht,Dt,Wt,zt;m.pointerX=U,m.pointerY=K,X&&(U-=hl(ft),K-=ll(ft)),o?(Dt=Math.atan2(Qt.y-K,U-Qt.x)*cx,Wt=m.y-Dt,Wt>180?(tt-=360,m.y=Dt):Wt<-180&&(tt+=360,m.y=Dt),m.x!==it||Math.abs(tt-Dt)>f?(m.y=Dt,Ht=it+(tt-Dt)*rt):Ht=it):(te&&(zt=U*te.a+K*te.c+te.e,K=U*te.b+K*te.d+te.f,U=zt),Gt=K-nt,kt=U-xt,Gt<f&&Gt>-f&&(Gt=0),kt<f&&kt>-f&&(kt=0),(m.lockAxis||m.lockedAxis)&&(kt||Gt)&&(zt=m.lockedAxis,zt||(m.lockedAxis=zt=d&&Math.abs(kt)>Math.abs(Gt)?"y":g?"x":null,zt&&Js(m.vars.onLockAxis)&&m.vars.onLockAxis.call(m,m.pointerEvent)),zt==="y"?Gt=0:zt==="x"&&(kt=0)),Ht=Ks(it+kt*rt),Dt=Ks(tt+Gt*rt)),(Xt||re||qt)&&(m.x!==Ht||m.y!==Dt&&!o)&&(qt&&(ol.x=Ht,ol.y=Dt,zt=qt(ol),Ht=Ks(zt.x),Dt=Ks(zt.y)),Xt&&(Ht=Ks(Xt(Ht))),re&&(Dt=Ks(re(Dt)))),W&&(Ht>ct?Ht=ct+Math.round((Ht-ct)*lt):Ht<Tt&&(Ht=Tt+Math.round((Ht-Tt)*lt)),o||(Dt>Rt?Dt=Math.round(Rt+(Dt-Rt)*lt):Dt<Pt&&(Dt=Math.round(Pt+(Dt-Pt)*lt)))),(m.x!==Ht||m.y!==Dt&&!o)&&(o?(m.endRotation=m.x=m.endX=Ht,Vt=!0):(g&&(m.y=m.endY=Dt,Vt=!0),d&&(m.x=m.endX=Ht,Vt=!0)),!O||_i(m,"move","onMove")!==!1?!m.isDragging&&m.isPressed&&(m.isDragging=Ft=!0,_i(m,"dragstart","onDragStart")):(m.pointerX=pt,m.pointerY=bt,tt=dt,m.x=St,m.y=Z,m.endX=ht,m.endY=vt,m.endRotation=_t,Vt=Mt))},$=function J(U,K){if(!gt||!m.isPressed||U&&At!=null&&!K&&(U.pointerId&&U.pointerId!==At&&U.target!==e||U.changedTouches&&!HP(U.changedTouches,At))){wt&&U&&gt&&Kr(U);return}m.isPressed=!1;var O=U,rt=m.isDragging,lt=m.vars.allowContextMenu&&U&&(U.ctrlKey||U.which>2),pt=ze.delayedCall(.001,H),bt,dt,St,Z,ht;if(Lt?(Ti(Lt,"touchend",J),Ti(Lt,"touchmove",B),Ti(Lt,"touchcancel",J),Ti(ft,"touchstart",_x)):Ti(ft,"mousemove",B),Ti(je,"touchforcechange",Kr),(!jc||!Lt)&&(Ti(ft,"mouseup",J),U&&U.target&&Ti(U.target,"mouseup",J)),Vt=!1,rt&&(b=fx=Qs(),m.isDragging=!1),vx(c),Ut&&!lt){U&&(Ti(U.target,"change",J),m.pointerEvent=O),Kc(_,!1),_i(m,"release","onRelease"),_i(m,"click","onClick"),Ut=!1;return}for(dt=_.length;--dt>-1;)vm(_[dt],"cursor",i.cursor||(i.cursor!==!1?Zh:null));if(Zc--,U){if(bt=U.changedTouches,bt&&(U=bt[0],U!==Nt&&U.identifier!==At)){for(dt=bt.length;--dt>-1&&(U=bt[dt]).identifier!==At&&U.target!==e;);if(dt<0&&!K)return}m.pointerEvent=O,m.pointerX=U.pageX,m.pointerY=U.pageY}return lt&&O?(Kr(O),wt=!0,_i(m,"release","onRelease")):O&&!rt?(wt=!1,ge&&(i.snap||i.bounds)&&L(i.inertia||i.throwProps),_i(m,"release","onRelease"),(!jh||O.type!=="touchmove")&&O.type.indexOf("cancel")===-1&&(_i(m,"click","onClick"),Qs()-N<300&&_i(m,"doubleclick","onDoubleClick"),Z=O.target||e,N=Qs(),ht=function(){N!==de&&m.enabled()&&!m.isPressed&&!O.defaultPrevented&&(Z.click?Z.click():ft.createEvent&&(St=ft.createEvent("MouseEvents"),St.initMouseEvent("click",!0,!0,je,1,m.pointerEvent.screenX,m.pointerEvent.screenY,m.pointerX,m.pointerY,!1,!1,!1,!1,0,null),Z.dispatchEvent(St)))},!jh&&!O.defaultPrevented&&ze.delayedCall(.05,ht))):(L(i.inertia||i.throwProps),!m.allowEventDefault&&O&&(i.dragClickables!==!1||!R.call(m,O.target))&&rt&&(!Bt||oe&&Bt===oe)&&O.cancelable!==!1?(wt=!0,Kr(O)):wt=!1,_i(m,"release","onRelease")),V()&&pt.duration(m.tween.duration()),rt&&_i(m,"dragend","onDragEnd"),!0},j=function(U){if(U&&m.isDragging&&!ut){var K=U.target||e.parentNode,O=K.scrollLeft-K._gsScrollX,rt=K.scrollTop-K._gsScrollY;(O||rt)&&(te?(xt-=O*te.a+rt*te.c,nt-=rt*te.d+O*te.b):(xt-=O,nt-=rt),K._gsScrollX+=O,K._gsScrollY+=rt,z(m.pointerX,m.pointerY))}},et=function(U){var K=Qs(),O=K-N<100,rt=K-b<50,lt=O&&de===N,pt=m.pointerEvent&&m.pointerEvent.defaultPrevented,bt=O&&Se===N,dt=U.isTrusted||U.isTrusted==null&&O&&lt;if((lt||rt&&m.vars.suppressClickOnDrag!==!1)&&U.stopImmediatePropagation&&U.stopImmediatePropagation(),O&&!(m.pointerEvent&&m.pointerEvent.defaultPrevented)&&(!lt||dt&&!bt)){dt&&lt&&(Se=N),de=N;return}(m.isPressed||rt||O)&&(!dt||!U.detail||!O||pt)&&Kr(U),!O&&!rt&&!Ft&&(U&&U.target&&(m.pointerEvent=U),_i(m,"click","onClick"))},q=function(U){return te?{x:U.x*te.a+U.y*te.c+te.e,y:U.x*te.b+U.y*te.d+te.f}:{x:U.x,y:U.y}};return Yt=t.get(e),Yt&&Yt.kill(),n.startDrag=function(J,U){var K,O,rt,lt;Y(J||m.pointerEvent,!0),U&&!m.hitTest(J||m.pointerEvent)&&(K=cl(J||m.pointerEvent),O=cl(e),rt=q({x:K.left+K.width/2,y:K.top+K.height/2}),lt=q({x:O.left+O.width/2,y:O.top+O.height/2}),xt-=rt.x-lt.x,nt-=rt.y-lt.y),m.isDragging||(m.isDragging=Ft=!0,_i(m,"dragstart","onDragStart"))},n.drag=B,n.endDrag=function(J){return $(J||m.pointerEvent,!0)},n.timeSinceDrag=function(){return m.isDragging?0:(Qs()-b)/1e3},n.timeSinceClick=function(){return(Qs()-N)/1e3},n.hitTest=function(J,U){return t.hitTest(m.target,J,U)},n.getDirection=function(J,U){var K=J==="velocity"&&gn?J:$h(J)&&!o?"element":"start",O,rt,lt,pt,bt,dt;return K==="element"&&(bt=cl(m.target),dt=cl(J)),O=K==="start"?m.x-it:K==="velocity"?gn.getVelocity(e,h):bt.left+bt.width/2-(dt.left+dt.width/2),o?O<0?"counter-clockwise":"clockwise":(U=U||2,rt=K==="start"?m.y-tt:K==="velocity"?gn.getVelocity(e,u):bt.top+bt.height/2-(dt.top+dt.height/2),lt=Math.abs(O/rt),pt=lt<1/U?"":O<0?"left":"right",lt<U&&(pt!==""&&(pt+="-"),pt+=rt<0?"up":"down"),pt)},n.applyBounds=function(J,U){var K,O,rt,lt,pt,bt;if(J&&i.bounds!==J)return i.bounds=J,m.update(!0,U);if(p(!0),T(),W&&!V()){if(K=m.x,O=m.y,K>ct?K=ct:K<Tt&&(K=Tt),O>Rt?O=Rt:O<Pt&&(O=Pt),(m.x!==K||m.y!==O)&&(rt=!0,m.x=m.endX=K,o?m.endRotation=K:m.y=m.endY=O,Vt=!0,c(!0),m.autoScroll&&!m.isDragging))for(gm(e.parentNode),lt=e,ys.scrollTop=je.pageYOffset!=null?je.pageYOffset:ft.documentElement.scrollTop!=null?ft.documentElement.scrollTop:ft.body.scrollTop,ys.scrollLeft=je.pageXOffset!=null?je.pageXOffset:ft.documentElement.scrollLeft!=null?ft.documentElement.scrollLeft:ft.body.scrollLeft;lt&&!bt;)bt=ul(lt.parentNode),pt=bt?ys:lt.parentNode,g&&pt.scrollTop>pt._gsMaxScrollY&&(pt.scrollTop=pt._gsMaxScrollY),d&&pt.scrollLeft>pt._gsMaxScrollX&&(pt.scrollLeft=pt._gsMaxScrollX),lt=pt;m.isThrowing&&(rt||m.endX>ct||m.endX<Tt||m.endY>Rt||m.endY<Pt)&&L(i.inertia||i.throwProps,rt)}return m},n.update=function(J,U,K){if(U&&m.isPressed){var O=Zs(e),rt=mt.apply({x:m.x-it,y:m.y-tt}),lt=Zs(e.parentNode,!0);lt.apply({x:O.e-rt.x,y:O.f-rt.y},rt),m.x-=rt.x-lt.e,m.y-=rt.y-lt.f,c(!0),G()}var pt=m.x,bt=m.y;return k(!U),J?m.applyBounds():(Vt&&K&&c(!0),p(!0)),U&&(z(m.pointerX,m.pointerY),Vt&&c(!0)),m.isPressed&&!U&&(d&&Math.abs(pt-m.x)>.01||g&&Math.abs(bt-m.y)>.01&&!o)&&G(),m.autoScroll&&(gm(e.parentNode,m.isDragging),C=m.isDragging,c(!0),xx(e,j),yx(e,j)),m},n.enable=function(J){var U={lazy:!0},K,O,rt;if(i.cursor!==!1&&(U.cursor=i.cursor||Zh),ze.utils.checkPrefix("touchCallout")&&(U.touchCallout="none"),J!=="soft"){for(px(_,d===g?"none":i.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||i.allowEventDefault?"manipulation":d?"pan-y":"pan-x"),O=_.length;--O>-1;)rt=_[O],jc||Mi(rt,"mousedown",Y),Mi(rt,"touchstart",Y),Mi(rt,"click",et,!0),ze.set(rt,U),rt.getBBox&&rt.ownerSVGElement&&d!==g&&ze.set(rt.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":d?"pan-y":"pan-x"}),i.allowContextMenu||Mi(rt,"contextmenu",l);Kc(_,!1)}return yx(e,j),gt=!0,gn&&J!=="soft"&&gn.track(ut||e,a?"x,y":o?"rotation":"top,left"),e._gsDragID=K="d"+BP++,al[K]=m,ut&&(ut.enable(),ut.element._gsDragID=K),(i.bounds||o)&&G(),i.bounds&&m.applyBounds(),m},n.disable=function(J){for(var U=m.isDragging,K=_.length,O;--K>-1;)vm(_[K],"cursor",null);if(J!=="soft"){for(px(_,null),K=_.length;--K>-1;)O=_[K],vm(O,"touchCallout",null),Ti(O,"mousedown",Y),Ti(O,"touchstart",Y),Ti(O,"click",et),Ti(O,"contextmenu",l);Kc(_,!0),Lt&&(Ti(Lt,"touchcancel",$),Ti(Lt,"touchend",$),Ti(Lt,"touchmove",B)),Ti(ft,"mouseup",$),Ti(ft,"mousemove",B)}return xx(e,j),gt=!1,gn&&J!=="soft"&&gn.untrack(ut||e,a?"x,y":o?"rotation":"top,left"),ut&&ut.disable(),vx(c),m.isDragging=m.isPressed=Ut=!1,U&&_i(m,"dragend","onDragEnd"),m},n.enabled=function(J,U){return arguments.length?J?m.enable(U):m.disable(U):gt},n.kill=function(){return m.isThrowing=!1,m.tween&&m.tween.kill(),m.disable(),ze.set(_,{clearProps:"userSelect"}),delete al[e._gsDragID],m},~s.indexOf("scroll")&&(ut=n.scrollProxy=new jP(e,VP({onKill:function(){m.isPressed&&$(null)}},i)),e.style.overflowY=g&&!dm?"auto":"hidden",e.style.overflowX=d&&!dm?"auto":"hidden",e=ut.content),o?v.rotation=1:(d&&(v[h]=1),g&&(v[u]=1)),D.force3D="force3D"in i?i.force3D:!0,n.enable(),n}return t.register=function(i){ze=i,xm()},t.create=function(i,n){return fm||xm(!0),$s(i).map(function(s){return new t(s,n)})},t.get=function(i){return al[($s(i)[0]||{})._gsDragID]},t.timeSinceDrag=function(){return(Qs()-fx)/1e3},t.hitTest=function(i,n,s){if(i===n)return!1;var a=cl(i),o=cl(n),h=a.top,u=a.left,d=a.right,g=a.bottom,f=a.width,m=a.height,_=o.left>d||o.right<u||o.top>g||o.bottom<h,v,b,C;return _||!s?!_:(C=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,v={left:Math.max(u,o.left),top:Math.max(h,o.top)},v.width=Math.min(d,o.right)-v.left,v.height=Math.min(g,o.bottom)-v.top,v.width<0||v.height<0?!1:C?(s*=.01,b=v.width*v.height,b>=f*m*s||b>=o.width*o.height*s):v.width>s&&v.height>s)},t}(ZP);GP(xs.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});xs.zIndex=1e3;xs.version="3.11.3";ux()&&ze.registerPlugin(xs);var Tx=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function bm(r){var t=r.nodeType,e="";if(t===1||t===9||t===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)e+=bm(r)}else if(t===3||t===4)return r.nodeValue;return e}var Vn,wm,tu,Cx,fl,dl,Qc,Ex,Mx,Px=function(){return Vn||typeof window!="undefined"&&(Vn=window.gsap)},Sm={},$P=function(t){return Math.round(t*1e4)/1e4},Tm=function(t){return Mx(t).id},eu=function(t){return Sm[Tm(typeof t=="string"?tu(t)[0]:t)]},Ax=function(t){var e=fl,i;if(t-Qc>=.05)for(Ex=Qc,Qc=t;e;)i=e.g(e.t,e.p),(i!==e.v1||t-e.t1>.2)&&(e.v2=e.v1,e.v1=i,e.t2=e.t1,e.t1=t),e=e._next},JP={deg:360,rad:Math.PI*2},Cm=function(){Vn=Px(),Vn&&(tu=Vn.utils.toArray,Cx=Vn.utils.getUnit,Mx=Vn.core.getCache,dl=Vn.ticker,wm=1)},KP=function(t,e,i,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=JP[i||Cx(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=dl.time,n&&(this._next=n,n._prev=this)},pl=function(){function r(e,i){wm||Cm(),this.target=tu(e)[0],Sm[Tm(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){Vn=i,Cm()};var t=r.prototype;return t.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),a,o,h;return a=parseFloat(n?s.v1:s.g(s.t,s.p)),o=a-parseFloat(s.v2),h=s.rCap,h&&(o=o%h,o!==o%(h/2)&&(o=o<0?o+h:o-h)),$P(o/((n?s.t1:dl.time)-s.t2))},t.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},t.isTracking=function(i){return i in this._props},t.add=function(i,n){i in this._props||(fl||(dl.add(Ax),Qc=Ex=dl.time),fl=this._props[i]=new KP(this.target,i,n,fl))},t.remove=function(i){var n=this._props[i],s,a;n&&(s=n._prev,a=n._next,s&&(s._next=a),a?a._prev=s:fl===n&&(dl.remove(Ax),fl=0),delete this._props[i])},t.kill=function(i){for(var n in this._props)this.remove(n);i||delete Sm[Tm(this.target)]},r.track=function(i,n,s){wm||Cm();for(var a=[],o=tu(i),h=n.split(","),u=(s||"").split(","),d=o.length,g,f;d--;){for(g=eu(o[d])||new r(o[d]),f=h.length;f--;)g.add(h[f],u[f]||u[0]);a.push(g)}return a},r.untrack=function(i,n){var s=(n||"").split(",");tu(i).forEach(function(a){var o=eu(a);o&&(s.length?s.forEach(function(h){return o.remove(h)}):o.kill(1))})},r.isTracking=function(i,n){var s=eu(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=eu(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();pl.getByTarget=eu;Px()&&Vn.registerPlugin(pl);var Pi,Ix,Dx,Lx,Em,iu,Rx,Fx,kx,Mm,Ox,ru,Pm,Nx,tf=pl.getByTarget,Bx=function(){return Pi||typeof window!="undefined"&&(Pi=window.gsap)&&Pi.registerPlugin&&Pi},QP=function(t){return typeof t=="string"},nu=function(t){return typeof t=="number"},ta=function(t){return typeof t=="object"},Am=function(t){return typeof t=="function"},t2=1,zx=Array.isArray,e2=function(t){return t},io=1e10,Vx=1/io,Ux=.05,i2=function(t){return Math.round(t*1e4)/1e4},r2=function(t,e,i){for(var n in e)!(n in t)&&n!==i&&(t[n]=e[n]);return t},n2=function r(t){var e={},i,n;for(i in t)e[i]=ta(n=t[i])&&!zx(n)?r(n):n;return e},Gx=function(t,e,i,n,s){var a=e.length,o=0,h=io,u,d,g,f;if(ta(t)){for(;a--;){u=e[a],d=0;for(g in t)f=u[g]-t[g],d+=f*f;d<h&&(o=a,h=d)}if((s||io)<io&&s<Math.sqrt(h))return t}else for(;a--;)u=e[a],d=u-t,d<0&&(d=-d),d<h&&u>=n&&u<=i&&(o=a,h=d);return e[o]},Hx=function(t,e,i,n,s,a,o){if(t.end==="auto")return t;var h=t.end,u,d;if(i=isNaN(i)?io:i,n=isNaN(n)?-io:n,ta(e)){if(u=e.calculated?e:(Am(h)?h(e,o):Gx(e,h,i,n,a))||e,!e.calculated){for(d in u)e[d]=u[d];e.calculated=!0}u=u[s]}else u=Am(h)?h(e,o):zx(h)?Gx(e,h,i,n,a):parseFloat(h);return u>i?u=i:u<n&&(u=n),{max:u,min:u,unitFactor:t.unitFactor}},ef=function(t,e,i){return isNaN(t[e])?i:+t[e]},Im=function(t,e){return e*Ux*t/Mm},Wx=function(t,e,i){return Math.abs((e-t)*Mm/i/Ux)},Xx={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},qx=function(t,e,i,n){if(e.linkedProps){var s=e.linkedProps.split(","),a={},o,h,u,d,g,f;for(o=0;o<s.length;o++)h=s[o],u=e[h],u&&(nu(u.velocity)?d=u.velocity:(g=g||tf(t),d=g&&g.isTracking(h)?g.get(h):0),f=Math.abs(d/ef(u,"resistance",n)),a[h]=parseFloat(i(t,h))+Im(d,f));return a}},s2=function(t,e,i,n,s,a){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),a===void 0&&(a=0),QP(t)&&(t=Lx(t)[0]),!t)return 0;var o=0,h=io,u=e.inertia||e,d=kx(t).get,g=ef(u,"resistance",iu.resistance),f,m,_,v,b,C,M,E,w,A;A=qx(t,u,d,g);for(f in u)Xx[f]||(m=u[f],ta(m)||(E=E||tf(t),E&&E.isTracking(f)?m=nu(m)?{velocity:m}:{velocity:E.get(f)}:(v=+m||0,_=Math.abs(v/g))),ta(m)&&(nu(m.velocity)?v=m.velocity:(E=E||tf(t),v=E&&E.isTracking(f)?E.get(f):0),_=Ox(n,i,Math.abs(v/ef(m,"resistance",g))),b=parseFloat(d(t,f))||0,C=b+Im(v,_),"end"in m&&(m=Hx(m,A&&f in A?A:C,m.max,m.min,f,u.radius,v),a&&(ru===e&&(ru=u=n2(e)),u[f]=r2(m,u[f],"end"))),"max"in m&&C>+m.max+Vx?(w=m.unitFactor||iu.unitFactors[f]||1,M=b>m.max&&m.min!==m.max||v*w>-15&&v*w<45?n+(i-n)*.1:Wx(b,m.max,v),M+s<h&&(h=M+s)):"min"in m&&C<+m.min-Vx&&(w=m.unitFactor||iu.unitFactors[f]||1,M=b<m.min&&m.min!==m.max||v*w>-45&&v*w<15?n+(i-n)*.1:Wx(b,m.min,v),M+s<h&&(h=M+s)),M>o&&(o=M)),_>o&&(o=_));return o>h&&(o=h),o>i?i:o<n?n:o},Yx=function(){Pi=Bx(),Pi&&(Dx=Pi.parseEase,Lx=Pi.utils.toArray,Rx=Pi.utils.getUnit,kx=Pi.core.getCache,Ox=Pi.utils.clamp,Pm=Pi.core.getStyleSaver,Nx=Pi.core.reverting||function(){},Em=Dx("power3"),Mm=Em(.05),Fx=Pi.core.PropTween,Pi.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),iu=Pi.config(),Pi.registerPlugin(pl),Ix=1)},rf={version:"3.11.3",name:"inertia",register:function(t){Pi=t,Yx()},init:function(t,e,i,n,s){Ix||Yx();var a=tf(t);if(e==="auto"){if(!a){console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");return}e=a.getAll()}this.styles=Pm&&typeof t.style=="object"&&Pm(t),this.target=t,this.tween=i,ru=e;var o=t._gsap,h=o.get,u=e.duration,d=ta(u),g=e.preventOvershoot||d&&u.overshoot===0,f=ef(e,"resistance",iu.resistance),m=nu(u)?u:s2(t,e,d&&u.max||10,d&&u.min||.2,d&&"overshoot"in u?+u.overshoot:g?0:1,!0),_,v,b,C,M,E,w,A,R;e=ru,ru=0,R=qx(t,e,h,f);for(_ in e)Xx[_]||(v=e[_],Am(v)&&(v=v(n,t,s)),nu(v)?M=v:ta(v)&&!isNaN(v.velocity)?M=+v.velocity:a&&a.isTracking(_)?M=a.get(_):console.warn("ERROR: No velocity was defined for "+t+" property: "+_),E=Im(M,m),A=0,b=h(t,_),C=Rx(b),b=parseFloat(b),ta(v)&&(w=b+E,"end"in v&&(v=Hx(v,R&&_ in R?R:w,v.max,v.min,_,e.radius,M)),"max"in v&&+v.max<w?g||v.preventOvershoot?E=v.max-b:A=v.max-b-E:"min"in v&&+v.min>w&&(g||v.preventOvershoot?E=v.min-b:A=v.min-b-E)),this._props.push(_),this.styles&&this.styles.save(_),this._pt=new Fx(this._pt,t,_,b,0,e2,0,o.set(t,_,this)),this._pt.u=C||0,this._pt.c1=E,this._pt.c2=A);return i.duration(m),t2},render:function(t,e){var i=e._pt;if(t=Em(e.tween._time/e.tween._dur),t||!Nx())for(;i;)i.set(i.t,i.p,i2(i.s+i.c1*t+i.c2*t*t)+i.u,i.d,t),i=i._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return rf[r]=pl[r]});Bx()&&Pi.registerPlugin(rf);var ro,jx,Zx,a2=/(?:\r|\n|\t\t)/g,o2=/(?:\s\s+)/g,l2=function(){ro=document,jx=window,Zx=1},h2=1,$x=function(t){return jx.getComputedStyle(t)},u2=Array.isArray,Jx=[].slice,Dm=function(t,e){var i;return u2(t)?t:(i=typeof t)==="string"&&!e&&t?Jx.call(ro.querySelectorAll(t),0):t&&i==="object"&&"length"in t?Jx.call(t,0):t?[t]:[]},Lm=function(t){return t.position==="absolute"||t.absolute===!0},c2=function(t,e){for(var i=e.length,n;--i>-1;)if(n=e[i],t.substr(0,n.length)===n)return n.length},f2=" style='position:relative;display:inline-block;'",Kx=function(t,e){t===void 0&&(t="");var i=~t.indexOf("++"),n=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+f2+(t?" class='"+t+(i?n++:"")+"'>":">")}},Qx=function r(t,e,i){var n=t.nodeType;if(n===1||n===9||n===11)for(t=t.firstChild;t;t=t.nextSibling)r(t,e,i);else(n===3||n===4)&&(t.nodeValue=t.nodeValue.split(e).join(i))},Rm=function(t,e){for(var i=e.length;--i>-1;)t.push(e[i])},t1=function(t,e,i){for(var n;t&&t!==e;){if(n=t._next||t.nextSibling,n)return n.textContent.charAt(0)===i;t=t.parentNode||t._parent}},d2=function r(t){var e=Dm(t.childNodes),i=e.length,n,s;for(n=0;n<i;n++)s=e[n],s._isSplit?r(s):n&&s.previousSibling&&s.previousSibling.nodeType===3?(s.previousSibling.nodeValue+=s.nodeType===3?s.nodeValue:s.firstChild.nodeValue,t.removeChild(s)):s.nodeType!==3&&(t.insertBefore(s.firstChild,s),t.removeChild(s))},Un=function(t,e){return parseFloat(e[t])||0},p2=function(t,e,i,n,s,a,o){var h=$x(t),u=Un("paddingLeft",h),d=-999,g=Un("borderBottomWidth",h)+Un("borderTopWidth",h),f=Un("borderLeftWidth",h)+Un("borderRightWidth",h),m=Un("paddingTop",h)+Un("paddingBottom",h),_=Un("paddingLeft",h)+Un("paddingRight",h),v=Un("fontSize",h)*(e.lineThreshold||.2),b=h.textAlign,C=[],M=[],E=[],w=e.wordDelimiter||" ",A=e.tag?e.tag:e.span?"span":"div",R=e.type||e.split||"chars,words,lines",N=s&&~R.indexOf("lines")?[]:null,D=~R.indexOf("words"),X=~R.indexOf("chars"),at=Lm(e),ft=e.linesClass,gt=~(ft||"").indexOf("++"),ut=[],xt=h.display==="flex",nt=t.style.display,it,tt,W,Q,ot,ct,Tt,Rt,Pt,Nt,At,Qt;for(gt&&(ft=ft.split("++").join("")),xt&&(t.style.display="block"),tt=t.getElementsByTagName("*"),W=tt.length,ot=[],it=0;it<W;it++)ot[it]=tt[it];if(N||at)for(it=0;it<W;it++)Q=ot[it],ct=Q.parentNode===t,(ct||at||X&&!D)&&(Qt=Q.offsetTop,N&&ct&&Math.abs(Qt-d)>v&&(Q.nodeName!=="BR"||it===0)&&(Tt=[],N.push(Tt),d=Qt),at&&(Q._x=Q.offsetLeft,Q._y=Qt,Q._w=Q.offsetWidth,Q._h=Q.offsetHeight),N&&((Q._isSplit&&ct||!X&&ct||D&&ct||!D&&Q.parentNode.parentNode===t&&!Q.parentNode._isSplit)&&(Tt.push(Q),Q._x-=u,t1(Q,t,w)&&(Q._wordEnd=!0)),Q.nodeName==="BR"&&(Q.nextSibling&&Q.nextSibling.nodeName==="BR"||it===0)&&N.push([])));for(it=0;it<W;it++){if(Q=ot[it],ct=Q.parentNode===t,Q.nodeName==="BR"){N||at?(Q.parentNode&&Q.parentNode.removeChild(Q),ot.splice(it--,1),W--):D||t.appendChild(Q);continue}if(at&&(Pt=Q.style,!D&&!ct&&(Q._x+=Q.parentNode._x,Q._y+=Q.parentNode._y),Pt.left=Q._x+"px",Pt.top=Q._y+"px",Pt.position="absolute",Pt.display="block",Pt.width=Q._w+1+"px",Pt.height=Q._h+"px"),!D&&X)if(Q._isSplit)for(Q._next=tt=Q.nextSibling,Q.parentNode.appendChild(Q);tt&&tt.nodeType===3&&tt.textContent===" ";)Q._next=tt.nextSibling,Q.parentNode.appendChild(tt),tt=tt.nextSibling;else Q.parentNode._isSplit?(Q._parent=Q.parentNode,!Q.previousSibling&&Q.firstChild&&(Q.firstChild._isFirst=!0),Q.nextSibling&&Q.nextSibling.textContent===" "&&!Q.nextSibling.nextSibling&&ut.push(Q.nextSibling),Q._next=Q.nextSibling&&Q.nextSibling._isFirst?null:Q.nextSibling,Q.parentNode.removeChild(Q),ot.splice(it--,1),W--):ct||(Qt=!Q.nextSibling&&t1(Q.parentNode,t,w),Q.parentNode._parent&&Q.parentNode._parent.appendChild(Q),Qt&&Q.parentNode.appendChild(ro.createTextNode(" ")),A==="span"&&(Q.style.display="inline"),C.push(Q));else Q.parentNode._isSplit&&!Q._isSplit&&Q.innerHTML!==""?M.push(Q):X&&!Q._isSplit&&(A==="span"&&(Q.style.display="inline"),C.push(Q))}for(it=ut.length;--it>-1;)ut[it].parentNode.removeChild(ut[it]);if(N){for(at&&(Nt=ro.createElement(A),t.appendChild(Nt),At=Nt.offsetWidth+"px",Qt=Nt.offsetParent===t?0:t.offsetLeft,t.removeChild(Nt)),Pt=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(Rt=w===" "&&(!at||!D&&!X),it=0;it<N.length;it++){for(Tt=N[it],Nt=ro.createElement(A),Nt.style.cssText="display:block;text-align:"+b+";position:"+(at?"absolute;":"relative;"),ft&&(Nt.className=ft+(gt?it+1:"")),E.push(Nt),W=Tt.length,tt=0;tt<W;tt++)Tt[tt].nodeName!=="BR"&&(Q=Tt[tt],Nt.appendChild(Q),Rt&&Q._wordEnd&&Nt.appendChild(ro.createTextNode(" ")),at&&(tt===0&&(Nt.style.top=Q._y+"px",Nt.style.left=u+Qt+"px"),Q.style.top="0px",Qt&&(Q.style.left=Q._x-Qt+"px")));W===0?Nt.innerHTML="&nbsp;":!D&&!X&&(d2(Nt),Qx(Nt,String.fromCharCode(160)," ")),at&&(Nt.style.width=At,Nt.style.height=Q._h+"px"),t.appendChild(Nt)}t.style.cssText=Pt}at&&(o>t.clientHeight&&(t.style.height=o-m+"px",t.clientHeight<o&&(t.style.height=o+g+"px")),a>t.clientWidth&&(t.style.width=a-_+"px",t.clientWidth<a&&(t.style.width=a+f+"px"))),xt&&(nt?t.style.display=nt:t.style.removeProperty("display")),Rm(i,C),D&&Rm(n,M),Rm(s,E)},m2=function(t,e,i,n){var s=e.tag?e.tag:e.span?"span":"div",a=e.type||e.split||"chars,words,lines",o=~a.indexOf("chars"),h=Lm(e),u=e.wordDelimiter||" ",d=u!==" "?"":h?"&#173; ":" ",g="</"+s+">",f=1,m=e.specialChars?typeof e.specialChars=="function"?e.specialChars:c2:null,_,v,b,C,M,E,w,A,R=ro.createElement("div"),N=t.parentNode;for(N.insertBefore(R,t),R.textContent=t.nodeValue,N.removeChild(t),t=R,_=bm(t),w=_.indexOf("<")!==-1,e.reduceWhiteSpace!==!1&&(_=_.replace(o2," ").replace(a2,"")),w&&(_=_.split("<").join("{{LT}}")),M=_.length,v=(_.charAt(0)===" "?d:"")+i(),b=0;b<M;b++)if(E=_.charAt(b),m&&(A=m(_.substr(b),e.specialChars)))E=_.substr(b,A||1),v+=o&&E!==" "?n()+E+"</"+s+">":E,b+=A-1;else if(E===u&&_.charAt(b-1)!==u&&b){for(v+=f?g:"",f=0;_.charAt(b+1)===u;)v+=d,b++;b===M-1?v+=d:_.charAt(b+1)!==")"&&(v+=d+i(),f=1)}else E==="{"&&_.substr(b,6)==="{{LT}}"?(v+=o?n()+"{{LT}}</"+s+">":"{{LT}}",b+=5):E.charCodeAt(0)>=55296&&E.charCodeAt(0)<=56319||_.charCodeAt(b+1)>=65024&&_.charCodeAt(b+1)<=65039?(C=((_.substr(b,12).split(Tx)||[])[1]||"").length||2,v+=o&&E!==" "?n()+_.substr(b,C)+"</"+s+">":_.substr(b,C),b+=C-1):v+=o&&E!==" "?n()+E+"</"+s+">":E;t.outerHTML=v+(f?g:""),w&&Qx(N,"{{LT}}","<")},g2=function r(t,e,i,n){var s=Dm(t.childNodes),a=s.length,o=Lm(e),h,u;if(t.nodeType!==3||a>1){for(e.absolute=!1,h=0;h<a;h++)u=s[h],u._next=u._isFirst=u._parent=u._wordEnd=null,(u.nodeType!==3||/\S+/.test(u.nodeValue))&&(o&&u.nodeType!==3&&$x(u).display==="inline"&&(u.style.display="inline-block",u.style.position="relative"),u._isSplit=!0,r(u,e,i,n));e.absolute=o,t._isSplit=!0;return}m2(t,e,i,n)},ea=function(){function r(e,i){Zx||l2(),this.elements=Dm(e),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=i||{},h2&&this.split(i)}var t=r.prototype;return t.split=function(i){this.isSplit&&this.revert(),this.vars=i=i||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var n=this.elements.length,s=i.tag?i.tag:i.span?"span":"div",a=Kx(i.wordsClass,s),o=Kx(i.charsClass,s),h,u,d;--n>-1;)d=this.elements[n],this._originals[n]=d.innerHTML,h=d.clientHeight,u=d.clientWidth,g2(d,i,a,o),p2(d,i,this.chars,this.words,this.lines,u,h);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){var i=this._originals;if(!i)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(n,s){return n.innerHTML=i[s]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},r.create=function(i,n){return new r(i,n)},r}();ea.version="3.11.3";var s1=Vi(e1()),a1=Vi(n1());window.Promise||(window.Promise=s1.Polyfill);Object.assign||(Object.assign=a1.default);var b2=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});window.performance&&window.performance.now||(o1=Date.now(),window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-o1});var o1,Fm=Date.now(),l1=["ms","moz","webkit","o"];for(nf=0;nf<l1.length&&!window.requestAnimationFrame;++nf)sf=l1[nf],window.requestAnimationFrame=window[sf+"RequestAnimationFrame"],window.cancelAnimationFrame=window[sf+"CancelAnimationFrame"]||window[sf+"CancelRequestAnimationFrame"];var sf,nf;window.requestAnimationFrame||(window.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var t=Date.now(),e=b2+Fm-t;return e<0&&(e=0),Fm=t,window.setTimeout(function(){Fm=Date.now(),r(performance.now())},e)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var xf={};IE(xf,{BaseTextureCache:()=>kr,CanvasRenderTarget:()=>_f,DATA_URI:()=>G1,EventEmitter:()=>Xn.default,ProgramCache:()=>vf,TextureCache:()=>hr,clearTextureCache:()=>lA,correctBlendMode:()=>mu,createIndicesForQuads:()=>Jm,decomposeDataUri:()=>hA,deprecation:()=>wr,destroyTextureCache:()=>oA,determineCrossOrigin:()=>Qm,earcut:()=>vu.default,getBufferType:()=>V1,getResolutionOfUrl:()=>na,hex2rgb:()=>rn,hex2string:()=>du,interleaveTypedArrays:()=>sA,isMobile:()=>yr,isPow2:()=>mf,isWebGLSupported:()=>Zm,log2:()=>gf,nextPow2:()=>Cl,premultiplyBlendMode:()=>pf,premultiplyRgba:()=>$m,premultiplyTint:()=>so,premultiplyTintToRgba:()=>gu,removeItems:()=>xn,rgb2hex:()=>iA,sayHello:()=>Ym,sign:()=>Ss,skipHello:()=>eA,string2hex:()=>pu,trimCanvas:()=>Km,uid:()=>Ts,url:()=>bf.default});var km=/iPhone/i,h1=/iPod/i,u1=/iPad/i,c1=/\biOS-universal(?:.+)Mac\b/i,Om=/\bAndroid(?:.+)Mobile\b/i,f1=/Android/i,gl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,af=/Silk/i,bs=/Windows Phone/i,d1=/\bWindows(?:.+)ARM\b/i,p1=/BlackBerry/i,m1=/BB10/i,g1=/Opera Mini/i,v1=/\b(CriOS|Chrome)(?:.+)Mobile/i,_1=/Mobile(?:.+)Firefox\b/i,y1=function(r){return typeof r!="undefined"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream=="undefined"};function w2(r){return function(t){return t.test(r)}}function of(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator!="undefined"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]!="undefined"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]!="undefined"&&(e=i[0]);var n=w2(e),s={apple:{phone:n(km)&&!n(bs),ipod:n(h1),tablet:!n(km)&&(n(u1)||y1(t))&&!n(bs),universal:n(c1),device:(n(km)||n(h1)||n(u1)||n(c1)||y1(t))&&!n(bs)},amazon:{phone:n(gl),tablet:!n(gl)&&n(af),device:n(gl)||n(af)},android:{phone:!n(bs)&&n(gl)||!n(bs)&&n(Om),tablet:!n(bs)&&!n(gl)&&!n(Om)&&(n(af)||n(f1)),device:!n(bs)&&(n(gl)||n(af)||n(Om)||n(f1))||n(/\bokhttp\b/i)},windows:{phone:n(bs),tablet:n(d1),device:n(bs)||n(d1)},other:{blackberry:n(p1),blackberry10:n(m1),opera:n(g1),firefox:n(_1),chrome:n(v1),device:n(p1)||n(m1)||n(g1)||n(_1)||n(v1)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var yr=of(window.navigator);function S2(r){var t=!0;if(yr.tablet||yr.phone){if(yr.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(t=!1)}}if(yr.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(t=!1)}}}return t?r:4}function T2(){return!yr.apple.device}var pe={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:S2(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:yr.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:T2(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Xn=Vi(b1()),vu=Vi(E1()),B1=Vi(Xm()),bf=Vi(Xm());var Hn;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Hn||(Hn={}));var wl;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(wl||(wl={}));var fu;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(fu||(fu={}));var _e;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(_e||(_e={}));var xr;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(xr||(xr={}));var Sl;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Sl||(Sl={}));var ra;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ra||(ra={}));var fi;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(fi||(fi={}));var Wn;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Wn||(Wn={}));var en;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(en||(en={}));var Tl;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(Tl||(Tl={}));var ws;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(ws||(ws={}));var _n;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(_n||(_n={}));var df;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(df||(df={}));var yn;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(yn||(yn={}));var br;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(br||(br={}));var no;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(no||(no={}));pe.RETINA_PREFIX=/@([0-9\.]+)x/;pe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var qm=!1,z1="5.3.9";function eA(){qm=!0}function Ym(r){var t;if(!qm){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+z1+" - \u2730 "+r+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,e)}else window.console&&window.console.log("PixiJS "+z1+" - "+r+" - http://www.pixijs.com/");qm=!0}}var jm;function Zm(){return typeof jm=="undefined"&&(jm=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:pe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),jm}function rn(r,t){return t===void 0&&(t=[]),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function du(r){var t=r.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function pu(r){return typeof r=="string"&&r[0]==="#"&&(r=r.substr(1)),parseInt(r,16)}function iA(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function rA(){for(var r=[],t=[],e=0;e<32;e++)r[e]=e,t[e]=e;r[_e.NORMAL_NPM]=_e.NORMAL,r[_e.ADD_NPM]=_e.ADD,r[_e.SCREEN_NPM]=_e.SCREEN,t[_e.NORMAL]=_e.NORMAL_NPM,t[_e.ADD]=_e.ADD_NPM,t[_e.SCREEN]=_e.SCREEN_NPM;var i=[];return i.push(t),i.push(r),i}var pf=rA();function mu(r,t){return pf[t?1:0][r]}function $m(r,t,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function so(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;var e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function gu(r,t,e,i){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(i||i===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function Jm(r,t){t===void 0&&(t=null);var e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function V1(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var nA={Float32Array,Uint32Array,Int32Array,Uint8Array};function sA(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],d=r[s],g=V1(d);n[g]||(n[g]=new nA[g](a)),o=n[g];for(var f=0;f<d.length;f++){var m=(f/u|0)*i+h,_=f%u;o[m+_]=d[f]}h+=u}return new Float32Array(a)}function Cl(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function mf(r){return!(r&r-1)&&!!r}function gf(r){var t=(r>65535?1:0)<<4;r>>>=t;var e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function xn(r,t,e){var i=r.length,n;if(!(t>=i||e===0)){e=t+e>i?i-t:e;var s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}}function Ss(r){return r===0?0:r<0?-1:1}var aA=0;function Ts(){return++aA}var U1={};function wr(r,t,e){if(e===void 0&&(e=3),!U1[t]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+r),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r),console.warn(i))),U1[t]=!0}}var vf={},hr=Object.create(null),kr=Object.create(null);function oA(){var r;for(r in hr)hr[r].destroy();for(r in kr)kr[r].destroy()}function lA(){var r;for(r in hr)delete hr[r];for(r in kr)delete kr[r]}var _f=function(){function r(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||pe.RESOLUTION,this.resize(t,e)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),r}();function Km(r){var t=r.width,e=r.height,i=r.getContext("2d"),n=i.getImageData(0,0,t,e),s=n.data,a=s.length,o={top:null,left:null,right:null,bottom:null},h=null,u,d,g;for(u=0;u<a;u+=4)s[u+3]!==0&&(d=u/4%t,g=~~(u/4/t),o.top===null&&(o.top=g),(o.left===null||d<o.left)&&(o.left=d),(o.right===null||o.right<d)&&(o.right=d+1),(o.bottom===null||o.bottom<g)&&(o.bottom=g));return o.top!==null&&(t=o.right-o.left,e=o.bottom-o.top+1,h=i.getImageData(o.left,o.top,t,e)),{height:e,width:t,data:h}}var G1=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function hA(r){var t=G1.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var yf;function Qm(r,t){if(t===void 0&&(t=window.location),r.indexOf("data:")===0)return"";t=t||window.location,yf||(yf=document.createElement("a")),yf.href=r;var e=(0,B1.parse)(yf.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function na(r,t){var e=pe.RETINA_PREFIX.exec(r);return e?parseFloat(e[1]):t!==void 0?t:1}var El=Math.PI*2,H1=180/Math.PI,W1=Math.PI/180,di;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(di||(di={}));var Pe=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=di.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r}(),X1=function(){function r(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=di.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i},r.prototype.getBounds=function(){return new Pe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r}(),q1=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=di.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},r.prototype.getBounds=function(){return new Pe(this.x-this.width,this.y-this.height,this.width,this.height)},r}(),ao=function(){function r(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var s=[],a=0,o=n.length;a<o;a++)s.push(n[a].x,n[a].y);n=s}this.points=n,this.type=di.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e},r.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,s=0,a=n-1;s<n;a=s++){var o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],d=this.points[a*2+1],g=h>e!=d>e&&t<(u-o)*((e-h)/(d-h))+o;g&&(i=!i)}return i},r}(),Y1=function(){function r(t,e,i,n,s){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=di.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s||(i=t-(this.x+this.width-this.radius),i*i+n*n<=s)||(n=e-(this.y+this.height-this.radius),i*i+n*n<=s)||(i=t-(this.x+this.radius),i*i+n*n<=s))return!0}return!1},r}(),Je=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r}(),sa=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Ke=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Je;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Je;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=-Math.atan2(-n,s),o=Math.atan2(i,e),h=Math.abs(a+o);return h<1e-5||Math.abs(El-h)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx,t.position.y=this.ty,t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),oo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],lo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ho=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],uo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tg=[],j1=[],wf=Math.sign;function uA(){for(var r=0;r<16;r++){var t=[];tg.push(t);for(var e=0;e<16;e++)for(var i=wf(oo[r]*oo[e]+ho[r]*lo[e]),n=wf(lo[r]*oo[e]+uo[r]*lo[e]),s=wf(oo[r]*ho[e]+ho[r]*uo[e]),a=wf(lo[r]*ho[e]+uo[r]*uo[e]),o=0;o<16;o++)if(oo[o]===i&&lo[o]===n&&ho[o]===s&&uo[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new Ke;h.set(oo[r],lo[r],ho[r],uo[r],0,0),j1.push(h)}}uA();var Qe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return oo[r]},uY:function(r){return lo[r]},vX:function(r){return ho[r]},vY:function(r){return uo[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return tg[r][t]},sub:function(r,t){return tg[r][Qe.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)==2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Qe.S:Qe.N:Math.abs(t)*2<=Math.abs(r)?r>0?Qe.E:Qe.W:t>0?r>0?Qe.SE:Qe.SW:r>0?Qe.NE:Qe.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=j1[Qe.inv(t)];n.tx=e,n.ty=i,r.append(n)}},Sf=function(){function r(){this.worldTransform=new Ke,this.localTransform=new Ke,this.position=new sa(this.onChange,this,0,0),this.scale=new sa(this.onChange,this,1,1),this.pivot=new sa(this.onChange,this,0,0),this.skew=new sa(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();pe.SORTABLE_CHILDREN=!1;var _u=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Pe.EMPTY:(t=t||new Pe(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,d=t.tx,g=t.ty,f=this.minX,m=this.minY,_=this.maxX,v=this.maxY,b=a*e+h*i+d,C=o*e+u*i+g;f=b<f?b:f,m=C<m?C:m,_=b>_?b:_,v=C>v?C:v,b=a*n+h*i+d,C=o*n+u*i+g,f=b<f?b:f,m=C<m?C:m,_=b>_?b:_,v=C>v?C:v,b=a*e+h*s+d,C=o*e+u*s+g,f=b<f?b:f,m=C<m?C:m,_=b>_?b:_,v=C>v?C:v,b=a*n+h*s+d,C=o*n+u*s+g,f=b<f?b:f,m=C<m?C:m,_=b>_?b:_,v=C>v?C:v,this.minX=f,this.minY=m,this.maxX=_,this.maxY=v},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],d=t[h+1];n=u<n?u:n,s=d<s?d:s,a=u>a?u:a,o=d>o?d:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,d=t.d,g=t.tx,f=t.ty,m=this.minX,_=this.minY,v=this.maxX,b=this.maxY,C=i;C<n;C+=2){var M=e[C],E=e[C+1],w=o*M+u*E+g,A=d*E+h*M+f;m=Math.min(m,w-s),v=Math.max(v,w+s),_=Math.min(_,A-a),b=Math.max(b,A+a)}this.minX=m,this.minY=_,this.maxX=v,this.maxY=b},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,d=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>d?a:d}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,d=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>d?a:d}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();var eg=function(r,t){return eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},eg(r,t)};function ig(r,t){eg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ti=function(r){ig(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Sf,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new _u,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Pe),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new Pe),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _u);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,d){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=d,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new rg),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*H1},set:function(e){this.transform.rotation=e*W1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(Xn.default),rg=function(r){ig(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(ti);ti.prototype.displayObjectUpdateTransform=ti.prototype.updateTransform;function cA(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var ei=function(r){ig(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=pe.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);xn(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,xn(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,xn(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(cA),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(ti);ei.prototype.containerUpdateTransform=ei.prototype.updateTransform;var fA={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ti.mixin(fA);var dA=9,Tf=100,pA=0,mA=0,Z1=2,$1=1,gA=-1e3,vA=-1e3,_A=2,J1=function(){function r(t){this._hookDiv=null,(yr.tablet||yr.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=Tf+"px",e.style.height=Tf+"px",e.style.position="absolute",e.style.top=pA+"px",e.style.left=mA+"px",e.style.zIndex=Z1.toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=$1+"px",e.style.height=$1+"px",e.style.position="absolute",e.style.top=gA+"px",e.style.left=vA+"px",e.style.zIndex=_A.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},r.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},r.prototype.update=function(){var t=performance.now();if(!(yr.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,n=e.width/this.renderer.width*i,s=e.height/this.renderer.height*i,a=this.div;a.style.left=e.left+"px",a.style.top=e.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var h=this.children[o];if(h.renderId!==this.renderId)h._accessibleActive=!1,xn(this.children,o,1),this.div.removeChild(h._accessibleDiv),this.pool.push(h._accessibleDiv),h._accessibleDiv=null,o--;else{a=h._accessibleDiv;var u=h.hitArea,d=h.worldTransform;h.hitArea?(a.style.left=(d.tx+u.x*d.a)*n+"px",a.style.top=(d.ty+u.y*d.d)*s+"px",a.style.width=u.width*d.a*n+"px",a.style.height=u.height*d.d*s+"px"):(u=h.getBounds(),this.capHitArea(u),a.style.left=u.x*n+"px",a.style.top=u.y*s+"px",a.style.width=u.width*n+"px",a.style.height=u.height*s+"px",a.title!==h.accessibleTitle&&h.accessibleTitle!==null&&(a.title=h.accessibleTitle),a.getAttribute("aria-label")!==h.accessibleHint&&h.accessibleHint!==null&&a.setAttribute("aria-label",h.accessibleHint)),(h.accessibleTitle!==a.title||h.tabIndex!==a.tabIndex)&&(a.title=h.accessibleTitle,a.tabIndex=h.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},r.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=Tf+"px",e.style.height=Tf+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Z1.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},r.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},r.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},r.prototype._onKeyDown=function(t){t.keyCode===dA&&this.activate()},r.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r}();pe.TARGET_FPMS=.06;var nn;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(nn||(nn={}));var ng=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),yi=function(){function r(){var t=this;this._head=new ng(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/pe.TARGET_FPMS,this.elapsedMS=1/pe.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=nn.NORMAL),this._addListener(new ng(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=nn.NORMAL),this._addListener(new ng(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*pe.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,pe.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),K1=function(){function r(){}return r.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,nn.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?yi.shared:new yi,t.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},r}();var Q1=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Je,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},r.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();var sg=function(r,t){return sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},sg(r,t)};function yA(r,t){sg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xA=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),ag=function(){function r(t){this._pointerId=t,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!=0},set:function(t){this._doSet(r.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!=0},set:function(t){this._doSet(r.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!=0},set:function(t){this._doSet(r.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),r}(),bA=function(){function r(){this._tempPoint=new Je}return r.prototype.recursiveFindHit=function(t,e,i,n,s){if(!e||!e.visible)return!1;var a=t.data.global;s=e.interactive||s;var o=!1,h=s,u=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,u=!1)),h=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(n=!1)),u&&e.interactiveChildren&&e.children)for(var d=e.children,g=d.length-1;g>=0;g--){var f=d[g],m=this.recursiveFindHit(t,f,i,n,h);if(m){if(!f.parent)continue;h=!1,m&&(t.target&&(n=!1),o=!0)}}return s&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},r.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},r}(),wA={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ti.mixin(wA);var Cf=1,Ef={target:null,data:{global:null}},tb=function(r){yA(t,r);function t(e,i){var n=r.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new Q1,n.mouse.identifier=Cf,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Cf]=n.mouse,n.interactionDataPool=[],n.eventData=new xA,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new bA,n._tempDisplayObject=new rg,n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,i){return Ef.target=null,Ef.data.global=e,i||(i=this.lastObjectRendered),this.processInteractive(Ef,i,null,!0),Ef.target},t.prototype.setTargetElement=function(e,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=i,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(yi.system.add(this.tickerUpdate,this,nn.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){!this.tickerAdded||(yi.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var i=this.cursorStyles[e];if(i)switch(typeof i){case"string":this.interactionDOMElement.style.cursor=i;break;case"function":i(e);break;case"object":Object.assign(this.interactionDOMElement.style,i);break}else typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,i,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=i,e.emit(i,n),e[i]&&e[i](n))},t.prototype.delayDispatchEvent=function(e,i,n){this.delayedEvents.push({displayObject:e,eventString:i,eventData:n})},t.prototype.mapPositionToPoint=function(e,i,n){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:0,height:0};var a=1/this.resolution;e.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*a,e.y=(n-s.top)*(this.interactionDOMElement.height/s.height)*a},t.prototype.processInteractive=function(e,i,n,s){var a=this.search.findHit(e,i,n,s),o=this.delayedEvents;if(!o.length)return a;e.stopPropagationHint=!1;var h=o.length;this.delayedEvents=[];for(var u=0;u<h;u++){var d=o[u],g=d.displayObject,f=d.eventString,m=d.eventData;m.stopsPropagatingAt===g&&(m.stopPropagationHint=!0),this.dispatchEvent(g,f,m)}return a},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);if(this.autoPreventDefault&&i[0].isNormalized){var n=e.cancelable||!("cancelable"in e);n&&e.preventDefault()}for(var s=i.length,a=0;a<s;a++){var o=i[a],h=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),o.pointerType==="touch")this.emit("touchstart",u);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var d=o.button===2;this.emit(d?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,i,n){var s=e.data,a=e.data.identifier;if(n){if(i.trackedPointers[a]||(i.trackedPointers[a]=new ag(a)),this.dispatchEvent(i,"pointerdown",e),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",e);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;o?i.trackedPointers[a].rightDown=!0:i.trackedPointers[a].leftDown=!0,this.dispatchEvent(i,o?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,i,n){for(var s=this.normalizeToPointerData(e),a=s.length,o=e.target!==this.interactionDOMElement?"outside":"",h=0;h<a;h++){var u=s[h],d=this.getInteractionDataForPointerId(u),g=this.configureInteractionEventForDOMEvent(this.eventData,u,d);if(g.data.originalEvent=e,this.processInteractive(g,this.lastObjectRendered,n,i||!o),this.emit(i?"pointercancel":"pointerup"+o,g),u.pointerType==="mouse"||u.pointerType==="pen"){var f=u.button===2;this.emit(f?"rightup"+o:"mouseup"+o,g)}else u.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+o,g),this.releaseInteractionDataForPointerId(u.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,i){var n=e.data,s=e.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",e),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,i,n){var s=e.data,a=e.data.identifier,o=i.trackedPointers[a],h=s.pointerType==="touch",u=s.pointerType==="mouse"||s.pointerType==="pen",d=!1;if(u){var g=s.button===2,f=ag.FLAGS,m=g?f.RIGHT_DOWN:f.LEFT_DOWN,_=o!==void 0&&o.flags&m;n?(this.dispatchEvent(i,g?"rightup":"mouseup",e),_&&(this.dispatchEvent(i,g?"rightclick":"click",e),d=!0)):_&&this.dispatchEvent(i,g?"rightupoutside":"mouseupoutside",e),o&&(g?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",e),h&&this.dispatchEvent(i,"touchend",e),o&&((!u||d)&&this.dispatchEvent(i,"pointertap",e),h&&(this.dispatchEvent(i,"tap",e),o.over=!1))):o&&(this.dispatchEvent(i,"pointerupoutside",e),h&&this.dispatchEvent(i,"touchendoutside",e)),o&&o.none&&delete i.trackedPointers[a]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,s=0;s<n;s++){var a=i[s],o=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,o);h.data.originalEvent=e,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),a.pointerType==="touch"&&this.emit("touchmove",h),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",h)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,i,n){var s=e.data,a=s.pointerType==="touch",o=s.pointerType==="mouse"||s.pointerType==="pen";o&&this.processPointerOverOut(e,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",e),a&&this.dispatchEvent(i,"touchmove",e),o&&this.dispatchEvent(i,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);a.data.originalEvent=n,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(s.identifier)}},t.prototype.processPointerOverOut=function(e,i,n){var s=e.data,a=e.data.identifier,o=s.pointerType==="mouse"||s.pointerType==="pen",h=i.trackedPointers[a];n&&!h&&(h=i.trackedPointers[a]=new ag(a)),h!==void 0&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(i,"pointerover",e),o&&this.delayDispatchEvent(i,"mouseover",e)),o&&this.cursor===null&&(this.cursor=i.cursor)):h.over&&(h.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),o&&this.dispatchEvent(i,"mouseout",e),h.none&&delete i.trackedPointers[a]))},t.prototype.onPointerOver=function(e){var i=this.normalizeToPointerData(e),n=i[0],s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);a.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",a)},t.prototype.getInteractionDataForPointerId=function(e){var i=e.pointerId,n;return i===Cf||e.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new Q1,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var i=this.activeInteractionData[e];i&&(delete this.activeInteractionData[e],i.reset(),this.interactionDataPool.push(i))},t.prototype.configureInteractionEventForDOMEvent=function(e,i,n){return e.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,s=e.changedTouches.length;n<s;n++){var a=e.changedTouches[n];typeof a.button=="undefined"&&(a.button=e.touches.length?1:0),typeof a.buttons=="undefined"&&(a.buttons=e.touches.length?1:0),typeof a.isPrimary=="undefined"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width=="undefined"&&(a.width=a.radiusX||1),typeof a.height=="undefined"&&(a.height=a.radiusY||1),typeof a.tiltX=="undefined"&&(a.tiltX=0),typeof a.tiltY=="undefined"&&(a.tiltY=0),typeof a.pointerType=="undefined"&&(a.pointerType="touch"),typeof a.pointerId=="undefined"&&(a.pointerId=a.identifier||0),typeof a.pressure=="undefined"&&(a.pressure=a.force||.5),typeof a.twist=="undefined"&&(a.twist=0),typeof a.tangentialPressure=="undefined"&&(a.tangentialPressure=0),typeof a.layerX=="undefined"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY=="undefined"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,i.push(a)}else if(e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof window.PointerEvent))){var o=e;typeof o.isPrimary=="undefined"&&(o.isPrimary=!0),typeof o.width=="undefined"&&(o.width=1),typeof o.height=="undefined"&&(o.height=1),typeof o.tiltX=="undefined"&&(o.tiltX=0),typeof o.tiltY=="undefined"&&(o.tiltY=0),typeof o.pointerType=="undefined"&&(o.pointerType="mouse"),typeof o.pointerId=="undefined"&&(o.pointerId=Cf),typeof o.pressure=="undefined"&&(o.pressure=.5),typeof o.twist=="undefined"&&(o.twist=0),typeof o.tangentialPressure=="undefined"&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(e);return i},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Xn.default);var Xi=function(){function r(t){this.items=[],this._name=t,this._aliasCount=0}return r.prototype.emit=function(t,e,i,n,s,a,o,h){if(arguments.length>8)throw new Error("max arguments reached");var u=this,d=u.name,g=u.items;this._aliasCount++;for(var f=0,m=g.length;f<m;f++)g[f][d](t,e,i,n,s,a,o,h);return g===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},r.prototype.contains=function(t){return this.items.indexOf(t)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(Xi.prototype,{dispatch:{value:Xi.prototype.emit},run:{value:Xi.prototype.emit}});pe.PREFER_ENV=yr.any?Hn.WEBGL:Hn.WEBGL2;pe.STRICT_TEXTURE_CACHE=!1;var og=[];function eb(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=og.length-1;n>=0;--n){var s=og[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var lg=function(r,t){return lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},lg(r,t)};function Ae(r,t){lg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Xi("setRealSize"),this.onUpdate=new Xi("update"),this.onError=new Xi("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),hg=function(r){Ae(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ws.UNPACK),n.width===i.width&&n.height===i.height?s.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,s.texImage2D(i.target,0,n.internalFormat,i.width,i.height,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(yu),SA={scaleMode:Wn.NEAREST,format:Sl.RGBA,alphaMode:ws.NPM},He=function(r){Ae(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,d=i.height,g=i.wrapMode,f=i.format,m=i.type,_=i.target,v=i.resolution,b=i.resourceOptions;return e&&!(e instanceof yu)&&(e=eb(e,b),e.internal=!0),n.width=u||0,n.height=d||0,n.resolution=v||pe.RESOLUTION,n.mipmap=a!==void 0?a:pe.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:pe.ANISOTROPIC_LEVEL,n.wrapMode=g||pe.WRAP_MODE,n.scaleMode=h!==void 0?h:pe.SCALE_MODE,n.format=f||Sl.RGBA,n.type=m||fi.UNSIGNED_BYTE,n.target=_||ra.TEXTURE_2D,n.alphaMode=s!==void 0?s:ws.UNPACK,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.uid=Ts(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&d>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e,this.height=i,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=i/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=mf(this.realWidth)&&mf(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=this.width*i/e,this.height=this.height*i/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete kr[this.cacheId],delete hr[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=pe.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;s?a=e:(e._pixiId||(e._pixiId="pixiid_"+Ts()),a=e._pixiId);var o=kr[a];if(s&&n&&!o)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return o||(o=new t(e,i),o.cacheId=a,t.addToCache(o,a)),o},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new hg(e,{width:i,height:n}),o=e instanceof Float32Array?fi.FLOAT:fi.UNSIGNED_BYTE;return new t(a,Object.assign(SA,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),kr[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),kr[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=kr[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete kr[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete kr[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(Xn.default),ib=function(r){Ae(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new He;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)!e[n]||(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof yu?this.addResourceAt(e[n],n):this.addResourceAt(eb(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(yu),TA=function(r){Ae(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ra.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.format,this._width,this._height,a,0,i.format,i.type,null);for(var d=0;d<a;d++){var g=h[d];o[d]<g.dirtyId&&(o[d]=g.dirtyId,g.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,d,g.resource.width,g.resource.height,1,i.format,i.type,g.resource.source))}return!0},t}(ib),aa=function(r){Ae(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Qm(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ws.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,i.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,i.format,i.format,i.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(yu),rb=function(r){Ae(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){var i=window.OffscreenCanvas;return i&&e instanceof i?!0:e instanceof HTMLCanvasElement},t}(aa),CA=function(r){Ae(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var d=0;d<t.SIDES;d++)n.items[d].target=ra.TEXTURE_CUBE_MAP_POSITIVE_X+d;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ra.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ra.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(ib),nb=function(r){Ae(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;aa.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:pe.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(i,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===ws.UNPACK?"premultiply":"none"}).then(function(n){return e.destroyed?Promise.reject():(e.bitmap=n,e.update(),e._process=null,Promise.resolve(e))}),this._process)},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(aa),EA=function(r){Ae(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;aa.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){!e._resolve||(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(!!e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Ts(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&e.indexOf("<svg")===0},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(aa),MA=function(r){Ae(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];aa.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],d=u.src,g=u.mime;d=d||e[o];var f=d.split("?").shift().toLowerCase(),m=f.substr(f.lastIndexOf(".")+1);g=g||t.MIME_TYPES[m]||"video/"+m,h.src=d,h.type=g,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(e===void 0&&(e=0),!this.destroyed){var i=yi.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(yi.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&yi.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(yi.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(aa),PA=function(r){Ae(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(aa);og.push(nb,PA,rb,MA,EA,hg,CA,TA);var Or=function(){function r(t){this.renderer=t}return r.prototype.destroy=function(){this.renderer=null},r}(),AA=function(r){Ae(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ws.UNPACK),n.width===i.width&&n.height===i.height?s.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,s.texImage2D(i.target,0,e.context.webGLVersion===1?s.DEPTH_COMPONENT:s.DEPTH_COMPONENT16,i.width,i.height,0,i.format,i.type,this.data)),!0},t}(hg),ug=function(){function r(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Xi("disposeFramebuffer"),this.multisample=no.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new He(null,{scaleMode:Wn.NEAREST,resolution:1,mipmap:Tl.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new He(new AA(null,{width:this.width,height:this.height}),{scaleMode:Wn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Tl.OFF,format:Sl.DEPTH_COMPONENT,type:fi.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Mf=function(r){Ae(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}i=r.call(this,null,e)||this;var h=e||{},u=h.width,d=h.height;return i.mipmap=0,i.width=Math.ceil(u)||100,i.height=Math.ceil(d)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new ug(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){e=Math.ceil(e),i=Math.ceil(i),this.framebuffer.resize(e*this.resolution,i*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(He),sb=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Qe.add(i,Qe.NW),this.x0=h+a*Qe.uX(i),this.y0=u+o*Qe.uY(i),i=Qe.add(i,2),this.x1=h+a*Qe.uX(i),this.y1=u+o*Qe.uY(i),i=Qe.add(i,2),this.x2=h+a*Qe.uX(i),this.y2=u+o*Qe.uY(i),i=Qe.add(i,2),this.x3=h+a*Qe.uX(i),this.y3=u+o*Qe.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r}(),ab=new sb,ye=function(r){Ae(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new Pe(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=ab,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Je(o.x,o.y):new Je(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture;i&&i.url&&hr[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===ab&&(this._uvs=new sb),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=pe.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;s?a=e:(e._pixiId||(e._pixiId="pixiid_"+Ts()),a=e._pixiId);var o=hr[a];if(s&&n&&!o)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return o||(i.resolution||(i.resolution=na(e)),o=new t(new He(e,i)),o.baseTexture.cacheId=a,He.addToCache(o.baseTexture,a),t.addToCache(o,a)),o},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(He.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n){var s=new nb(e);s.url=i;var a=new He(s,{scaleMode:pe.SCALE_MODE,resolution:na(i)}),o=new t(a);return n||(n=i),He.addToCache(o.baseTexture,n),t.addToCache(o,n),n!==i&&(He.addToCache(o.baseTexture,i),t.addToCache(o,i)),o},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),hr[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),hr[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=hr[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete hr[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)hr[e.textureCacheIds[s]]===e&&delete hr[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",d="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,g="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(d+" "+u+" "+g))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(Xn.default);function IA(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new ye(new He(new rb(r)))}function Pf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}ye.EMPTY=new ye(new He);Pf(ye.EMPTY);Pf(ye.EMPTY.baseTexture);ye.WHITE=IA();Pf(ye.WHITE);Pf(ye.WHITE.baseTexture);var oa=function(r){Ae(t,r);function t(e,i){var n=this,s=null;if(!(e instanceof Mf)){var a=arguments[1],o=arguments[2],h=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+o+") instead of the ctor directly."),s=arguments[0],i=null,e=new Mf({width:a,height:o,scaleMode:h,resolution:u})}return n=r.call(this,e,i)||this,n.legacyRenderer=s,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0),e=Math.ceil(e),i=Math.ceil(i),this.valid=e>0&&i>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=i,n&&this.baseTexture.resize(e,i),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){return typeof e=="number"&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new Mf(e))},t}(ye),DA=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e){var i=new Mf(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new oa(i)},r.prototype.getOptimalTexture=function(t,e,i){i===void 0&&(i=1);var n=r.SCREEN_KEY;t*=i,e*=i,(!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight)&&(t=Cl(t),e=Cl(e),n=(t&65535)<<16|e&65535),this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return s||(s=this.createTexture(t,e)),s.filterPoolKey=n,s.setResolution(i),s},r.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){var e=r.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY="screen",r}(),lb=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),LA=0,Ai=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=LA++,this.disposeRunner=new Xi("disposeBuffer")}return r.prototype.update=function(t){this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}();function hb(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var RA={Float32Array,Uint32Array,Int32Array,Uint8Array};function FA(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],d=r[s],g=hb(d);n[g]||(n[g]=new RA[g](a)),o=n[g];for(var f=0;f<d.length;f++){var m=(f/u|0)*i+h,_=f%u;o[m+_]=d[f]}h+=u}return new Float32Array(a)}var ub={5126:4,5123:2,5121:1},kA=0,OA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},co=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=kA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Xi("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ai||(e instanceof Array&&(e=new Float32Array(e)),e=new Ai(e));var u=t.split("|");if(u.length>1){for(var d=0;d<u.length;d++)this.addAttribute(u[d],e,i,n,s);return this}var g=this.buffers.indexOf(e);return g===-1&&(this.buffers.push(e),g=this.buffers.length-1),this.attributes[t]=new lb(g,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Ai||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ai(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Ai,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*ub[s.type]/4),s.buffer=0}for(i.data=FA(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ai(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new lb(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new OA[hb(a.buffers[o].data)](n[o]),e.buffers[o]=new Ai(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.index=!0;for(var u=0,d=0,g=0,f=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){f=o;break}for(var o in a.attributes){var m=a.attributes[o];(m.buffer|0)===f&&(d+=m.size*ub[m.type]/4)}for(var o=0;o<t.length;o++){for(var _=t[o].indexBuffer.data,h=0;h<_.length;h++)e.indexBuffer.data[h+g]+=u;u+=a.buffers[f].data.length/d,g+=_.length}}return e},r}(),NA=function(r){Ae(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(co),cg=function(r){Ae(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ai(e.vertices),e.uvBuffer=new Ai(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(co),BA=0,la=function(){function r(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=BA++,this.static=!!e}return r.prototype.update=function(){this.dirtyId++},r.prototype.add=function(t,e,i){this.uniforms[t]=new r(e,i)},r.from=function(t,e){return new r(t,e)},r}(),zA=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Pe,this.destinationFrame=new Pe,this.filters=[]}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),VA=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new DA,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new NA,i.quadUv=new cg,i.tempRect=new Pe,i.activeState={},i.globalUniforms=new la({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return t.prototype.push=function(e,i){for(var n=this.renderer,s=this.defaultFilterStack,a=this.statePool.pop()||new zA,o=i[0].resolution,h=i[0].padding,u=i[0].autoFit,d=i[0].legacy,g=1;g<i.length;g++){var f=i[g];o=Math.min(o,f.resolution),h=this.useMaxPadding?Math.max(h,f.padding):h+f.padding,u=u&&f.autoFit,d=d||f.legacy}s.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),s.push(a),a.resolution=o,a.legacy=d,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(h),u&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(o),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,o),a.filters=i,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var m=this.tempRect;m.width=a.sourceFrame.width,m.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,n.renderTexture.bind(a.renderTexture,a.sourceFrame,m),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,i=e.pop(),n=i.filters;this.activeState=i;var s=this.globalUniforms.uniforms;s.outputFrame=i.sourceFrame,s.resolution=i.resolution;var a=s.inputSize,o=s.inputPixel,h=s.inputClamp;if(a[0]=i.destinationFrame.width,a[1]=i.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=a[0]*i.resolution,o[1]=a[1]*i.resolution,o[2]=1/o[0],o[3]=1/o[1],h[0]=.5*o[2],h[1]=.5*o[3],h[2]=i.sourceFrame.width*a[2]-.5*o[2],h[3]=i.sourceFrame.height*a[3]-.5*o[3],i.legacy){var u=s.filterArea;u[0]=i.destinationFrame.width,u[1]=i.destinationFrame.height,u[2]=i.sourceFrame.x,u[3]=i.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var d=e[e.length-1];if(i.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,d.renderTexture,_n.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var g=i.renderTexture,f=this.getOptimalFilterTexture(g.width,g.height,i.resolution);f.filterFrame=g.filterFrame;var m=0;for(m=0;m<n.length-1;++m){n[m].apply(this,g,f,_n.CLEAR,i);var _=g;g=f,f=_}n[m].apply(this,g,d.renderTexture,_n.BLEND,i),this.returnFilterTexture(g),this.returnFilterTexture(f)}i.clear(),this.statePool.push(i)},t.prototype.bindAndClear=function(e,i){if(i===void 0&&(i=_n.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);typeof i=="boolean"&&(i=i?_n.CLEAR:_n.BLEND,wr("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(i===_n.CLEAR||i===_n.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,i,n,s){var a=this.renderer;this.bindAndClear(n,s),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,a.state.set(e.state),a.shader.bind(e),e.legacy?(this.quadUv.map(i._frame,i.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(xr.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(xr.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,i){var n=this.activeState,s=n.sourceFrame,a=n.destinationFrame,o=i._texture.orig,h=e.set(a.width,0,0,a.height,s.x,s.y),u=i.worldTransform.copyTo(Ke.TEMP_MATRIX);return u.invert(),h.prepend(u),h.scale(1/o.width,1/o.height),h.translate(i.anchor.x,i.anchor.y),h},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,i,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(e,i,n)},t.prototype.getFilterTexture=function(e,i){if(typeof e=="number"){var n=e;e=i,i=n}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,i||e.resolution);return s.filterFrame=e.filterFrame,s},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(Or),Ml=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),UA=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.emptyRenderer=new Ml(e),i.currentRenderer=i.emptyRenderer,i}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,i){for(var n=this.renderer.texture.boundTextures,s=i-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)},t.prototype.boundArray=function(e,i,n,s){for(var a=e.elements,o=e.ids,h=e.count,u=0,d=0;d<h;d++){var g=a[d],f=g._batchLocation;if(f>=0&&f<s&&i[f]===g){o[d]=f;continue}for(;u<s;){var m=i[u];if(m&&m._batchEnabled===n&&m._batchLocation===u){u++;continue}o[d]=u,g._batchLocation=u,i[u]=g;break}}},t}(Or),cb=0,GA=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=cb++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=cb++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var i=this.createContext(this.renderer.view,e);this.initFromContext(i)},t.prototype.createContext=function(e,i){var n;if(pe.PREFER_ENV>=Hn.WEBGL2&&(n=e.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var i=e.getContextAttributes(),n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),i.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(Or),HA=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=no.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return r}(),WA=new Pe,XA=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new ug(10,10),i.msaaSamples=null,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Pe,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;pe.PREFER_ENV===Hn.WEBGL_LEGACY&&(i=null,n=null),i?e.drawBuffers=function(s){return i.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,i){var n=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,i,n,s){var a=this.viewport;(a.width!==n||a.height!==s||a.x!==e||a.y!==i)&&(a.x=e,a.y=i,a.width=n,a.height=s,this.gl.viewport(e,i,n,s))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,i,n,s,a){a===void 0&&(a=fu.COLOR|fu.DEPTH);var o=this.gl;o.clearColor(e,i,n,s),o.clear(a)},t.prototype.initFramebuffer=function(e){var i=this.gl,n=new HA(i.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height));for(var s=e.colorTextures,a=0;a<s.length;a++)this.renderer.texture.bind(s[a],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&(n.msaaBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer));for(var o=[],h=0;h<a;h++)if(!(h===0&&n.multisample>1)){var u=e.colorTextures[h],d=u.parentTextureArray||u;this.renderer.texture.bind(d,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,d._glTextures[this.CONTEXT_UID].texture,0),o.push(i.COLOR_ATTACHMENT0+h)}if(o.length>1&&i.drawBuffers(o),e.depthTexture){var g=this.writeDepthTexture;if(g){var f=e.depthTexture;this.renderer.texture.bind(f,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),e.depthTexture||i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var i=this.msaaSamples,n=no.NONE;if(e<=1||i===null)return n;for(var s=0;s<i.length;s++)if(i[s]<=e){n=i[s];break}return n===1&&(n=no.NONE),n},t.prototype.blit=function(e,i,n){var s=this,a=s.current,o=s.renderer,h=s.gl,u=s.CONTEXT_UID;if(o.context.webGLVersion===2&&!!a){var d=a.glFramebuffers[u];if(!!d){if(!e){if(d.multisample<=1)return;d.blitFramebuffer||(d.blitFramebuffer=new ug(a.width,a.height),d.blitFramebuffer.addColorTexture(0,a.colorTextures[0])),e=d.blitFramebuffer,e.width=a.width,e.height=a.height}i||(i=WA,i.width=a.width,i.height=a.height),n||(n=i);var g=i.width===n.width&&i.height===n.height;this.bind(e),h.bindFramebuffer(h.READ_FRAMEBUFFER,d.framebuffer),h.blitFramebuffer(i.x,i.y,i.width,i.height,n.x,n.y,n.width,n.height,h.COLOR_BUFFER_BIT,g?h.NEAREST:h.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,i){var n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!!n){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),i||(s.deleteFramebuffer(n.framebuffer),n.stencil&&s.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var i=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<i.length;n++)this.disposeFramebuffer(i[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(!!e){var i=e.glFramebuffers[this.CONTEXT_UID];if(!(!i||i.stencil)){e.enableStencil();var n=e.width,s=e.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,s),i.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Pe},t}(Or),qA=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),fg={5126:4,5123:2,5121:1},YA=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;pe.PREFER_ENV===Hn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(a){return n.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return n.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(i.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(a,o){return s.vertexAttribDivisorANGLE(a,o)},e.drawElementsInstanced=function(a,o,h,u,d){return s.drawElementsInstancedANGLE(a,o,h,u,d)},e.drawArraysInstanced=function(a,o,h,u){return s.drawArraysInstancedANGLE(a,o,h,u)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex},t.prototype.bind=function(e,i){i=i||this.renderer.shader.shader;var n=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);var o=s[i.program.id]||this.initGeometryVao(e,i.program,a);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,i.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,i=this.gl,n=0;n<e.buffers.length;n++){var s=e.buffers[n],a=s._glBuffers[this.CONTEXT_UID];if(s._updateID!==a.updateID){a.updateID=s._updateID;var o=s.index?i.ELEMENT_ARRAY_BUFFER:i.ARRAY_BUFFER;if(i.bindBuffer(o,a.buffer),this._boundBuffer=a,a.byteLength>=s.data.byteLength)i.bufferSubData(o,0,s.data);else{var h=s.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;a.byteLength=s.data.byteLength,i.bufferData(o,s.data,h)}}}},t.prototype.checkCompatibility=function(e,i){var n=e.attributes,s=i.attributeData;for(var a in s)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(e,i){var n=e.attributes,s=i.attributeData,a=["g",e.id];for(var o in n)s[o]&&a.push(o);return a.join("-")},t.prototype.initGeometryVao=function(e,i,n){n===void 0&&(n=!0),this.checkCompatibility(e,i);var s=this.gl,a=this.CONTEXT_UID,o=this.getSignature(e,i),h=e.glVertexArrayObjects[this.CONTEXT_UID],u=h[o];if(u)return h[i.id]=u,u;var d=e.buffers,g=e.attributes,f={},m={};for(var _ in d)f[_]=0,m[_]=0;for(var _ in g)!g[_].size&&i.attributeData[_]?g[_].size=i.attributeData[_].size:g[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[g[_].buffer]+=g[_].size*fg[g[_].type];for(var _ in g){var v=g[_],b=v.size;v.stride===void 0&&(f[v.buffer]===b*fg[v.type]?v.stride=0:v.stride=f[v.buffer]),v.start===void 0&&(v.start=m[v.buffer],m[v.buffer]+=b*fg[v.type])}u=s.createVertexArray(),s.bindVertexArray(u);for(var C=0;C<d.length;C++){var M=d[C];M._glBuffers[a]||(M._glBuffers[a]=new qA(s.createBuffer()),this.managedBuffers[M.id]=M,M.disposeRunner.add(this)),n&&M._glBuffers[a].refCount++}return this.activateVao(e,i),this._activeVao=u,h[i.id]=u,h[o]=u,u},t.prototype.disposeBuffer=function(e,i){if(!!this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),!!n&&(i||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,i){if(!!this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=e.buffers;if(e.disposeRunner.remove(this),!!n){for(var o=0;o<a.length;o++){var h=a[o]._glBuffers[this.CONTEXT_UID];h.refCount--,h.refCount===0&&!i&&this.disposeBuffer(a[o],i)}if(!i){for(var u in n)if(u[0]==="g"){var d=n[u];this._activeVao===d&&this.unbind(),s.deleteVertexArray(d)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var i=Object.keys(this.managedGeometries),n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],e);i=Object.keys(this.managedBuffers);for(var n=0;n<i.length;n++)this.disposeBuffer(this.managedBuffers[i[n]],e)},t.prototype.activateVao=function(e,i){var n=this.gl,s=this.CONTEXT_UID,a=e.buffers,o=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[s].buffer);var h=null;for(var u in o){var d=o[u],g=a[d.buffer],f=g._glBuffers[s];if(i.attributeData[u]){h!==f&&(n.bindBuffer(n.ARRAY_BUFFER,f.buffer),h=f);var m=i.attributeData[u].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,d.size,d.type||n.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)n.vertexAttribDivisor(m,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,i,n,s){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var h=o.indexBuffer.data.BYTES_PER_ELEMENT,u=h===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;h===2||h===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(e,i||o.indexBuffer.data.length,u,(n||0)*h,s||1):a.drawElements(e,i||o.indexBuffer.data.length,u,(n||0)*h):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(e,n,i||o.getSize(),s||1):a.drawArrays(e,n,i||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(Or),jA=function(){function r(t){t===void 0&&(t=null),this.type=br.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=br.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function fb(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function db(r,t,e,i){var n=fb(r,r.VERTEX_SHADER,t),s=fb(r,r.FRAGMENT_SHADER,e),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,s),i)for(var o in i)r.bindAttribLocation(a,i[o],o);return r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)||(r.getShaderParameter(n,r.COMPILE_STATUS)||(console.warn(t),console.error(r.getShaderInfoLog(n))),r.getShaderParameter(s,r.COMPILE_STATUS)||(console.warn(e),console.error(r.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(a,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),r.getProgramInfoLog(a)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(a)),r.deleteProgram(a),a=null),r.deleteShader(n),r.deleteShader(s),a}function dg(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function pb(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return dg(2*t);case"bvec3":return dg(3*t);case"bvec4":return dg(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var mb={},xu=mb;function gb(){if(xu===mb||xu&&xu.isContextLost()){var r=document.createElement("canvas"),t=void 0;pe.PREFER_ENV>=Hn.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),xu=t}return xu}var Af;function ZA(){if(!Af){Af=yn.MEDIUM;var r=gb();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Af=t.precision?yn.HIGH:yn.MEDIUM}}return Af}function vb(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===yn.HIGH&&e!==yn.HIGH&&(i=yn.MEDIUM),"precision "+i+` float;
`+r}else if(e!==yn.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var $A={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function JA(r){return $A[r]}var If=null,_b={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function yb(r,t){if(!If){var e=Object.keys(_b);If={};for(var i=0;i<e.length;++i){var n=e[i];If[r[n]]=_b[n]}}return If[t]}var pg=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],KA={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},QA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function tI(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&e.push(`
                    renderer.shader.syncUniformGroup(uv["`+i+`"], syncData);
                `);continue}for(var s=r.uniforms[i],a=!1,o=0;o<pg.length;o++)if(pg[o].test(n,s)){e.push(pg[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?KA:QA,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var eI=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function iI(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function rI(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=eI.replace(/%forloop%/gi,iI(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var bu;function nI(){if(typeof bu=="boolean")return bu;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");bu=r({a:"b"},"a","b")===!0}catch{bu=!1}return bu}var sI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,aI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,oI=0,Df={},wu=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=oI++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Df[i]?(Df[i]++,i+="-"+Df[i]):Df[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=vb(this.vertexSrc,pe.PRECISION_VERTEX,yn.HIGH),this.fragmentSrc=vb(this.fragmentSrc,pe.PRECISION_FRAGMENT,ZA())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return r.prototype.extractData=function(t,e){var i=gb();if(i){var n=db(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},r.prototype.getAttributeData=function(t,e){for(var i={},n=[],s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var o=e.getActiveAttrib(t,a),h=yb(e,o.type),u={type:h,name:o.name,size:JA(h),location:0};i[o.name]=u,n.push(u)}n.sort(function(d,g){return d.name>g.name?1:-1});for(var a=0;a<n.length;a++)n[a].location=a;return i},r.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<n;s++){var a=e.getActiveUniform(t,s),o=a.name.replace(/\[.*?\]$/,""),h=a.name.match(/\[.*?\]$/),u=yb(e,a.type);i[o]={type:u,size:a.size,isArray:h,value:pb(u,a.size)}}return i},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return aI},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return sI},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=vf[n];return s||(vf[n]=s=new r(t,e,i)),s},r}(),bn=function(){function r(t,e){this.program=t,e?e instanceof la?this.uniformGroup=e:this.uniformGroup=new la(e):this.uniformGroup=new la({});for(var i in t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=wu.from(t,e);return new r(n,i)},r}(),mg=0,gg=1,vg=2,_g=3,yg=4,wn=function(){function r(){this.data=0,this.blendMode=_e.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<mg)},set:function(t){!!(this.data&1<<mg)!==t&&(this.data^=1<<mg)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<gg)},set:function(t){!!(this.data&1<<gg)!==t&&(this.data^=1<<gg)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<vg)},set:function(t){!!(this.data&1<<vg)!==t&&(this.data^=1<<vg)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<_g)},set:function(t){!!(this.data&1<<_g)!==t&&(this.data^=1<<_g)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<yg)},set:function(t){!!(this.data&1<<yg)!==t&&(this.data^=1<<yg)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==_e.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),lI=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,hI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Sr=function(r){Ae(t,r);function t(e,i,n){var s=this,a=wu.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=pe.FILTER_RESOLUTION,s.enabled=!0,s.autoFit=!0,s.legacy=!!s.program.attributeData.aTextureCoord,s.state=new wn,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return lI},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return hI},enumerable:!1,configurable:!0}),t}(bn),uI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,cI=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,xb=new Ke,Su=function(){function r(t,e){this._texture=t,this.mapCoord=new Ke,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e=="undefined"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(xb.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(xb));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),fI=function(r){Ae(t,r);function t(e){var i=this,n=new Ke;return i=r.call(this,uI,cI)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new Su(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(Sr),dI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,i){var n=i;if(!n.isMaskData){var s=this.maskDataPool.pop()||new jA;s.pooled=!0,s.maskObject=i,n=s}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case br.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case br.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case br.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break;default:break}},t.prototype.pop=function(e){var i=this.maskStack.pop();if(!(!i||i._target!==e)){switch(i.type){case br.SCISSOR:this.renderer.scissor.pop();break;case br.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case br.SPRITE:this.popSpriteMask();break;default:break}i.reset(),i.pooled&&this.maskDataPool.push(i)}},t.prototype.detect=function(e){var i=e.maskObject;if(i.isSprite){e.type=br.SPRITE;return}if(e.type=br.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()){var n=i.worldTransform,s=Math.atan2(n.b,n.a),a=Math.atan2(n.d,n.c);s=Math.round(s*(180/Math.PI)*100),a=Math.round(a*(180/Math.PI)*100)-s,s=(s%9e3+9e3)%9e3,a=(a%18e3+18e3)%18e3,s===0&&a===9e3&&(e.type=br.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var i=e.maskObject,n=e._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new fI(i)]),s[0].resolution=this.renderer.resolution,s[0].maskSprite=i;var a=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=a,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(Or),bb=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var i=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==n&&(s===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.maskStack=null},t}(Or),pI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=(e.x-a.x)*h+o.x,d=(e.y-a.y)*h+o.y,g=e.width*h,f=e.height*h;s&&(u+=s.tx*h,d+=s.ty*h),i||(d=this.renderer.height-f-d),this.renderer.gl.scissor(u,d,g,f)},t}(bb),mI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(bb),gI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new Ke,i.transform=null,i}return t.prototype.update=function(e,i,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,i,n,s){var a=this.projectionMatrix,o=s?-1:1;a.identity(),a.a=1/i.width*2,a.d=o*(1/i.height*2),a.tx=-1-i.x*a.a,a.ty=-o-i.y*a.d},t.prototype.setTransform=function(e){},t}(Or),fo=new Pe,Tu=new Pe,Cu=new Pe,vI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Pe,i.destinationFrame=new Pe,i}return t.prototype.bind=function(e,i,n){e===void 0&&(e=null);var s=this.renderer;this.current=e;var a,o,h;e?(a=e.baseTexture,h=a.resolution,i||(fo.width=e.frame.width,fo.height=e.frame.height,i=fo),n||(Tu.x=e.frame.x,Tu.y=e.frame.y,Tu.width=i.width,Tu.height=i.height,n=Tu),o=a.framebuffer):(h=s.resolution,i||(fo.width=s.screen.width,fo.height=s.screen.height,i=fo),n||(n=fo,n.width=i.width,n.height=i.height)),Cu.x=n.x*h,Cu.y=n.y*h,Cu.width=n.width*h,Cu.height=n.height*h,this.renderer.framebuffer.bind(o,Cu),this.renderer.projection.update(n,i,h,!o),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,i){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],i)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(Or),x5=function(){function r(){}return r}(),_I=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},r}(),yI=0,wb={textureCount:0},xI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=yI++,i}return t.prototype.systemCheck=function(){if(!nI())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,i){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),i||(wb.textureCount=0,this.syncUniformGroup(e.uniformGroup,wb)),s},t.prototype.setUniforms=function(e){var i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,i){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,i))},t.prototype.syncUniforms=function(e,i,n){var s=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);s(i.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var i=this.getSignature(e,this.shader.program.uniformData);return this.cache[i]||(this.cache[i]=tI(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[i],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,i){var n=e.uniforms,s=[];for(var a in n)s.push(a),i[a]&&s.push(i[a].type);return s.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var i=this.gl,n=e.program,s={};for(var a in n.attributeData)s[a]=n.attributeData[a].location;var o=db(i,n.vertexSrc,n.fragmentSrc,s),h={};for(var a in n.uniformData){var u=n.uniformData[a];h[a]={location:i.getUniformLocation(o,a),value:pb(u.type,u.size)}}var d=new _I(o,h);return n.glPrograms[this.renderer.CONTEXT_UID]=d,d},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(Or);function bI(r,t){return t===void 0&&(t=[]),t[_e.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.ADD]=[r.ONE,r.ONE],t[_e.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.NONE]=[0,0],t[_e.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[_e.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[_e.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[_e.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_e.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[_e.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[_e.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[_e.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[_e.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_e.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var wI=0,SI=1,TI=2,CI=3,EI=4,MI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=_e.NONE,i._blendEq=!1,i.map=[],i.map[wI]=i.setBlend,i.map[SI]=i.setOffset,i.map[TI]=i.setCullFace,i.map[CI]=i.setDepthTest,i.map[EI]=i.setFrontFace,i.checks=[],i.defaultState=new wn,i.defaultState.blend=!0,i}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=bI(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var i=this.stateId^e.data,n=0;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i=i>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(var i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var i=this.blendModes[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,i){this.gl.polygonOffset(e,i)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,i){var n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,i){e.setBlendMode(i.blendMode)},t.checkPolygonOffset=function(e,i){e.setPolygonOffset(1,i.polygonOffset)},t}(Or),PI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=pe.GC_MAX_IDLE,i.checkCountMax=pe.GC_MAX_CHECK_COUNT,i.mode=pe.GC_MODE,i}return t.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==df.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,i=e.managedTextures,n=!1,s=0;s<i.length;s++){var a=i[s];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),i[s]=null,n=!0)}if(n){for(var o=0,s=0;s<i.length;s++)i[s]!==null&&(i[o++]=i[s]);i.length=o}},t.prototype.unload=function(e){var i=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},t}(Or),xg=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return r}(),AI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new He,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(var n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};var s=new xg(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new xg(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,i){i===void 0&&(i=0);var n=this.gl;if(e){if(e=e.castToBaseTexture(),e.parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[i]!==e&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(e)),this.boundTextures[i]=e}}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var i=this,n=i.gl,s=i.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<s.length;a++)s[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<s.length;a++)s[a]===e&&(this.currentLocation!==a&&(n.activeTexture(n.TEXTURE0+a),this.currentLocation=a),n.bindTexture(e.target,this.emptyTextures[e.target].texture),s[a]=null)},t.prototype.initTexture=function(e){var i=new xg(this.gl.createTexture());return i.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),i},t.prototype.initTextureType=function(e,i){if(i.internalFormat=e.format,i.type=e.type,this.webGLVersion===2){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA32F),e.type===fi.HALF_FLOAT&&(i.type=n.HALF_FLOAT),i.type===n.HALF_FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var i=e._glTextures[this.CONTEXT_UID];if(!!i){var n=this.renderer;if(this.initTextureType(e,i),!(e.resource&&e.resource.upload(n,e,i))){var s=e.realWidth,a=e.realHeight,o=n.gl;(i.width!==s||i.height!==a||i.dirtyId<0)&&(i.width=s,i.height=a,o.texImage2D(e.target,0,i.internalFormat,s,a,0,e.format,i.type,null))}e.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(e),i.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,i){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!i)){var s=this.managedTextures.indexOf(e);s!==-1&&xn(this.managedTextures,s,1)}},t.prototype.updateTextureStyle=function(e){var i=e._glTextures[this.CONTEXT_UID];!i||((e.mipmap===Tl.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?i.mipmap=!1:i.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?i.wrapMode=en.CLAMP:i.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,i){var n=this.gl;if(i.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Wn.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Wn.LINEAR){var a=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Wn.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Wn.LINEAR?n.LINEAR:n.NEAREST)},t}(Or);var bg=new Ke,II=function(r){Ae(t,r);function t(e,i){e===void 0&&(e=wl.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},pe.RENDER_OPTIONS,i),i.roundPixels&&(pe.ROUND_PIXELS=i.roundPixels,wr("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=i,n.type=e,n.screen=new Pe(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||pe.RESOLUTION,n.transparent=i.transparent,n.autoDensity=i.autoDensity||i.autoResize||!1,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.screen.width=e,this.screen.height=i,this.view.width=e*this.resolution,this.view.height=i*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=i+"px"),this.emit("resize",e,i)},t.prototype.generateTexture=function(e,i,n,s){s=s||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var a=oa.create({width:s.width|0,height:s.height|0,scaleMode:i,resolution:n});return bg.tx=-s.x,bg.ty=-s.y,this.render(e,a,!1,bg,!!e.parent),a},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=wl.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=du(e),rn(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(Xn.default),Cs=function(r){Ae(t,r);function t(e){var i=r.call(this,wl.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Xi("destroy"),contextChange:new Xi("contextChange"),reset:new Xi("reset"),update:new Xi("update"),postrender:new Xi("postrender"),prerender:new Xi("prerender"),resize:new Xi("resize")},i.globalUniforms=new la({projectionMatrix:new Ke},!0),i.addSystem(dI,"mask").addSystem(GA,"context").addSystem(MI,"state").addSystem(xI,"shader").addSystem(AI,"texture").addSystem(YA,"geometry").addSystem(XA,"framebuffer").addSystem(pI,"scissor").addSystem(mI,"stencil").addSystem(gI,"projection").addSystem(PI,"textureGC").addSystem(VA,"filter").addSystem(vI,"renderTexture").addSystem(UA,"batch"),i.initPlugins(t.__plugins),e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:e.antialias,premultipliedAlpha:i.transparent&&i.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Ym(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Zm())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,i){i||(i=e.name);var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i,n,s,a){if(this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=e),!a){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t}(II);function Sb(r){return Cs.create(r)}var Tb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Lf=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Rf=function(){function r(){this.texArray=null,this.blend=0,this.type=xr.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Ff=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),DI=function(){function r(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),LI=function(r){Ae(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=wn.for2d(),i.size=pe.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;pe.PREFER_ENV===Hn.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),pe.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=rI(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new Rf);for(;i.length<s;)i.push(new Ff);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){!e._texture.valid||(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++He._globalBatch,d=0,g=s[0],f=0;a.copyBoundTextures(o,n);for(var m=0;m<this._bufferSize;++m){var _=i[m];i[m]=null,_._batchEnabled!==u&&(g.count>=n&&(a.boundArray(g,o,u,n),this.buildDrawCalls(g,f,m),f=m,g=s[++d],++u),_._batchEnabled=u,_.touched=h,g.elements[g.count++]=_)}g.count>0&&(a.boundArray(g,o,u,n),this.buildDrawCalls(g,f,this._bufferSize),++d,++u);for(var m=0;m<o.length;m++)o[m]=null;He._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,d=t._drawCallPool,g=this._dcIndex,f=this._aIndex,m=this._iIndex,_=d[g];_.start=this._iIndex,_.texArray=e;for(var v=i;v<n;++v){var b=a[v],C=b._texture.baseTexture,M=pf[C.alphaMode?1:0][b.blendMode];a[v]=null,i<v&&_.blend!==M&&(_.size=m-_.start,i=v,_=d[++g],_.texArray=e,_.start=m),this.packInterleavedGeometry(b,o,h,f,m),f+=b.vertexData.length/2*u,m+=b.indices.length,_.blend=M}i<n&&(_.size=m-_.start,++g),this._dcIndex=g,this._aIndex=f,this._iIndex=m},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;pe.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],d=u.texArray,g=u.type,f=u.size,m=u.start,_=u.blend;o!==d&&(o=d,this.bindAndClearTexArray(d)),this.state.blendMode=_,s.set(this.state),n.drawElements(g,f,n.UNSIGNED_SHORT,m*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),pe.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=Cl(Math.ceil(e/8)),n=gf(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new DI(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=Cl(Math.ceil(e/12)),n=gf(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,d=e.uvs,g=e.indices,f=e.vertexData,m=e._texture.baseTexture._batchLocation,_=Math.min(e.worldAlpha,1),v=_<1&&e._texture.baseTexture.alphaMode?so(e._tintRGB,_):e._tintRGB+(_*255<<24),b=0;b<f.length;b+=2)h[s++]=f[b],h[s++]=f[b+1],h[s++]=d[b],h[s++]=d[b+1],o[s++]=v,h[s++]=m;for(var b=0;b<g.length;b++)n[a++]=u+g[b]},t._drawCallPool=[],t._textureArrayPool=[],t}(Ml),RI=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=la.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new wu(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ke,default:this.defaultGroupCache[t]};return new bn(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),wg=function(r){Ae(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Ai(null,e,!1),i._indexBuffer=new Ai(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,fi.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,fi.FLOAT).addAttribute("aColor",i._buffer,4,!0,fi.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,fi.FLOAT).addIndex(i._indexBuffer),i}return t}(co),Cb=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Eb=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FI=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:Cb,fragment:Eb,geometryClass:wg,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){Ae(h,o);function h(u){var d=o.call(this,u)||this;return d.shaderGenerator=new RI(i,n),d.geometryClass=a,d.vertexSize=s,d}return h}(LI)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Cb},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return Eb},enumerable:!1,configurable:!0}),r}(),Mb=FI.create();var Es=function(){function r(t){var e=this;t=Object.assign({forceCanvas:!1},t),this.renderer=Sb(t),this.stage=new ei,r._plugins.forEach(function(i){i.init.call(e,t)})}return r.registerPlugin=function(t){r._plugins.push(t)},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t,e){var i=this,n=r._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},r}();Es._plugins=[];var kI=function(){function r(){}return r.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(i){window.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!e._resizeTo||(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(!!e._resizeTo){e.cancelResize();var i,n;if(e._resizeTo===window)i=window.innerWidth,n=window.innerHeight;else{var s=e._resizeTo,a=s.clientWidth,o=s.clientHeight;i=a,n=o}e.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},r.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r}();Es.registerPlugin(kI);var Pb=new Pe,Ab=4,Ib=function(){function r(t){this.renderer=t,t.extract=this}return r.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},r.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},r.prototype.canvas=function(t){var e=this.renderer,i,n,s=!1,a,o=!1;t&&(t instanceof oa?a=t:(a=this.renderer.generateTexture(t),o=!0)),a?(i=a.baseTexture.resolution,n=a.frame,s=!1,e.renderTexture.bind(a)):(i=this.renderer.resolution,s=!0,n=Pb,n.width=this.renderer.width,n.height=this.renderer.height,e.renderTexture.bind(null));var h=Math.floor(n.width*i+1e-4),u=Math.floor(n.height*i+1e-4),d=new _f(h,u,1),g=new Uint8Array(Ab*h*u),f=e.gl;f.readPixels(n.x*i,n.y*i,h,u,f.RGBA,f.UNSIGNED_BYTE,g);var m=d.context.getImageData(0,0,h,u);if(r.arrayPostDivide(g,m.data),d.context.putImageData(m,0,0),s){var _=new _f(d.width,d.height,1);_.context.scale(1,-1),_.context.drawImage(d.canvas,0,-u),d.destroy(),d=_}return o&&a.destroy(!0),d.canvas},r.prototype.pixels=function(t){var e=this.renderer,i,n,s,a=!1;t&&(t instanceof oa?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(i=s.baseTexture.resolution,n=s.frame,e.renderTexture.bind(s)):(i=e.resolution,n=Pb,n.width=e.width,n.height=e.height,e.renderTexture.bind(null));var o=n.width*i,h=n.height*i,u=new Uint8Array(Ab*o*h),d=e.gl;return d.readPixels(n.x*i,n.y*i,o,h,d.RGBA,d.UNSIGNED_BYTE,u),a&&s.destroy(!0),r.arrayPostDivide(u,u),u},r.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];n!==0?(e[i]=Math.round(Math.min(t[i]*255/n,255)),e[i+1]=Math.round(Math.min(t[i+1]*255/n,255)),e[i+2]=Math.round(Math.min(t[i+2]*255/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},r}();var Sg=Vi(Lb()),qn=Vi(Bb());function po(){}function zb(r,t,e,i){var n=0,s=r.length;(function a(o){if(o||n===s){e&&e(o);return}i?setTimeout(function(){t(r[n++],a)},1):t(r[n++],a)})()}function NI(r){return function(){if(r===null)throw new Error("Callback was already called.");var e=r;r=null,e.apply(this,arguments)}}function BI(r,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var e=0,i={_tasks:[],concurrency:t,saturated:po,unsaturated:po,buffer:t/4,empty:po,drain:po,error:po,started:!1,paused:!1,push:function(o,h){n(o,!1,h)},kill:function(){e=0,i.drain=po,i.started=!1,i._tasks=[]},unshift:function(o,h){n(o,!0,h)},process:function(){for(;!i.paused&&e<i.concurrency&&i._tasks.length;){var o=i._tasks.shift();i._tasks.length===0&&i.empty(),e+=1,e===i.concurrency&&i.saturated(),r(o.data,NI(s(o)))}},length:function(){return i._tasks.length},running:function(){return e},idle:function(){return i._tasks.length+e===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var o=1;o<=i.concurrency;o++)i.process()}}};function n(a,o,h){if(h!=null&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,a==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var u={data:a,callback:typeof h=="function"?h:po};o?i._tasks.unshift(u):i._tasks.push(u),setTimeout(function(){return i.process()},1)}function s(a){return function(){e-=1,a.callback.apply(a,arguments),arguments[0]!=null&&i.error(arguments[0],a.data),e<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var Tg={};function zI(r,t){var e=this;Tg[r.url]?(r.data=Tg[r.url],r.complete()):r.onComplete.once(function(){return Tg[e.url]=e.data}),t()}function Vb(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Ub(r,t,e){return t&&Vb(r.prototype,t),e&&Vb(r,e),r}var VI=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Of=null,UI=0,Gb=200,GI=204,HI=1223,WI=2;function XI(){}var be=function(){r.setExtensionLoadType=function(i,n){Hb(r._loadTypeMap,i,n)},r.setExtensionXhrType=function(i,n){Hb(r._xhrTypeMap,i,n)};function r(e,i,n){if(typeof e!="string"||typeof i!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,i.indexOf("data:")===0),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=XI,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new qn.default,this.onProgress=new qn.default,this.onComplete=new qn.default,this.onAfterMiddleware=new qn.default}var t=r.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(i){var n=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(n)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:VI&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t._hasFlag=function(i){return(this._flags&i)!=0},t._setFlag=function(i,n){this._flags=n?this._flags|i:this._flags&~i},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof window.Image!="undefined"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof window.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,s=0;s<this.url.length;++s)this.data.appendChild(this._createSource(i,this.url[s],Array.isArray(n)?n[s]:n));else{var a=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(a)?a[0]:a))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=r.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},t._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},t._createSource=function(i,n,s){s||(s=i+"/"+this._getExtension(n));var a=document.createElement("source");return a.src=n,a.type=s,a},t._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},t._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var i=this.xhr;this.abort(Cg(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},t._xhrOnTimeout=function(){var i=this.xhr;this.abort(Cg(i)+" Request timed out.")},t._xhrOnAbort=function(){var i=this.xhr;this.abort(Cg(i)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var i=this.xhr,n="",s=typeof i.status=="undefined"?Gb:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType=="undefined")&&(n=i.responseText),s===UI&&(n.length>0||i.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?s=Gb:s===HI&&(s=GI);var a=s/100|0;if(a===WI)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=r.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(n,"text/xml")}else{var h=document.createElement("div");h.innerHTML=n,this.data=h}this.type=r.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=i.response||n;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},t._determineCrossOrigin=function(i,n){if(i.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,Of||(Of=document.createElement("a")),Of.href=i,i=(0,Sg.default)(Of.href,{strictMode:!0});var s=!i.port&&n.port===""||i.port===n.port,a=i.protocol?i.protocol+":":"";return i.host!==n.hostname||!s||a!==n.protocol?"anonymous":""},t._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},t._getExtension=function(){var i=this.url,n="";if(this.isDataUrl){var s=i.indexOf("/");n=i.substring(s+1,i.indexOf(";",s))}else{var a=i.indexOf("?"),o=i.indexOf("#"),h=Math.min(a>-1?a:i.length,o>-1?o:i.length);i=i.substring(0,h),n=i.substring(i.lastIndexOf(".")+1)}return n.toLowerCase()},t._getMimeFromXhrType=function(i){switch(i){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Ub(r,[{key:"isDataUrl",get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)}}]),r}();be.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2};be.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};be.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};be.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};be._loadTypeMap={gif:be.LOAD_TYPE.IMAGE,png:be.LOAD_TYPE.IMAGE,bmp:be.LOAD_TYPE.IMAGE,jpg:be.LOAD_TYPE.IMAGE,jpeg:be.LOAD_TYPE.IMAGE,tif:be.LOAD_TYPE.IMAGE,tiff:be.LOAD_TYPE.IMAGE,webp:be.LOAD_TYPE.IMAGE,tga:be.LOAD_TYPE.IMAGE,svg:be.LOAD_TYPE.IMAGE,"svg+xml":be.LOAD_TYPE.IMAGE,mp3:be.LOAD_TYPE.AUDIO,ogg:be.LOAD_TYPE.AUDIO,wav:be.LOAD_TYPE.AUDIO,mp4:be.LOAD_TYPE.VIDEO,webm:be.LOAD_TYPE.VIDEO};be._xhrTypeMap={xhtml:be.XHR_RESPONSE_TYPE.DOCUMENT,html:be.XHR_RESPONSE_TYPE.DOCUMENT,htm:be.XHR_RESPONSE_TYPE.DOCUMENT,xml:be.XHR_RESPONSE_TYPE.DOCUMENT,tmx:be.XHR_RESPONSE_TYPE.DOCUMENT,svg:be.XHR_RESPONSE_TYPE.DOCUMENT,tsx:be.XHR_RESPONSE_TYPE.DOCUMENT,gif:be.XHR_RESPONSE_TYPE.BLOB,png:be.XHR_RESPONSE_TYPE.BLOB,bmp:be.XHR_RESPONSE_TYPE.BLOB,jpg:be.XHR_RESPONSE_TYPE.BLOB,jpeg:be.XHR_RESPONSE_TYPE.BLOB,tif:be.XHR_RESPONSE_TYPE.BLOB,tiff:be.XHR_RESPONSE_TYPE.BLOB,webp:be.XHR_RESPONSE_TYPE.BLOB,tga:be.XHR_RESPONSE_TYPE.BLOB,json:be.XHR_RESPONSE_TYPE.JSON,text:be.XHR_RESPONSE_TYPE.TEXT,txt:be.XHR_RESPONSE_TYPE.TEXT,ttf:be.XHR_RESPONSE_TYPE.BUFFER,otf:be.XHR_RESPONSE_TYPE.BUFFER};be.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function Hb(r,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),!!t&&(r[t]=e)}function Cg(r){return r.toString().replace("object ","")}var qI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function YI(r){for(var t="",e=0;e<r.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)e<r.length?i[s]=r.charCodeAt(e++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var a=e-(r.length-1);switch(a){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break;default:break}for(var o=0;o<n.length;++o)t+=qI.charAt(n[o])}return t}var Wb=window.URL||window.webkitURL;function jI(r,t){if(!r.data){t();return}if(r.xhr&&r.xhrType===be.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof r.data=="string"){var e=r.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){r.data=new Image,r.data.src="data:"+e+";base64,"+YI(r.xhr.responseText),r.type=be.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,t()};return}}else if(r.data.type.indexOf("image")===0){var i=Wb.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=be.TYPE.IMAGE,r.data.onload=function(){Wb.revokeObjectURL(i),r.data.onload=null,t()};return}}t()}var Xb={caching:zI,parsing:jI},Eg=100,ZI=/(#[\w-]+)?$/,Yn=function(){function r(e,i){var n=this;e===void 0&&(e=""),i===void 0&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(o,h){return n._loadResource(o,h)},this._queue=BI(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new qn.default,this.onError=new qn.default,this.onLoad=new qn.default,this.onStart=new qn.default,this.onComplete=new qn.default;for(var s=0;s<r._defaultBeforeMiddleware.length;++s)this.pre(r._defaultBeforeMiddleware[s]);for(var a=0;a<r._defaultAfterMiddleware.length;++a)this.use(r._defaultAfterMiddleware[a])}var t=r.prototype;return t.add=function(i,n,s,a){if(Array.isArray(i)){for(var o=0;o<i.length;++o)this.add(i[o]);return this}if(typeof i=="object"&&(a=n||i.callback||i.onComplete,s=i,n=i.url,i=i.name||i.key||i.url),typeof n!="string"&&(a=s,s=n,n=i),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof s=="function"&&(a=s,s=null),this.loading&&(!s||!s.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(n=this._prepareUrl(n),this.resources[i]=new be(i,n,s),typeof a=="function"&&this.resources[i].onAfterMiddleware.once(a),this.loading){for(var h=s.parentResource,u=[],d=0;d<h.children.length;++d)h.children[d].isComplete||u.push(h.children[d]);var g=h.progressChunk*(u.length+1),f=g/(u.length+2);h.children.push(this.resources[i]),h.progressChunk=f;for(var m=0;m<u.length;++m)u[m].progressChunk=f;this.resources[i].progressChunk=f}return this._queue.push(this.resources[i]),this},t.pre=function(i){return this._beforeMiddleware.push(i),this},t.use=function(i){return this._afterMiddleware.push(i),this},t.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var n=this.resources[i];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},t.load=function(i){if(typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,s=Eg/n,a=0;a<this._queue._tasks.length;++a)this._queue._tasks[a].data.progressChunk=s;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(i){var n=(0,Sg.default)(i,{strictMode:!0}),s;if(n.protocol||!n.path||i.indexOf("//")===0?s=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?s=this.baseUrl+"/"+i:s=this.baseUrl+i,this.defaultQueryString){var a=ZI.exec(s)[0];s=s.substr(0,s.length-a.length),s.indexOf("?")!==-1?s+="&"+this.defaultQueryString:s+="?"+this.defaultQueryString,s+=a}return s},t._loadResource=function(i,n){var s=this;i._dequeue=n,zb(this._beforeMiddleware,function(a,o){a.call(s,i,function(){o(i.isComplete?{}:null)})},function(){i.isComplete?s._onLoad(i):(i._onLoadBinding=i.onComplete.once(s._onLoad,s),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=Eg,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),zb(this._afterMiddleware,function(s,a){s.call(n,i,a)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(Eg,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},Ub(r,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i}}]),r}();Yn._defaultBeforeMiddleware=[];Yn._defaultAfterMiddleware=[];Yn.pre=function(t){return Yn._defaultBeforeMiddleware.push(t),Yn};Yn.use=function(t){return Yn._defaultAfterMiddleware.push(t),Yn};var Pl=be;var Mg=function(r,t){return Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Mg(r,t)};function $I(r,t){Mg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var JI=function(){function r(){}return r.use=function(t,e){t.data&&t.type===be.TYPE.IMAGE&&(t.texture=ye.fromLoader(t.data,t.url,t.name)),e()},r}(),mo=function(r){$I(t,r);function t(e,i){for(var n=r.call(this,e,i)||this,s=0;s<t._plugins.length;++s){var a=t._plugins[s],o=a.pre,h=a.use;o&&n.pre(o),h&&n.use(h)}return n._protected=!1,n}return t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(Yn);mo.registerPlugin({use:Xb.parsing});mo.registerPlugin(JI);var qb=function(){function r(){}return r.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?mo.shared:new mo},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r}();var Pg=function(r,t){return Pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Pg(r,t)};function Yb(r,t){Pg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var z5=function(r){Yb(t,r);function t(e,i,n,s){e===void 0&&(e=1500),n===void 0&&(n=16384),s===void 0&&(s=!1);var a=r.call(this)||this,o=16384;return n>o&&(n=o),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=n,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=_e.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(i),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,rn(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var i=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(ei),jb=function(){function r(t,e,i){this.geometry=new co,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||fi.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Ai(Jm(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Ai(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=a,a+=n.size,this.staticStride+=n.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Ai(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];t.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===fi.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];t.addAttribute(n.attributeName,this.staticBuffer,0,n.type===fi.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},r.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===fi.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===fi.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),KI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,QI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Zb=function(r){Yb(t,r);function t(e){var i=r.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Ke,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:fi.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=bn.from(QI,KI,{}),i.state=wn.for2d(),i}return t.prototype.render=function(e){var i=e.children,n=e._maxSize,s=e._batchSize,a=this.renderer,o=i.length;if(o!==0){o>n&&!e.autoResize&&(o=n);var h=e._buffers;h||(h=e._buffers=this.generateBuffers(e));var u=i[0]._texture.baseTexture;this.state.blendMode=mu(e.blendMode,u.alphaMode),a.state.set(this.state);var d=a.gl,g=e.worldTransform.copyTo(this.tempMatrix);g.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=g.toArray(!0),this.shader.uniforms.uColor=$m(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var f=!1,m=0,_=0;m<o;m+=s,_+=1){var v=o-m;v>s&&(v=s),_>=h.length&&h.push(this._generateOneMoreBuffer(e));var b=h[_];b.uploadDynamic(i,m,v);var C=e._bufferUpdateIDs[_]||0;f=f||b._updateID<C,f&&(b._updateID=e._updateID,b.uploadStatic(i,m,v)),a.geometry.bind(b.geometry),d.drawElements(d.TRIANGLES,v*6,d.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var i=[],n=e._maxSize,s=e._batchSize,a=e._properties,o=0;o<n;o+=s)i.push(new jb(this.properties,a,s));return i},t.prototype._generateOneMoreBuffer=function(e){var i=e._batchSize,n=e._properties;return new jb(this.properties,n,i)},t.prototype.uploadVertices=function(e,i,n,s,a,o){for(var h=0,u=0,d=0,g=0,f=0;f<n;++f){var m=e[i+f],_=m._texture,v=m.scale.x,b=m.scale.y,C=_.trim,M=_.orig;C?(u=C.x-m.anchor.x*M.width,h=u+C.width,g=C.y-m.anchor.y*M.height,d=g+C.height):(h=M.width*(1-m.anchor.x),u=M.width*-m.anchor.x,d=M.height*(1-m.anchor.y),g=M.height*-m.anchor.y),s[o]=u*v,s[o+1]=g*b,s[o+a]=h*v,s[o+a+1]=g*b,s[o+a*2]=h*v,s[o+a*2+1]=d*b,s[o+a*3]=u*v,s[o+a*3+1]=d*b,o+=a*4}},t.prototype.uploadPosition=function(e,i,n,s,a,o){for(var h=0;h<n;h++){var u=e[i+h].position;s[o]=u.x,s[o+1]=u.y,s[o+a]=u.x,s[o+a+1]=u.y,s[o+a*2]=u.x,s[o+a*2+1]=u.y,s[o+a*3]=u.x,s[o+a*3+1]=u.y,o+=a*4}},t.prototype.uploadRotation=function(e,i,n,s,a,o){for(var h=0;h<n;h++){var u=e[i+h].rotation;s[o]=u,s[o+a]=u,s[o+a*2]=u,s[o+a*3]=u,o+=a*4}},t.prototype.uploadUvs=function(e,i,n,s,a,o){for(var h=0;h<n;++h){var u=e[i+h]._texture._uvs;u?(s[o]=u.x0,s[o+1]=u.y0,s[o+a]=u.x1,s[o+a+1]=u.y1,s[o+a*2]=u.x2,s[o+a*2+1]=u.y2,s[o+a*3]=u.x3,s[o+a*3+1]=u.y3,o+=a*4):(s[o]=0,s[o+1]=0,s[o+a]=0,s[o+a+1]=0,s[o+a*2]=0,s[o+a*2+1]=0,s[o+a*3]=0,s[o+a*3+1]=0,o+=a*4)}},t.prototype.uploadTint=function(e,i,n,s,a,o){for(var h=0;h<n;++h){var u=e[i+h],d=u._texture.baseTexture.alphaMode>0,g=u.alpha,f=g<1&&d?so(u._tintRGB,g):u._tintRGB+(g*255<<24);s[o]=f,s[o+a]=f,s[o+a*2]=f,s[o+a*3]=f,o+=a*4}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Ml);var ha;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(ha||(ha={}));var ua;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(ua||(ua={}));var Mu={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,t){if(t===void 0&&(t=20),!this.adaptive||!r||isNaN(r))return t;var e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},$b=function(){function r(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();var Ag=function(r,t){return Ag=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Ag(r,t)};function Nf(r,t){Ag(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Jb={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,t){var e=r.points,i=r.holes,n=t.points,s=t.indices;if(e.length>=6){for(var a=[],o=0;o<i.length;o++){var h=i[o];a.push(e.length/2),e=e.concat(h.points)}var u=(0,vu.default)(e,a,2);if(!u)return;for(var d=n.length/2,o=0;o<u.length;o+=3)s.push(u[o]+d),s.push(u[o+1]+d),s.push(u[o+2]+d);for(var o=0;o<e.length;o++)n.push(e[o])}}},Kb={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s,a;if(e.length=0,r.type===di.CIRC)s=t.radius,a=t.radius;else{var o=r.shape;s=o.width,a=o.height}if(!(s===0||a===0)){var h=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(s+a));h/=2.3;for(var u=Math.PI*2/h,d=0;d<h-.5;d++)e.push(i+Math.sin(-u*d)*s,n+Math.cos(-u*d)*a);e.push(e[0],e[1])}},triangulate:function(r,t){var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=s,o=r.shape,h=r.matrix,u=o.x,d=o.y;i.push(r.matrix?h.a*u+h.c*d+h.tx:u,r.matrix?h.b*u+h.d*d+h.ty:d);for(var g=0;g<e.length;g+=2)i.push(e[g],e[g+1]),n.push(s++,a,s)}},t3={build:function(r){var t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,a=r.points;a.length=0,a.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate:function(r,t){var e=r.points,i=t.points,n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Al(r,t,e){var i=t-r;return r+i*e}function Bf(r,t,e,i,n,s,a){a===void 0&&(a=[]);for(var o=20,h=a,u=0,d=0,g=0,f=0,m=0,_=0,v=0,b=0;v<=o;++v)b=v/o,u=Al(r,e,b),d=Al(t,i,b),g=Al(e,n,b),f=Al(i,s,b),m=Al(u,g,b),_=Al(d,f,b),h.push(m,_);return h}var e3={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s=t.width,a=t.height,o=Math.max(0,Math.min(t.radius,Math.min(s,a)/2));e.length=0,o?(Bf(i,n+o,i,n,i+o,n,e),Bf(i+s-o,n,i+s,n,i+s,n+o,e),Bf(i+s,n+a-o,i+s,n+a,i+s-o,n+a,e),Bf(i+o,n+a,i,n+a,i,n+a-o,e)):e.push(i,n,i+s,n,i+s,n+a,i,n+a)},triangulate:function(r,t){for(var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=(0,vu.default)(e,null,2),o=0,h=a.length;o<h;o+=3)n.push(a[o]+s),n.push(a[o+1]+s),n.push(a[o+2]+s);for(var o=0,h=e.length;o<h;o++)i.push(e[o],e[++o])}};function Qb(r,t,e,i,n,s,a,o){var h=r-e*n,u=t-i*n,d=r+e*s,g=t+i*s,f,m;a?(f=i,m=-e):(f=-i,m=e);var _=h+f,v=u+m,b=d+f,C=g+m;return o.push(_,v),o.push(b,C),2}function Il(r,t,e,i,n,s,a,o){var h=e-r,u=i-t,d=Math.atan2(h,u),g=Math.atan2(n-r,s-t);o&&d<g?d+=Math.PI*2:!o&&d>g&&(g+=Math.PI*2);var f=d,m=g-d,_=Math.abs(m),v=Math.sqrt(h*h+u*u),b=(15*_*Math.sqrt(v)/Math.PI>>0)+1,C=m/b;if(f+=C,o){a.push(r,t),a.push(e,i);for(var M=1,E=f;M<b;M++,E+=C)a.push(r,t),a.push(r+Math.sin(E)*v,t+Math.cos(E)*v);a.push(r,t),a.push(n,s)}else{a.push(e,i),a.push(r,t);for(var M=1,E=f;M<b;M++,E+=C)a.push(r+Math.sin(E)*v,t+Math.cos(E)*v),a.push(r,t);a.push(n,s),a.push(r,t)}return b*2}function i3(r,t){var e=r.shape,i=r.points||e.points.slice(),n=t.closePointEps;if(i.length!==0){var s=r.lineStyle,a=new Je(i[0],i[1]),o=new Je(i[i.length-2],i[i.length-1]),h=e.type!==di.POLY||e.closeStroke,u=Math.abs(a.x-o.x)<n&&Math.abs(a.y-o.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));var d=(a.x+o.x)*.5,g=(o.y+a.y)*.5;i.unshift(d,g),i.push(d,g)}var f=t.points,m=i.length/2,_=i.length,v=f.length/2,b=s.width/2,C=b*b,M=s.miterLimit*s.miterLimit,E=i[0],w=i[1],A=i[2],R=i[3],N=0,D=0,X=-(w-R),at=E-A,ft=0,gt=0,ut=Math.sqrt(X*X+at*at);X/=ut,at/=ut,X*=b,at*=b;var xt=s.alignment,nt=(1-xt)*2,it=xt*2;h||(s.cap===ua.ROUND?_+=Il(E-X*(nt-it)*.5,w-at*(nt-it)*.5,E-X*nt,w-at*nt,E+X*it,w+at*it,f,!0)+2:s.cap===ua.SQUARE&&(_+=Qb(E,w,X,at,nt,it,!0,f))),f.push(E-X*nt,w-at*nt),f.push(E+X*it,w+at*it);for(var tt=1;tt<m-1;++tt){E=i[(tt-1)*2],w=i[(tt-1)*2+1],A=i[tt*2],R=i[tt*2+1],N=i[(tt+1)*2],D=i[(tt+1)*2+1],X=-(w-R),at=E-A,ut=Math.sqrt(X*X+at*at),X/=ut,at/=ut,X*=b,at*=b,ft=-(R-D),gt=A-N,ut=Math.sqrt(ft*ft+gt*gt),ft/=ut,gt/=ut,ft*=b,gt*=b;var W=A-E,Q=w-R,ot=A-N,ct=D-R,Tt=Q*ot-ct*W,Rt=Tt<0;if(Math.abs(Tt)<.1){f.push(A-X*nt,R-at*nt),f.push(A+X*it,R+at*it);continue}var Pt=(-X+E)*(-at+R)-(-X+A)*(-at+w),Nt=(-ft+N)*(-gt+R)-(-ft+A)*(-gt+D),At=(W*Nt-ot*Pt)/Tt,Qt=(ct*Pt-Q*Nt)/Tt,Vt=(At-A)*(At-A)+(Qt-R)*(Qt-R),Yt=A+(At-A)*nt,Xt=R+(Qt-R)*nt,re=A-(At-A)*it,qt=R-(Qt-R)*it,Ut=Math.min(W*W+Q*Q,ot*ot+ct*ct),Lt=Rt?nt:it,te=Ut+Lt*Lt*C,ge=Vt<=te;ge?s.join===ha.BEVEL||Vt/C>M?(Rt?(f.push(Yt,Xt),f.push(A+X*it,R+at*it),f.push(Yt,Xt),f.push(A+ft*it,R+gt*it)):(f.push(A-X*nt,R-at*nt),f.push(re,qt),f.push(A-ft*nt,R-gt*nt),f.push(re,qt)),_+=2):s.join===ha.ROUND?Rt?(f.push(Yt,Xt),f.push(A+X*it,R+at*it),_+=Il(A,R,A+X*it,R+at*it,A+ft*it,R+gt*it,f,!0)+4,f.push(Yt,Xt),f.push(A+ft*it,R+gt*it)):(f.push(A-X*nt,R-at*nt),f.push(re,qt),_+=Il(A,R,A-X*nt,R-at*nt,A-ft*nt,R-gt*nt,f,!1)+4,f.push(A-ft*nt,R-gt*nt),f.push(re,qt)):(f.push(Yt,Xt),f.push(re,qt)):(f.push(A-X*nt,R-at*nt),f.push(A+X*it,R+at*it),s.join===ha.BEVEL||Vt/C>M||(s.join===ha.ROUND?Rt?_+=Il(A,R,A+X*it,R+at*it,A+ft*it,R+gt*it,f,!0)+2:_+=Il(A,R,A-X*nt,R-at*nt,A-ft*nt,R-gt*nt,f,!1)+2:(Rt?(f.push(re,qt),f.push(re,qt)):(f.push(Yt,Xt),f.push(Yt,Xt)),_+=2)),f.push(A-ft*nt,R-gt*nt),f.push(A+ft*it,R+gt*it),_+=2)}E=i[(m-2)*2],w=i[(m-2)*2+1],A=i[(m-1)*2],R=i[(m-1)*2+1],X=-(w-R),at=E-A,ut=Math.sqrt(X*X+at*at),X/=ut,at/=ut,X*=b,at*=b,f.push(A-X*nt,R-at*nt),f.push(A+X*it,R+at*it),h||(s.cap===ua.ROUND?_+=Il(A-X*(nt-it)*.5,R-at*(nt-it)*.5,A-X*nt,R-at*nt,A+X*it,R+at*it,f,!1)+2:s.cap===ua.SQUARE&&(_+=Qb(A,R,X,at,nt,it,!1,f)));for(var Bt=t.indices,oe=Mu.epsilon*Mu.epsilon,tt=v;tt<_+v-2;++tt)E=f[tt*2],w=f[tt*2+1],A=f[(tt+1)*2],R=f[(tt+1)*2+1],N=f[(tt+2)*2],D=f[(tt+2)*2+1],!(Math.abs(E*(R-D)+A*(D-w)+N*(w-R))<oe)&&Bt.push(tt,tt+1,tt+2)}}function r3(r,t){var e=0,i=r.shape,n=r.points||i.points,s=i.type!==di.POLY||i.closeStroke;if(n.length!==0){var a=t.points,o=t.indices,h=n.length/2,u=a.length/2,d=u;for(a.push(n[0],n[1]),e=1;e<h;e++)a.push(n[e*2],n[e*2+1]),o.push(d,d+1),d++;s&&o.push(d,u)}}function tw(r,t){r.lineStyle.native?r3(r,t):i3(r,t)}var n3=function(r){Nf(t,r);function t(e,i,n,s,a,o){o===void 0&&(o=0);var h=this;a=a||s/2;for(var u=-1*Math.PI/2+o,d=n*2,g=El/d,f=[],m=0;m<d;m++){var _=m%2?a:s,v=m*g+u;f.push(e+_*Math.cos(v),i+_*Math.sin(v))}return h=r.call(this,f)||this,h}return t}(ao),ew=function(){function r(){}return r.curveTo=function(t,e,i,n,s,a){var o=a[a.length-2],h=a[a.length-1],u=h-e,d=o-t,g=n-e,f=i-t,m=Math.abs(u*f-d*g);if(m<1e-8||s===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;var _=u*u+d*d,v=g*g+f*f,b=u*g+d*f,C=s*Math.sqrt(_)/m,M=s*Math.sqrt(v)/m,E=C*b/_,w=M*b/v,A=C*f+M*d,R=C*g+M*u,N=d*(M+E),D=u*(M+E),X=f*(C+w),at=g*(C+w),ft=Math.atan2(D-R,N-A),gt=Math.atan2(at-R,X-A);return{cx:A+t,cy:R+e,radius:s,startAngle:ft,endAngle:gt,anticlockwise:d*g>f*u}},r.arc=function(t,e,i,n,s,a,o,h,u){for(var d=o-a,g=Mu._segmentsCount(Math.abs(d)*s,Math.ceil(Math.abs(d)/El)*40),f=d/(g*2),m=f*2,_=Math.cos(f),v=Math.sin(f),b=g-1,C=b%1/b,M=0;M<=b;++M){var E=M+C*M,w=f+a+m*E,A=Math.cos(w),R=-Math.sin(w);u.push((_*A+v*R)*s+i,(_*-R+v*A)*s+n)}},r}(),s3=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a,o,h){for(var u=10,d=0,g=0,f=0,m=0,_=0,v=0,b=0,C=0,M=0,E=0,w=0,A=t,R=e,N=1;N<=u;++N)g=N/u,f=g*g,m=f*g,_=1-g,v=_*_,b=v*_,C=b*t+3*v*g*i+3*_*f*s+m*o,M=b*e+3*v*g*n+3*_*f*a+m*h,E=A-C,w=R-M,A=C,R=M,d+=Math.sqrt(E*E+w*w);return d},r.curveTo=function(t,e,i,n,s,a,o){var h=o[o.length-2],u=o[o.length-1];o.length-=2;var d=Mu._segmentsCount(r.curveLength(h,u,t,e,i,n,s,a)),g=0,f=0,m=0,_=0,v=0;o.push(h,u);for(var b=1,C=0;b<=d;++b)C=b/d,g=1-C,f=g*g,m=f*g,_=C*C,v=_*C,o.push(m*h+3*f*C*t+3*g*_*i+v*s,m*u+3*f*C*e+3*g*_*n+v*a)},r}(),a3=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a){var o=t-2*i+s,h=e-2*n+a,u=2*i-2*t,d=2*n-2*e,g=4*(o*o+h*h),f=4*(o*u+h*d),m=u*u+d*d,_=2*Math.sqrt(g+f+m),v=Math.sqrt(g),b=2*g*v,C=2*Math.sqrt(m),M=f/v;return(b*_+v*f*(_-C)+(4*m*g-f*f)*Math.log((2*v+M+_)/(M+C)))/(4*b)},r.curveTo=function(t,e,i,n,s){for(var a=s[s.length-2],o=s[s.length-1],h=Mu._segmentsCount(r.curveLength(a,o,t,e,i,n)),u=0,d=0,g=1;g<=h;++g){var f=g/h;u=a+(t-a)*f,d=o+(e-o)*f,s.push(u+(t+(i-t)*f-u)*f,d+(e+(n-e)*f-d)*f)}},r}(),o3=function(){function r(){this.reset()}return r.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},r.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),go,Ig=(go={},go[di.POLY]=Jb,go[di.CIRC]=Kb,go[di.ELIP]=Kb,go[di.RECT]=t3,go[di.RREC]=e3,go),iw=[],zf=[];var rw=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),Dl=new Je,l3=new _u,h3=function(r){Nf(t,r);function t(){var e=r.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new _u,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),zf.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),iw.push(i)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,i,n,s){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=null);var a=new rw(e,i,n,s);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(e,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new rw(e,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){r.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var i=this.graphicsData,n=0;n<i.length;++n){var s=i[n];if(!!s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Dl):Dl.copyFrom(e),s.shape.contains(Dl.x,Dl.y))){var a=!1;if(s.holes)for(var o=0;o<s.holes.length;o++){var h=s.holes[o];if(h.shape.contains(Dl.x,Dl.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var h=n[o],u=h.fillStyle,d=h.lineStyle,g=Ig[h.type];g.build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var f=0;f<2;f++){var m=f===0?u:d;if(!!m.visible){var _=m.texture.baseTexture,v=this.indices.length,b=this.points.length/2;_.wrapMode=en.REPEAT,f===0?this.processFill(h):this.processLine(h);var C=this.points.length/2-b;C!==0&&(s&&!this._compareStyles(a,m)&&(s.end(v,b),s=null),s||(s=iw.pop()||new o3,s.begin(m,v,b),this.batches.push(s),a=m),this.addUvs(this.points,i,m.texture,b,C,m.matrix))}}}var M=this.indices.length,E=this.points.length/2;if(s&&s.end(M,E),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var w=E>65535&&e;this.indicesUint16=w?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var n=this.graphicsData[e],s=n.fillStyle,a=n.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,n=e.length;i<n;i++)for(var s=e[i],a=0;a<s.size;a++){var o=s.start+a;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++He._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),zf.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,a=zf.pop();a||(a=new Rf,a.texArray=new Ff),a.texArray.count=0,a.start=0,a.size=0,a.type=xr.TRIANGLES;var o=0,h=null,u=0,d=!1,g=xr.TRIANGLES,f=0;this.drawCalls.push(a);for(var i=0;i<this.batches.length;i++){var m=this.batches[i],_=8,v=m.style,b=v.texture.baseTexture;d!==!!v.native&&(d=!!v.native,g=d?xr.LINES:xr.TRIANGLES,h=null,o=_,e++),h!==b&&(h=b,b._batchEnabled!==e&&(o===_&&(e++,o=0,a.size>0&&(a=zf.pop(),a||(a=new Rf,a.texArray=new Ff),this.drawCalls.push(a)),a.start=f,a.size=0,a.texArray.count=0,a.type=g),b.touched=1,b._batchEnabled=e,b._batchLocation=o,b.wrapMode=10497,a.texArray.elements[a.texArray.count++]=b,o++)),a.size+=m.size,f+=m.size,u=b._batchLocation,this.addColors(n,v.color,v.alpha,m.attribSize),this.addTextureIds(s,u,m.attribSize)}He._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,n=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),o=new Float32Array(a),h=new Uint32Array(a),u=0,d=0;d<e.length/2;d++)o[u++]=e[d*2],o[u++]=e[d*2+1],o[u++]=i[d*2],o[u++]=i[d*2+1],h[u++]=n[d],o[u++]=s[d];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),Jb.triangulate(e,this);else{var i=Ig[e.type];i.triangulate(e,this)}},t.prototype.processLine=function(e){tw(e,this);for(var i=0;i<e.holes.length;i++)tw(e.holes[i],this)},t.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var n=e[i],s=Ig[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,i=l3,n=Ke.IDENTITY;this._bounds.clear(),i.clear();for(var s=0;s<this.graphicsData.length;s++){var a=this.graphicsData[s],o=a.shape,h=a.type,u=a.lineStyle,d=a.matrix||Ke.IDENTITY,g=0;if(u&&u.visible){var f=u.alignment;g=u.width,h===di.POLY?g=g*(.5+Math.abs(.5-f)):g=g*Math.max(0,f)}if(n!==d&&(i.isEmpty()||(e.addBoundsMatrix(i,n),i.clear()),n=d),h===di.RECT||h===di.RREC){var m=o;i.addFramePad(m.x,m.y,m.x+m.width,m.y+m.height,g,g)}else if(h===di.CIRC){var _=o;i.addFramePad(_.x,_.y,_.x,_.y,_.radius+g,_.radius+g)}else if(h===di.ELIP){var v=o;i.addFramePad(v.x,v.y,v.x,v.y,v.width+g,v.height+g)}else{var b=o;e.addVerticesMatrix(n,b.points,0,b.points.length,g,g)}}i.isEmpty()||e.addBoundsMatrix(i,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,i){for(var n=0;n<e.length/2;n++){var s=e[n*2],a=e[n*2+1];e[n*2]=i.a*s+i.c*a+i.tx,e[n*2+1]=i.b*s+i.d*a+i.ty}},t.prototype.addColors=function(e,i,n,s){for(var a=(i>>16)+(i&65280)+((i&255)<<16),o=so(a,n);s-- >0;)e.push(o)},t.prototype.addTextureIds=function(e,i,n){for(;n-- >0;)e.push(i)},t.prototype.addUvs=function(e,i,n,s,a,o){o===void 0&&(o=null);for(var h=0,u=i.length,d=n.frame;h<a;){var g=e[(s+h)*2],f=e[(s+h)*2+1];if(o){var m=o.a*g+o.c*f+o.tx;f=o.b*g+o.d*f+o.ty,g=m}h++,i.push(g/d.width,f/d.height)}var _=n.baseTexture;(d.width<_.width||d.height<_.height)&&this.adjustUvs(i,n,u,a)},t.prototype.adjustUvs=function(e,i,n,s){for(var a=i.baseTexture,o=1e-6,h=n+s*2,u=i.frame,d=u.width/a.width,g=u.height/a.height,f=u.x/u.width,m=u.y/u.height,_=Math.floor(e[n]+o),v=Math.floor(e[n+1]+o),b=n+2;b<h;b+=2)_=Math.min(_,Math.floor(e[b]+o)),v=Math.min(v,Math.floor(e[b+1]+o));f-=_,m-=v;for(var b=n;b<h;b+=2)e[b]=(e[b]+f)*d,e[b+1]=(e[b+1]+m)*g},t.BATCHABLE_SIZE=100,t}(wg),u3=function(r){Nf(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ua.BUTT,e.join=ha.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}($b),c3=new Float32Array(3),Dg={},jn=function(r){Nf(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i._geometry=e||new h3,i._geometry.refCount++,i.shader=null,i.state=wn.for2d(),i._fillStyle=new $b,i._lineStyle=new u3,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=_e.NORMAL,i}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(e===void 0&&(e=null),typeof e=="number"){var i=arguments;e={width:i[0]||0,color:i[1]||0,alpha:i[2]!==void 0?i[2]:1,alignment:i[3]!==void 0?i[3]:.5,native:!!i[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if(typeof e=="number"){wr("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var i=arguments,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],d=i[6];e={width:n,texture:s,color:a,alpha:o,matrix:h,alignment:u,native:d},Object.keys(e).forEach(function(f){return e[f]===void 0&&delete e[f]})}e=Object.assign({width:0,texture:ye.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ua.BUTT,join:ha.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var g=e.width>0&&e.alpha>0;return g?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:g},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new ao,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new ao,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},t.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],a=n[n.length-1];return(s!==e||a!==i)&&n.push(e,i),this},t.prototype._initCurve=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},t.prototype.quadraticCurveTo=function(e,i,n,s){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),a3.curveTo(e,i,n,s,a),this},t.prototype.bezierCurveTo=function(e,i,n,s,a,o){return this._initCurve(),s3.curveTo(e,i,n,s,a,o,this.currentPath.points),this},t.prototype.arcTo=function(e,i,n,s,a){this._initCurve(e,i);var o=this.currentPath.points,h=ew.curveTo(e,i,n,s,a,o);if(h){var u=h.cx,d=h.cy,g=h.radius,f=h.startAngle,m=h.endAngle,_=h.anticlockwise;this.arc(u,d,g,f,m,_)}return this},t.prototype.arc=function(e,i,n,s,a,o){if(o===void 0&&(o=!1),s===a)return this;!o&&a<=s?a+=El:o&&s<=a&&(s+=El);var h=a-s;if(h===0)return this;var u=e+Math.cos(s)*n,d=i+Math.sin(s)*n,g=this._geometry.closePointEps,f=this.currentPath?this.currentPath.points:null;if(f){var m=Math.abs(f[f.length-2]-u),_=Math.abs(f[f.length-1]-d);m<g&&_<g||f.push(u,d)}else this.moveTo(u,d),f=this.currentPath.points;return ew.arc(u,d,e,i,n,s,a,o,f),this},t.prototype.beginFill=function(e,i){return e===void 0&&(e=0),i===void 0&&(i=1),this.beginTextureFill({texture:ye.WHITE,color:e,alpha:i})},t.prototype.beginTextureFill=function(e){if(e instanceof ye){wr("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var i=arguments,n=i[0],s=i[1],a=i[2],o=i[3];e={texture:n,color:s,alpha:a,matrix:o},Object.keys(e).forEach(function(u){return e[u]===void 0&&delete e[u]})}e=Object.assign({texture:ye.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var h=e.alpha>0;return h?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:h},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,i,n,s){return this.drawShape(new Pe(e,i,n,s))},t.prototype.drawRoundedRect=function(e,i,n,s,a){return this.drawShape(new Y1(e,i,n,s,a))},t.prototype.drawCircle=function(e,i,n){return this.drawShape(new X1(e,i,n))},t.prototype.drawEllipse=function(e,i,n,s){return this.drawShape(new q1(e,i,n,s))},t.prototype.drawPolygon=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var s,a=!0,o=i[0];o.points?(a=o.closeStroke,s=o.points):Array.isArray(i[0])?s=i[0]:s=i;var h=new ao(s);return h.closeStroke=a,this.drawShape(h),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,i,n,s,a,o){return o===void 0&&(o=0),this.drawPolygon(new n3(e,i,n,s,a,o))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===di.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var i=this._geometry,n=e.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var s=0;s<n;s++){var a=e.batches[s],o=a.style.color,h=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),d=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),g={vertexData:h,blendMode:i,indices:d,uvs:u,_batchRGB:rn(o),_tintRGB:o,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=g}},t.prototype._renderBatched=function(e){if(!!this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}},t.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),n=this._geometry,s=this.tint,a=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(s>>16&255)/255*a,o.tint[1]=(s>>8&255)/255*a,o.tint[2]=(s&255)/255*a,o.tint[3]=a,e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(var u=0,d=h.length;u<d;u++)this._renderDrawCallDirect(e,n.drawCalls[u])},t.prototype._renderDrawCallDirect=function(e,i){for(var n=i.texArray,s=i.type,a=i.size,o=i.start,h=n.count,u=0;u<h;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(s,a,o)},t.prototype._resolveDirectShader=function(e){var i=this.shader,n=this.pluginName;if(!i){if(!Dg[n]){for(var s=e.plugins.batch.MAX_TEXTURES,a=new Int32Array(s),o=0;o<s;o++)a[o]=o;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ke,default:la.from({uSamplers:a},!0)},u=e.plugins[n]._shader.program;Dg[n]=new bn(u,h)}i=Dg[n]}return i},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(!!e.graphicsData.length){var i=e.bounds,n=i.minX,s=i.minY,a=i.maxX,o=i.maxY;this._bounds.addFrame(this.transform,n,s,a,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=rn(this.tint,c3),i=0;i<this.batches.length;i++){var n=this.batches[i],s=n._batchRGB,a=e[0]*s[0]*255,o=e[1]*s[1]*255,h=e[2]*s[2]*255,u=(a<<16)+(o<<8)+(h|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,d=this._geometry.points,g=this.vertexData,f=0,m=0;m<d.length;m+=2){var _=d[m],v=d[m+1];g[f++]=n*_+a*v+h,g[f++]=o*v+s*_+u}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,e)},t._TEMP_POINT=new Je,t}(ei);var Lg=function(r,t){return Lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Lg(r,t)};function f3(r,t){Lg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Pu=new Je,d3=new Uint16Array([0,1,2,0,2,3]),Tr=function(r){f3(t,r);function t(e){var i=r.call(this)||this;return i._anchor=new sa(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=_e.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||ye.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=d3,i.pluginName="batch",i.isSprite=!0,i._roundPixels=pe.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ss(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ss(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,d=this.vertexData,g=e.trim,f=e.orig,m=this._anchor,_=0,v=0,b=0,C=0;if(g?(v=g.x-m._x*f.width,_=v+g.width,C=g.y-m._y*f.height,b=C+g.height):(v=-m._x*f.width,_=v+f.width,C=-m._y*f.height,b=C+f.height),d[0]=n*v+a*C+h,d[1]=o*C+s*v+u,d[2]=n*_+a*C+h,d[3]=o*C+s*_+u,d[4]=n*_+a*b+h,d[5]=o*b+s*_+u,d[6]=n*v+a*b+h,d[7]=o*b+s*v+u,this._roundPixels)for(var M=pe.RESOLUTION,E=0;E<d.length;++E)d[E]=Math.round((d[E]*M|0)/M)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,d=a.d,g=a.tx,f=a.ty,m=-s._x*n.width,_=m+n.width,v=-s._y*n.height,b=v+n.height;i[0]=o*m+u*v+g,i[1]=d*v+h*m+f,i[2]=o*_+u*v+g,i[3]=d*v+h*_+f,i[4]=o*_+u*b+g,i[5]=d*b+h*_+f,i[6]=o*m+u*b+g,i[7]=d*b+h*m+f},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Pe),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Pu);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return!!(Pu.x>=s&&Pu.x<s+i&&(a=-n*this.anchor.y,Pu.y>=a&&Pu.y<a+n))},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,i){var n=e instanceof ye?e:ye.from(e,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=Ss(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=Ss(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ye.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(ei);var Rg=function(r,t){return Rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Rg(r,t)};function p3(r,t){Rg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ll;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ll||(Ll={}));var Fg={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ll.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},m3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ca=function(){function r(t){this.styleID=0,this.reset(),Og(this,t,t)}return r.prototype.clone=function(){var t={};return Og(t,this,Fg),new r(t)},r.prototype.reset=function(){Og(this,Fg,Fg)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=kg(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=kg(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){g3(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=kg(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&m3.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r}();function nw(r){return typeof r=="number"?du(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function kg(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=nw(r[t]);return r}else return nw(r)}function g3(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function Og(r,t,e){for(var i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}var Nr=function(){function r(t,e,i,n,s,a,o,h,u){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}return r.measureText=function(t,e,i,n){n===void 0&&(n=r._canvas),i=i??e.wordWrap;var s=e.toFontString(),a=r.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var o=n.getContext("2d");o.font=s;for(var h=i?r.wordWrap(t,e,n):t,u=h.split(/(?:\r\n|\r|\n)/),d=new Array(u.length),g=0,f=0;f<u.length;f++){var m=o.measureText(u[f]).width+(u[f].length-1)*e.letterSpacing;d[f]=m,g=Math.max(g,m)}var _=g+e.strokeThickness;e.dropShadow&&(_+=e.dropShadowDistance);var v=e.lineHeight||a.fontSize+e.strokeThickness,b=Math.max(v,a.fontSize+e.strokeThickness)+(u.length-1)*(v+e.leading);return e.dropShadow&&(b+=e.dropShadowDistance),new r(t,e,_,b,u,d,v+e.leading,g,a)},r.wordWrap=function(t,e,i){i===void 0&&(i=r._canvas);for(var n=i.getContext("2d"),s=0,a="",o="",h=Object.create(null),u=e.letterSpacing,d=e.whiteSpace,g=r.collapseSpaces(d),f=r.collapseNewlines(d),m=!g,_=e.wordWrapWidth+u,v=r.tokenize(t),b=0;b<v.length;b++){var C=v[b];if(r.isNewline(C)){if(!f){o+=r.addLine(a),m=!g,a="",s=0;continue}C=" "}if(g){var M=r.isBreakingSpace(C),E=r.isBreakingSpace(a[a.length-1]);if(M&&E)continue}var w=r.getFromCache(C,u,h,n);if(w>_)if(a!==""&&(o+=r.addLine(a),a="",s=0),r.canBreakWords(C,e.breakWords))for(var A=r.wordWrapSplit(C),R=0;R<A.length;R++){for(var N=A[R],D=1;A[R+D];){var X=A[R+D],at=N[N.length-1];if(!r.canBreakChars(at,X,C,R,e.breakWords))N+=X;else break;D++}R+=N.length-1;var ft=r.getFromCache(N,u,h,n);ft+s>_&&(o+=r.addLine(a),m=!1,a="",s=0),a+=N,s+=ft}else{a.length>0&&(o+=r.addLine(a),a="",s=0);var gt=b===v.length-1;o+=r.addLine(C,!gt),m=!1,a="",s=0}else w+s>_&&(m=!1,o+=r.addLine(a),a="",s=0),(a.length>0||!r.isBreakingSpace(C)||m)&&(a+=C,s+=w)}return o+=r.addLine(a,!1),o},r.addLine=function(t,e){return e===void 0&&(e=!0),t=r.trimRight(t),t=e?t+`
`:t,t},r.getFromCache=function(t,e,i,n){var s=i[t];if(typeof s!="number"){var a=t.length*e;s=n.measureText(t).width+a,i[t]=s}return s},r.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},r.collapseNewlines=function(t){return t==="normal"},r.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!r.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},r.isNewline=function(t){return typeof t!="string"?!1:r._newlines.indexOf(t.charCodeAt(0))>=0},r.isBreakingSpace=function(t){return typeof t!="string"?!1:r._breakingSpaces.indexOf(t.charCodeAt(0))>=0},r.tokenize=function(t){var e=[],i="";if(typeof t!="string")return e;for(var n=0;n<t.length;n++){var s=t[n];if(r.isBreakingSpace(s)||r.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e},r.canBreakWords=function(t,e){return e},r.canBreakChars=function(t,e,i,n,s){return!0},r.wordWrapSplit=function(t){return t.split("")},r.measureFont=function(t){if(r._fonts[t])return r._fonts[t];var e={ascent:0,descent:0,fontSize:0},i=r._canvas,n=r._context;n.font=t;var s=r.METRICS_STRING+r.BASELINE_SYMBOL,a=Math.ceil(n.measureText(s).width),o=Math.ceil(n.measureText(r.BASELINE_SYMBOL).width),h=2*o;o=o*r.BASELINE_MULTIPLIER|0,i.width=a,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,o);var u=n.getImageData(0,0,a,h).data,d=u.length,g=a*4,f=0,m=0,_=!1;for(f=0;f<o;++f){for(var v=0;v<g;v+=4)if(u[m+v]!==255){_=!0;break}if(!_)m+=g;else break}for(e.ascent=o-f,m=d-g,_=!1,f=h;f>o;--f){for(var v=0;v<g;v+=4)if(u[m+v]!==255){_=!0;break}if(!_)m-=g;else break}return e.descent=f-o,e.fontSize=e.ascent+e.descent,r._fonts[t]=e,e},r.clearMetrics=function(t){t===void 0&&(t=""),t?delete r._fonts[t]:r._fonts={}},r}(),Vf=function(){try{var r=new OffscreenCanvas(0,0),t=r.getContext("2d");return t&&t.measureText?r:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Vf.width=Vf.height=10;Nr._canvas=Vf;Nr._context=Vf.getContext("2d");Nr._fonts={};Nr.METRICS_STRING="|\xC9q\xC5";Nr.BASELINE_SYMBOL="M";Nr.BASELINE_MULTIPLIER=1.4;Nr._newlines=[10,13];Nr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var v3={texture:!0,children:!1,baseTexture:!0},Ng=function(r){p3(t,r);function t(e,i,n){var s=this,a=!1;n||(n=document.createElement("canvas"),a=!0),n.width=3,n.height=3;var o=ye.from(n);return o.orig=new Pe,o.trim=new Pe,s=r.call(this,o)||this,s._ownCanvas=a,s.canvas=n,s.context=s.canvas.getContext("2d"),s._resolution=pe.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=e,s.style=i,s.localStyleID=-1,s}return t.prototype.updateText=function(e){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,s=Nr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,o=s.height,h=s.lines,u=s.lineHeight,d=s.lineWidths,g=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,a)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var m,_,v=i.dropShadow?2:1,b=0;b<v;++b){var C=i.dropShadow&&b===0,M=C?Math.ceil(Math.max(1,o)+i.padding*2):0,E=M*this._resolution;if(C){n.fillStyle="black",n.strokeStyle="black";var w=i.dropShadowColor,A=rn(typeof w=="number"?w:pu(w));n.shadowColor="rgba("+A[0]*255+","+A[1]*255+","+A[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=i.dropShadowBlur,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+E}else n.fillStyle=this._generateFillStyle(i,h,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var R=0;R<h.length;R++)m=i.strokeThickness/2,_=i.strokeThickness/2+R*u+f.ascent,i.align==="right"?m+=g-d[R]:i.align==="center"&&(m+=(g-d[R])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(h[R],m+i.padding,_+i.padding-M,!0),i.fill&&this.drawLetterSpacing(h[R],m+i.padding,_+i.padding-M)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,i,n,s){s===void 0&&(s=!1);var a=this._style,o=a.letterSpacing;if(o===0){s?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}for(var h=i,u=Array.from?Array.from(e):e.split(""),d=this.context.measureText(e).width,g=0,f=0;f<u.length;++f){var m=u[f];s?this.context.strokeText(m,h,n):this.context.fillText(m,h,n),g=this.context.measureText(e.substring(f+1)).width,h+=d-g+o,d=g}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=Km(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,s=this._style,a=s.trim?0:s.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(e.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(e.height/this._resolution),n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-a*2,n.orig.height=n._frame.height-a*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),r.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,i,n){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,o=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,u=Math.ceil(this.canvas.width/this._resolution)-o-h*2,d=Math.ceil(this.canvas.height/this._resolution)-o-h*2,g=s.slice(),f=e.fillGradientStops.slice();if(!f.length)for(var m=g.length+1,_=1;_<m;++_)f.push(_/m);if(g.unshift(s[0]),f.unshift(0),g.push(s[s.length-1]),f.push(1),e.fillGradientType===Ll.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,h,u/2,d+h);for(var v=0,b=n.fontProperties.fontSize+e.strokeThickness,C=b/d,_=0;_<i.length;_++)for(var M=n.lineHeight*_,E=0;E<g.length;E++){var w=0;typeof f[E]=="number"?w=f[E]:w=E/g.length;var A=M/d+w*C,R=Math.max(v,A);R=Math.min(R,1),a.addColorStop(R,g[E]),v=R}}else{a=this.context.createLinearGradient(h,d/2,u+h,d/2);for(var N=g.length+1,D=1,_=0;_<g.length;_++){var X=void 0;typeof f[_]=="number"?X=f[_]:X=D/N,a.addColorStop(X,g[_]),D++}}return a},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},v3,e),r.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=Ss(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=Ss(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof ca?this._style=e:this._style=new ca(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(Tr);pe.UPLOADS_PER_FRAME=4;var Bg=function(r,t){return Bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Bg(r,t)};function _3(r,t){Bg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var y3=function(){function r(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function x3(r,t){var e=!1;if(r&&r._textures&&r._textures.length){for(var i=0;i<r._textures.length;i++)if(r._textures[i]instanceof ye){var n=r._textures[i].baseTexture;t.indexOf(n)===-1&&(t.push(n),e=!0)}}return e}function b3(r,t){if(r.baseTexture instanceof He){var e=r.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function w3(r,t){if(r._texture&&r._texture instanceof ye){var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function S3(r,t){return t instanceof Ng?(t.updateText(!0),!0):!1}function T3(r,t){if(t instanceof ca){var e=t.toFontString();return Nr.measureFont(e),!0}return!1}function C3(r,t){if(r instanceof Ng){t.indexOf(r.style)===-1&&t.push(r.style),t.indexOf(r)===-1&&t.push(r);var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function E3(r,t){return r instanceof ca?(t.indexOf(r)===-1&&t.push(r),!0):!1}var M3=function(){function r(t){var e=this;this.limiter=new y3(pe.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!e.queue||e.prepareItems()},this.registerFindHook(C3),this.registerFindHook(E3),this.registerFindHook(x3),this.registerFindHook(b3),this.registerFindHook(w3),this.registerUploadHook(S3),this.registerUploadHook(T3)}return r.prototype.upload=function(t,e){typeof t=="function"&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,yi.system.addOnce(this.tick,this,nn.UTILITY))):e&&e()},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)yi.system.addOnce(this.tick,this,nn.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var i=0,n=s.length;i<n;i++)s[i]()}},r.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},r.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},r.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ei)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},r.prototype.destroy=function(){this.ticking&&yi.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function sw(r,t){return t instanceof He?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function P3(r,t){if(!(t instanceof jn))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var i=e.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&sw(r,s.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function A3(r,t){return r instanceof jn?(t.push(r),!0):!1}var aw=function(r){_3(t,r);function t(e){var i=r.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(A3),i.registerUploadHook(sw),i.registerUploadHook(P3),i}return t}(M3),fB=function(){function r(t){this.maxMilliseconds=t,this.frameStart=0}return r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},r}();var I3=function(){function r(t,e,i){i===void 0&&(i=null),this._texture=t instanceof ye?t:null,this.baseTexture=t instanceof He?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,i=na(t,null);return i===null&&(i=e!==void 0?parseFloat(e):1),i!==1&&this.baseTexture.setResolution(i),i},r.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=r.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},r.prototype._processFrames=function(t){for(var e=t,i=r.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],s=this._frames[n],a=s.frame;if(a){var o=null,h=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new Pe(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new Pe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new Pe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new Pe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new ye(this.baseTexture,o,d,h,s.rotated?2:0,s.anchor),ye.addToCache(this.textures[n],n)}e++}},r.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},r.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},r.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*r.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},r.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},r.BATCH_SIZE=1e3,r}(),ow=function(){function r(){}return r.use=function(t,e){var i=this,n=t.name+"_image";if(!t.data||t.type!==Pl.TYPE.JSON||!t.data.frames||i.resources[n]){e();return}var s={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=r.getResourcePath(t,i.baseUrl);i.add(n,a,s,function(h){if(h.error){e(h.error);return}var u=new I3(h.texture,t.data,t.url);u.parse(function(){t.spritesheet=u,t.textures=u.textures,e()})})},r.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:bf.default.resolve(t.url.replace(e,""),t.data.meta.image)},r}();var zg=function(r,t){return zg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},zg(r,t)};function lw(r,t){zg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Au=new Je,TB=function(r){lw(t,r);function t(e,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var s=r.call(this,e)||this;return s.tileTransform=new Sf,s._width=i,s._height=n,s.uvMatrix=s.texture.uvMatrix||new Su(e),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,n,s)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Pe),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Au);var i=this._width,n=this._height,s=-i*this.anchor._x;if(Au.x>=s&&Au.x<s+i){var a=-n*this.anchor._y;if(Au.y>=a&&Au.y<a+n)return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,i){return typeof i=="number"&&(wr("5.3.0","TilingSprite.from use options instead of width and height args"),i={width:i,height:arguments[2]}),new t(ye.from(e,i),i.width,i.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(Tr),hw=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,D3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,L3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,Uf=new Ke,uw=function(r){lw(t,r);function t(e){var i=r.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=bn.from(hw,D3,n),i.simpleShader=bn.from(hw,L3,n),i.quad=new cg,i.state=wn.for2d(),i}return t.prototype.render=function(e){var i=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(s=n.uvs,s[0]=s[6]=-e.anchor.x,s[1]=s[3]=-e.anchor.y,s[2]=s[4]=1-e.anchor.x,s[5]=s[7]=1-e.anchor.y),n.invalidate();var a=e._texture,o=a.baseTexture,h=e.tileTransform.localTransform,u=e.uvMatrix,d=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;d&&(o._glTextures[i.CONTEXT_UID]?d=o.wrapMode!==en.CLAMP:o.wrapMode===en.CLAMP&&(o.wrapMode=en.REPEAT));var g=d?this.simpleShader:this.shader,f=a.width,m=a.height,_=e._width,v=e._height;Uf.set(h.a*f/_,h.b*f/v,h.c*m/_,h.d*m/v,h.tx/_,h.ty/v),Uf.invert(),d?Uf.prepend(u.mapCoord):(g.uniforms.uMapCoord=u.mapCoord.toArray(!0),g.uniforms.uClampFrame=u.uClampFrame,g.uniforms.uClampOffset=u.uClampOffset),g.uniforms.uTransform=Uf.toArray(!0),g.uniforms.uColor=gu(e.tint,e.worldAlpha,g.uniforms.uColor,o.alphaMode),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,i.shader.bind(g),i.geometry.bind(n),this.state.blendMode=mu(e.blendMode,o.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Ml);var Vg=function(r,t){return Vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Vg(r,t)};function Ug(r,t){Vg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var R3=function(){function r(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},r}(),Gg=new Je,cw=new ao,vo=function(r){Ug(t,r);function t(e,i,n,s){s===void 0&&(s=xr.TRIANGLES);var a=r.call(this)||this;return a.geometry=e,e.refCount++,a.shader=i,a.state=n||wn.for2d(),a.drawMode=s,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=0,a._transformID=-1,a._roundPixels=pe.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===xr.TRIANGLES&&i.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.program.uniformData.translationMatrix&&(i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var i=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,i=e.buffers[0].data;if(!(e.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var n=this.transform.worldTransform,s=n.a,a=n.b,o=n.c,h=n.d,u=n.tx,d=n.ty,g=this.vertexData,f=0;f<g.length/2;f++){var m=i[f*2],_=i[f*2+1];g[f*2]=s*m+o*_+u,g[f*2+1]=a*m+h*_+d}if(this._roundPixels)for(var v=pe.RESOLUTION,f=0;f<g.length;++f)g[f]=Math.round((g[f]*v|0)/v);this.vertexDirty=e.vertexDirtyId}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new R3(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Gg);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=cw.points,s=this.geometry.getIndex().data,a=s.length,o=this.drawMode===4?3:1,h=0;h+2<a;h+=o){var u=s[h]*2,d=s[h+1]*2,g=s[h+2]*2;if(n[0]=i[u],n[1]=i[u+1],n[2]=i[d],n[3]=i[d+1],n[4]=i[g],n[5]=i[g+1],cw.contains(Gg.x,Gg.y))return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(ei),F3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,k3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Rl=function(r){Ug(t,r);function t(e,i){var n=this,s={uSampler:e,alpha:1,uTextureMatrix:Ke.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),n=r.call(this,i.program||wu.from(k3,F3),s)||this,n._colorDirty=!1,n.uvMatrix=new Su(e),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;gu(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(bn),Fl=function(r){Ug(t,r);function t(e,i,n){var s=r.call(this)||this,a=new Ai(e),o=new Ai(i,!0),h=new Ai(n,!0,!0);return s.addAttribute("aVertexPosition",a,2,!1,fi.FLOAT).addAttribute("aTextureCoord",o,2,!1,fi.FLOAT).addIndex(h),s._updateId=-1,s}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(co);var Hg=function(r,t){return Hg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Hg(r,t)};function O3(r,t){Hg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Gf=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return r}(),N3=function(){function r(){}return r.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},r.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in e){var s=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var h in a){var u=a[h].split("="),d=u[0],g=u[1].replace(/"/gm,""),f=parseFloat(g),m=isNaN(f)?g:f;o[d]=m}i[s].push(o)}var _=new Gf;return i.info.forEach(function(v){return _.info.push({face:v.face,size:parseInt(v.size,10)})}),i.common.forEach(function(v){return _.common.push({lineHeight:parseInt(v.lineHeight,10)})}),i.page.forEach(function(v){return _.page.push({id:parseInt(v.id,10),file:v.file})}),i.char.forEach(function(v){return _.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),i.kerning.forEach(function(v){return _.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),_},r}(),Wg=function(){function r(){}return r.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(t){for(var e=new Gf,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(var h=0;h<n.length;h++)e.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(var h=0;h<s.length;h++)e.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(var h=0;h<a.length;h++){var u=a[h];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var h=0;h<o.length;h++)e.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});return e},r}(),B3=function(){function r(){}return r.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var e=new self.DOMParser().parseFromString(t,"text/xml");return Wg.test(e)}return!1},r.parse=function(t){var e=new window.DOMParser().parseFromString(t,"text/xml");return Wg.parse(e)},r}(),Xg=[N3,Wg,B3];function fw(r){for(var t=0;t<Xg.length;t++)if(Xg[t].test(r))return Xg[t];return null}function dw(r,t,e,i,n,s){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,h=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,d=Math.ceil(r.width/i)-h-u*2,g=Math.ceil(r.height/i)-h-u*2,f=a.slice(),m=e.fillGradientStops.slice();if(!m.length)for(var _=f.length+1,v=1;v<_;++v)m.push(v/_);if(f.unshift(a[0]),m.unshift(0),f.push(a[a.length-1]),m.push(1),e.fillGradientType===Ll.LINEAR_VERTICAL){o=t.createLinearGradient(d/2,u,d/2,g+u);for(var b=0,C=s.fontProperties.fontSize+e.strokeThickness,M=C/g,v=0;v<n.length;v++)for(var E=s.lineHeight*v,w=0;w<f.length;w++){var A=0;typeof m[w]=="number"?A=m[w]:A=w/f.length;var R=E/g+A*M,N=Math.max(b,R);N=Math.min(N,1),o.addColorStop(N,f[w]),b=N}}else{o=t.createLinearGradient(u,g/2,d+u,g/2);for(var D=f.length+1,X=1,v=0;v<f.length;v++){var at=void 0;typeof m[v]=="number"?at=m[v]:at=X/D,o.addColorStop(at,f[v]),X++}}return o}function z3(r,t,e,i,n,s,a){var o=e.text,h=e.fontProperties;t.translate(i,n),t.scale(s,s);var u=a.strokeThickness/2,d=-(a.strokeThickness/2);t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=dw(r,t,a,s,[o],e),t.strokeStyle=a.stroke,t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=dw(r,t,a,s,[o],e),t.strokeStyle=a.stroke;var g=a.dropShadowColor,f=rn(typeof g=="number"?g:pu(g));a.dropShadow?(t.shadowColor="rgba("+f[0]*255+","+f[1]*255+","+f[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=a.dropShadowBlur,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),a.stroke&&a.strokeThickness&&t.strokeText(o,u,d+e.lineHeight-h.descent),a.fill&&t.fillText(o,u,d+e.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function V3(r){typeof r=="string"&&(r=[r]);for(var t=[],e=0,i=r.length;e<i;e++){var n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(var o=s,h=a;o<=h;o++)t.push(String.fromCharCode(o))}else t.push.apply(t,n.split(""))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var _o=function(){function r(t,e,i){var n=t.info[0],s=t.common[0],a=t.page[0],o=na(a.file),h={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/o,this.chars={},this.pageTextures=h;for(var u=0;u<t.page.length;u++){var d=t.page[u],g=d.id,f=d.file;h[g]=e instanceof Array?e[u]:e[f]}for(var u=0;u<t.char.length;u++){var m=t.char[u],g=m.id,_=m.page,v=t.char[u],b=v.x,C=v.y,M=v.width,E=v.height,w=v.xoffset,A=v.yoffset,R=v.xadvance;b/=o,C/=o,M/=o,E/=o,w/=o,A/=o,R/=o;var N=new Pe(b+h[_].frame.x/o,C+h[_].frame.y/o,M,E);this.chars[g]={xOffset:w,yOffset:A,xAdvance:R,kerning:{},texture:new ye(h[_].baseTexture,N),page:_}}for(var u=0;u<t.kerning.length;u++){var D=t.kerning[u],X=D.first,at=D.second,ft=D.amount;X/=o,at/=o,ft/=o,this.chars[at]&&(this.chars[at].kerning[X]=ft)}}return r.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},r.install=function(t,e,i){var n;if(t instanceof Gf)n=t;else{var s=fw(t);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(t)}e instanceof ye&&(e=[e]);var a=new r(n,e,i);return r.available[a.font]=a,a},r.uninstall=function(t){var e=r.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete r.available[t]},r.from=function(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},r.defaultOptions,i),s=n.chars,a=n.padding,o=n.resolution,h=n.textureWidth,u=n.textureHeight,d=V3(s),g=e instanceof ca?e:new ca(e),f=h,m=new Gf;m.info[0]={face:g.fontFamily,size:g.fontSize},m.common[0]={lineHeight:g.fontSize};for(var _=0,v=0,b,C,M,E=0,w=[],A=0;A<d.length;A++){b||(b=document.createElement("canvas"),b.width=h,b.height=u,C=b.getContext("2d"),M=new He(b,{resolution:o}),w.push(new ye(M)),m.page.push({id:w.length-1,file:""}));var R=Nr.measureText(d[A],g,!1,b),N=R.width,D=Math.ceil(R.height),X=Math.ceil((g.fontStyle==="italic"?2:1)*N);if(v>=u-D*o){if(v===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+g.fontSize+"px fonts"));--A,b=null,C=null,M=null,v=0,_=0,E=0;continue}if(E=Math.max(D+R.fontProperties.descent,E),X*o+_>=f){--A,v+=E*o,v=Math.ceil(v),_=0,E=0;continue}z3(b,C,R,_,v,o,g);var at=R.text.charCodeAt(0);m.char.push({id:at,page:w.length-1,x:_/o,y:v/o,width:X,height:D,xoffset:0,yoffset:0,xadvance:Math.ceil(N-(g.dropShadow?g.dropShadowDistance:0)-(g.stroke?g.strokeThickness:0))}),_+=(X+2*a)*o,_=Math.ceil(_)}var ft=new r(m,w,!0);return r.available[t]!==void 0&&r.uninstall(t),r.available[t]=ft,ft},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),pw=[],mw=[],UB=function(r){O3(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;n._tint=16777215,i.font&&(wr("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(i));var s=Object.assign({},t.styleDefaults,i),a=s.align,o=s.tint,h=s.maxWidth,u=s.letterSpacing,d=s.fontName,g=s.fontSize;if(!_o.available[d])throw new Error('Missing BitmapFont "'+d+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=o,n._fontName=d,n._fontSize=g||_o.available[d].size,n._text=e,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new sa(function(){n.dirty=!0},n,0,0),n._roundPixels=pe.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return t.prototype.updateText=function(){for(var e,i=_o.available[this._fontName],n=this._fontSize/i.size,s=new Je,a=[],o=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=h.length,d=this._maxWidth*i.size/this._fontSize,g=null,f=0,m=0,_=0,v=-1,b=0,C=0,M=0,E=0;E<u;E++){var w=h.charCodeAt(E),A=h.charAt(E);if(/(?:\s)/.test(A)&&(v=E,b=f),A==="\r"||A===`
`){o.push(f),m=Math.max(m,f),++_,++C,s.x=0,s.y+=i.lineHeight,g=null;continue}var R=i.chars[w];if(!!R){g&&R.kerning[g]&&(s.x+=R.kerning[g]);var N=mw.pop()||{texture:ye.EMPTY,line:0,charCode:0,position:new Je};N.texture=R.texture,N.line=_,N.charCode=w,N.position.x=s.x+R.xOffset+this._letterSpacing/2,N.position.y=s.y+R.yOffset,a.push(N),s.x+=R.xAdvance+this._letterSpacing,f=s.x,M=Math.max(M,R.yOffset+R.texture.height),g=w,v!==-1&&d>0&&s.x>d&&(++C,xn(a,1+v-C,1+E-v),E=v,v=-1,o.push(b),m=Math.max(m,b),_++,s.x=0,s.y+=i.lineHeight,g=null)}}var D=h.charAt(h.length-1);D!=="\r"&&D!==`
`&&(/(?:\s)/.test(D)&&(f=b),o.push(f),m=Math.max(m,f));for(var X=[],E=0;E<=_;E++){var at=0;this._align==="right"?at=m-o[E]:this._align==="center"&&(at=(m-o[E])/2),X.push(at)}for(var ft=a.length,gt={},ut=[],xt=this._activePagesMeshData,E=0;E<xt.length;E++)pw.push(xt[E]);for(var E=0;E<ft;E++){var nt=a[E].texture,it=nt.baseTexture.uid;if(!gt[it]){var tt=pw.pop();if(!tt){var W=new Fl,Q=new Rl(ye.EMPTY),ot=new vo(W,Q);tt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ot,vertices:null,uvs:null,indices:null}}tt.index=0,tt.indexCount=0,tt.vertexCount=0,tt.uvsCount=0,tt.total=0;var ct=this._textureCache;ct[it]=ct[it]||new ye(nt.baseTexture),tt.mesh.texture=ct[it],tt.mesh.tint=this._tint,ut.push(tt),gt[it]=tt}gt[it].total++}for(var E=0;E<xt.length;E++)ut.indexOf(xt[E])===-1&&this.removeChild(xt[E].mesh);for(var E=0;E<ut.length;E++)ut[E].mesh.parent!==this&&this.addChild(ut[E].mesh);this._activePagesMeshData=ut;for(var E in gt){var tt=gt[E],Tt=tt.total;if(!(((e=tt.indices)===null||e===void 0?void 0:e.length)>6*Tt)||tt.vertices.length<vo.BATCHABLE_SIZE*2)tt.vertices=new Float32Array(4*2*Tt),tt.uvs=new Float32Array(4*2*Tt),tt.indices=new Uint16Array(6*Tt);else for(var Rt=tt.total,Pt=tt.vertices,Nt=Rt*4*2;Nt<Pt.length;Nt++)Pt[Nt]=0;tt.mesh.size=6*Tt}for(var E=0;E<ft;E++){var A=a[E],At=A.position.x+X[A.line];this._roundPixels&&(At=Math.round(At));var Qt=At*n,Vt=A.position.y*n,nt=A.texture,Yt=gt[nt.baseTexture.uid],Xt=nt.frame,re=nt._uvs,qt=Yt.index++;Yt.indices[qt*6+0]=0+qt*4,Yt.indices[qt*6+1]=1+qt*4,Yt.indices[qt*6+2]=2+qt*4,Yt.indices[qt*6+3]=0+qt*4,Yt.indices[qt*6+4]=2+qt*4,Yt.indices[qt*6+5]=3+qt*4,Yt.vertices[qt*8+0]=Qt,Yt.vertices[qt*8+1]=Vt,Yt.vertices[qt*8+2]=Qt+Xt.width*n,Yt.vertices[qt*8+3]=Vt,Yt.vertices[qt*8+4]=Qt+Xt.width*n,Yt.vertices[qt*8+5]=Vt+Xt.height*n,Yt.vertices[qt*8+6]=Qt,Yt.vertices[qt*8+7]=Vt+Xt.height*n,Yt.uvs[qt*8+0]=re.x0,Yt.uvs[qt*8+1]=re.y0,Yt.uvs[qt*8+2]=re.x1,Yt.uvs[qt*8+3]=re.y1,Yt.uvs[qt*8+4]=re.x2,Yt.uvs[qt*8+5]=re.y2,Yt.uvs[qt*8+6]=re.x3,Yt.uvs[qt*8+7]=re.y3}this._textWidth=m*n,this._textHeight=(s.y+i.lineHeight)*n;for(var E in gt){var tt=gt[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var Ut=0,Lt=this._textWidth*this.anchor.x,te=this._textHeight*this.anchor.y,ge=0;ge<tt.total;ge++)tt.vertices[Ut++]-=Lt,tt.vertices[Ut++]-=te,tt.vertices[Ut++]-=Lt,tt.vertices[Ut++]-=te,tt.vertices[Ut++]-=Lt,tt.vertices[Ut++]-=te,tt.vertices[Ut++]-=Lt,tt.vertices[Ut++]-=te;this._maxLineHeight=M*n;var Bt=tt.mesh.geometry.getBuffer("aVertexPosition"),oe=tt.mesh.geometry.getBuffer("aTextureCoord"),le=tt.mesh.geometry.getIndex();Bt.data=tt.vertices,oe.data=tt.uvs,le.data=tt.indices,Bt.update(),oe.update(),le.update()}for(var E=0;E<a.length;E++)mw.push(a[E])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!_o.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(e){if(typeof e.font=="string"){var i=e.font.split(" ");e.fontName=i.length===1?i[0]:i.slice(1).join(" "),i.length>=2&&(e.fontSize=parseInt(i[0],10))}else e.fontName=e.font.name,e.fontSize=typeof e.font.size=="number"?e.font.size:parseInt(e.font.size,10)},t.prototype.destroy=function(e){var i=this._textureCache;for(var n in i){var s=i[n];s.destroy(),delete i[n]}this._textureCache=null,r.prototype.destroy.call(this,e)},t.registerFont=function(e,i){return wr("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),_o.install(e,i)},Object.defineProperty(t,"fonts",{get:function(){return wr("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),_o.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(ei),gw=function(){function r(){}return r.add=function(){Pl.setExtensionXhrType("fnt",Pl.XHR_RESPONSE_TYPE.TEXT)},r.use=function(t,e){var i=fw(t.data);if(!i){e();return}for(var n=r.getBaseUrl(this,t),s=i.parse(t.data),a={},o=function(v){a[v.metadata.pageFile]=v.texture,Object.keys(a).length===s.page.length&&(t.bitmapFont=_o.install(s,a,!0),e())},h=0;h<s.page.length;++h){var u=s.page[h].file,d=n+u,g=!1;for(var f in this.resources){var m=this.resources[f];if(m.url===d){m.metadata.pageFile=u,m.texture?o(m):m.onAfterMiddleware.add(o),g=!0;break}}if(!g){var _={crossOrigin:t.crossOrigin,loadType:Pl.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(d,_,o)}}},r.getBaseUrl=function(t,e){var i=e.isDataUrl?"":r.dirname(e.url);return e.isDataUrl&&(i==="."&&(i=""),t.baseUrl&&i&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(t.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},r.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},r}();var qg=function(r,t){return qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},qg(r,t)};function U3(r,t){qg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var G3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,H3=function(r){U3(t,r);function t(e){e===void 0&&(e=1);var i=r.call(this,Tb,G3,{uAlpha:1})||this;return i.alpha=e,i}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(Sr);var Yg=function(r,t){return Yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Yg(r,t)};function vw(r,t){Yg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var W3=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function X3(r,t){var e=Math.ceil(r/2),i=W3,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<r;a++){var o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",a-(e-1)+".0"),n+=o,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var q3={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Y3=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function j3(r){for(var t=q3[r],e=t.length,i=Y3,n="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,o=0;o<r;o++){var h=s.replace("%index%",o.toString());a=o,o>=e&&(a=r-o-1),h=h.replace("%value%",t[a].toString()),n+=h,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var _w;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(_w||(_w={}));var yw;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(yw||(yw={}));var xw;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(xw||(xw={}));var bw;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(bw||(bw={}));var ww;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ww||(ww={}));var Sw;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Sw||(Sw={}));var Tw;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Tw||(Tw={}));var Cw;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Cw||(Cw={}));var Ew;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Ew||(Ew={}));var Mw;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Mw||(Mw={}));var Pw;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(Pw||(Pw={}));var Aw;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Aw||(Aw={}));var Iu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Iu||(Iu={}));var Iw;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Iw||(Iw={}));var Dw;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Dw||(Dw={}));var Lw;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(Lw||(Lw={}));var Rw;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(Rw||(Rw={}));var jg=function(r){vw(t,r);function t(e,i,n,s,a){i===void 0&&(i=8),n===void 0&&(n=4),s===void 0&&(s=pe.FILTER_RESOLUTION),a===void 0&&(a=5);var o=this,h=X3(a,e),u=j3(a);return o=r.call(this,h,u)||this,o.horizontal=e,o.resolution=s,o._quality=0,o.quality=n,o.blur=i,o}return t.prototype.apply=function(e,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,i,n,s);else{var a=e.getFilterTexture(),o=e.renderer,h=i,u=a;this.state.blend=!1,e.applyFilter(this,h,u,Iu.CLEAR);for(var d=1;d<this.passes-1;d++){e.bindAndClear(h,Iu.BLIT),this.uniforms.uSampler=u;var g=u;u=h,h=g,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,s),e.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(Sr),Z3=function(r){vw(t,r);function t(e,i,n,s){e===void 0&&(e=8),i===void 0&&(i=4),n===void 0&&(n=pe.FILTER_RESOLUTION),s===void 0&&(s=5);var a=r.call(this)||this;return a.blurXFilter=new jg(!0,e,i,n,s),a.blurYFilter=new jg(!1,e,i,n,s),a.resolution=n,a.quality=i,a.blur=e,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(e,i,n,s){var a=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(a&&o){var h=e.getFilterTexture();this.blurXFilter.apply(e,i,h,Iu.CLEAR),this.blurYFilter.apply(e,h,n,s),e.returnFilterTexture(h)}else o?this.blurYFilter.apply(e,i,n,s):this.blurXFilter.apply(e,i,n,s)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}(Sr);var Zg=function(r,t){return Zg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Zg(r,t)};function $3(r,t){Zg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var J3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,$g=function(r){$3(t,r);function t(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=r.call(this,Lf,J3,i)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,i){i===void 0&&(i=!1);var n=e;i&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e},t.prototype._colorMatrix=function(e){var i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},t.prototype.brightness=function(e,i){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.greyscale=function(e,i){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.blackAndWhite=function(e){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.hue=function(e,i){e=(e||0)/180*Math.PI;var n=Math.cos(e),s=Math.sin(e),a=Math.sqrt,o=1/3,h=a(o),u=n+(1-n)*o,d=o*(1-n)-h*s,g=o*(1-n)+h*s,f=o*(1-n)+h*s,m=n+o*(1-n),_=o*(1-n)-h*s,v=o*(1-n)-h*s,b=o*(1-n)+h*s,C=n+o*(1-n),M=[u,d,g,0,0,f,m,_,0,0,v,b,C,0,0,0,0,0,1,0];this._loadMatrix(M,i)},t.prototype.contrast=function(e,i){var n=(e||0)+1,s=-.5*(n-1),a=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.saturate=function(e,i){e===void 0&&(e=0);var n=e*2/3+1,s=(n-1)*-.5,a=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.sepia=function(e){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.technicolor=function(e){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.polaroid=function(e){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.toBGR=function(e){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.kodachrome=function(e){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.browni=function(e){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.vintage=function(e){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.colorTone=function(e,i,n,s,a){e=e||.2,i=i||.15,n=n||16770432,s=s||3375104;var o=(n>>16&255)/255,h=(n>>8&255)/255,u=(n&255)/255,d=(s>>16&255)/255,g=(s>>8&255)/255,f=(s&255)/255,m=[.3,.59,.11,0,0,o,h,u,e,0,d,g,f,i,0,o-d,h-g,u-f,0,0];this._loadMatrix(m,a)},t.prototype.night=function(e,i){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.predator=function(e,i){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.lsd=function(e){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(Sr);$g.prototype.grayscale=$g.prototype.greyscale;var Jg=function(r,t){return Jg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Jg(r,t)};function K3(r,t){Jg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Q3=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,tD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,eD=function(r){K3(t,r);function t(e,i){var n=this,s=new Ke;return e.renderable=!1,n=r.call(this,tD,Q3,{mapSampler:e._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=e,n.maskMatrix=s,i==null&&(i=20),n.scale=new Je(i,i),n}return t.prototype.apply=function(e,i,n,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,o=Math.sqrt(a.a*a.a+a.b*a.b),h=Math.sqrt(a.c*a.c+a.d*a.d);o!==0&&h!==0&&(this.uniforms.rotation[0]=a.a/o,this.uniforms.rotation[1]=a.b/o,this.uniforms.rotation[2]=a.c/h,this.uniforms.rotation[3]=a.d/h),e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}(Sr);var Kg=function(r,t){return Kg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Kg(r,t)};function iD(r,t){Kg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var rD=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,nD=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,sD=function(r){iD(t,r);function t(){return r.call(this,rD,nD)||this}return t}(Sr);var Qg=function(r,t){return Qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Qg(r,t)};function aD(r,t){Qg(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var oD=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,lD=function(r){aD(t,r);function t(e,i){e===void 0&&(e=.5),i===void 0&&(i=Math.random());var n=r.call(this,Lf,oD,{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}(Sr);var Fw=new Ke;ti.prototype._cacheAsBitmap=!1;ti.prototype._cacheData=null;var hD=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(ti.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new hD),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});ti.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};ti.prototype._initCachedDisplayObject=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(pe.RESOLUTION);var s=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,u=oa.create({width:i.width,height:i.height}),d="cacheAsBitmap_"+Ts();this._cacheData.textureCacheId=d,He.addToCache(u.baseTexture,d),ye.addToCache(u,d);var g=this.transform.localTransform.copyTo(Fw).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,u,!0,g,!1),t.projection.transform=h,t.renderTexture.bind(s,a,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new Tr(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(i.x/i.width),f.anchor.y=-(i.y/i.height),f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}};ti.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};ti.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,s=t._projTransform;e.ceil(pe.RESOLUTION);var a=oa.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Ts();this._cacheData.textureCacheId=o,He.addToCache(a.baseTexture,o),ye.addToCache(a,o);var h=Fw;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,a,!0,h,!1),t.context=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new Tr(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};ti.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ti.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ti.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,He.removeFromCache(this._cacheData.textureCacheId),ye.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ti.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};ti.prototype.name=null;ei.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(var i=0,n=this.children.length;i<n;i++){var s=this.children[i];if(!!s.getChildByName){var a=this.children[i].getChildByName(t,!0);if(a)return a}}return null};ti.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new Je),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var tv=function(r,t){return tv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},tv(r,t)};function kl(r,t){tv(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var uD=function(r){kl(t,r);function t(e,i,n,s){e===void 0&&(e=100),i===void 0&&(i=100),n===void 0&&(n=10),s===void 0&&(s=10);var a=r.call(this)||this;return a.segWidth=n,a.segHeight=s,a.width=e,a.height=i,a.build(),a}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,i=[],n=[],s=[],a=this.segWidth-1,o=this.segHeight-1,h=this.width/a,u=this.height/o,d=0;d<e;d++){var g=d%this.segWidth,f=d/this.segWidth|0;i.push(g*h,f*u),n.push(g/a,f/o)}for(var m=a*o,d=0;d<m;d++){var _=d%a,v=d/a|0,b=v*this.segWidth+_,C=v*this.segWidth+_+1,M=(v+1)*this.segWidth+_,E=(v+1)*this.segWidth+_+1;s.push(b,C,M,C,E,M)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Fl),cD=function(r){kl(t,r);function t(e,i,n){e===void 0&&(e=200),n===void 0&&(n=0);var s=r.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return s.points=i,s._width=e,s.textureScale=n,s.build(),s}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(!!e){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(e.length<1)){i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));var a=n.data,o=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var h=0,u=e[0],d=this._width*this.textureScale,g=e.length,f=0;f<g;f++){var m=f*4;if(this.textureScale>0){var _=u.x-e[f].x,v=u.y-e[f].y,b=Math.sqrt(_*_+v*v);u=e[f],h+=b/d}else h=f/(g-1);a[m]=h,a[m+1]=0,a[m+2]=h,a[m+3]=1}for(var C=0,f=0;f<g-1;f++){var m=f*2;o[C++]=m,o[C++]=m+1,o[C++]=m+2,o[C++]=m+2,o[C++]=m+1,o[C++]=m+3}n.update(),s.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var i=e[0],n,s=0,a=0,o=this.buffers[0].data,h=e.length,u=0;u<h;u++){var d=e[u],g=u*4;u<e.length-1?n=e[u+1]:n=d,a=-(n.x-i.x),s=n.y-i.y;var f=Math.sqrt(s*s+a*a),m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=f,a/=f,s*=m,a*=m,o[g]=d.x+s,o[g+1]=d.y+a,o[g+2]=d.x-s,o[g+3]=d.y-a,i=d}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Fl),_4=function(r){kl(t,r);function t(e,i,n){n===void 0&&(n=0);var s=this,a=new cD(e.height,i,n),o=new Rl(e);return n>0&&(e.baseTexture.wrapMode=en.REPEAT),s=r.call(this,a,o)||this,s.autoUpdate=!0,s}return t.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),r.prototype._render.call(this,e)},t}(vo),fD=function(r){kl(t,r);function t(e,i,n){var s=this,a=new uD(e.width,e.height,i,n),o=new Rl(ye.WHITE);return s=r.call(this,a,o)||this,s.texture=e,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,e)},t.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),r.prototype.destroy.call(this,e)},t}(vo),y4=function(r){kl(t,r);function t(e,i,n,s,a){e===void 0&&(e=ye.EMPTY);var o=this,h=new Fl(i,n,s);h.getBuffer("aVertexPosition").static=!1;var u=new Rl(e);return o=r.call(this,h,u,null,a)||this,o.autoUpdate=!0,o}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,e)},t}(vo),Hf=10,x4=function(r){kl(t,r);function t(e,i,n,s,a){i===void 0&&(i=Hf),n===void 0&&(n=Hf),s===void 0&&(s=Hf),a===void 0&&(a=Hf);var o=r.call(this,ye.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=i,o._rightWidth=s,o._topHeight=n,o._bottomHeight=a,o.texture=e,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,a=Math.min(i,s);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(fD);var ev=function(r,t){return ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ev(r,t)};function dD(r,t){ev(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var C4=function(r){dD(t,r);function t(e,i){i===void 0&&(i=!0);var n=r.call(this,e[0]instanceof ye?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return t.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(yi.shared.add(this.update,this,nn.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(!!this._playing){var i=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),r.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var i=[],n=0;n<e.length;++n)i.push(ye.from(e[n]));return new t(i)},t.fromImages=function(e){for(var i=[],n=0;n<e.length;++n)i.push(ye.from(e[n]));return new t(i)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof ye)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(yi.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(Tr);Cs.registerPlugin("accessibility",J1);Cs.registerPlugin("extract",Ib);Cs.registerPlugin("interaction",tb);Cs.registerPlugin("particle",Zb);Cs.registerPlugin("prepare",aw);Cs.registerPlugin("batch",Mb);Cs.registerPlugin("tilingSprite",uw);mo.registerPlugin(gw);mo.registerPlugin(ow);Es.registerPlugin(K1);Es.registerPlugin(qb);function Wf(r,t,e){r==="fade"?kw.Setup(t,e):r==="fade-up"?Ow.Setup(t,e):r==="mask-up"?Nw.Setup(t,e):r==="fade-left"?Bw.Setup(t,e):r==="scale-right"?zw.Setup(t,e):r==="lines-up"?Vw.Setup(t,e):r==="words-up"?Uw.Setup(t,e):console.log(`No reveal "${r}" defined.`)}function Xf(r,t,e){if(r==="fade")return kw.Animate(t,e);if(r==="fade-up")return Ow.Animate(t,e);if(r==="mask-up")return Nw.Animate(t,e);if(r==="fade-left")return Bw.Animate(t,e);if(r==="scale-right")return zw.Animate(t,e);if(r==="lines-up")return Vw.Animate(t,e);if(r==="words-up")return Uw.Animate(t,e);console.log(`No reveal "${r}" defined.`)}var kw={Setup(r,t){Zt.set(r,{willChange:"transform",opacity:0})},Animate(r,t){return Zt.to(r,{opacity:1,duration:.8,ease:"power4.out",stagger:.1})}},Ow={Setup(r,t){t.length>0&&t.forEach(e=>{MONO.Effects.elements[e.dataset.eid].mesh.material.uniforms.uAlpha.value=0}),Zt.set(r,{willChange:"transform",y:"20%",opacity:0})},Animate(r,t){return t.length>0&&t.forEach(e=>{Zt.to(MONO.Effects.elements[e.dataset.eid].mesh.material.uniforms.uAlpha,{duration:.8,ease:"power4.out",value:1})}),Zt.to(r,{y:"0%",opacity:1,duration:.8,ease:"power4.out",stagger:.1,onUpdate:MONO.Effects.updateElements,clearProps:"all"})}},Nw={Setup(r,t){Zt.set(r,{willChange:"transform",y:"100%",opacity:0})},Animate(r,t){return Zt.to(r,{y:"0%",opacity:1,duration:.8,ease:"power4.out",stagger:.1})}},Bw={Setup(r,t){Zt.set(r,{willChange:"transform",x:"10%",opacity:0})},Animate(r,t){Zt.to(r,{x:"0%",opacity:1,duration:1,ease:"power4.out",stagger:.1,onUpdate:MONO.Effects.updateElements})}},zw={Setup(r,t){Zt.set(r,{willChange:"transform",scaleX:0,transformOrigin:"left"})},Animate(r,t){Zt.to(r,{scaleX:1,duration:1.5,ease:"power4.out",stagger:.1,onUpdate:MONO.Effects.updateElements})}},Vw={Setup(r){let t=new ea(r,{type:"lines",linesClass:"line"});for(let e of t.lines)e.innerHTML=`<div class="line-inner">${e.innerHTML}</div>`,Zt.set(e,{overflow:"hidden"}),Zt.set(e.firstChild,{willChange:"transform",opacity:0,y:"50px"})},Animate(r){let t=[];if(r.length)for(let e of r)t.push(...e.querySelectorAll(".line-inner"));else t.push(...r.querySelectorAll(".line-inner"));return Zt.to(t,{y:"0",duration:.8,opacity:1,stagger:.1,ease:"power4.out"})}},Uw={Setup(r){let t=new ea(r,{type:"words",wordsClass:"word"});for(let e of t.words)e.innerHTML=`<div class="word-inner">${e.innerHTML}</div>`,Zt.set(e,{overflow:"hidden"}),Zt.set(e.firstChild,{willChange:"transform",opacity:0,y:"50px"})},Animate(r){let t=[];if(r.length)for(let e of r)t.push(...e.querySelectorAll(".word-inner"));else t.push(...r.querySelectorAll(".word-inner"));return Zt.to(t,{y:"0",duration:.8,opacity:1,stagger:.1,ease:"power4.out"})}};var qf=class{constructor(t){this.canvas=t,this.setupReveal()}setupReveal(){this.app=new Es({transparent:!0,autoResize:!0,antialias:!0,view:this.canvas}),this.parent=this.app.view.parentNode,this.width=this.parent.clientWidth,this.height=this.parent.clientHeight,this.graphics=new jn,this.shape={point1:{x:0,y:-this.height},point2:{x:this.width,y:-this.height},point3:{x:this.width,y:0},point4:{x:0,y:0,x1:this.width*.5,y1:0,x2:this.width*.25,y2:0}},this.app.stage.addChild(this.graphics),this.onResize(),MONO.View.add(this.onResize),MONO.Ticker.add(this.onFrame)}reveal=()=>Zt.timeline().to(this.shape.point3,{duration:.5,y:this.height,ease:"power1.inOut"}).to(this.shape.point4,{duration:.7,y:this.height,ease:"power1.inOut"},"-=0.5").to(this.shape.point4,{duration:.5,y1:this.height,ease:"power1.inOut"},"-=0.7").to(this.shape.point4,{duration:.8,y2:this.height,ease:"power1.inOut"},"-=0.7");onFrame=()=>{this.graphics.clear(),this.graphics.lineStyle(0),this.graphics.beginFill(1644825,1),this.graphics.moveTo(this.shape.point1.x,this.shape.point1.y),this.graphics.lineTo(this.shape.point2.x,this.shape.point2.y),this.graphics.lineTo(this.shape.point3.x,this.shape.point3.y),this.graphics.bezierCurveTo(this.shape.point4.x1,this.shape.point4.y1,this.shape.point4.x2,this.shape.point4.y2,this.shape.point4.x,this.shape.point4.y),this.graphics.endFill()};onResize=()=>{this.width=this.parent.clientWidth,this.height=this.parent.clientHeight,this.app.renderer.resize(this.width,this.height)};destroy(){MONO.View.remove(this.onResize),MONO.Ticker.remove(this.onFrame),this.app.destroy()}};var Yf=class{constructor(){this._r=0,this._fullR=0,this._alpha=1,this._containerRotation=0,this._backgroundScale={x:1,y:1},this._backgroundSize={w:0,h:0},this._containerSize={w:0,h:0},this.background=Tr.from(`${MONO.Assets}/images/home/home-revolve-background.jpg`),this.background.width=window.innerWidth,this.background.height=window.innerHeight,this.background.anchor.set(.5,.5),this._container=new ei,this._container.addChild(this.background),this._circle=new jn,this._container.mask=this._circle}get containerRotation(){return this._containerRotation}set containerRotation(t){this._containerRotation=t}get r(){return this._r}set r(t){this._r=t}get fullR(){return this._fullR}set fullR(t){this._fullR=t}get alpha(){return this._alpha}set alpha(t){this._alpha=t}get backgroundScale(){return this._backgroundScale}set backgroundScale(t){this._backgroundScale=t,this.background.scale.set(this._backgroundScale.x,this._backgroundScale.y)}get backgroundSize(){return this._backgroundSize}set backgroundSize(t){this.background.width=t.w,this.background.height=t.h,this._backgroundSize=t}get container(){return this._container}set container(t){this._container=t}get circle(){return this._circle}set circle(t){this._circle=t}get containerSize(){return this._containerSize}set containerSize(t){this._container.width=t.w,this._container.height=t.h,this._containerSize=t}setPosition(t,e){this.container.position.set(t/2,e/2),this.circle.position.set(t/2,e/2)}redraw(t){this.circle.clear(),this.circle.lineStyle(0),this.circle.beginFill(14561865,1),this.circle.drawCircle(0,0,this._r),this.circle.endFill(),this.container.alpha=this._alpha,this.container.rotation=this._containerRotation,this.container.scale.set(1,1)}resize(t,e){this.setPosition(t,e),this.containerSize={w:t,h:e},this.backgroundScale={x:-1,y:1},this.fullR=Math.sqrt(Math.pow(window.innerWidth,2)+Math.pow(window.innerHeight+150,2))/2}};var jf=class{constructor(){this._containerRotation=0,this._containerRotation=-3,this.containerRotationOffset=0,this._containerPosition={x:0,y:0},this.containerPositionOffset={x:0,y:0},this._glowContainerScale={x:-1.5,y:1.5},this._glowContainerAlpha=0,this.borderWidth=10,this.background=Tr.from(`${MONO.Assets}/images/home/home-revolve-dark-oval-border.png`),this.background.anchor.set(.5,.5),this.glowContainer=new ei,this.glow=Tr.from(`${MONO.Assets}/images/home/home-revolve-dark-oval-glow.jpg`),this.glowContainer.addChild(this.glow),this.circle=new jn,this.circle.addChild(this.background),this.circleInner=new jn,this.circle.addChild(this.circleInner),this.container=new ei,this.container.addChild(this.circle),this._mainContainer=new ei,this._mainContainer.addChild(this.glowContainer),this._mainContainer.addChild(this.container),this._mouseActive=!1}get containerRotation(){return this._containerRotation}set containerRotation(t){this._containerRotation=t}get containerPosition(){return this._containerPosition}set containerPosition(t){this._mainContainer.position.set(t.x,t.y),this._containerPosition=t}get glowContainerAlpha(){return this._glowContainerAlpha}set glowContainerAlpha(t){this._glowContainerAlpha=t}get glowContainerScale(){return this._glowContainerScale}set glowContainerScale(t){this._glowContainerScale=t}get mainContainer(){return this._mainContainer}set mainContainer(t){this._mainContainer=t}get mouseActive(){return this._mouseActive}set mouseActive(t){this._mouseActive=t}redraw(t){this.circle.clear(),this.circle.lineStyle(0),this.circle.drawCircle(0,0,t),this.circle.endFill(),this.container.rotation=this.containerRotation+this.containerRotationOffset,this.container.position.set(0+this.containerPositionOffset.x,0+this.containerPositionOffset.y),this.background.width=2*t,this.background.height=2*t,this.circleInner.clear(),this.circleInner.lineStyle(0),this.circleInner.beginFill(2039583,1),this.circleInner.drawCircle(0,0,t-this.borderWidth),this.circleInner.endFill(),this.glow.width=2*t,this.glow.height=2*t,this.glowContainer.width=this.glow.width,this.glowContainer.height=this.glow.height,this.glowContainer.alpha=this.glowContainerAlpha,this.glow.anchor.set(1,1),this.glowContainer.position.set(.5*this.glow.width,.5*this.glow.height),this.glowContainer.scale.set(this.glowContainerScale.x,this.glowContainerScale.y)}resize(t,e){switch(MONO.View.mediaQuery){case"phone":this.borderWidth=5;break;case"tablet-portrait":case"tablet-landscape":this.borderWidth=7.5;break;case"desktop":case"desktop-big":this.borderWidth=10;break}this.container.scale.set(1,1),this.containerPosition={x:t/2,y:e/2}}tweenCirclePositionAndRotationTo(t,e){this.mouseActive&&(Zt.to(this.containerPositionOffset,{duration:e,x:t.x*40}),Zt.to(this,{duration:e,containerRotationOffset:-t.x}),Zt.to(this.glow,{duration:e,x:-t.x*10,y:-t.y*10}))}};var Zf=class{constructor(t){this.tl=Zt.timeline({paused:!0}),this.mouse={x:0,y:0},this.states=[!1,!1,!1,!1],this.oldStates=[!1,!1,!1,!1],this.revolveContentVisible=!0}update=t=>{this.revolveScrollButton=t.revolveScrollButton,this.revolveIntroWords=t.revolveIntroWords,this.revolveContentLine1=t.revolveContentLine1,this.revolveContentLine2=t.revolveContentLine2,this.cl=t.cl,this.cd=t.cd,this.revolveMoon=t.revolveMoon,this.revolveContentContainer=t.revolveContentContainer,this.revolveCTA=t.revolveCTA,this.mouse=t.mouse,this.tl.clear().addLabel("Start").to(this.revolveScrollButton,{duration:.5,opacity:0}).addLabel("Scroll").to(this.revolveIntroWords,{duration:1,opacity:0,yPercent:-80,ease:"power3.inOut",stagger:.1}).addLabel("Intro").from(this.revolveContentLine1,{duration:1,opacity:0,yPercent:100,ease:"power3.inOut",stagger:.1},"Intro -=0.5").addLabel("Content: Line 1").from(this.revolveContentLine2,{duration:1,opacity:0,yPercent:100,ease:"power3.inOut",stagger:.1}).to("header .backdrop",{duration:1,opacity:0},"-=1").to(this.cl,{duration:1,alpha:0},"-=1").to(this.cd,{duration:1,containerRotation:0,onComplete:this.onCdContainerRotationComplete.bind(this)},"-=1").to(this.revolveMoon,{duration:1,className:"+=shifted"},"-=1").to("#revolve__content",{duration:1.5,className:"+=shifted",ease:"power3.ease"},"Content: Line 1").from(this.revolveCTA,{duration:1,opacity:0,yPercent:80,ease:"power3.inOut"},"Content: Line 1+=0.5").fromTo(this.cd.glowContainerScale,{x:0,y:0},{duration:1,x:1.5,y:1.5},"-=0.5").to(this.cd,{duration:1,glowContainerAlpha:1,onReverseComplete:this.onCdGlowContainerAlphaReverseComplete.bind(this)},"-=0.25").addLabel("Content: Line 2")};hideRevolveContent(){this.revolveContentVisible&&(Zt.killTweensOf("#revolve__content > .container"),Zt.to("#revolve__content > .container",{duration:.2,opacity:0}),this.revolveContentVisible=!1)}showRevolveContent(){this.revolveContentVisible||(Zt.killTweensOf("#revolve__content > .container"),Zt.set("#revolve__content > .container",{opacity:1}),this.revolveContentVisible=!0)}setProgress(t){t<.2?this.states=[!0,!1,!1,!1]:t>=.2&&t<.4?this.states=[!1,!0,!1,!1]:t>=.4&&t<.6?this.states=[!1,!1,!0,!1]:this.states=[!1,!1,!1,!0],this.states[0]&&!this.oldStates[0]?(this.tl.tweenTo("Start"),this.hideRevolveContent()):this.states[1]&&!this.oldStates[1]?(this.tl.tweenTo("Scroll"),this.hideRevolveContent()):this.states[2]&&!this.oldStates[2]?(this.tl.tweenTo("Content: Line 1"),this.showRevolveContent()):this.states[3]&&!this.oldStates[3]&&(this.tl.tweenTo("Content: Line 2"),this.showRevolveContent()),this.oldStates=this.states}onCdContainerRotationComplete(){this.cd.mouseActive=!0,this.cd.tweenCirclePositionAndRotationTo(this.mouse,.7)}onCdGlowContainerAlphaReverseComplete(){this.cd.tweenCirclePositionAndRotationTo({x:0,y:0},.7),this.cd.mouseActive=!1}};var $f=class{constructor(t){this.tl=Zt.timeline({paused:!0})}get progress(){return this.tl.progress()}set progress(t){this.tl.progress(t)}getTimelineTimeByProgress(t){return t*this.tl.duration()}setProgress(t){let e=this.getTimelineTimeByProgress(t);this.tl.kill(),this.tl.tweenTo(e)}update(t){this.cl=t.cl,this.moonR=t.moonR,this.tl.clear().addLabel("Scale").fromTo(this.cl,{duration:1,r:this.cl.fullR},{r:this.moonR,ease:"power3.out"}).fromTo(this.cl,{duration:1,containerRotation:0},{containerRotation:1.5,ease:"power3.inOut"},"Scale -=0.5").addLabel("End")}};xf.skipHello();var pD=Ol(),iv=class{constructor(){this.mouse={x:0,y:0},this.sectionElement=document.querySelector("header#homepage"),this.mobileNav=document.querySelector("nav.mobile"),this.fullNav=document.querySelector("nav.full"),this.heroElement=this.sectionElement.querySelector(".hero"),this.heroHeading=this.sectionElement.querySelector(".hero h1"),this.fakeBg=this.sectionElement.querySelector(".fake-bg"),this.waveContainer=this.sectionElement.querySelector(".hero .wave"),this.heroCanvas=this.sectionElement.querySelector(".hero canvas#hero-pixi"),this.revolveSection=document.querySelector("#revolve"),this.revolveMoon=document.querySelector("#revolve__moon"),this.revolveIntroContent=this.sectionElement.querySelector("#revolve__intro"),this.revolveIntroHeading=this.revolveIntroContent.querySelector("h2"),this.revolveIntroHeadingText=new ea(this.revolveIntroHeading,{type:"words",wordsClass:"word"}),this.revolveScrollButton=document.querySelector("#revolve__intro .scrolldown"),this.revolveContent=document.querySelector("#revolve__content");let t=document.querySelector("#revolve__content .container"),e=document.querySelector("#revolve__content h2 strong:first-of-type");new ea(document.querySelector("#revolve__content h2 strong:first-of-type"),{type:"words"}).words.forEach(u=>{let d=document.createElement("div");d.innerHTML=u.innerHTML,u.innerHTML="",u.className="wrapper",u.prepend(d)});let n=document.querySelector("#revolve__content h2 strong:last-of-type");new ea(document.querySelector("#revolve__content h2 strong:last-of-type"),{type:"words"}).words.forEach(u=>{let d=document.createElement("div");d.innerHTML=u.innerHTML,u.innerHTML="",u.className="wrapper",u.prepend(d)}),this.revolveCTA=document.querySelector("#revolve__content a.cta");let a=this.revolveIntroHeadingText.words.reverse(),o=e.querySelectorAll(".wrapper > div"),h=n.querySelectorAll(".wrapper > div");this.createMoon(),this.contentTimeline=new Zf,this.contentTimeline.update({revolveScrollButton:this.revolveScrollButton,revolveIntroWords:a,revolveContentLine1:o,revolveContentLine2:h,cl:this.cl,cd:this.cd,revolveMoon:this.revolveMoon,revolveContentContainer:t,revolveCTA:this.revolveCTA,mouse:this.mouse}),this.ovalScaleTimeline=new $f,this.ovalScaleTimeline.update({cl:this.cl,moonR:this.moonR}),this.setupReveal(),window.addEventListener("mousemove",this.onMouseMove,!1),this.revolveScrollButton.addEventListener("click",()=>{window.scrollTo({top:document.querySelector("#revolve__intro").offsetHeight,left:0,behavior:"smooth"})}),this.onResize(),MONO.Scroll.add(this.onScroll),MONO.View.add(this.onResize),MONO.Ticker.add(this.animationFrame)}setupReveal(){Wf("words-up",this.heroHeading),this.secondWave=pD.loadAnimation({container:this.waveContainer,renderer:"canvas",loop:!0,autoplay:!1,path:MONO.Assets+"animations/hero-wave-lottie.json",rendererSettings:{preserveAspectRatio:"none"}}),Zt.set(this.revolveScrollButton,{opacity:0}),MONO.State.firstLoad===!0&&(Zt.set(this.fakeBg,{opacity:0}),Zt.set(this.waveContainer,{opacity:0}),this.heroBg=new qf(this.heroCanvas),Zt.set(this.heroElement,{backgroundColor:"transparent"}),Zt.set([this.mobileNav,this.fullNav],{opacity:0}))}async reveal(){MONO.State.firstLoad===!0&&(await this.heroBg.reveal(),Zt.set(this.fakeBg,{opacity:1}),Zt.set(this.waveContainer,{opacity:1}),Zt.set(this.heroCanvas,{display:"none"}),Zt.to([this.mobileNav,this.fullNav],{opacity:1,duration:.5,ease:"power3.out",clearProps:"all"})),this.secondWave.play(),await Xf("words-up",this.heroHeading),this.revealRevolveHeader()}revealRevolveHeader=()=>{Zt.to([...this.revolveIntroHeadingText.words,this.revolveScrollButton],{opacity:1,y:0,duration:.5,ease:"power3.out",stagger:.1})};onMouseMove=t=>{(MONO.View.mediaQuery=="desktop"||MONO.View.mediaQuery=="desktop-big")&&(this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=t.clientY/window.innerHeight*2-1,this.contentTimeline.mouse=this.mouse,this.cd.tweenCirclePositionAndRotationTo(this.mouse,.1))};animationFrame=()=>{this.cl.backgroundSize={w:window.innerWidth,h:window.innerHeight+150},this.cl.redraw(this.cl.r),this.cd.redraw(this.cl.r)};createMoon(){this.app=new Es({transparent:!0,autoResize:!0,antialias:!0}),this.app.renderer.plugins.interaction.autoPreventDefault=!1,this.app.renderer.view.style.touchAction="auto",this.revolveMoon.appendChild(this.app.view),this.cd=new jf,this.app.stage.addChild(this.cd.mainContainer),this.cl=new Yf,this.app.stage.addChild(this.cl.container),this.app.stage.addChild(this.cl.circle)}resizeMoonScaleTimeline(){switch(MONO.View.mediaQuery){case"phone":this.moonR=window.innerWidth/2-50;break;case"tablet-portrait":case"tablet-landscape":this.moonR=238;break;case"desktop":this.moonR=279;break;case"desktop-big":this.moonR=328;break}let t=this.ovalScaleTimeline.progress;this.ovalScaleTimeline.update({cl:this.cl,moonR:this.moonR}),this.ovalScaleTimeline.setProgress(t)}onScroll=()=>{this.moveIntro();let t=this.getScrollPercentNormalized();this.contentTimeline.setProgress(t),this.ovalScaleTimeline.setProgress(t)};getScrollPercentNormalized(){return window.scrollY/(this.revolveSection.offsetTop+this.revolveSection.offsetHeight-window.innerHeight)}moveIntro(){let t=document.querySelector("#revolve__intro .container");if(t&&window.scrollY>=0){let i=100*window.scrollY/document.querySelector("#revolve").clientHeight*document.documentElement.clientHeight/100;Zt.to(t,{duration:.2,y:i*-1.5})}}onResize=()=>{let t=this.app.view.parentNode.clientWidth,e=this.app.view.parentNode.clientHeight;this.app.renderer.resize(t,e),this.cd.resize(t,e),this.cl.resize(t,e),this.resizeMoonScaleTimeline()};destroy(){MONO.View.remove(this.onResize),MONO.Ticker.remove(this.animationFrame),this.heroBg&&this.heroBg.destroy(),MONO.Scroll.remove(this.onScroll),window.removeEventListener("mousemove",this.onMouseMove,!1)}};var rv=class{constructor(t){this.sectionElement=document.querySelector("#home__capabilities"),this.capabilities=document.querySelector(".capabilities__list"),this.capabilitiesItems=this.sectionElement.querySelectorAll(".capabilities__list a"),this.backgrounds=this.sectionElement.querySelectorAll(".background__images img"),this.defaultBackground=this.sectionElement.querySelector("img.default"),this.capabilitiesItems.forEach((e,i)=>{e.addEventListener("mouseover",()=>{this.backgrounds[i].classList.add("active")}),e.addEventListener("mouseout",()=>{this.backgrounds[i].classList.remove("active")}),e.addEventListener("click",()=>{window.capability=e.dataset.capability})}),this.capabilities.addEventListener("mouseover",()=>{this.defaultBackground&&this.defaultBackground.classList.add("hidden")}),this.capabilities.addEventListener("mouseout",()=>{this.defaultBackground&&this.defaultBackground.classList.remove("hidden")})}};var nv=class{constructor(t){let e=document.querySelectorAll("#home__partnerships .testimonial"),i=document.querySelector("#home__partnerships .partnership__testimonials"),n=document.querySelector("#home__partnerships .partnership__testimonials .testimonials__container"),s=document.querySelectorAll("#home__partnerships .pagination ul li"),a=0,o=this;function h(){o.maxHeight=0,e.forEach(E=>{E.clientHeight>o.maxHeight&&(o.maxHeight=E.clientHeight)}),n.style.height=o.maxHeight+"px"}h();let u=0,d=null,g=!1;function f(E){return E.changedTouches?E.changedTouches[0]:E}function m(E){u=0,d=f(E).clientX}function _(E){u=f(E).clientX-d,Math.abs(u)>30&&E.preventDefault()}function v(E){Math.abs(u)>30&&(u<0?a<e.length-1&&b("next"):a>0&&b("prev"))}function b(E){switch(E){case"next":a<e.length-1&&a++;break;case"prev":a>0&&a--;break}a<0?a=e.length-1:a>e.length-1&&(a=0);let w=document.querySelectorAll(".partnership__testimonials .current-number");Zt.to(w,{duration:.2,opacity:0,y:5,onComplete:()=>{w.forEach(N=>{(a+1).toString().length<2?N.innerHTML=("0"+(a+1)).slice(-2):N.innerHTML=a+1}),Zt.to(w,{duration:.2,opacity:1,y:0})}});let A=document.querySelector(".partnership__testimonials .arrow--left"),R=document.querySelector(".partnership__testimonials .arrow--right");a==0?A.classList.add("inactive"):A.classList.remove("inactive"),a>e.length-2?R.classList.add("inactive"):R.classList.remove("inactive"),s.forEach(N=>{N.classList.remove("current")}),e.forEach(N=>{N.classList.remove("current")}),Zt.to(n,{duration:.2,height:o.maxHeight,onComplete:function(){e[a].classList.add("current")}})}let C=document.querySelector(".partnership__testimonials .arrow--left"),M=document.querySelector(".partnership__testimonials .arrow--right");i.addEventListener("touchstart",m,{passive:!0},!1),i.addEventListener("touchmove",_,{passive:!0},!1),i.addEventListener("touchend",v,!1),C.addEventListener("click",function(){C.classList.contains("inactive")||b("prev")},{passive:!0}),M.addEventListener("click",function(){M.classList.contains("inactive")||b("next")},{passive:!0}),window.addEventListener("resize",h)}};var Ve=Vi(Yw()),sv=class{constructor(t){this.settings=t,this.initAll()}initAll(){let t=this.settings.section,e=this.settings.canvasContainer,i=document.querySelector(e),n=document.querySelector(e+" canvas"),s=document.querySelector(t),a=document.querySelector(t+" .container"),o,h=this.settings.mobileBreakpoint;s.offsetWidth<=h?o=!0:o=!1;let u=this.settings.containerMaxWidth,d=this.settings.canvasHeight,g=[],f=this.settings.lineSegments,m=this.settings.lineAmplitude,_=this.settings.lineAmplitudeEdges,v=[],b=[],C=0,M=this.settings.citySize,E=this.settings.citySizeHover;Ve.default.setup(n),Ve.default.view.viewSize.width=s.offsetWidth,Ve.default.view.viewSize.height=d;let w=new Ve.default.Path({strokeColor:"rgba(255,255,255,0.2)",strokeWidth:2});for(let Lt=0;Lt<=f-1;Lt++)g[Lt]=new Ve.default.Point(Lt,50),w.add(g[Lt]);let A=w.clone();A.strokeColor="white";function R(){for(let Lt=0;Lt<=f-1;Lt++)Lt<f?(w.segments[Lt].point.x=Lt*(Ve.default.view.viewSize.width/(f-1)),A.segments[Lt].point.x=Lt*(Ve.default.view.viewSize.width/(f-1))):(w.segments[Lt].point.x=Ve.default.view.viewSize.width,A.segments[Lt].point.x=Ve.default.view.viewSize.width);w.smooth({type:"continuous"}),A.smooth({type:"continuous"})}function N(){for(let te=0;te<=f-1;te++)if(te!=0&&te!=f-1){if(v[te]=Zt.timeline({delay:.75*te,onComplete:function(){this.restart()}}),te==1||te==f-2)var Lt=_;else var Lt=m;v[te].to([w.segments[te].point,A.segments[te].point],1.5,{y:"-="+Lt,ease:"power1.inOut"}),v[te].to([w.segments[te].point,A.segments[te].point],1.5,{y:"+="+Lt,ease:"power1.inOut"})}}let D=document.querySelectorAll(".slide");function X(){for(let Lt=0;Lt<D.length;Lt++){D[Lt].style.transform="translate3d("+100*Lt+"%, 0, 0)";let te=new Ve.default.Rectangle(new Ve.default.Point(20,20),new Ve.default.Size(0,0)),ge=new Ve.default.Shape.Ellipse(te);b[Lt]={name:D[Lt].getAttribute("data-city"),point:ge},b[Lt].point.fillColor="white"}}X();function at(Lt){for(let te=0;te<Q.length;te++)te==C?Q[te].classList.add("current"):Q[te].classList.remove("current");Zt.to(document.querySelector(".slider"),{duration:.8,xPercent:-100*C,ease:"power3.inOut"}),Lt&&Zt.to(i,{duration:.7,x:0-a.offsetWidth/2*C,ease:"power3.inOut"},.2)}let ft=new Ve.default.Rectangle(new Ve.default.Point(0,0),new Ve.default.Size(0,d)),gt=new Ve.default.Shape.Rectangle(ft),ut=new Ve.default.Group(gt,A);if(ut.clipped=!0,o)var xt=new Ve.default.Rectangle(new Ve.default.Point(0,0),new Ve.default.Size(0,100));else var xt=new Ve.default.Rectangle(new Ve.default.Point(0,0),new Ve.default.Size(0,100));let nt=new Ve.default.Shape.Rectangle(xt);nt.fillColor="white";let it=new Ve.default.Group(nt,w);it.clipped=!0;let tt=0;if(o)tt=s.offsetWidth/2;else{let Lt=s.offsetWidth-a.offsetWidth;tt=a.offsetWidth/(b.length+1)/2+Lt/2}function W(){if(s.offsetWidth<=u)if(o)for(var Lt=0;Lt<=b.length-1;Lt++)b[Lt].point.position=w.getPointAt(a.offsetWidth/2+a.offsetWidth/2*Lt);else for(var Lt=0;Lt<=b.length-1;Lt++)Lt==0?b[Lt].point.position=w.getPointAt(a.getBoundingClientRect().left+a.offsetWidth/(b.length+1)/2+(a.offsetWidth/b.length-1)*Lt):b[Lt].point.position=w.getPointAt(a.getBoundingClientRect().left+a.offsetWidth/(b.length+1)/2+a.offsetWidth/b.length*Lt);else{let te=s.offsetWidth-a.offsetWidth;for(var Lt=0;Lt<=b.length-1;Lt++)Lt==0?b[Lt].point.position=w.getPointAt(a.offsetWidth/(b.length+1)/2+te/2):b[Lt].point.position=w.getPointAt(a.offsetWidth/(b.length+1)/2+(a.offsetWidth/b.length-1)*Lt+te/2)}}Ve.default.view.onFrame=function(Lt){W(),R()};for(let Lt=0;Lt<b.length;Lt++)i.insertAdjacentHTML("beforeend",'<div class="city" data-index="'+Lt+'">'+b[Lt].name+"</div>");var Q=document.querySelectorAll(t+" .city");Q[0].classList.add("current");function ot(){if(s.offsetWidth<=u)if(o)for(var Lt=0;Lt<b.length;Lt++)Q[Lt].style.left=a.offsetWidth/2+a.offsetWidth/2*Lt+"px";else for(var Lt=0;Lt<b.length;Lt++)Q[Lt].style.left=a.getBoundingClientRect().left+a.offsetWidth/(b.length+1)/2+(a.offsetWidth/b.length-1)*Lt+"px";else for(var Lt=0;Lt<b.length;Lt++)Q[Lt].style.left=a.getBoundingClientRect().left+a.offsetWidth/(b.length+1)/2+(a.offsetWidth/b.length-1)*Lt+"px"}ot(),Q.forEach(Lt=>{Lt.addEventListener("click",function(){o||(C=this.getAttribute("data-index"),Zt.to(gt.position,{duration:1,x:b[C].point.position.x,ease:"power3.inOut"}),at(!1))}),Lt.addEventListener("mouseover",function(){o||Zt.to(b[this.getAttribute("data-index")].point.size,{duration:.2,width:E,height:E,ease:"power3.inOut"})}),Lt.addEventListener("mouseout",function(){o||Zt.to(b[this.getAttribute("data-index")].point.size,{duration:.2,width:M,height:M,ease:"power3.inOut"})})});let ct=0,Tt=null,Rt=!1;function Pt(Lt){return Lt.changedTouches?Lt.changedTouches[0]:Lt}function Nt(Lt){o&&(Tt=Pt(Lt).clientX,i.classList.toggle("smooth",!(Rt=!0)))}function At(Lt){Rt&&o&&(ct=-a.offsetWidth/b.length*2*C+(Pt(Lt).clientX-Tt),ct<=0&&(i.style.transform="matrix(1, 0, 0, 1, "+ct+", 0)",gt.position.x=-1*ct+s.offsetWidth/2),ct<=-(a.offsetWidth/2)*(b.length-1)&&(i.style.transform="matrix(1, 0, 0, 1, "+-(a.offsetWidth/2)*(b.length-1)+", 0)",gt.position.x=a.offsetWidth/2*b.length))}function Qt(Lt){if(Rt&&o){if(ct<=0&&ct>-(a.offsetWidth/2)*(b.length-1)){let te=Math.abs(Math.round(ct/(a.offsetWidth/2)));te!=C&&(C=te,at(!1)),ct=-a.offsetWidth/b.length*2*C,i.style.transform="matrix(1, 0, 0, 1, "+ct+", 0)"}else ct>0?(C=0,at(!1)):ct<-(a.offsetWidth/2)*(b.length-1)&&(C=b.length-1,at(!1));Zt.to(gt.position,{duration:.5,x:b[C].point.position.x,ease:"power3.out"}),i.classList.toggle("smooth",!(Rt=!1))}}s.addEventListener("touchstart",Nt,{passive:!0},!1),s.addEventListener("touchmove",At,{passive:!0},!1),s.addEventListener("touchend",Qt,{passive:!0},!1);let Vt=document.querySelector("#wave__container"),Yt=!1,Xt=0;new IntersectionObserver(Lt=>{Lt.forEach(te=>{if(te.intersectionRatio>0&&Yt==!1){let ge=Zt.timeline();N(),qt(ge),Yt=!0}})}).observe(Vt);function qt(Lt){s.offsetWidth<=h?Xt=Ve.default.view.viewSize.width:Xt=s.offsetWidth*2,Lt.add(Zt.to(nt.size,{duration:1.5,width:Xt,ease:"power3.inOut"})),Lt.add("cities"),b.forEach(function(te,ge){Lt.add(Zt.to(te.point.size,{duration:.8,width:M,height:M,ease:"power3.inOut"},.2),"cities+="+.2*ge)}),Lt.add(Zt.to(document.querySelectorAll(".city"),{duration:.8,stagger:.2,opacity:1,ease:"power3.inOut"}),"cities"),Lt.add("cursor"),Lt.add(Zt.to(gt.position,{duration:1.5,x:tt,ease:"power3.inOut"}),"cities"),Lt.add(Zt.to(gt.size,{duration:1.5,width:100,ease:"power3.inOut"}),"cities")}window.addEventListener("resize",Ut);function Ut(){s.offsetWidth<=h?(o=!0,i.style.transform="matrix(1, 0, 0, 1, -"+a.offsetWidth/2*C+", 0)",Ve.default.view.viewSize.width=s.offsetWidth/2*(b.length+1),nt.position.x=Ve.default.view.viewSize.width/2,Yt&&(nt.size.width=Ve.default.view.viewSize.width)):(o=!1,i.style.transform="matrix(1, 0, 0, 1, 0, 0)",Ve.default.view.viewSize.width=s.offsetWidth,nt.position.x=s.offsetWidth/2,Yt&&(nt.size.width=s.offsetWidth*2)),gt.position.x=b[C].point.position.x,ot()}Ut()}};var av=class{constructor(t){this.transitionEvent=this.whichTransitionEvent(),this._C=document.querySelector(".home__news__container"),this.N=this._C.children.length,this._C.style.setProperty("--n",this.N),this.x0=null,this.y0=null,this.locked=!1,this.i=0,this.w=window.innerWidth,this.resize(),this.eventListeners()}hideGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t-e&&n<t&&i.classList.remove("ghost")})}showGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t-e&&n<t&&i.classList.add("ghost")})}hideGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t+e&&n<t+2*e&&i.classList.remove("ghost")})}showGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t+e&&n<t+2*e&&i.classList.add("ghost")})}setGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t&&n<t+e&&i.classList.add("ghost"),n>=t-e&&n<t&&i.classList.remove("ghost")})}setGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=t&&n<t+e&&i.classList.add("ghost"),n>=t+e&&n<t+2*e&&i.classList.remove("ghost")})}setGhostCards(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--p")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--i"));document.querySelectorAll("#home__news .home__news__container a").forEach(i=>{i.classList.add("ghost")}),document.querySelectorAll("#home__news .home__news__container a").forEach((i,n)=>{n>=e&&n<e+t&&i.classList.remove("ghost")})}whichTransitionEvent(){let t,e=document.createElement("fake-element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(e.style[t]!==void 0)return i[t]}unify(t){return t.changedTouches?t.changedTouches[0]:t}drag(t){let e=this.unify(t).clientX-this.x0,i=this.unify(t).clientY-this.y0;if(e>5||e<-5)t.preventDefault(),this.locked&&(this.x0||this.x0===0)&&this._C.style.setProperty("--tx",`${Math.round(this.unify(t).clientX-this.x0)}px`);else if(i>5||i<-5)return!0}lock(t){document.querySelector("#home__news .home__news__container").style.transition="all 0s ease 0s",this.x0=this.unify(t).clientX,this.y0=this.unify(t).clientY,this._C.classList.toggle("smooth",!(this.locked=!0))}move(t){if(document.querySelector("#home__news .home__news__container").style.transition="transform .5s ease-out",this.locked){let e=this.unify(t).clientX-this.x0,i=Math.sign(e),n=+(i*e/this.w).toFixed(2),s=getComputedStyle(this._C).getPropertyValue("--p");(this.i>0||i<0)&&(this.i<this.N-1||i>0)&&n>.1&&(e<0?this.setGhostCardsRight():e>0&&this.setGhostCardsLeft(),this._C.style.setProperty("--i",this.i-=i*s),n=1-n),this._C.style.setProperty("--tx","0px"),this._C.style.setProperty("--f",n),this._C.classList.toggle("smooth",!(this.locked=!1)),this.x0=null,this.setSliderOffset()}}setSliderOffset(){let t=parseInt(getComputedStyle(document.querySelector("#home__news .home__news__container a")).marginRight.replace("px",""));this.i>0?window.innerWidth<600&&(document.querySelector("#home__news .home__news__wrapper").style.transform=`translateX(${t/2}px)`):document.querySelector("#home__news .home__news__wrapper").style.transform="translateX(0px)"}moveSlider(t){return new Promise(function(e,i){let n=this;function s(){n._C.removeEventListener(n.transitionEvent,s),e()}this._C.addEventListener(this.transitionEvent,s);let a=getComputedStyle(this._C).getPropertyValue("--p");this._C.style.setProperty("--i",this.i-=t*-a),this.setSliderOffset()}.bind(this))}getElementWidth(t){if(t){let e=getComputedStyle(t),i=t.clientWidth;return i-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i}}resize(){if(window.innerWidth!=this.windowWidth&&document.querySelector("#home__news")){this.windowWidth=window.innerWidth,this.w=window.innerWidth;let t=(this.getElementWidth(document.querySelector("#home__news"))-this.getElementWidth(document.querySelector("#home__news .container")))/2,e=parseInt(getComputedStyle(document.querySelector("#home__news .home__news__container a")).marginRight.replace("px",""));document.querySelector(".ghost-left").style.width=`${t-e}px`,window.innerWidth<1200?document.querySelector(".ghost-right").style.width=`${t}px`:document.querySelector(".ghost-right").style.width=`${t-e}px`,this._C.style.setProperty("--i",this.i=0),this.setGhostCards(),this.setMediumCardHeight(),document.querySelector("#home__news .home__news__wrapper").style.transform="translateX(0px)",document.querySelector("#home__news .arrow--left").classList.add("inactive"),document.querySelector("#home__news .arrow--right").classList.remove("inactive")}}setMediumCardHeight(){let t=document.querySelector("#home__news .home__news__container a:last-of-type"),e=document.querySelector("#home__news .home__news__container a:first-of-type img").clientHeight;t.style.height=`${e}px`}fadeOutGhostLeft(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-left"),{duration:.2,opacity:0,onComplete:()=>{t()}})})}fadeOutGhostRight(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-right"),{duration:.2,opacity:0,onComplete:()=>{t()}})})}hideGhosts(){return new Promise(function(t,e){Promise.all([this.fadeOutGhostLeft,this.fadeOutGhostRight]).then(function(i){document.querySelector(".ghost-left").style.display="none",document.querySelector(".ghost-right").style.display="none",t()})}.bind(this))}fadeInGhostLeft(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-left"),{duration:.2,opacity:.5,onComplete:()=>{t()}})})}fadeInGhostRight(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-right"),{duration:.2,opacity:.5,onComplete:()=>{t()}})})}isFirstPage(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));return t/e+1==1}isLastPage(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p")),i=Math.ceil(this.N/e);return t/e+1>=i}showGhosts(){this.isFirstPage()?document.querySelector("#home__news .arrow--left").classList.add("inactive"):(document.querySelector(".ghost-left").style.display="block",this.fadeInGhostLeft(),document.querySelector("#home__news .arrow--left").classList.remove("inactive")),this.isLastPage()?document.querySelector("#home__news .arrow--right").classList.add("inactive"):(document.querySelector(".ghost-right").style.display="block",this.fadeInGhostRight(),document.querySelector("#home__news .arrow--right").classList.remove("inactive"))}moveSlides(t){let e=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),i=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));this.hideGhosts().then(()=>{if(t<0)e>0&&(this.setGhostCardsLeft(),this.moveSlider(t).then(()=>{this.showGhosts()}));else{let n=Math.ceil(this.N/i);e/i+1<n&&(this.setGhostCardsRight(),this.moveSlider(t).then(()=>{this.showGhosts()}))}})}eventListeners(){this.windowWidth=window.innerWidth,window.addEventListener("resize",this.resize.bind(this)),this._C.addEventListener("touchstart",this.lock.bind(this),{passive:!0},!1),this._C.addEventListener("touchend",this.move.bind(this),{passive:!0},!1),this._C.addEventListener("touchmove",this.drag.bind(this),{passive:!0},!1),document.querySelector("#home__news .arrow--left").addEventListener("click",()=>{this.moveSlides(-1)}),document.querySelector("#home__news .arrow--right").addEventListener("click",()=>{this.moveSlides(1)}),document.querySelector("#home__news .ghost-left").addEventListener("click",()=>{this.moveSlides(-1)}),document.querySelector("#home__news .ghost-right").addEventListener("click",()=>{this.moveSlides(1)}),document.querySelector("#home__news .ghost-left").addEventListener("mouseenter",()=>{this.hideGhostCardsLeft()}),document.querySelector("#home__news .ghost-left").addEventListener("mouseleave",()=>{this.showGhostCardsLeft()}),document.querySelector("#home__news .ghost-right").addEventListener("mouseenter",()=>{this.hideGhostCardsRight()}),document.querySelector("#home__news .ghost-right").addEventListener("mouseleave",()=>{this.showGhostCardsRight()})}};var jw={namespace:"home",beforeEnter(r){this.homeHeader=new iv,this.homeCapabilities=new rv,this.homePartnerships=new nv,this.homeCities=new sv({canvasContainer:"#wave__container",section:"#home__cities",containerMaxWidth:1440,mobileBreakpoint:599,canvasHeight:100,lineSegments:12,lineAmplitude:25,lineAmplitudeEdges:5,citySize:4,citySizeHover:5}),this.homeNews=new av},afterEnter(r){this.homeHeader.reveal()},beforeLeave(r){this.homeHeader.destroy()},afterLeave(r){}};var ov=class{constructor(t){if(this.sectionElement=document.querySelector("#work__list"),this.categoryToggle=this.sectionElement.querySelector(".categories h4"),this.categoryToggleText=this.sectionElement.querySelector(".categories h4 i"),this.categoryListContainer=this.sectionElement.querySelector(".categories .categories__list"),this.categoryList=this.sectionElement.querySelector(".categories .categories__list ul"),this.categoryListItems=this.categoryList.querySelectorAll("li"),this.categoryListSize=this.categoryList.offsetHeight,this.selectedCategory=0,this.workGrid=this.sectionElement.querySelector("#work__list .work__grid"),this.listOpen=!1,this.isMobile=!1,this.onResize(),this.selected=this.getURLParameter("category"),this.selected){let e=!0;this.categoryListItems.forEach(i=>{i.classList.remove("active"),i.getAttribute("data-category")==this.selected&&(i.classList.add("active"),this.selectedCategory=this.selected,this.categoryToggleText.textContent=i.childNodes[1].textContent,e=!1)}),e==!0?this.categoryListItems.querySelector("li[data-category='0']").classList.add("active"):(this.workGrid.classList.add("selected"),this.filterWork())}else this.categoryListItems[0].classList.add("active");this.categoryToggle.addEventListener("click",this.toggleCategories),this.categoryListItems.forEach(e=>{e.addEventListener("click",()=>{this.selectCategory(e)})}),MONO.View.add(this.onResize)}toggleCategories=()=>{this.listOpen?(this.categoryToggle.parentElement.classList.remove("open"),Zt.to(this.categoryListContainer,{duration:.2,height:0,ease:"expo.out",onUpdate:MONO.Effects.updateElements}),this.listOpen=!1):(this.categoryToggle.parentElement.classList.add("open"),Zt.to(this.categoryListContainer,{duration:.2,height:this.categoryListSize,ease:"expo.out",onUpdate:MONO.Effects.updateElements}),Zt.from(this.categoryListItems,{duration:.5,opacity:0,stagger:.1}),this.listOpen=!0)};async selectCategory(t){this.categoryList.querySelector("li.active").classList.remove("active"),t.classList.add("active"),this.categoryToggleText.textContent=t.childNodes[1].textContent,this.selectedCategory=t.getAttribute("data-category"),this.isMobile===!0&&this.toggleCategories(),t==this.categoryListItems[0]?(this.workGrid.classList.remove("selected"),this.filterWork()):(this.workGrid.classList.add("selected"),this.filterWork()),MONO.Effects.updateElements(),MONO.Trigger.refresh()}filterWork(){let t=0;document.querySelectorAll(".work__grid a").forEach(e=>{let i=!1;e.classList.remove("odd");let n=e.getAttribute("data-categories").split(";");this.selectedCategory!=0?n.length>1?n.forEach(s=>{n.indexOf(this.selectedCategory.toString())>-1&&(i=!0)}):n.indexOf(this.selectedCategory.toString())>-1&&(i=!0):i=!0,i==!0?(t++,Math.abs(t%2)==1&&e.classList.add("odd"),e.setAttribute("data-show","true")):e.setAttribute("data-show","false")})}hideGrid(){return Zt.to([this.workGrid,MONO.Effects.container],{duration:.8,opacity:0,ease:"expo.out"})}showGrid(){Zt.to([this.workGrid,MONO.Effects.container],{duration:.8,opacity:1,ease:"expo.out"})}onResize=()=>{this.isMobile=window.innerWidth<1500,this.isMobile?(this.categoryListSize=this.categoryList.offsetHeight,this.listOpen?this.categoryListContainer.style.height=this.categoryListSize+"px":this.categoryListContainer.style.height="0px"):this.categoryListContainer.style.height="auto",MONO.Effects.updateElements()};destroy(){MONO.View.remove(this.onResize)}getURLParameter(t){let e=window.location.search;return new URLSearchParams(e).get(t)}};var Zw={namespace:"work",beforeEnter(r){this.workList=new ov},afterEnter(r){},beforeLeave(r){},afterLeave(r){}};var Ms=class{constructor(t){this.section=document.querySelector(t),this.container=this.section.querySelector(".clients-container"),this.clientsList=this.container.querySelector(".clients"),this.clientsCount=this.clientsList.children.length,this.currentClient=1,this.currentNumberLabel=this.container.querySelector(".page-info .current"),this.arrowLeft=this.container.querySelector(".page-info .left"),this.arrowRight=this.container.querySelector(".page-info .right"),this.arrowRight.addEventListener("click",()=>{this.moveDraggable("right")}),this.arrowLeft.addEventListener("click",()=>{this.moveDraggable("left")}),this.onResize(),MONO.View.add(this.onResize)}setupDraggable(){this.draggable=xs.create(this.clientsList,{type:"x",edgeResistance:.5,bounds:this.container,inertia:!0,snap:t=>Math.round(t/this.clientWidth)*this.clientWidth,onDragEnd:()=>{this.setCurrentClient(),this.handleControls()}}),this.currentClient=1,this.handleControls()}moveDraggable(t){t==="right"?this.currentClient++:this.currentClient--,Zt.to(this.clientsList,{x:-this.clientWidth*(this.currentClient-1),duration:.5,ease:"power2.inOut",onStart:()=>{this.handleControls()}})}setCurrentClient=()=>{this.currentClient=Math.round(-this.draggable[0].endX/this.clientsList.offsetWidth*this.clientsCount)+1};handleControls=()=>{this.currentNumberLabel.innerText=this.currentClient,this.arrowLeft.disabled=this.currentClient===1,this.arrowRight.disabled=this.currentClient===this.clientsCount};onResize=()=>{window.innerWidth<600?(this.draggable?Zt.set(this.clientsList,{x:-this.clientWidth*(this.currentClient-1)}):this.setupDraggable(),this.clientWidth=MONO.View.width-40):this.draggable&&(this.draggable[0].kill(),this.draggable=null,Zt.set(this.clientsList,{clearProps:"all"}))};destroy(){MONO.View.remove(this.onResize)}};var lv=Vi(Ol());Zt.registerPlugin(xs,rf);var hv=class{constructor(t){let e=document.querySelector("#badge");lv.default.loadAnimation({container:e,renderer:"svg",loop:!0,autoplay:!0,path:MONO.Assets+"animations/about/career-badge.json"}),document.querySelectorAll("#about__team-culture .member .photo").forEach(s=>{let a=s.querySelector(".wave"),o=lv.default.loadAnimation({name:a,container:a,renderer:"svg",loop:!1,autoplay:!1,path:MONO.Assets+"animations/about/team-member-wave.json"}),h=!1;s.addEventListener("mouseenter",()=>{h=!0;let g=s.getAttribute("data-hovercolor");s.style.backgroundColor=g}),s.addEventListener("mouseleave",()=>{h=!1,s.style.backgroundColor="#cfdee5"}),s.addEventListener("mouseenter",u);function u(){s.removeEventListener("mouseenter",u),o.playSegments([6,85],!0)}function d(){s.removeEventListener("mouseleave",d),o.playSegments([91,156],!0)}o.addEventListener("complete",function(){h?o.currentFrame==78?s.addEventListener("mouseleave",d):u():o.currentFrame==78?d():s.addEventListener("mouseenter",u)})});let i=this;this.galleryResize(i),this.galleryDrag(),this.initGallery(),this.setGalleryObserverRootMargin(),this.setColorChangeObserverRootMargin();let n=window.innerWidth;window.addEventListener("resize",function(){window.innerWidth!=n&&(n=window.innerWidth,i.galleryResize(i),i.setGalleryObserverRootMargin())}),this.startObserveColorChange(),this.startObserveGallery(),this.addContactCardAnimation()}addContactCardAnimation(){Zt.to(".hover-bg",{duration:1,x:"-130%",y:"-50%",rotation:-20,transformOrigin:"50% 50%"}),document.querySelector(".contact-link").addEventListener("mouseover",()=>{Zt.to(".hover-bg",{duration:1,x:"0%",y:"-50%",rotation:0,transformOrigin:"50% 50%",ease:"circ.inOut"})}),document.querySelector(".contact-link").addEventListener("mouseout",()=>{Zt.to(".hover-bg",{duration:1,x:"130%",y:"-50%",rotation:20,transformOrigin:"50% 50%",ease:"circ.inOut",onComplete:()=>{Zt.set(".hover-bg",{x:"-130%",y:"-50%",rotation:-20,transformOrigin:"50% 50%"})}})})}setGalleryObserverRootMargin(){window.innerWidth>1200?this.galleryObserverRootMargin="-200px":this.galleryObserverRootMargin="0px"}setColorChangeObserverRootMargin(){window.innerWidth>1200?this.colorChangeObserverRootMargin="250px":this.colorChangeObserverRootMargin="0px"}startObserveColorChange(){new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting==!0?(document.querySelector("#about__team-culture .color-background").classList.add("color-background--visible"),document.querySelectorAll(".banga").forEach(n=>{n.classList.add("banga--scrolled")})):(document.querySelector("#about__team-culture .color-background").classList.remove("color-background--visible"),document.querySelectorAll(".banga").forEach(n=>{n.classList.remove("banga--scrolled")}))})},{rootMargin:this.colorChangeObserverRootMargin}).observe(document.querySelector("#about__team-culture .culture"))}startObserveGallery(){let t=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting==!0&&(Zt.timeline().fromTo("#about__team-culture .slide",{ease:"expo.out",x:250},{duration:2.5,ease:"expo.out",x:0,stagger:.15}),t.unobserve(i.target))})},{rootMargin:this.galleryObserverRootMargin});t.observe(document.querySelector("#about__team-culture .culture"))}galleryResize(t){let e=document.querySelector(".culture__list");if(e){Zt.set(e,{x:0});let i=parseInt(t.getStyle(document.querySelector(".culture"),"padding-left").replace("px","")),n=document.querySelector(".culture-list-container"),s=window.innerWidth-document.querySelector(".container").clientWidth,a=0;for(let o of document.querySelector(".culture__list").children)a+=o.clientWidth;n.style.width=a-i+"px",this.cityBoundStart=s/2,window.innerWidth<600?this.cityBoundEnd=window.innerWidth-s/2:this.cityBoundEnd=window.innerWidth/2+s/2}}galleryDrag(){let t=this;document.querySelectorAll(".slide--city").forEach(e=>{let i=e.getBoundingClientRect().left;i>t.cityBoundStart&&i<t.cityBoundEnd?document.querySelectorAll(".slide--focused").length<1&&e.classList.add("slide--focused"):e.classList.remove("slide--focused")})}initGallery(){let t=this;xs.create("#about__team-culture .culture-list-container",{cursor:"grab",type:"x",bounds:".culture",inertia:!0,onDragEnd:function(){t.galleryDrag()}}),Zt.set("#about__team-culture .slide",{x:250})}getStyle(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)}};var $w={namespace:"about",beforeEnter(r){this.AboutClients=new Ms("#about__partnerships"),this.AboutTeamCulture=new hv},afterEnter(r){},beforeLeave(r){this.AboutClients.destroy()},afterLeave(r){}};var uv=class{constructor(t){}scrollToCapability(t){let e=document.querySelector("[data-capability='"+t+"']");MONO.Scroll.instance.scrollTo(e,{offset:0})}scrollIfNeeded(){window.capability&&(this.scrollToCapability(window.capability),window.capability=null)}};var Jw=Vi(Ol()),cv=class{constructor(){let t=document.querySelectorAll("#capabilities__approach .approach .approach__item"),e=document.querySelector("#capabilities__approach"),i=document.querySelector("[data-animation-custom]"),n=i.getAttribute("data-animation-custom"),s=!1,a=Jw.default.loadAnimation({container:i,renderer:"svg",loop:!1,autoplay:!1,path:n});t.forEach(o=>{o.addEventListener("mouseover",function(){let h=this.getAttribute("data-item");e.classList.add(h),h=="two"&&s==!1&&(s=!0,a.playSegments([0,70],!1))}),o.addEventListener("mouseout",function(){e.classList.remove("one"),e.classList.remove("two"),e.classList.remove("three"),e.classList.remove("four")})}),a.addEventListener("complete",function(){s=!1})}};var Kw={namespace:"capabilities",beforeEnter(r){this.capabilitiesList=new uv,this.capabilitiesApproach=new cv},afterEnter(r){this.capabilitiesList.scrollIfNeeded()},beforeLeave(r){},afterLeave(r){}};var fv=class{constructor(){this.sectionElement=document.querySelector("#revolve__header"),this.video=this.sectionElement.querySelector("video"),this.video.play(),document.querySelector("#revolve__header .scrolldown").addEventListener("click",this.scrolldown.bind(this)),document.querySelector("#revolve-contact").addEventListener("click",()=>{window.scrollTo({top:document.querySelector("#revolve__inquiry").offsetTop,left:0,behavior:"smooth"})})}scrolldown(){window.scrollTo({top:document.querySelector("#revolve__how").offsetTop,left:0,behavior:"smooth"})}};var dv=class{constructor(){this.section=document.querySelector("#revolve__inquiry"),this.form=this.section.querySelector("form"),this.formInputs=this.section.querySelectorAll("ul.info li input, ul.info li textarea"),this.fields={},this.form.querySelectorAll("[name]").forEach(t=>{this.fields[t.name]=t}),this.formInputs.forEach(t=>{t.addEventListener("focus",function(){t.parentElement.classList.add("filled")}),t.addEventListener("blur",function(){t.parentElement.classList.remove("filled"),t.value!=""&&t.parentElement.classList.add("filled")})}),this.form.addEventListener("submit",t=>{this.submit(t)})}handleError(t){let e=[];for(let i in t)if(!!t.hasOwnProperty(i)){if(this.fields.hasOwnProperty(i)){this.fields[i].parentElement.classList.add("error");let n=this.fields[i].parentElement.querySelector(".error");n&&(n.innerText=t[i][0])}Array.prototype.push.apply(e,t[i])}}showSuccess(){let t=this.section.querySelector("#inquiry__form"),e=this.section.querySelector("#inquiry__success"),i=this.section.querySelector(".background--success");Zt.to(t,{duration:.2,opacity:0,onComplete:function(){t.style.display="none",e.style.display="block",i.classList.add("visible"),Zt.to(e,{duration:.5,opacity:1})}})}async onload(t){t.target.status===200?this.showSuccess():this.handleError(JSON.parse(t.target.response))}submit(t){t.preventDefault();let e=new XMLHttpRequest;e.open("POST",t.target.action),e.onload=i=>{this.onload(i)},e.send(new FormData(t.target));for(let i in this.fields)!this.fields.hasOwnProperty(i)||this.fields[i].parentElement.classList.remove("error")}};var Qw={namespace:"revolve",beforeEnter(r){this.RevolveHeader=new fv,this.RevolveClients=new Ms("#revolve-brands"),this.RevolveInquiry=new dv},afterEnter(r){},beforeLeave(r){this.RevolveClients.destroy()},afterLeave(r){}};var pv=class{constructor(t){document.querySelector("#ryde-inquire").addEventListener("click",()=>{window.scrollTo({top:document.querySelector("#ryde-cta-form").offsetTop,left:0,behavior:"smooth"})})}};var mv=class{constructor(){this.services=[],setTimeout(()=>{this.setProps()},300),MONO.Scroll.add(this.onScroll),MONO.View.add(this.onResize)}onScroll=()=>{this.services.forEach((t,e)=>{window.scrollY>=t.top+t.height/2-window.innerHeight/2&&window.scrollY<=t.bottom+t.height/2-window.innerHeight/2&&this.services.forEach((i,n)=>{n==t.id?(i.oval.classList.add("active"),i.number.classList.add("active")):(i.oval.classList.remove("active"),i.number.classList.remove("active"))})})};setProps(){document.querySelectorAll("#ryde-services .service").forEach((t,e)=>{this.services[e]={id:e,el:t,top:document.querySelectorAll("#ryde-services .service")[e].offsetTop+document.querySelector("#ryde-services").offsetTop,bottom:document.querySelectorAll("#ryde-services .service")[e].offsetTop+document.querySelectorAll("#ryde-services .service")[e].offsetHeight+document.querySelector("#ryde-services").offsetTop,oval:document.querySelectorAll("#ryde-services .service-big-oval img")[e],number:document.querySelectorAll("#ryde-services .services-numbers span")[e],height:document.querySelectorAll("#ryde-services .service")[e].offsetHeight}})}onResize=()=>{this.setProps()};destroy(){MONO.Scroll.remove(this.onScroll),MONO.View.remove(this.onResize)}};var gv=class{constructor(){this.initNumberAnimation()}initNumberAnimation(t){let e=document.querySelectorAll("#ryde-stats h3");e.forEach(n=>{n.value=n.innerText.match(/\d/g).reduce(function(s,a){return`${s}${a}`}),n.innerText=n.innerText.replace(/\d+/g,"0")});let i=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting==!0&&(this.animateNumbers(s.target),i.unobserve(s.target))})});e.forEach(n=>{i.observe(n)})}animateNumbers(t){let e={value:0};Zt.to(e,{duration:3,value:t.value,ease:"power3.out",onUpdate:i});function i(){t.innerText=t.innerText.replace(/\d+/g,e.value.toFixed(0))}}};var vv=class{constructor(){this.section=document.querySelector("#ryde-cta-form"),this.form=this.section.querySelector("form"),this.formInputs=this.section.querySelectorAll("ul.info li input, ul.info li textarea"),this.fields={},this.form.querySelectorAll("[name]").forEach(t=>{this.fields[t.name]=t}),this.formInputs.forEach(t=>{t.addEventListener("focus",function(){t.parentElement.classList.add("filled")}),t.addEventListener("blur",function(){t.parentElement.classList.remove("filled"),t.value!=""&&t.parentElement.classList.add("filled")})}),this.form.addEventListener("submit",t=>{this.submit(t)})}handleError(t){let e=[];for(let i in t)if(!!t.hasOwnProperty(i)){if(this.fields.hasOwnProperty(i)){this.fields[i].parentElement.classList.add("error");let n=this.fields[i].parentElement.querySelector(".error");n&&(n.innerText=t[i][0])}Array.prototype.push.apply(e,t[i])}}showSuccess(){let t=this.section.querySelector("#inquiry__form"),e=this.section.querySelector("#inquiry__success");Zt.to(t,{duration:.2,opacity:0,onComplete:function(){document.querySelector("#ryde-cta-form").classList.add("success"),t.style.display="none",e.style.display="block",window.scrollTo({top:document.querySelector("#ryde-cta-form").offsetTop,left:0,behavior:"smooth"}),Zt.to(e,{duration:.5,opacity:1})}})}async onload(t){t.target.status===200?this.showSuccess():this.handleError(JSON.parse(t.target.response))}submit(t){t.preventDefault();let e=new XMLHttpRequest;e.open("POST",t.target.action),e.onload=i=>{this.onload(i)},e.send(new FormData(t.target));for(let i in this.fields)!this.fields.hasOwnProperty(i)||this.fields[i].parentElement.classList.remove("error")}};var tS={namespace:"ryde",beforeEnter(r){this.RydeAbout=new pv,this.RydeServices=new mv,this.RydeStats=new gv,this.RydeClients=new Ms("#ryde-clients"),this.RydeCtaForm=new vv},afterEnter(r){},beforeLeave(r){this.RydeServices.destroy(),this.RydeClients.destroy()},afterLeave(r){}};var _v=class{constructor(){document.querySelector("#apply").addEventListener("click",()=>{window.scrollTo({top:document.querySelector("#retrn-cta-form").offsetTop,left:0,behavior:"smooth"})})}};var yv=class{constructor(t){this.services=[],setTimeout(()=>{this.setProps()},300),MONO.Scroll.add(this.onScroll),MONO.View.add(this.onResize)}onScroll=()=>{this.services.forEach((t,e)=>{window.scrollY>=t.top+t.height/2-window.innerHeight/2&&window.scrollY<=t.bottom+t.height/2-window.innerHeight/2&&this.services.forEach((i,n)=>{n==t.id?(i.oval.classList.add("active"),i.number.classList.add("active")):(i.oval.classList.remove("active"),i.number.classList.remove("active"))})})};setProps(){document.querySelectorAll("#retrn-services .service").forEach((t,e)=>{this.services[e]={id:e,el:t,top:document.querySelectorAll("#retrn-services .service")[e].offsetTop+document.querySelector("#retrn-services").offsetTop,bottom:document.querySelectorAll("#retrn-services .service")[e].offsetTop+document.querySelectorAll("#retrn-services .service")[e].offsetHeight+document.querySelector("#retrn-services").offsetTop,oval:document.querySelectorAll("#retrn-services .service-big-oval img")[e],number:document.querySelectorAll("#retrn-services .services-numbers span")[e],height:document.querySelectorAll("#retrn-services .service")[e].offsetHeight}})}onResize=()=>{this.setProps()};destroy(){MONO.Scroll.remove(this.onScroll),MONO.View.remove(this.onResize)}};var xv=class{constructor(){this.transitionEvent=this.whichTransitionEvent(),this._C=document.querySelector(".retrn__news__container"),this.N=this._C.children.length,this._C.style.setProperty("--n",this.N),this.x0=null,this.y0=null,this.locked=!1,this.i=0,this.w=window.innerWidth,this.resize(),this.eventListeners()}hideGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t-e&&n<t&&i.classList.remove("ghost")})}showGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t-e&&n<t&&i.classList.add("ghost")})}hideGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t+e&&n<t+2*e&&i.classList.remove("ghost")})}showGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t+e&&n<t+2*e&&i.classList.add("ghost")})}setGhostCardsLeft(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t&&n<t+e&&i.classList.add("ghost"),n>=t-e&&n<t&&i.classList.remove("ghost")})}setGhostCardsRight(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=t&&n<t+e&&i.classList.add("ghost"),n>=t+e&&n<t+2*e&&i.classList.remove("ghost")})}setGhostCards(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--p")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--i"));document.querySelectorAll("#retrn__news .retrn__news__container a").forEach(i=>{i.classList.add("ghost")}),document.querySelectorAll("#retrn__news .retrn__news__container a").forEach((i,n)=>{n>=e&&n<e+t&&i.classList.remove("ghost")})}whichTransitionEvent(){let t,e=document.createElement("fake-element"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(e.style[t]!==void 0)return i[t]}unify(t){return t.changedTouches?t.changedTouches[0]:t}drag(t){let e=this.unify(t).clientX-this.x0,i=this.unify(t).clientY-this.y0;if(e>5||e<-5)t.preventDefault(),this.locked&&(this.x0||this.x0===0)&&this._C.style.setProperty("--tx",`${Math.round(this.unify(t).clientX-this.x0)}px`);else if(i>5||i<-5)return!0}lock(t){document.querySelector("#retrn__news .retrn__news__container").style.transition="all 0s ease 0s",this.x0=this.unify(t).clientX,this.y0=this.unify(t).clientY,this._C.classList.toggle("smooth",!(this.locked=!0))}move(t){if(document.querySelector("#retrn__news .retrn__news__container").style.transition="transform .5s ease-out",this.locked){let e=this.unify(t).clientX-this.x0,i=Math.sign(e),n=+(i*e/this.w).toFixed(2),s=getComputedStyle(this._C).getPropertyValue("--p");(this.i>0||i<0)&&(this.i<this.N-1||i>0)&&n>.1&&(e<0?this.setGhostCardsRight():e>0&&this.setGhostCardsLeft(),this._C.style.setProperty("--i",this.i-=i*s),n=1-n),this._C.style.setProperty("--tx","0px"),this._C.style.setProperty("--f",n),this._C.classList.toggle("smooth",!(this.locked=!1)),this.x0=null,this.setSliderOffset()}}setSliderOffset(){let t=parseInt(getComputedStyle(document.querySelector("#retrn__news .retrn__news__container a")).marginRight.replace("px",""));this.i>0?window.innerWidth<600&&(document.querySelector("#retrn__news .retrn__news__wrapper").style.transform=`translateX(${t/2}px)`):document.querySelector("#retrn__news .retrn__news__wrapper").style.transform="translateX(0px)"}moveSlider(t){return new Promise(function(e,i){let n=this;function s(){n._C.removeEventListener(n.transitionEvent,s),e()}this._C.addEventListener(this.transitionEvent,s);let a=getComputedStyle(this._C).getPropertyValue("--p");this._C.style.setProperty("--i",this.i-=t*-a),this.setSliderOffset()}.bind(this))}getElementWidth(t){if(t){let e=getComputedStyle(t),i=t.clientWidth;return i-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i}}resize(){if(window.innerWidth!=this.windowWidth&&document.querySelector("#retrn__news")){this.windowWidth=window.innerWidth,this.w=window.innerWidth;let t=(this.getElementWidth(document.querySelector("#retrn__news"))-this.getElementWidth(document.querySelector("#retrn__news .container")))/2,e=parseInt(getComputedStyle(document.querySelector("#retrn__news .retrn__news__container a")).marginRight.replace("px",""));document.querySelector(".ghost-left").style.width=`${t-e}px`,window.innerWidth<1200?document.querySelector(".ghost-right").style.width=`${t}px`:document.querySelector(".ghost-right").style.width=`${t-e}px`,this._C.style.setProperty("--i",this.i=0),this.setGhostCards(),this.setMediumCardHeight(),document.querySelector("#retrn__news .retrn__news__wrapper").style.transform="translateX(0px)",document.querySelector("#retrn__news .arrow--left").classList.add("inactive"),document.querySelector("#retrn__news .arrow--right").classList.remove("inactive")}}setMediumCardHeight(){let t=document.querySelector("#retrn__news .retrn__news__container a:last-of-type"),e=document.querySelector("#retrn__news .retrn__news__container a:first-of-type img").clientHeight;t.style.height=`${e}px`}fadeOutGhostLeft(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-left"),{duration:.2,opacity:0,onComplete:()=>{t()}})})}fadeOutGhostRight(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-right"),{duration:.2,opacity:0,onComplete:()=>{t()}})})}hideGhosts(){return new Promise(function(t,e){Promise.all([this.fadeOutGhostLeft,this.fadeOutGhostRight]).then(function(i){document.querySelector(".ghost-left").style.display="none",document.querySelector(".ghost-right").style.display="none",t()})}.bind(this))}fadeInGhostLeft(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-left"),{duration:.2,opacity:.5,onComplete:()=>{t()}})})}fadeInGhostRight(){return new Promise(function(t,e){Zt.to(document.querySelector(".ghost-right"),{duration:.2,opacity:.5,onComplete:()=>{t()}})})}isFirstPage(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));return t/e+1==1}isLastPage(){let t=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),e=parseInt(getComputedStyle(this._C).getPropertyValue("--p")),i=Math.ceil(this.N/e);return t/e+1>=i}showGhosts(){this.isFirstPage()?document.querySelector("#retrn__news .arrow--left").classList.add("inactive"):(document.querySelector(".ghost-left").style.display="block",this.fadeInGhostLeft(),document.querySelector("#retrn__news .arrow--left").classList.remove("inactive")),this.isLastPage()?document.querySelector("#retrn__news .arrow--right").classList.add("inactive"):(document.querySelector(".ghost-right").style.display="block",this.fadeInGhostRight(),document.querySelector("#retrn__news .arrow--right").classList.remove("inactive"))}moveSlides(t){let e=parseInt(getComputedStyle(this._C).getPropertyValue("--i")),i=parseInt(getComputedStyle(this._C).getPropertyValue("--p"));this.hideGhosts().then(()=>{if(t<0)e>0&&(this.setGhostCardsLeft(),this.moveSlider(t).then(()=>{this.showGhosts()}));else{let n=Math.ceil(this.N/i);e/i+1<n&&(this.setGhostCardsRight(),this.moveSlider(t).then(()=>{this.showGhosts()}))}})}eventListeners(){this.windowWidth=window.innerWidth,window.addEventListener("resize",this.resize.bind(this)),this._C.addEventListener("touchstart",this.lock.bind(this),!1),this._C.addEventListener("touchend",this.move.bind(this),!1),this._C.addEventListener("touchmove",this.drag.bind(this),!1),document.querySelector("#retrn__news .arrow--left").addEventListener("click",()=>{this.moveSlides(-1)}),document.querySelector("#retrn__news .arrow--right").addEventListener("click",()=>{this.moveSlides(1)}),document.querySelector("#retrn__news .ghost-left").addEventListener("click",()=>{this.moveSlides(-1)}),document.querySelector("#retrn__news .ghost-right").addEventListener("click",()=>{this.moveSlides(1)}),document.querySelector("#retrn__news .ghost-left").addEventListener("mouseenter",()=>{this.hideGhostCardsLeft()}),document.querySelector("#retrn__news .ghost-left").addEventListener("mouseleave",()=>{this.showGhostCardsLeft()}),document.querySelector("#retrn__news .ghost-right").addEventListener("mouseenter",()=>{this.hideGhostCardsRight()}),document.querySelector("#retrn__news .ghost-right").addEventListener("mouseleave",()=>{this.showGhostCardsRight()})}};var bv=class{constructor(){this.section=document.querySelector("#retrn-cta-form"),this.form=this.section.querySelector("form"),this.formInputs=this.section.querySelectorAll("ul.info li input, ul.info li textarea"),this.fields={},this.form.querySelectorAll("[name]").forEach(t=>{this.fields[t.name]=t}),this.formInputs.forEach(t=>{t.addEventListener("focus",function(){t.parentElement.classList.add("filled")}),t.addEventListener("blur",function(){t.parentElement.classList.remove("filled"),t.value!=""&&t.parentElement.classList.add("filled")})}),this.form.addEventListener("submit",t=>{this.submit(t)})}handleError(t){let e=[];for(let i in t)if(!!t.hasOwnProperty(i)){if(this.fields.hasOwnProperty(i)){this.fields[i].parentElement.classList.add("error");let n=this.fields[i].parentElement.querySelector(".error");n&&(n.innerText=t[i][0])}Array.prototype.push.apply(e,t[i])}}showSuccess(){let t=this.section.querySelector("#inquiry__form"),e=this.section.querySelector("#inquiry__success");Zt.to(t,{duration:.2,opacity:0,onComplete:function(){document.querySelector("#retrn-cta-form").classList.add("success"),t.style.display="none",e.style.display="block",window.scrollTo({top:document.querySelector("#retrn-cta-form").offsetTop,left:0,behavior:"smooth"}),Zt.to(e,{duration:.5,opacity:1})}})}async onload(t){t.target.status===200?this.showSuccess():this.handleError(JSON.parse(t.target.response))}submit(t){t.preventDefault();let e=new XMLHttpRequest;e.open("POST",t.target.action),e.onload=i=>{this.onload(i)},e.send(new FormData(t.target));for(let i in this.fields)!this.fields.hasOwnProperty(i)||this.fields[i].parentElement.classList.remove("error")}};var eS={namespace:"retrn",beforeEnter(r){this.RetrnHero=new _v,this.RetrnServices=new yv,this.RetrnClients=new Ms("#retrn-clients"),this.RetrnNews=new xv,this.RetrnCtaForm=new bv},afterEnter(r){},beforeLeave(r){this.RetrnServices.destroy(),this.RetrnClients.destroy()},afterLeave(r){}};var wv=class{constructor(){this.navs=document.querySelectorAll("nav.full, nav.mobile"),this.hideNavs(),this.section=document.querySelector("#inquiry"),this.form=this.section.querySelector("form"),this.formInputs=this.section.querySelectorAll("ul.info li input, ul.info li textarea"),this.fields={},this.form.querySelectorAll("[name]").forEach(t=>{this.fields[t.name]=t}),this.formInputs.forEach(t=>{t.addEventListener("focus",function(){t.parentElement.classList.add("filled")}),t.addEventListener("blur",function(){t.parentElement.classList.remove("filled"),t.value!=""&&t.parentElement.classList.add("filled")})}),this.form.addEventListener("submit",t=>{this.submit(t)})}handleError(t){let e=[];for(let i in t)if(!!t.hasOwnProperty(i)){if(this.fields.hasOwnProperty(i)){this.fields[i].parentElement.classList.add("error");let n=this.fields[i].parentElement.querySelector(".error");n&&(n.innerText=t[i][0])}Array.prototype.push.apply(e,t[i])}}showSuccess(){let t=this.section.querySelector("#inquiry__form"),e=this.section.querySelector("#inquiry__success");Zt.to(t,{duration:.2,opacity:0,onComplete:function(){t.style.display="none",e.style.display="block",Zt.to(e,{duration:.5,opacity:1})}})}async onload(t){t.target.status===200?this.showSuccess():this.handleError(JSON.parse(t.target.response))}submit(t){t.preventDefault();let e=new XMLHttpRequest;e.open("POST",t.target.action),e.onload=i=>{this.onload(i)},e.send(new FormData(t.target));for(let i in this.fields)!this.fields.hasOwnProperty(i)||this.fields[i].parentElement.classList.remove("error")}hideNavs(){this.navs.forEach(t=>{Zt.set(t,{opacity:0,pointerEvents:"none"})})}showNavs(){this.navs.forEach(t=>{Zt.set(t,{opacity:"",pointerEvents:""})})}destroy(){this.showNavs()}};var iS={namespace:"inquiry",beforeEnter(r){this.InquiryForm=new wv},afterEnter(r){},beforeLeave(r){},afterLeave(r){this.InquiryForm.destroy()}};var rS=Vi(Ol()),nS=class{constructor(){this.preloader=document.querySelector("#preloader"),this.lottieElement=this.preloader.querySelector(".preloader-animation");let t=document.querySelector("meta[name=monotwo-assets]").getAttribute("content");this.animation=rS.default.loadAnimation({container:this.lottieElement,renderer:"svg",loop:!0,autoplay:!1,path:t+"/animations/preloader.json"}),this.animation.addEventListener("data_ready",()=>{this.animation.play(),Zt.to(this.lottieElement,{duration:.2,opacity:1,ease:"expo.out"})})}skip(){Zt.set(this.preloader,{display:"none"})}async hide(){await new Promise(t=>{this.animation.addEventListener("loopComplete",()=>{t()})}),await Zt.timeline({onComplete:()=>{this.preloader.remove(),this.animation=null}}).to(this.lottieElement,{duration:.2,opacity:0,ease:"expo.out"}).fromTo(this.preloader,{scaleY:1,transformOrigin:"50% 100%",backgroundColor:"#434A7F"},{duration:1.2,scaleY:0,backgroundColor:"#191919",ease:"expo.out"})}},Sv=new nS;var sS=class{constructor(){this.transition=document.getElementById("transition"),Zt.set(this.transition,{display:"none",opacity:0})}async show(){await Zt.to(this.transition,{opacity:1,duration:.5,ease:"power3.inOut",onStart:()=>{this.transition.style.display="flex"},onComplete:()=>{}})}async hide(){await Zt.to(this.transition,{opacity:0,duration:.5,ease:"power3.inOut",onComplete:()=>{this.transition.style.display="none"}})}},Tv=new sS;var Cv=class{constructor(t){this.menuOpen=!1,this.lastScrollTop=0,this.scrollTop=0,this.navElement=document.querySelector("nav.mobile");let e=this.navElement.querySelectorAll(".toggle");this.menu=this.navElement.querySelector(".menu"),this.menuBg=this.navElement.querySelector(".menu img.background"),this.menuItems=this.navElement.querySelectorAll(".menu ul li"),this.menuInquiry=this.navElement.querySelectorAll(".menu a.inquiry"),this.menuLinks=this.navElement.querySelectorAll("a"),this.navBottom=this.navElement.querySelector(".top").offsetHeight,this.navFixed=this.navElement.querySelector(".top--fixed"),Zt.set(this.navFixed,{yPercent:-100}),e.forEach(i=>{i.addEventListener("click",this.handleMenu.bind(this))}),this.menuLinks.forEach(i=>{i.addEventListener("click",n=>{this.navElement.classList.remove("open"),document.querySelector("body").style.height="auto",Zt.to(this.menu,{duration:.4,opacity:0,ease:"power3.out",onComplete:()=>{this.menu.style.display="none"}}),this.menuOpen=!1})}),this.fixedNavShown=!1,this.windowTop=0,this.buffer=10,this.onResize(),MONO.Scroll.add(this.onScroll),MONO.View.add(this.onResize)}onResize=()=>{this.menuOpen&&this.closeMenu()};onScroll=({scroll:t})=>{this.menuOpen||(t>this.navBottom?(t<this.lastScrollTop?this.lastScrollTop-10>t&&!this.fixedNavShown&&this.showFixedMenu():this.lastScrollTop+10<t&&this.fixedNavShown&&this.hideFixedMenu(),this.lastScrollTop=t):this.fixedNavShown&&this.hideFixedMenu())};showFixedMenu(){this.fixedNavShown=!0,Zt.to(this.navFixed,{duration:.4,yPercent:0,ease:"power2.out"})}hideFixedMenu(){this.fixedNavShown=!1,Zt.to(this.navFixed,{duration:.4,yPercent:-100,ease:"power2.out"})}handleMenu(){this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this.scrollTop=window.scrollY,this.navElement.classList.add("open"),this.menu.style.display="flex",Zt.to(this.menu,{duration:.4,opacity:1,ease:"power3.out"}),Zt.to(this.menuBg,{duration:1.8,scale:1,ease:"power3.out"}),Zt.from(this.menuItems,{duration:.8,xPercent:-20,opacity:0,ease:"power3.out",clearProps:"all",stagger:.2}),Zt.from(this.menuInquiry,{duration:.8,yPercent:20,opacity:0,ease:"power3.out",clearProps:"all"}),this.menuOpen=!0}closeMenu(t){this.navElement.classList.remove("open"),document.querySelector("body").style.height="auto",window.scroll(0,this.scrollTop),Zt.to(this.menu,{duration:.4,opacity:0,ease:"power3.out",onComplete:()=>{this.menu.style.display="none"}}),Zt.to(this.menuBg,{duration:.4,scale:1.2,ease:"power3.out"}),this.menuOpen=!1}};var Ev=class{constructor(t){this.lastScrollTop=0;let e="nav.full";this.menuLinks=document.querySelectorAll("nav a"),this.page=document.body.dataset.page,this.navBottom=document.querySelector(e+" .menu").offsetHeight,this.navFixed=document.querySelector(e+" .menu--fixed"),this.buffer=100,this.fixedNavShown=!1,this.windowTop=0,MONO.Scroll.add(this.onScroll)}get fixedNavShown(){return this.navFixed.classList.contains("visible")}set fixedNavShown(t){t?this.navFixed.classList.add("visible"):this.navFixed.classList.remove("visible")}onScroll=()=>{this.page!="inquiry"&&(this.windowTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,this.windowTop>this.navBottom?(this.windowTop<this.lastScrollTop?this.lastScrollTop-10>this.windowTop&&!this.fixedNavShown&&(this.fixedNavShown=!0):this.lastScrollTop+10<this.windowTop&&this.fixedNavShown&&(this.fixedNavShown=!1),this.lastScrollTop=this.windowTop):this.fixedNavShown&&(this.fixedNavShown=!1))};pageChange=t=>{for(let e of this.menuLinks)e.classList.remove("active"),e.href===t&&e.classList.add("active")}};var aS={name:"default-transition",async beforeOnce(r){document.body.dataset.page=r.next.container.dataset.page,await MONO.Loader.loadFonts(["GT-Haptik-Bold","GT-Haptik-Regular","GT-Haptik-Medium","IvarDisplay-SemiBoldItalic"]),await MONO.Loader.loadImages(),this.navigationMobile=new Cv,this.navigationFull=new Ev,await MONO.Effects.mount(),MONO.Reveal.mount(),MONO.Effects.start(),window.scrollTo(0,0),MONO.State.debug?Sv.skip():await Sv.hide()},async once(r){MONO.Scroll.enable(),MONO.TouchState.start(),MONO.LazyLoad.start(),MONO.Lottie.start()},async afterOnce(r){MONO.Reveal.start()},async beforeEnter(r){document.body.dataset.page=r.next.container.dataset.page,MONO.TouchState.start(),MONO.LazyLoad.start(),MONO.Lottie.start(),await MONO.Loader.loadImages(),await MONO.Effects.mount(),MONO.Reveal.mount(),MONO.Effects.start(),MONO.Scroll.enable()},async enter(r){MONO.Trigger.refresh(),await Tv.hide()},async afterEnter(r){MONO.Reveal.start(),MONO.State.firstLoad=!1},async beforeLeave(r){"scrollRestoration"in history&&(history.scrollRestoration="manual"),this.navigationFull.pageChange(r.next.url.href),r.trigger=="back"||r.trigger=="forward"||r.trigger=="popstate"},async leave(r){await Tv.show(),r.current.container.remove(),MONO.Effects.stop(),MONO.Scroll.disable()}};var oS=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((t,e)=>(e&=63,e<36?t+=e.toString(36):e<62?t+=(e-26).toString(36).toUpperCase():e>62?t+="-":t+="_",t),"");var mD=0;function Mv(r){return"__private_"+mD+++"_"+r}function Sn(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var yo=Mv("isClient"),Br=Mv("callbacks"),Du=Mv("raf"),Pv=new class{constructor(){Object.defineProperty(this,yo,{writable:!0,value:void 0}),Object.defineProperty(this,Br,{writable:!0,value:void 0}),Object.defineProperty(this,Du,{writable:!0,value:r=>{requestAnimationFrame(Sn(this,Du)[Du]);let t=r-this.now;this.now=r,Sn(this,Br)[Br].forEach(({callback:e})=>{e(r,t)})}}),Sn(this,yo)[yo]=typeof window!="undefined",Sn(this,Br)[Br]=[],this.now=Sn(this,yo)[yo]?performance.now():0,Sn(this,yo)[yo]&&requestAnimationFrame(Sn(this,Du)[Du])}add(r,t=0){let e=oS();return Sn(this,Br)[Br].push({id:e,callback:r,priority:t}),Sn(this,Br)[Br].sort((i,n)=>i.priority-n.priority),e}remove(r){let t=Sn(this,Br)[Br].findIndex(e=>r===e.id);Sn(this,Br)[Br].splice(t,1)}};var lS=class{constructor(){return Zt.ticker.lagSmoothing(0),Zt.ticker.remove(Zt.updateRoot),Pv.add(t=>{Zt.updateRoot(t/1e3)},0),Pv}},hS=lS;var Dv=Vi(uS()),cS=class{constructor(){return Dv.default.init({schema:{prefix:"data-router"},views:MONO.Routes.views,transitions:MONO.Routes.transitions,debug:MONO.Routes.debug,timeout:MONO.Routes.timeout||5e3}),Dv.default}},fS=cS;function dS(r,t=100){let e;return function(i){e&&clearTimeout(e),e=setTimeout(r,t,i)}}var pS=class{constructor(){this.listeners=[],this.updateTouchDevice(),this.updateProps(),this.windowWidth=window.innerWidth,window.addEventListener("resize",dS(this.update,100)),window.addEventListener("orientationchange",this.update.bind(this))}add(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners.push(t),this}remove(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners=this.listeners.filter(function(e){return e!==t}),this}updateTouchDevice(){this.touchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}updateProps(){this.width=window.innerWidth,this.height=window.innerHeight,this.mediaQuery=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content").replace(/\"/g,""),this.setViewHeightVariable(),this.setViewWidthVariable(),this.setHtmlClasses()}setViewHeightVariable(){document.documentElement.style.setProperty("--view-height",`${this.height}px`)}setViewWidthVariable(){document.documentElement.style.setProperty("--view-width",`${this.width}px`)}setHtmlClasses(){this.touchDevice?document.documentElement.classList.add("touch-device"):document.documentElement.classList.remove("touch-device")}update=()=>{if(!(this.touchDevice===!0&&this.windowWidth==window.innerWidth))return this.updateProps(),this.listeners.forEach(function(t){t()}),this.windowWidth=window.innerWidth,this}},mS=pS;var gS=class{constructor(){}start(){let t=document.querySelectorAll("[data-lazy-src]"),e=new IntersectionObserver(i=>{i.forEach(n=>{if(n.isIntersecting==!0&&!n.target.classList.contains("loaded")){let s=n.target.getAttribute("data-lazy-src"),a=n.target.getAttribute("data-lazy-srcset");s&&(n.target.setAttribute("src",s),n.target.removeAttribute("data-lazy-src")),a&&(n.target.setAttribute("srcset",a),n.target.removeAttribute("data-lazy-srcset")),n.target.tagName=="IMG"?n.target.addEventListener("load",()=>{this.reveal(n.target)}):this.reveal(n.target),e.unobserve(n.target)}})},{rootMargin:"0px 0px 100% 0px"});t.forEach(i=>{Zt.set(i,{opacity:0}),e.observe(i)})}reveal=t=>{Zt.to(t,{duration:.4,opacity:1,ease:"power3.out",delay:.1,clearProps:"all"})}},vS=gS;var xS=Vi(_S()),bS=Vi(yS());function Lu(){return Lu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Lu.apply(this,arguments)}function wS(r,t){let e=r%t;return(t>0&&e<0||t<0&&e>0)&&(e+=t),e}var gD=["duration","easing"],SS=class{to(t,e={}){let{duration:i=1,easing:n=a=>a}=e,s=function(a,o){if(a==null)return{};var h,u,d={},g=Object.keys(a);for(u=0;u<g.length;u++)o.indexOf(h=g[u])>=0||(d[h]=a[h]);return d}(e,gD);this.target=t,this.fromKeys=Lu({},s),this.toKeys=Lu({},s),this.keys=Object.keys(Lu({},s)),this.keys.forEach(a=>{this.fromKeys[a]=t[a]}),this.duration=i,this.easing=n,this.currentTime=0,this.isRunning=!0}stop(){this.isRunning=!1}raf(t){if(!this.isRunning)return;this.currentTime=Math.min(this.currentTime+t,this.duration);let e=this.progress>=1?1:this.easing(this.progress);this.keys.forEach(i=>{let n=this.fromKeys[i];this.target[i]=n+(this.toKeys[i]-n)*e}),e===1&&this.stop()}get progress(){return this.currentTime/this.duration}},Ov=class extends xS.TinyEmitter{constructor({duration:t=1.2,easing:e=f=>Math.min(1,1.001-Math.pow(2,-10*f)),smooth:i=!0,mouseMultiplier:n=1,smoothTouch:s=!1,touchMultiplier:a=2,direction:o="vertical",gestureDirection:h="vertical",infinite:u=!1,wrapper:d=window,content:g=document.body}={}){var f,m,_;super(),this.onWindowResize=()=>{this.wrapperWidth=window.innerWidth,this.wrapperHeight=window.innerHeight},this.onWrapperResize=([b])=>{if(b){let C=b.contentRect;this.wrapperWidth=C.width,this.wrapperHeight=C.height}},this.onContentResize=([b])=>{if(b){let C=b.contentRect;this.contentWidth=C.width,this.contentHeight=C.height}},this.onVirtualScroll=({deltaY:b,deltaX:C,originalEvent:M})=>{if(this.gestureDirection==="vertical"&&b===0||this.gestureDirection==="horizontal"&&C===0)return;let E=!!M.composedPath().find(A=>A.hasAttribute&&A.hasAttribute("data-lenis-prevent"));if(M.ctrlKey||E)return;if(this.smooth=M.changedTouches?this.smoothTouch:this.options.smooth,this.stopped)return void M.preventDefault();if(!this.smooth||M.buttons===4)return;this.smooth&&M.preventDefault();let w=0;w=this.gestureDirection==="both"?C+b:this.gestureDirection==="horizontal"?C:b,this.targetScroll-=w,this.scrollTo(this.targetScroll)},this.onScroll=b=>{this.isScrolling&&this.smooth||(this.targetScroll=this.scroll=this.lastScroll=this.wrapperNode[this.scrollProperty],this.notify())},window.lenisVersion="0.2.28",this.options={duration:t,easing:e,smooth:i,mouseMultiplier:n,smoothTouch:s,touchMultiplier:a,direction:o,gestureDirection:h,infinite:u,wrapper:d,content:g},this.duration=t,this.easing=e,this.smooth=i,this.mouseMultiplier=n,this.smoothTouch=s,this.touchMultiplier=a,this.direction=o,this.gestureDirection=h,this.infinite=u,this.wrapperNode=d,this.contentNode=g,this.wrapperNode.addEventListener("scroll",this.onScroll),this.wrapperNode===window?(this.wrapperNode.addEventListener("resize",this.onWindowResize),this.onWindowResize()):(this.wrapperHeight=this.wrapperNode.offsetHeight,this.wrapperWidth=this.wrapperNode.offsetWidth,this.wrapperObserver=new ResizeObserver(this.onWrapperResize),this.wrapperObserver.observe(this.wrapperNode)),this.contentHeight=this.contentNode.offsetHeight,this.contentWidth=this.contentNode.offsetWidth,this.contentObserver=new ResizeObserver(this.onContentResize),this.contentObserver.observe(this.contentNode),this.targetScroll=this.scroll=this.lastScroll=this.wrapperNode[this.scrollProperty],this.animate=new SS;let v=((f=navigator)==null||(m=f.userAgentData)==null?void 0:m.platform)||((_=navigator)==null?void 0:_.platform)||"unknown";this.virtualScroll=new bS.default({el:this.wrapperNode,firefoxMultiplier:50,mouseMultiplier:this.mouseMultiplier*(v.includes("Win")||v.includes("Linux")?.84:.4),touchMultiplier:this.touchMultiplier,passive:!1,useKeyboard:!1,useTouch:!0}),this.virtualScroll.on(this.onVirtualScroll)}get scrollProperty(){let t;return t=this.wrapperNode===window?this.direction==="horizontal"?"scrollX":"scrollY":this.direction==="horizontal"?"scrollLeft":"scrollTop",t}start(){let t=this.wrapperNode;this.wrapperNode===window&&(t=document.documentElement),t.classList.remove("lenis-stopped"),this.stopped=!1}stop(){let t=this.wrapperNode;this.wrapperNode===window&&(t=document.documentElement),t.classList.add("lenis-stopped"),this.stopped=!0,this.animate.stop()}destroy(){var t;this.wrapperNode===window&&this.wrapperNode.removeEventListener("resize",this.onWindowResize),this.wrapperNode.removeEventListener("scroll",this.onScroll),this.virtualScroll.destroy(),(t=this.wrapperObserver)==null||t.disconnect(),this.contentObserver.disconnect()}get limit(){return this.direction==="horizontal"?this.contentWidth-this.wrapperWidth:this.contentHeight-this.wrapperHeight}raf(t){let e=t-(this.now||0);this.now=t,!this.stopped&&this.smooth&&(this.lastScroll=this.scroll,this.animate.raf(.001*e),this.scroll===this.targetScroll&&(this.lastScroll=this.scroll),this.isScrolling&&(this.setScroll(this.scroll),this.notify()),this.isScrolling=this.scroll!==this.targetScroll)}get velocity(){return this.scroll-this.lastScroll}setScroll(t){let e=this.infinite?wS(t,this.limit):t;this.direction==="horizontal"?this.wrapperNode.scrollTo(e,0):this.wrapperNode.scrollTo(0,e)}notify(){let t=this.infinite?wS(this.scroll,this.limit):this.scroll;this.emit("scroll",{scroll:t,limit:this.limit,velocity:this.velocity,direction:this.velocity===0?0:this.velocity>0?1:-1,progress:t/this.limit})}scrollTo(t,{offset:e=0,immediate:i=!1,duration:n=this.duration,easing:s=this.easing}={}){if(t==null||this.stopped)return;let a;if(typeof t=="number")a=t;else if(t==="top"||t==="#top")a=0;else if(t==="bottom")a=this.limit;else{let o;if(typeof t=="string")o=document.querySelector(t);else{if(t==null||!t.nodeType)return;o=t}if(!o)return;let h=0;if(this.wrapperNode!==window){let d=this.wrapperNode.getBoundingClientRect();h=this.direction==="horizontal"?d.left:d.top}let u=o.getBoundingClientRect();a=(this.direction==="horizontal"?u.left:u.top)+this.scroll-h}a+=e,this.targetScroll=this.infinite?a:Math.max(0,Math.min(a,this.limit)),!this.smooth||i?(this.animate.stop(),this.scroll=this.lastScroll=this.targetScroll,this.setScroll(this.targetScroll)):this.animate.to(this,{duration:n,easing:s,scroll:this.targetScroll})}};var TS=class{constructor(){this.listeners=[],MONO.Ticker.add(this.onFrame,0)}enable(){window.scrollTo(0,0),this.instance=new Ov({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1}),this.instance.on("scroll",({scroll:t,limit:e,velocity:i,direction:n,progress:s})=>{this.listeners.forEach(function(a){a({scroll:t,limit:e,velocity:i,direction:n,progress:s})})})}disable(){this.instance.destroy()}add(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners.push(t),this}remove(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners=this.listeners.filter(function(e){return e!==t}),this}onFrame=(t,e,i)=>{this.instance&&this.instance.raf(t)}},CS=TS;var ES=class{constructor(){this.elements=[]}_getTouchableElements(){return[...document.querySelectorAll("a"),...document.querySelectorAll("button"),...document.querySelectorAll("[data-touchable]")]}_addEventListeners(t){t.addEventListener("touchstart",this._handleTouchStart,{passive:!0}),t.addEventListener("touchend",this._handleTouchEnd,{passive:!0}),t.addEventListener("touchcancel",this._handleTouchEnd,{passive:!0})}_handleTouchStart(){this.classList.add("touched")}_handleTouchEnd(){this.classList.remove("touched")}hookElement(t){this._addEventListeners(t)}start(){this.elements=this._getTouchableElements(),this.elements.forEach(t=>{this._addEventListeners(t)})}},MS=ES;var Nv=Vi(Ol()),PS=class{constructor(){}start(){let t=document.querySelectorAll("[data-animation]"),e=new IntersectionObserver(i=>{i.forEach(n=>{n.intersectionRatio>0&&(Nv.default.play(n.target.getAttribute("data-animation")),e.unobserve(n.target))})});t.forEach(i=>{let n=i.getAttribute("data-animation"),s=i.getAttribute("data-animation-loop");s=="true"?s=!0:s=!1;let a=i;Nv.default.loadAnimation({name:n,container:a,renderer:"svg",loop:s,autoplay:!1,path:n}),e.observe(i)})}},AS=PS;var IS=class{constructor(t){this.listeners=[],this.mousePos={x:0,y:0},this.mousePosNormalized={x:0,y:0},this.mousePosOld={x:0,y:0},window.addEventListener("mousemove",this.handleMouseMove)}add(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners.push(t),this}remove(t){if(!(t instanceof Function))throw new TypeError("Callback must be a function.");return this.listeners=this.listeners.filter(function(e){return e!==t}),this}lerp(t,e,i){return(1-i)*t+i*e}handleMouseMove=t=>{this.mousePos.x=t.clientX,this.mousePos.y=t.clientY,this.mousePosNormalized.x=t.clientX/MONO.View.width*2-1,this.mousePosNormalized.y=-(t.clientY/MONO.View.height)*2+1,this.listeners.forEach(function(e){e()})}},DS=IS;var LS=class{constructor(){this.batch=[],this.revealElements=[],this.reveals=[]}mount(){this.setupReveals()}resetTriggers(){this.batch.length>0&&this.batch.forEach(t=>{t.kill()}),this.revealElements=[...document.querySelectorAll("[data-reveal]")],this.reveals=[]}setupReveals(){this.resetTriggers(),this.revealElements.length>0&&this.revealElements.forEach((t,e)=>{let i=t.dataset.reveal,s=t.hasAttribute("data-reveal-children")?t.children:t,a=t.querySelectorAll("[data-effect]");Wf(i,s,a)})}start(){this.revealElements.length>0&&(this.batch=MONO.Trigger.batch(this.revealElements,{interval:.01,start:"top 90%",onEnter:(t,e)=>{let i=Zt.timeline({paused:!0});t.forEach((n,s)=>{let a=n.dataset.reveal,h=n.hasAttribute("data-reveal-children")?n.children:n,u=n.querySelectorAll("[data-effect]");i.add(Xf(a,h,u),"<+=0.1")}),i.play()},once:!0}))}},RS=LS;var Bv="147";var vD=0,FS=1,_D=2;var kS=1,yD=2,Ru=3,Bl=0,sn=1,Zn=2,fa=0,zl=1,OS=2,NS=3,BS=4,xD=5,Vl=100,bD=101,wD=102,zS=103,VS=104,SD=200,TD=201,CD=202,ED=203,US=204,GS=205,MD=206,PD=207,AD=208,ID=209,DD=210,LD=0,RD=1,FD=2,zv=3,kD=4,OD=5,ND=6,BD=7,HS=0,zD=1,VD=2,Ps=0,UD=1,GD=2,HD=3,WD=4,XD=5,WS=300,Ul=301,Gl=302,Vv=303,Uv=304,Kf=306,Gv=1e3,Tn=1001,Hv=1002,Cr=1003,XS=1004;var qS=1005;var Er=1006,qD=1007;var Qf=1008;var xo=1009,YD=1010,jD=1011,YS=1012,ZD=1013,bo=1014,wo=1015,Fu=1016,$D=1017,JD=1018,Hl=1020,KD=1021,QD=1022,Cn=1023,tL=1024,eL=1025,So=1026,Wl=1027,iL=1028,rL=1029,nL=1030,sL=1031,aL=1033,Wv=33776,Xv=33777,qv=33778,Yv=33779,jS=35840,ZS=35841,$S=35842,JS=35843,oL=36196,KS=37492,QS=37496,tT=37808,eT=37809,iT=37810,rT=37811,nT=37812,sT=37813,aT=37814,oT=37815,lT=37816,hT=37817,uT=37818,cT=37819,fT=37820,dT=37821,pT=36492;var td=2300,ed=2301,jv=2302,mT=2400,gT=2401,vT=2402;var To=3e3,li=3001,lL=3200,hL=3201,uL=0,cL=1;var $n="srgb",ku="srgb-linear";var Zv=7680;var fL=519,_T=35044;var yT="300 es",$v=1035,Co=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let n=this._listeners[t];if(n!==void 0){let s=n.indexOf(e);s!==-1&&n.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let n=i.slice(0);for(let s=0,a=n.length;s<a;s++)n[s].call(this,t);t.target=null}}},Qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];var Jv=Math.PI/180,xT=180/Math.PI;function Ou(){let r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Qi[r&255]+Qi[r>>8&255]+Qi[r>>16&255]+Qi[r>>24&255]+"-"+Qi[t&255]+Qi[t>>8&255]+"-"+Qi[t>>16&15|64]+Qi[t>>24&255]+"-"+Qi[e&63|128]+Qi[e>>8&255]+"-"+Qi[e>>16&255]+Qi[e>>24&255]+Qi[i&255]+Qi[i>>8&255]+Qi[i>>16&255]+Qi[i>>24&255]).toLowerCase()}function zr(r,t,e){return Math.max(t,Math.min(e,r))}function dL(r,t){return(r%t+t)%t}function Kv(r,t,e){return(1-e)*r+e*t}function bT(r){return(r&r-1)==0&&r!==0}function Qv(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function id(r,t){switch(t.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Vr(r,t){switch(t.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var Ue=class{constructor(t=0,e=0){Ue.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),n=Math.sin(e),s=this.x-t.x,a=this.y-t.y;return this.x=s*i-a*n+t.x,this.y=s*n+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Mr=class{constructor(){Mr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,s,a,o,h,u){let d=this.elements;return d[0]=t,d[1]=n,d[2]=o,d[3]=e,d[4]=s,d[5]=h,d[6]=i,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,s=this.elements,a=i[0],o=i[3],h=i[6],u=i[1],d=i[4],g=i[7],f=i[2],m=i[5],_=i[8],v=n[0],b=n[3],C=n[6],M=n[1],E=n[4],w=n[7],A=n[2],R=n[5],N=n[8];return s[0]=a*v+o*M+h*A,s[3]=a*b+o*E+h*R,s[6]=a*C+o*w+h*N,s[1]=u*v+d*M+g*A,s[4]=u*b+d*E+g*R,s[7]=u*C+d*w+g*N,s[2]=f*v+m*M+_*A,s[5]=f*b+m*E+_*R,s[8]=f*C+m*w+_*N,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],d=t[8];return e*a*d-e*o*u-i*s*d+i*o*h+n*s*u-n*a*h}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],d=t[8],g=d*a-o*u,f=o*h-d*s,m=u*s-a*h,_=e*g+i*f+n*m;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/_;return t[0]=g*v,t[1]=(n*u-d*i)*v,t[2]=(o*i-n*a)*v,t[3]=f*v,t[4]=(d*e-n*h)*v,t[5]=(n*s-o*e)*v,t[6]=m*v,t[7]=(i*h-u*e)*v,t[8]=(a*e-i*s)*v,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,s,a,o){let h=Math.cos(s),u=Math.sin(s);return this.set(i*h,i*u,-i*(h*a+u*o)+a+t,-n*u,n*h,-n*(-u*a+h*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(t0.makeScale(t,e)),this}rotate(t){return this.premultiply(t0.makeRotation(-t)),this}translate(t,e){return this.premultiply(t0.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},t0=new Mr;function wT(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}function Nu(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Eo(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function rd(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}var e0={[$n]:{[ku]:Eo},[ku]:{[$n]:rd}},ur={legacyMode:!0,get workingColorSpace(){return ku},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,t,e){if(this.legacyMode||t===e||!t||!e)return r;if(e0[t]&&e0[t][e]!==void 0){let i=e0[t][e];return r.r=i(r.r),r.g=i(r.g),r.b=i(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,t){return this.convert(r,this.workingColorSpace,t)},toWorkingColorSpace:function(r,t){return this.convert(r,t,this.workingColorSpace)}},ST={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ii={r:0,g:0,b:0},En={h:0,s:0,l:0},nd={h:0,s:0,l:0};function i0(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*6*(2/3-e):r}function sd(r,t){return t.r=r.r,t.g=r.g,t.b=r.b,t}var ii=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=$n){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,ur.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=ur.workingColorSpace){return this.r=t,this.g=e,this.b=i,ur.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=ur.workingColorSpace){if(t=dL(t,1),e=zr(e,0,1),i=zr(i,0,1),e===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+e):i+e-i*e,a=2*i-s;this.r=i0(a,s,t+1/3),this.g=i0(a,s,t),this.b=i0(a,s,t-1/3)}return ur.toWorkingColorSpace(this,n),this}setStyle(t,e=$n){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s,a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ur.toWorkingColorSpace(this,e),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ur.toWorkingColorSpace(this,e),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let h=parseFloat(s[1])/360,u=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(h,u,d,e)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){let s=n[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ur.toWorkingColorSpace(this,e),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ur.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=$n){let i=ST[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Eo(t.r),this.g=Eo(t.g),this.b=Eo(t.b),this}copyLinearToSRGB(t){return this.r=rd(t.r),this.g=rd(t.g),this.b=rd(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=$n){return ur.fromWorkingColorSpace(sd(this,Ii),t),zr(Ii.r*255,0,255)<<16^zr(Ii.g*255,0,255)<<8^zr(Ii.b*255,0,255)<<0}getHexString(t=$n){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ur.workingColorSpace){ur.fromWorkingColorSpace(sd(this,Ii),e);let i=Ii.r,n=Ii.g,s=Ii.b,a=Math.max(i,n,s),o=Math.min(i,n,s),h,u,d=(o+a)/2;if(o===a)h=0,u=0;else{let g=a-o;switch(u=d<=.5?g/(a+o):g/(2-a-o),a){case i:h=(n-s)/g+(n<s?6:0);break;case n:h=(s-i)/g+2;break;case s:h=(i-n)/g+4;break}h/=6}return t.h=h,t.s=u,t.l=d,t}getRGB(t,e=ur.workingColorSpace){return ur.fromWorkingColorSpace(sd(this,Ii),e),t.r=Ii.r,t.g=Ii.g,t.b=Ii.b,t}getStyle(t=$n){return ur.fromWorkingColorSpace(sd(this,Ii),t),t!==$n?`color(${t} ${Ii.r} ${Ii.g} ${Ii.b})`:`rgb(${Ii.r*255|0},${Ii.g*255|0},${Ii.b*255|0})`}offsetHSL(t,e,i){return this.getHSL(En),En.h+=t,En.s+=e,En.l+=i,this.setHSL(En.h,En.s,En.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(En),t.getHSL(nd);let i=Kv(En.h,nd.h,e),n=Kv(En.s,nd.s,e),s=Kv(En.l,nd.l,e);return this.setHSL(i,n,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};ii.NAMES=ST;var Xl,r0=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Xl===void 0&&(Xl=Nu("canvas")),Xl.width=t.width,Xl.height=t.height;let i=Xl.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Xl}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap){let e=Nu("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let n=i.getImageData(0,0,t.width,t.height),s=n.data;for(let a=0;a<s.length;a++)s[a]=Eo(s[a]/255)*255;return i.putImageData(n,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Eo(e[i]/255)*255):e[i]=Eo(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},n0=class{constructor(t=null){this.isSource=!0,this.uuid=Ou(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let s;if(Array.isArray(n)){s=[];for(let a=0,o=n.length;a<o;a++)n[a].isDataTexture?s.push(s0(n[a].image)):s.push(s0(n[a]))}else s=s0(n);i.url=s}return e||(t.images[this.uuid]=i),i}};function s0(r){return typeof HTMLImageElement!="undefined"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap?r0.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var pL=0,cr=class extends Co{constructor(t=cr.DEFAULT_IMAGE,e=cr.DEFAULT_MAPPING,i=Tn,n=Tn,s=Er,a=Qf,o=Cn,h=xo,u=cr.DEFAULT_ANISOTROPY,d=To){super();this.isTexture=!0,Object.defineProperty(this,"id",{value:pL++}),this.uuid=Ou(),this.name="",this.source=new n0(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=h,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==WS)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Gv:t.x=t.x-Math.floor(t.x);break;case Tn:t.x=t.x<0?0:1;break;case Hv:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Gv:t.y=t.y-Math.floor(t.y);break;case Tn:t.y=t.y<0?0:1;break;case Hv:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};cr.DEFAULT_IMAGE=null;cr.DEFAULT_MAPPING=WS;cr.DEFAULT_ANISOTROPY=1;var Oi=class{constructor(t=0,e=0,i=0,n=1){Oi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,s=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*n+a[12]*s,this.y=a[1]*e+a[5]*i+a[9]*n+a[13]*s,this.z=a[2]*e+a[6]*i+a[10]*n+a[14]*s,this.w=a[3]*e+a[7]*i+a[11]*n+a[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,s,a=.01,o=.1,h=t.elements,u=h[0],d=h[4],g=h[8],f=h[1],m=h[5],_=h[9],v=h[2],b=h[6],C=h[10];if(Math.abs(d-f)<a&&Math.abs(g-v)<a&&Math.abs(_-b)<a){if(Math.abs(d+f)<o&&Math.abs(g+v)<o&&Math.abs(_+b)<o&&Math.abs(u+m+C-3)<o)return this.set(1,0,0,0),this;e=Math.PI;let E=(u+1)/2,w=(m+1)/2,A=(C+1)/2,R=(d+f)/4,N=(g+v)/4,D=(_+b)/4;return E>w&&E>A?E<a?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(E),n=R/i,s=N/i):w>A?w<a?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(w),i=R/n,s=D/n):A<a?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(A),i=N/s,n=D/s),this.set(i,n,s,e),this}let M=Math.sqrt((b-_)*(b-_)+(g-v)*(g-v)+(f-d)*(f-d));return Math.abs(M)<.001&&(M=1),this.x=(b-_)/M,this.y=(g-v)/M,this.z=(f-d)/M,this.w=Math.acos((u+m+C-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},da=class extends Co{constructor(t=1,e=1,i={}){super();this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Oi(0,0,t,e),this.scissorTest=!1,this.viewport=new Oi(0,0,t,e);let n={width:t,height:e,depth:1};this.texture=new cr(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Er,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new n0(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},a0=class extends cr{constructor(t=null,e=1,i=1,n=1){super(null);this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var TT=class extends cr{constructor(t=null,e=1,i=1,n=1){super(null);this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=Cr,this.minFilter=Cr,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Mo=class{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,s,a,o){let h=i[n+0],u=i[n+1],d=i[n+2],g=i[n+3],f=s[a+0],m=s[a+1],_=s[a+2],v=s[a+3];if(o===0){t[e+0]=h,t[e+1]=u,t[e+2]=d,t[e+3]=g;return}if(o===1){t[e+0]=f,t[e+1]=m,t[e+2]=_,t[e+3]=v;return}if(g!==v||h!==f||u!==m||d!==_){let b=1-o,C=h*f+u*m+d*_+g*v,M=C>=0?1:-1,E=1-C*C;if(E>Number.EPSILON){let A=Math.sqrt(E),R=Math.atan2(A,C*M);b=Math.sin(b*R)/A,o=Math.sin(o*R)/A}let w=o*M;if(h=h*b+f*w,u=u*b+m*w,d=d*b+_*w,g=g*b+v*w,b===1-o){let A=1/Math.sqrt(h*h+u*u+d*d+g*g);h*=A,u*=A,d*=A,g*=A}}t[e]=h,t[e+1]=u,t[e+2]=d,t[e+3]=g}static multiplyQuaternionsFlat(t,e,i,n,s,a){let o=i[n],h=i[n+1],u=i[n+2],d=i[n+3],g=s[a],f=s[a+1],m=s[a+2],_=s[a+3];return t[e]=o*_+d*g+h*m-u*f,t[e+1]=h*_+d*f+u*g-o*m,t[e+2]=u*_+d*m+o*f-h*g,t[e+3]=d*_-o*g-h*f-u*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let i=t._x,n=t._y,s=t._z,a=t._order,o=Math.cos,h=Math.sin,u=o(i/2),d=o(n/2),g=o(s/2),f=h(i/2),m=h(n/2),_=h(s/2);switch(a){case"XYZ":this._x=f*d*g+u*m*_,this._y=u*m*g-f*d*_,this._z=u*d*_+f*m*g,this._w=u*d*g-f*m*_;break;case"YXZ":this._x=f*d*g+u*m*_,this._y=u*m*g-f*d*_,this._z=u*d*_-f*m*g,this._w=u*d*g+f*m*_;break;case"ZXY":this._x=f*d*g-u*m*_,this._y=u*m*g+f*d*_,this._z=u*d*_+f*m*g,this._w=u*d*g-f*m*_;break;case"ZYX":this._x=f*d*g-u*m*_,this._y=u*m*g+f*d*_,this._z=u*d*_-f*m*g,this._w=u*d*g+f*m*_;break;case"YZX":this._x=f*d*g+u*m*_,this._y=u*m*g+f*d*_,this._z=u*d*_-f*m*g,this._w=u*d*g-f*m*_;break;case"XZY":this._x=f*d*g-u*m*_,this._y=u*m*g-f*d*_,this._z=u*d*_+f*m*g,this._w=u*d*g+f*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],n=e[4],s=e[8],a=e[1],o=e[5],h=e[9],u=e[2],d=e[6],g=e[10],f=i+o+g;if(f>0){let m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(d-h)*m,this._y=(s-u)*m,this._z=(a-n)*m}else if(i>o&&i>g){let m=2*Math.sqrt(1+i-o-g);this._w=(d-h)/m,this._x=.25*m,this._y=(n+a)/m,this._z=(s+u)/m}else if(o>g){let m=2*Math.sqrt(1+o-i-g);this._w=(s-u)/m,this._x=(n+a)/m,this._y=.25*m,this._z=(h+d)/m}else{let m=2*Math.sqrt(1+g-i-o);this._w=(a-n)/m,this._x=(s+u)/m,this._y=(h+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zr(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,n=t._y,s=t._z,a=t._w,o=e._x,h=e._y,u=e._z,d=e._w;return this._x=i*d+a*o+n*u-s*h,this._y=n*d+a*h+s*o-i*u,this._z=s*d+a*u+i*h-n*o,this._w=a*d-i*o-n*h-s*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,n=this._y,s=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=i,this._y=n,this._z=s,this;let h=1-o*o;if(h<=Number.EPSILON){let m=1-e;return this._w=m*a+e*this._w,this._x=m*i+e*this._x,this._y=m*n+e*this._y,this._z=m*s+e*this._z,this.normalize(),this._onChangeCallback(),this}let u=Math.sqrt(h),d=Math.atan2(u,o),g=Math.sin((1-e)*d)/u,f=Math.sin(e*d)/u;return this._w=a*g+this._w*f,this._x=i*g+this._x*f,this._y=n*g+this._y*f,this._z=s*g+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(s),i*Math.cos(s),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},$t=class{constructor(t=0,e=0,i=0){$t.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(CT.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(CT.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*n,this.y=s[1]*e+s[4]*i+s[7]*n,this.z=s[2]*e+s[5]*i+s[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,s=t.elements,a=1/(s[3]*e+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*n+s[12])*a,this.y=(s[1]*e+s[5]*i+s[9]*n+s[13])*a,this.z=(s[2]*e+s[6]*i+s[10]*n+s[14])*a,this}applyQuaternion(t){let e=this.x,i=this.y,n=this.z,s=t.x,a=t.y,o=t.z,h=t.w,u=h*e+a*n-o*i,d=h*i+o*e-s*n,g=h*n+s*i-a*e,f=-s*e-a*i-o*n;return this.x=u*h+f*-s+d*-o-g*-a,this.y=d*h+f*-a+g*-s-u*-o,this.z=g*h+f*-o+u*-a-d*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n,this.y=s[1]*e+s[5]*i+s[9]*n,this.z=s[2]*e+s[6]*i+s[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,n=t.y,s=t.z,a=e.x,o=e.y,h=e.z;return this.x=n*h-s*o,this.y=s*a-i*h,this.z=i*o-n*a,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return o0.copy(this).projectOnVector(t),this.sub(o0)}reflect(t){return this.sub(o0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(zr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},o0=new $t,CT=new Mo,ql=class{constructor(t=new $t(1/0,1/0,1/0),e=new $t(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,s=-1/0,a=-1/0,o=-1/0;for(let h=0,u=t.length;h<u;h+=3){let d=t[h],g=t[h+1],f=t[h+2];d<e&&(e=d),g<i&&(i=g),f<n&&(n=f),d>s&&(s=d),g>a&&(a=g),f>o&&(o=f)}return this.min.set(e,i,n),this.max.set(s,a,o),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,s=-1/0,a=-1/0,o=-1/0;for(let h=0,u=t.count;h<u;h++){let d=t.getX(h),g=t.getY(h),f=t.getZ(h);d<e&&(e=d),g<i&&(i=g),f<n&&(n=f),d>s&&(s=d),g>a&&(a=g),f>o&&(o=f)}return this.min.set(e,i,n),this.max.set(s,a,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Po.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0)if(e&&i.attributes!=null&&i.attributes.position!==void 0){let s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)Po.fromBufferAttribute(s,a).applyMatrix4(t.matrixWorld),this.expandByPoint(Po)}else i.boundingBox===null&&i.computeBoundingBox(),l0.copy(i.boundingBox),l0.applyMatrix4(t.matrixWorld),this.union(l0);let n=t.children;for(let s=0,a=n.length;s<a;s++)this.expandByObject(n[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Po),Po.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Bu),ad.subVectors(this.max,Bu),Yl.subVectors(t.a,Bu),jl.subVectors(t.b,Bu),Zl.subVectors(t.c,Bu),pa.subVectors(jl,Yl),ma.subVectors(Zl,jl),Ao.subVectors(Yl,Zl);let e=[0,-pa.z,pa.y,0,-ma.z,ma.y,0,-Ao.z,Ao.y,pa.z,0,-pa.x,ma.z,0,-ma.x,Ao.z,0,-Ao.x,-pa.y,pa.x,0,-ma.y,ma.x,0,-Ao.y,Ao.x,0];return!h0(e,Yl,jl,Zl,ad)||(e=[1,0,0,0,1,0,0,0,1],!h0(e,Yl,jl,Zl,ad))?!1:(od.crossVectors(pa,ma),e=[od.x,od.y,od.z],h0(e,Yl,jl,Zl,ad))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Po.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Po).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(As[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),As[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),As[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),As[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),As[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),As[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),As[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),As[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(As),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},As=[new $t,new $t,new $t,new $t,new $t,new $t,new $t,new $t],Po=new $t,l0=new ql,Yl=new $t,jl=new $t,Zl=new $t,pa=new $t,ma=new $t,Ao=new $t,Bu=new $t,ad=new $t,od=new $t,Io=new $t;function h0(r,t,e,i,n){for(let s=0,a=r.length-3;s<=a;s+=3){Io.fromArray(r,s);let o=n.x*Math.abs(Io.x)+n.y*Math.abs(Io.y)+n.z*Math.abs(Io.z),h=t.dot(Io),u=e.dot(Io),d=i.dot(Io);if(Math.max(-Math.max(h,u,d),Math.min(h,u,d))>o)return!1}return!0}var mL=new ql,zu=new $t,u0=new $t,ld=class{constructor(t=new $t,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):mL.setFromPoints(t).getCenter(i);let n=0;for(let s=0,a=t.length;s<a;s++)n=Math.max(n,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;zu.subVectors(t,this.center);let e=zu.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),n=(i-this.radius)*.5;this.center.addScaledVector(zu,n/i),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(u0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(zu.copy(t.center).add(u0)),this.expandByPoint(zu.copy(t.center).sub(u0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Is=new $t,c0=new $t,hd=new $t,ga=new $t,f0=new $t,ud=new $t,d0=new $t,p0=class{constructor(t=new $t,e=new $t(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Is)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Is.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Is.copy(this.direction).multiplyScalar(e).add(this.origin),Is.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){c0.copy(t).add(e).multiplyScalar(.5),hd.copy(e).sub(t).normalize(),ga.copy(this.origin).sub(c0);let s=t.distanceTo(e)*.5,a=-this.direction.dot(hd),o=ga.dot(this.direction),h=-ga.dot(hd),u=ga.lengthSq(),d=Math.abs(1-a*a),g,f,m,_;if(d>0)if(g=a*h-o,f=a*o-h,_=s*d,g>=0)if(f>=-_)if(f<=_){let v=1/d;g*=v,f*=v,m=g*(g+a*f+2*o)+f*(a*g+f+2*h)+u}else f=s,g=Math.max(0,-(a*f+o)),m=-g*g+f*(f+2*h)+u;else f=-s,g=Math.max(0,-(a*f+o)),m=-g*g+f*(f+2*h)+u;else f<=-_?(g=Math.max(0,-(-a*s+o)),f=g>0?-s:Math.min(Math.max(-s,-h),s),m=-g*g+f*(f+2*h)+u):f<=_?(g=0,f=Math.min(Math.max(-s,-h),s),m=f*(f+2*h)+u):(g=Math.max(0,-(a*s+o)),f=g>0?s:Math.min(Math.max(-s,-h),s),m=-g*g+f*(f+2*h)+u);else f=a>0?-s:s,g=Math.max(0,-(a*f+o)),m=-g*g+f*(f+2*h)+u;return i&&i.copy(this.direction).multiplyScalar(g).add(this.origin),n&&n.copy(hd).multiplyScalar(f).add(c0),m}intersectSphere(t,e){Is.subVectors(t.center,this.origin);let i=Is.dot(this.direction),n=Is.dot(Is)-i*i,s=t.radius*t.radius;if(n>s)return null;let a=Math.sqrt(s-n),o=i-a,h=i+a;return o<0&&h<0?null:o<0?this.at(h,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,s,a,o,h,u=1/this.direction.x,d=1/this.direction.y,g=1/this.direction.z,f=this.origin;return u>=0?(i=(t.min.x-f.x)*u,n=(t.max.x-f.x)*u):(i=(t.max.x-f.x)*u,n=(t.min.x-f.x)*u),d>=0?(s=(t.min.y-f.y)*d,a=(t.max.y-f.y)*d):(s=(t.max.y-f.y)*d,a=(t.min.y-f.y)*d),i>a||s>n||((s>i||isNaN(i))&&(i=s),(a<n||isNaN(n))&&(n=a),g>=0?(o=(t.min.z-f.z)*g,h=(t.max.z-f.z)*g):(o=(t.max.z-f.z)*g,h=(t.min.z-f.z)*g),i>h||o>n)||((o>i||i!==i)&&(i=o),(h<n||n!==n)&&(n=h),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return this.intersectBox(t,Is)!==null}intersectTriangle(t,e,i,n,s){f0.subVectors(e,t),ud.subVectors(i,t),d0.crossVectors(f0,ud);let a=this.direction.dot(d0),o;if(a>0){if(n)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ga.subVectors(this.origin,t);let h=o*this.direction.dot(ud.crossVectors(ga,ud));if(h<0)return null;let u=o*this.direction.dot(f0.cross(ga));if(u<0||h+u>a)return null;let d=-o*ga.dot(d0);return d<0?null:this.at(d/a,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ni=class{constructor(){Ni.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,s,a,o,h,u,d,g,f,m,_,v,b){let C=this.elements;return C[0]=t,C[4]=e,C[8]=i,C[12]=n,C[1]=s,C[5]=a,C[9]=o,C[13]=h,C[2]=u,C[6]=d,C[10]=g,C[14]=f,C[3]=m,C[7]=_,C[11]=v,C[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ni().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,n=1/$l.setFromMatrixColumn(t,0).length(),s=1/$l.setFromMatrixColumn(t,1).length(),a=1/$l.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*a,e[9]=i[9]*a,e[10]=i[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,n=t.y,s=t.z,a=Math.cos(i),o=Math.sin(i),h=Math.cos(n),u=Math.sin(n),d=Math.cos(s),g=Math.sin(s);if(t.order==="XYZ"){let f=a*d,m=a*g,_=o*d,v=o*g;e[0]=h*d,e[4]=-h*g,e[8]=u,e[1]=m+_*u,e[5]=f-v*u,e[9]=-o*h,e[2]=v-f*u,e[6]=_+m*u,e[10]=a*h}else if(t.order==="YXZ"){let f=h*d,m=h*g,_=u*d,v=u*g;e[0]=f+v*o,e[4]=_*o-m,e[8]=a*u,e[1]=a*g,e[5]=a*d,e[9]=-o,e[2]=m*o-_,e[6]=v+f*o,e[10]=a*h}else if(t.order==="ZXY"){let f=h*d,m=h*g,_=u*d,v=u*g;e[0]=f-v*o,e[4]=-a*g,e[8]=_+m*o,e[1]=m+_*o,e[5]=a*d,e[9]=v-f*o,e[2]=-a*u,e[6]=o,e[10]=a*h}else if(t.order==="ZYX"){let f=a*d,m=a*g,_=o*d,v=o*g;e[0]=h*d,e[4]=_*u-m,e[8]=f*u+v,e[1]=h*g,e[5]=v*u+f,e[9]=m*u-_,e[2]=-u,e[6]=o*h,e[10]=a*h}else if(t.order==="YZX"){let f=a*h,m=a*u,_=o*h,v=o*u;e[0]=h*d,e[4]=v-f*g,e[8]=_*g+m,e[1]=g,e[5]=a*d,e[9]=-o*d,e[2]=-u*d,e[6]=m*g+_,e[10]=f-v*g}else if(t.order==="XZY"){let f=a*h,m=a*u,_=o*h,v=o*u;e[0]=h*d,e[4]=-g,e[8]=u*d,e[1]=f*g+v,e[5]=a*d,e[9]=m*g-_,e[2]=_*g-m,e[6]=o*d,e[10]=v*g+f}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(gL,t,vL)}lookAt(t,e,i){let n=this.elements;return Ur.subVectors(t,e),Ur.lengthSq()===0&&(Ur.z=1),Ur.normalize(),va.crossVectors(i,Ur),va.lengthSq()===0&&(Math.abs(i.z)===1?Ur.x+=1e-4:Ur.z+=1e-4,Ur.normalize(),va.crossVectors(i,Ur)),va.normalize(),cd.crossVectors(Ur,va),n[0]=va.x,n[4]=cd.x,n[8]=Ur.x,n[1]=va.y,n[5]=cd.y,n[9]=Ur.y,n[2]=va.z,n[6]=cd.z,n[10]=Ur.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,s=this.elements,a=i[0],o=i[4],h=i[8],u=i[12],d=i[1],g=i[5],f=i[9],m=i[13],_=i[2],v=i[6],b=i[10],C=i[14],M=i[3],E=i[7],w=i[11],A=i[15],R=n[0],N=n[4],D=n[8],X=n[12],at=n[1],ft=n[5],gt=n[9],ut=n[13],xt=n[2],nt=n[6],it=n[10],tt=n[14],W=n[3],Q=n[7],ot=n[11],ct=n[15];return s[0]=a*R+o*at+h*xt+u*W,s[4]=a*N+o*ft+h*nt+u*Q,s[8]=a*D+o*gt+h*it+u*ot,s[12]=a*X+o*ut+h*tt+u*ct,s[1]=d*R+g*at+f*xt+m*W,s[5]=d*N+g*ft+f*nt+m*Q,s[9]=d*D+g*gt+f*it+m*ot,s[13]=d*X+g*ut+f*tt+m*ct,s[2]=_*R+v*at+b*xt+C*W,s[6]=_*N+v*ft+b*nt+C*Q,s[10]=_*D+v*gt+b*it+C*ot,s[14]=_*X+v*ut+b*tt+C*ct,s[3]=M*R+E*at+w*xt+A*W,s[7]=M*N+E*ft+w*nt+A*Q,s[11]=M*D+E*gt+w*it+A*ot,s[15]=M*X+E*ut+w*tt+A*ct,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],n=t[8],s=t[12],a=t[1],o=t[5],h=t[9],u=t[13],d=t[2],g=t[6],f=t[10],m=t[14],_=t[3],v=t[7],b=t[11],C=t[15];return _*(+s*h*g-n*u*g-s*o*f+i*u*f+n*o*m-i*h*m)+v*(+e*h*m-e*u*f+s*a*f-n*a*m+n*u*d-s*h*d)+b*(+e*u*g-e*o*m-s*a*g+i*a*m+s*o*d-i*u*d)+C*(-n*o*d-e*h*g+e*o*f+n*a*g-i*a*f+i*h*d)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],d=t[8],g=t[9],f=t[10],m=t[11],_=t[12],v=t[13],b=t[14],C=t[15],M=g*b*u-v*f*u+v*h*m-o*b*m-g*h*C+o*f*C,E=_*f*u-d*b*u-_*h*m+a*b*m+d*h*C-a*f*C,w=d*v*u-_*g*u+_*o*m-a*v*m-d*o*C+a*g*C,A=_*g*h-d*v*h-_*o*f+a*v*f+d*o*b-a*g*b,R=e*M+i*E+n*w+s*A;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let N=1/R;return t[0]=M*N,t[1]=(v*f*s-g*b*s-v*n*m+i*b*m+g*n*C-i*f*C)*N,t[2]=(o*b*s-v*h*s+v*n*u-i*b*u-o*n*C+i*h*C)*N,t[3]=(g*h*s-o*f*s-g*n*u+i*f*u+o*n*m-i*h*m)*N,t[4]=E*N,t[5]=(d*b*s-_*f*s+_*n*m-e*b*m-d*n*C+e*f*C)*N,t[6]=(_*h*s-a*b*s-_*n*u+e*b*u+a*n*C-e*h*C)*N,t[7]=(a*f*s-d*h*s+d*n*u-e*f*u-a*n*m+e*h*m)*N,t[8]=w*N,t[9]=(_*g*s-d*v*s-_*i*m+e*v*m+d*i*C-e*g*C)*N,t[10]=(a*v*s-_*o*s+_*i*u-e*v*u-a*i*C+e*o*C)*N,t[11]=(d*o*s-a*g*s-d*i*u+e*g*u+a*i*m-e*o*m)*N,t[12]=A*N,t[13]=(d*v*n-_*g*n+_*i*f-e*v*f-d*i*b+e*g*b)*N,t[14]=(_*o*n-a*v*n-_*i*h+e*v*h+a*i*b-e*o*b)*N,t[15]=(a*g*n-d*o*n+d*i*h-e*g*h-a*i*f+e*o*f)*N,this}scale(t){let e=this.elements,i=t.x,n=t.y,s=t.z;return e[0]*=i,e[4]*=n,e[8]*=s,e[1]*=i,e[5]*=n,e[9]*=s,e[2]*=i,e[6]*=n,e[10]*=s,e[3]*=i,e[7]*=n,e[11]*=s,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),n=Math.sin(e),s=1-i,a=t.x,o=t.y,h=t.z,u=s*a,d=s*o;return this.set(u*a+i,u*o-n*h,u*h+n*o,0,u*o+n*h,d*o+i,d*h-n*a,0,u*h-n*o,d*h+n*a,s*h*h+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,s,a){return this.set(1,i,s,0,t,1,a,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){let n=this.elements,s=e._x,a=e._y,o=e._z,h=e._w,u=s+s,d=a+a,g=o+o,f=s*u,m=s*d,_=s*g,v=a*d,b=a*g,C=o*g,M=h*u,E=h*d,w=h*g,A=i.x,R=i.y,N=i.z;return n[0]=(1-(v+C))*A,n[1]=(m+w)*A,n[2]=(_-E)*A,n[3]=0,n[4]=(m-w)*R,n[5]=(1-(f+C))*R,n[6]=(b+M)*R,n[7]=0,n[8]=(_+E)*N,n[9]=(b-M)*N,n[10]=(1-(f+v))*N,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){let n=this.elements,s=$l.set(n[0],n[1],n[2]).length(),a=$l.set(n[4],n[5],n[6]).length(),o=$l.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),t.x=n[12],t.y=n[13],t.z=n[14],Mn.copy(this);let u=1/s,d=1/a,g=1/o;return Mn.elements[0]*=u,Mn.elements[1]*=u,Mn.elements[2]*=u,Mn.elements[4]*=d,Mn.elements[5]*=d,Mn.elements[6]*=d,Mn.elements[8]*=g,Mn.elements[9]*=g,Mn.elements[10]*=g,e.setFromRotationMatrix(Mn),i.x=s,i.y=a,i.z=o,this}makePerspective(t,e,i,n,s,a){let o=this.elements,h=2*s/(e-t),u=2*s/(i-n),d=(e+t)/(e-t),g=(i+n)/(i-n),f=-(a+s)/(a-s),m=-2*a*s/(a-s);return o[0]=h,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=u,o[9]=g,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,n,s,a){let o=this.elements,h=1/(e-t),u=1/(i-n),d=1/(a-s),g=(e+t)*h,f=(i+n)*u,m=(a+s)*d;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-g,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*d,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},$l=new $t,Mn=new Ni,gL=new $t(0,0,0),vL=new $t(1,1,1),va=new $t,cd=new $t,Ur=new $t,ET=new Ni,MT=new Mo,Jl=class{constructor(t=0,e=0,i=0,n=Jl.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){let n=t.elements,s=n[0],a=n[4],o=n[8],h=n[1],u=n[5],d=n[9],g=n[2],f=n[6],m=n[10];switch(e){case"XYZ":this._y=Math.asin(zr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-zr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(zr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-g,m),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-zr(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(zr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-zr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return ET.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ET,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return MT.setFromEuler(this),this.setFromQuaternion(MT,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Jl.DefaultOrder="XYZ";Jl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var fd=class{constructor(){this.mask=1|0}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=4294967295|0}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}isEnabled(t){return(this.mask&(1<<t|0))!=0}},_L=0,PT=new $t,Kl=new Mo,Ds=new Ni,dd=new $t,Vu=new $t,yL=new $t,xL=new Mo,AT=new $t(1,0,0),IT=new $t(0,1,0),DT=new $t(0,0,1),bL={type:"added"},LT={type:"removed"},Pr=class extends Co{constructor(){super();this.isObject3D=!0,Object.defineProperty(this,"id",{value:_L++}),this.uuid=Ou(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pr.DefaultUp.clone();let t=new $t,e=new Jl,i=new Mo,n=new $t(1,1,1);function s(){i.setFromEuler(e,!1)}function a(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Ni},normalMatrix:{value:new Mr}}),this.matrix=new Ni,this.matrixWorld=new Ni,this.matrixAutoUpdate=Pr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Pr.DefaultMatrixWorldAutoUpdate,this.layers=new fd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Kl.setFromAxisAngle(t,e),this.quaternion.multiply(Kl),this}rotateOnWorldAxis(t,e){return Kl.setFromAxisAngle(t,e),this.quaternion.premultiply(Kl),this}rotateX(t){return this.rotateOnAxis(AT,t)}rotateY(t){return this.rotateOnAxis(IT,t)}rotateZ(t){return this.rotateOnAxis(DT,t)}translateOnAxis(t,e){return PT.copy(t).applyQuaternion(this.quaternion),this.position.add(PT.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(AT,t)}translateY(t){return this.translateOnAxis(IT,t)}translateZ(t){return this.translateOnAxis(DT,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Ds.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?dd.copy(t):dd.set(t,e,i);let n=this.parent;this.updateWorldMatrix(!0,!1),Vu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ds.lookAt(Vu,dd,this.up):Ds.lookAt(dd,Vu,this.up),this.quaternion.setFromRotationMatrix(Ds),n&&(Ds.extractRotation(n.matrixWorld),Kl.setFromRotationMatrix(Ds),this.quaternion.premultiply(Kl.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(bL)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(LT)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(LT)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ds.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ds.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ds),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){let a=this.children[i].getObjectByProperty(t,e);if(a!==void 0)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,t,yL),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,xL,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){let e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let i=0,n=e.length;i<n;i++){let s=e[i];(s.matrixWorldAutoUpdate===!0||t===!0)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){let n=this.children;for(let s=0,a=n.length;s<a;s++){let o=n[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(o,h){return o[h.uuid]===void 0&&(o[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(t.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let h=o.shapes;if(Array.isArray(h))for(let u=0,d=h.length;u<d;u++){let g=h[u];s(t.shapes,g)}else s(t.shapes,h)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let h=0,u=this.material.length;h<u;h++)o.push(s(t.materials,this.material[h]));n.material=o}else n.material=s(t.materials,this.material);if(this.children.length>0){n.children=[];for(let o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let o=0;o<this.animations.length;o++){let h=this.animations[o];n.animations.push(s(t.animations,h))}}if(e){let o=a(t.geometries),h=a(t.materials),u=a(t.textures),d=a(t.images),g=a(t.shapes),f=a(t.skeletons),m=a(t.animations),_=a(t.nodes);o.length>0&&(i.geometries=o),h.length>0&&(i.materials=h),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),g.length>0&&(i.shapes=g),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),_.length>0&&(i.nodes=_)}return i.object=n,i;function a(o){let h=[];for(let u in o){let d=o[u];delete d.metadata,h.push(d)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){let n=t.children[i];this.add(n.clone())}return this}};Pr.DefaultUp=new $t(0,1,0);Pr.DefaultMatrixAutoUpdate=!0;Pr.DefaultMatrixWorldAutoUpdate=!0;var Pn=new $t,Ls=new $t,m0=new $t,Rs=new $t,Ql=new $t,th=new $t,RT=new $t,g0=new $t,v0=new $t,_0=new $t,Jn=class{constructor(t=new $t,e=new $t,i=new $t){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),Pn.subVectors(t,e),n.cross(Pn);let s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(t,e,i,n,s){Pn.subVectors(n,e),Ls.subVectors(i,e),m0.subVectors(t,e);let a=Pn.dot(Pn),o=Pn.dot(Ls),h=Pn.dot(m0),u=Ls.dot(Ls),d=Ls.dot(m0),g=a*u-o*o;if(g===0)return s.set(-2,-1,-1);let f=1/g,m=(u*h-o*d)*f,_=(a*d-o*h)*f;return s.set(1-m-_,_,m)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Rs),Rs.x>=0&&Rs.y>=0&&Rs.x+Rs.y<=1}static getUV(t,e,i,n,s,a,o,h){return this.getBarycoord(t,e,i,n,Rs),h.set(0,0),h.addScaledVector(s,Rs.x),h.addScaledVector(a,Rs.y),h.addScaledVector(o,Rs.z),h}static isFrontFacing(t,e,i,n){return Pn.subVectors(i,e),Ls.subVectors(t,e),Pn.cross(Ls).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Pn.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),Pn.cross(Ls).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Jn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Jn.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,s){return Jn.getUV(t,this.a,this.b,this.c,e,i,n,s)}containsPoint(t){return Jn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Jn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,n=this.b,s=this.c,a,o;Ql.subVectors(n,i),th.subVectors(s,i),g0.subVectors(t,i);let h=Ql.dot(g0),u=th.dot(g0);if(h<=0&&u<=0)return e.copy(i);v0.subVectors(t,n);let d=Ql.dot(v0),g=th.dot(v0);if(d>=0&&g<=d)return e.copy(n);let f=h*g-d*u;if(f<=0&&h>=0&&d<=0)return a=h/(h-d),e.copy(i).addScaledVector(Ql,a);_0.subVectors(t,s);let m=Ql.dot(_0),_=th.dot(_0);if(_>=0&&m<=_)return e.copy(s);let v=m*u-h*_;if(v<=0&&u>=0&&_<=0)return o=u/(u-_),e.copy(i).addScaledVector(th,o);let b=d*_-m*g;if(b<=0&&g-d>=0&&m-_>=0)return RT.subVectors(s,n),o=(g-d)/(g-d+(m-_)),e.copy(n).addScaledVector(RT,o);let C=1/(b+v+f);return a=v*C,o=f*C,e.copy(i).addScaledVector(Ql,a).addScaledVector(th,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},wL=0,Uu=class extends Co{constructor(){super();this.isMaterial=!0,Object.defineProperty(this,"id",{value:wL++}),this.uuid=Ou(),this.name="",this.type="Material",this.blending=zl,this.side=Bl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=US,this.blendDst=GS,this.blendEquation=Vl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zv,this.stencilZFail=Zv,this.stencilZPass=Zv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}let n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==zl&&(i.blending=this.blending),this.side!==Bl&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function n(s){let a=[];for(let o in s){let h=s[o];delete h.metadata,a.push(h)}return a}if(e){let s=n(t.textures),a=n(t.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let n=e.length;i=new Array(n);for(let s=0;s!==n;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},y0=class extends Uu{constructor(t){super();this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ii(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=HS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},Ci=new $t,pd=new Ue,An=class{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i===!0,this.usage=_T,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)pd.fromBufferAttribute(this,e),pd.applyMatrix3(t),this.setXY(e,pd.x,pd.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyMatrix3(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyMatrix4(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.applyNormalMatrix(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ci.fromBufferAttribute(this,e),Ci.transformDirection(t),this.setXYZ(e,Ci.x,Ci.y,Ci.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=id(e,this.array)),e}setX(t,e){return this.normalized&&(e=Vr(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=id(e,this.array)),e}setY(t,e){return this.normalized&&(e=Vr(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=id(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Vr(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=id(e,this.array)),e}setW(t,e){return this.normalized&&(e=Vr(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Vr(e,this.array),i=Vr(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=Vr(e,this.array),i=Vr(i,this.array),n=Vr(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,s){return t*=this.itemSize,this.normalized&&(e=Vr(e,this.array),i=Vr(i,this.array),n=Vr(n,this.array),s=Vr(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==_T&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}};var x0=class extends An{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var b0=class extends An{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var _a=class extends An{constructor(t,e,i){super(new Float32Array(t),e,i)}};var SL=0,an=new Ni,w0=new Pr,eh=new $t,Gr=new ql,Gu=new ql,Bi=new $t,ya=class extends Co{constructor(){super();this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SL++}),this.uuid=Ou(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(wT(t)?b0:x0)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new Mr().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}let n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return an.makeRotationFromQuaternion(t),this.applyMatrix4(an),this}rotateX(t){return an.makeRotationX(t),this.applyMatrix4(an),this}rotateY(t){return an.makeRotationY(t),this.applyMatrix4(an),this}rotateZ(t){return an.makeRotationZ(t),this.applyMatrix4(an),this}translate(t,e,i){return an.makeTranslation(t,e,i),this.applyMatrix4(an),this}scale(t,e,i){return an.makeScale(t,e,i),this.applyMatrix4(an),this}lookAt(t){return w0.lookAt(t),w0.updateMatrix(),this.applyMatrix4(w0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(eh).negate(),this.translate(eh.x,eh.y,eh.z),this}setFromPoints(t){let e=[];for(let i=0,n=t.length;i<n;i++){let s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new _a(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ql);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $t(-1/0,-1/0,-1/0),new $t(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){let s=e[i];Gr.setFromBufferAttribute(s),this.morphTargetsRelative?(Bi.addVectors(this.boundingBox.min,Gr.min),this.boundingBox.expandByPoint(Bi),Bi.addVectors(this.boundingBox.max,Gr.max),this.boundingBox.expandByPoint(Bi)):(this.boundingBox.expandByPoint(Gr.min),this.boundingBox.expandByPoint(Gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ld);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $t,1/0);return}if(t){let i=this.boundingSphere.center;if(Gr.setFromBufferAttribute(t),e)for(let s=0,a=e.length;s<a;s++){let o=e[s];Gu.setFromBufferAttribute(o),this.morphTargetsRelative?(Bi.addVectors(Gr.min,Gu.min),Gr.expandByPoint(Bi),Bi.addVectors(Gr.max,Gu.max),Gr.expandByPoint(Bi)):(Gr.expandByPoint(Gu.min),Gr.expandByPoint(Gu.max))}Gr.getCenter(i);let n=0;for(let s=0,a=t.count;s<a;s++)Bi.fromBufferAttribute(t,s),n=Math.max(n,i.distanceToSquared(Bi));if(e)for(let s=0,a=e.length;s<a;s++){let o=e[s],h=this.morphTargetsRelative;for(let u=0,d=o.count;u<d;u++)Bi.fromBufferAttribute(o,u),h&&(eh.fromBufferAttribute(t,u),Bi.add(eh)),n=Math.max(n,i.distanceToSquared(Bi))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.array,n=e.position.array,s=e.normal.array,a=e.uv.array,o=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new An(new Float32Array(4*o),4));let h=this.getAttribute("tangent").array,u=[],d=[];for(let at=0;at<o;at++)u[at]=new $t,d[at]=new $t;let g=new $t,f=new $t,m=new $t,_=new Ue,v=new Ue,b=new Ue,C=new $t,M=new $t;function E(at,ft,gt){g.fromArray(n,at*3),f.fromArray(n,ft*3),m.fromArray(n,gt*3),_.fromArray(a,at*2),v.fromArray(a,ft*2),b.fromArray(a,gt*2),f.sub(g),m.sub(g),v.sub(_),b.sub(_);let ut=1/(v.x*b.y-b.x*v.y);!isFinite(ut)||(C.copy(f).multiplyScalar(b.y).addScaledVector(m,-v.y).multiplyScalar(ut),M.copy(m).multiplyScalar(v.x).addScaledVector(f,-b.x).multiplyScalar(ut),u[at].add(C),u[ft].add(C),u[gt].add(C),d[at].add(M),d[ft].add(M),d[gt].add(M))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let at=0,ft=w.length;at<ft;++at){let gt=w[at],ut=gt.start,xt=gt.count;for(let nt=ut,it=ut+xt;nt<it;nt+=3)E(i[nt+0],i[nt+1],i[nt+2])}let A=new $t,R=new $t,N=new $t,D=new $t;function X(at){N.fromArray(s,at*3),D.copy(N);let ft=u[at];A.copy(ft),A.sub(N.multiplyScalar(N.dot(ft))).normalize(),R.crossVectors(D,ft);let ut=R.dot(d[at])<0?-1:1;h[at*4]=A.x,h[at*4+1]=A.y,h[at*4+2]=A.z,h[at*4+3]=ut}for(let at=0,ft=w.length;at<ft;++at){let gt=w[at],ut=gt.start,xt=gt.count;for(let nt=ut,it=ut+xt;nt<it;nt+=3)X(i[nt+0]),X(i[nt+1]),X(i[nt+2])}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new An(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);let n=new $t,s=new $t,a=new $t,o=new $t,h=new $t,u=new $t,d=new $t,g=new $t;if(t)for(let f=0,m=t.count;f<m;f+=3){let _=t.getX(f+0),v=t.getX(f+1),b=t.getX(f+2);n.fromBufferAttribute(e,_),s.fromBufferAttribute(e,v),a.fromBufferAttribute(e,b),d.subVectors(a,s),g.subVectors(n,s),d.cross(g),o.fromBufferAttribute(i,_),h.fromBufferAttribute(i,v),u.fromBufferAttribute(i,b),o.add(d),h.add(d),u.add(d),i.setXYZ(_,o.x,o.y,o.z),i.setXYZ(v,h.x,h.y,h.z),i.setXYZ(b,u.x,u.y,u.z)}else for(let f=0,m=e.count;f<m;f+=3)n.fromBufferAttribute(e,f+0),s.fromBufferAttribute(e,f+1),a.fromBufferAttribute(e,f+2),d.subVectors(a,s),g.subVectors(n,s),d.cross(g),i.setXYZ(f+0,d.x,d.y,d.z),i.setXYZ(f+1,d.x,d.y,d.z),i.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Bi.fromBufferAttribute(t,e),Bi.normalize(),t.setXYZ(e,Bi.x,Bi.y,Bi.z)}toNonIndexed(){function t(o,h){let u=o.array,d=o.itemSize,g=o.normalized,f=new u.constructor(h.length*d),m=0,_=0;for(let v=0,b=h.length;v<b;v++){o.isInterleavedBufferAttribute?m=h[v]*o.data.stride+o.offset:m=h[v]*d;for(let C=0;C<d;C++)f[_++]=u[m++]}return new An(f,d,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new ya,i=this.index.array,n=this.attributes;for(let o in n){let h=n[o],u=t(h,i);e.setAttribute(o,u)}let s=this.morphAttributes;for(let o in s){let h=[],u=s[o];for(let d=0,g=u.length;d<g;d++){let f=u[d],m=t(f,i);h.push(m)}e.morphAttributes[o]=h}e.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,h=a.length;o<h;o++){let u=a[o];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let h=this.parameters;for(let u in h)h[u]!==void 0&&(t[u]=h[u]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let h in i){let u=i[h];t.data.attributes[h]=u.toJSON(t.data)}let n={},s=!1;for(let h in this.morphAttributes){let u=this.morphAttributes[h],d=[];for(let g=0,f=u.length;g<f;g++){let m=u[g];d.push(m.toJSON(t.data))}d.length>0&&(n[h]=d,s=!0)}s&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let n=t.attributes;for(let u in n){let d=n[u];this.setAttribute(u,d.clone(e))}let s=t.morphAttributes;for(let u in s){let d=[],g=s[u];for(let f=0,m=g.length;f<m;f++)d.push(g[f].clone(e));this.morphAttributes[u]=d}this.morphTargetsRelative=t.morphTargetsRelative;let a=t.groups;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.addGroup(g.start,g.count,g.materialIndex)}let o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());let h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},FT=new Ni,ih=new p0,S0=new ld,xa=new $t,ba=new $t,wa=new $t,T0=new $t,C0=new $t,E0=new $t,md=new $t,gd=new $t,vd=new $t,_d=new Ue,yd=new Ue,xd=new Ue,M0=new $t,bd=new $t,In=class extends Pr{constructor(t=new ya,e=new y0){super();this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=n.length;s<a;s++){let o=n[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(t,e){let i=this.geometry,n=this.material,s=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),S0.copy(i.boundingSphere),S0.applyMatrix4(s),t.ray.intersectsSphere(S0)===!1)||(FT.copy(s).invert(),ih.copy(t.ray).applyMatrix4(FT),i.boundingBox!==null&&ih.intersectsBox(i.boundingBox)===!1))return;let a,o=i.index,h=i.attributes.position,u=i.morphAttributes.position,d=i.morphTargetsRelative,g=i.attributes.uv,f=i.attributes.uv2,m=i.groups,_=i.drawRange;if(o!==null)if(Array.isArray(n))for(let v=0,b=m.length;v<b;v++){let C=m[v],M=n[C.materialIndex],E=Math.max(C.start,_.start),w=Math.min(o.count,Math.min(C.start+C.count,_.start+_.count));for(let A=E,R=w;A<R;A+=3){let N=o.getX(A),D=o.getX(A+1),X=o.getX(A+2);a=wd(this,M,t,ih,h,u,d,g,f,N,D,X),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{let v=Math.max(0,_.start),b=Math.min(o.count,_.start+_.count);for(let C=v,M=b;C<M;C+=3){let E=o.getX(C),w=o.getX(C+1),A=o.getX(C+2);a=wd(this,n,t,ih,h,u,d,g,f,E,w,A),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}else if(h!==void 0)if(Array.isArray(n))for(let v=0,b=m.length;v<b;v++){let C=m[v],M=n[C.materialIndex],E=Math.max(C.start,_.start),w=Math.min(h.count,Math.min(C.start+C.count,_.start+_.count));for(let A=E,R=w;A<R;A+=3){let N=A,D=A+1,X=A+2;a=wd(this,M,t,ih,h,u,d,g,f,N,D,X),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{let v=Math.max(0,_.start),b=Math.min(h.count,_.start+_.count);for(let C=v,M=b;C<M;C+=3){let E=C,w=C+1,A=C+2;a=wd(this,n,t,ih,h,u,d,g,f,E,w,A),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}}};function TL(r,t,e,i,n,s,a,o){let h;if(t.side===sn?h=i.intersectTriangle(a,s,n,!0,o):h=i.intersectTriangle(n,s,a,t.side!==Zn,o),h===null)return null;bd.copy(o),bd.applyMatrix4(r.matrixWorld);let u=e.ray.origin.distanceTo(bd);return u<e.near||u>e.far?null:{distance:u,point:bd.clone(),object:r}}function wd(r,t,e,i,n,s,a,o,h,u,d,g){xa.fromBufferAttribute(n,u),ba.fromBufferAttribute(n,d),wa.fromBufferAttribute(n,g);let f=r.morphTargetInfluences;if(s&&f){md.set(0,0,0),gd.set(0,0,0),vd.set(0,0,0);for(let _=0,v=s.length;_<v;_++){let b=f[_],C=s[_];b!==0&&(T0.fromBufferAttribute(C,u),C0.fromBufferAttribute(C,d),E0.fromBufferAttribute(C,g),a?(md.addScaledVector(T0,b),gd.addScaledVector(C0,b),vd.addScaledVector(E0,b)):(md.addScaledVector(T0.sub(xa),b),gd.addScaledVector(C0.sub(ba),b),vd.addScaledVector(E0.sub(wa),b)))}xa.add(md),ba.add(gd),wa.add(vd)}r.isSkinnedMesh&&(r.boneTransform(u,xa),r.boneTransform(d,ba),r.boneTransform(g,wa));let m=TL(r,t,e,i,xa,ba,wa,M0);if(m){o&&(_d.fromBufferAttribute(o,u),yd.fromBufferAttribute(o,d),xd.fromBufferAttribute(o,g),m.uv=Jn.getUV(M0,xa,ba,wa,_d,yd,xd,new Ue)),h&&(_d.fromBufferAttribute(h,u),yd.fromBufferAttribute(h,d),xd.fromBufferAttribute(h,g),m.uv2=Jn.getUV(M0,xa,ba,wa,_d,yd,xd,new Ue));let _={a:u,b:d,c:g,normal:new $t,materialIndex:0};Jn.getNormal(xa,ba,wa,_.normal),m.face=_}return m}var rh=class extends ya{constructor(t=1,e=1,i=1,n=1,s=1,a=1){super();this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:s,depthSegments:a};let o=this;n=Math.floor(n),s=Math.floor(s),a=Math.floor(a);let h=[],u=[],d=[],g=[],f=0,m=0;_("z","y","x",-1,-1,i,e,t,a,s,0),_("z","y","x",1,-1,i,e,-t,a,s,1),_("x","z","y",1,1,t,i,e,n,a,2),_("x","z","y",1,-1,t,i,-e,n,a,3),_("x","y","z",1,-1,t,e,i,n,s,4),_("x","y","z",-1,-1,t,e,-i,n,s,5),this.setIndex(h),this.setAttribute("position",new _a(u,3)),this.setAttribute("normal",new _a(d,3)),this.setAttribute("uv",new _a(g,2));function _(v,b,C,M,E,w,A,R,N,D,X){let at=w/N,ft=A/D,gt=w/2,ut=A/2,xt=R/2,nt=N+1,it=D+1,tt=0,W=0,Q=new $t;for(let ot=0;ot<it;ot++){let ct=ot*ft-ut;for(let Tt=0;Tt<nt;Tt++){let Rt=Tt*at-gt;Q[v]=Rt*M,Q[b]=ct*E,Q[C]=xt,u.push(Q.x,Q.y,Q.z),Q[v]=0,Q[b]=0,Q[C]=R>0?1:-1,d.push(Q.x,Q.y,Q.z),g.push(Tt/N),g.push(1-ot/D),tt+=1}}for(let ot=0;ot<D;ot++)for(let ct=0;ct<N;ct++){let Tt=f+ct+nt*ot,Rt=f+ct+nt*(ot+1),Pt=f+(ct+1)+nt*(ot+1),Nt=f+(ct+1)+nt*ot;h.push(Tt,Rt,Nt),h.push(Rt,Pt,Nt),W+=6}o.addGroup(m,W,X),m+=W,f+=tt}}static fromJSON(t){return new rh(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function nh(r){let t={};for(let e in r){t[e]={};for(let i in r[e]){let n=r[e][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[e][i]=n.clone():Array.isArray(n)?t[e][i]=n.slice():t[e][i]=n}}return t}function fr(r){let t={};for(let e=0;e<r.length;e++){let i=nh(r[e]);for(let n in i)t[n]=i[n]}return t}function CL(r){let t=[];for(let e=0;e<r.length;e++)t.push(r[e].clone());return t}function kT(r){return r.getRenderTarget()===null&&r.outputEncoding===li?$n:ku}var EL={clone:nh,merge:fr},ML=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Kn=class extends Uu{constructor(t){super();this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ML,this.fragmentShader=PL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=nh(t.uniforms),this.uniformsGroups=CL(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let n in this.uniforms){let a=this.uniforms[n].value;a&&a.isTexture?e.uniforms[n]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[n]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[n]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[n]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[n]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[n]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[n]={type:"m4",value:a.toArray()}:e.uniforms[n]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let i={};for(let n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},P0=class extends Pr{constructor(){super();this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ni,this.projectionMatrix=new Ni,this.projectionMatrixInverse=new Ni}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ar=class extends P0{constructor(t=50,e=1,i=.1,n=2e3){super();this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=xT*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(Jv*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return xT*2*Math.atan(Math.tan(Jv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,s,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(Jv*.5*this.fov)/this.zoom,i=2*e,n=this.aspect*i,s=-.5*n,a=this.view;if(this.view!==null&&this.view.enabled){let h=a.fullWidth,u=a.fullHeight;s+=a.offsetX*n/h,e-=a.offsetY*i/u,n*=a.width/h,i*=a.height/u}let o=this.filmOffset;o!==0&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},sh=-90,ah=1,OT=class extends Pr{constructor(t,e,i){super();this.type="CubeCamera",this.renderTarget=i;let n=new Ar(sh,ah,t,e);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let s=new Ar(sh,ah,t,e);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);let a=new Ar(sh,ah,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let o=new Ar(sh,ah,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let h=new Ar(sh,ah,t,e);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,1),this.add(h);let u=new Ar(sh,ah,t,e);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(t,e){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[n,s,a,o,h,u]=this.children,d=t.getRenderTarget(),g=t.toneMapping,f=t.xr.enabled;t.toneMapping=Ps,t.xr.enabled=!1;let m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,s),t.setRenderTarget(i,2),t.render(e,a),t.setRenderTarget(i,3),t.render(e,o),t.setRenderTarget(i,4),t.render(e,h),i.texture.generateMipmaps=m,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(d),t.toneMapping=g,t.xr.enabled=f,i.texture.needsPMREMUpdate=!0}},A0=class extends cr{constructor(t,e,i,n,s,a,o,h,u,d){t=t!==void 0?t:[],e=e!==void 0?e:Ul;super(t,e,i,n,s,a,o,h,u,d);this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},NT=class extends da{constructor(t=1,e={}){super(t,t,e);this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new A0(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Er}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new rh(5,5,5),s=new Kn({name:"CubemapFromEquirect",uniforms:nh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:sn,blending:fa});s.uniforms.tEquirect.value=e;let a=new In(n,s),o=e.minFilter;return e.minFilter===Qf&&(e.minFilter=Er),new OT(1,10,this).update(t,a),e.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,i,n){let s=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,i,n);t.setRenderTarget(s)}},I0=new $t,AL=new $t,IL=new Mr,Sa=class{constructor(t=new $t(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let n=I0.subVectors(i,e).cross(AL.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){let i=t.delta(I0),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let s=-(t.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||IL.getNormalMatrix(t),n=this.coplanarPoint(I0).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},oh=new ld,Sd=new $t,D0=class{constructor(t=new Sa,e=new Sa,i=new Sa,n=new Sa,s=new Sa,a=new Sa){this.planes=[t,e,i,n,s,a]}set(t,e,i,n,s,a){let o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(s),o[5].copy(a),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){let e=this.planes,i=t.elements,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],d=i[6],g=i[7],f=i[8],m=i[9],_=i[10],v=i[11],b=i[12],C=i[13],M=i[14],E=i[15];return e[0].setComponents(o-n,g-h,v-f,E-b).normalize(),e[1].setComponents(o+n,g+h,v+f,E+b).normalize(),e[2].setComponents(o+s,g+u,v+m,E+C).normalize(),e[3].setComponents(o-s,g-u,v-m,E-C).normalize(),e[4].setComponents(o-a,g-d,v-_,E-M).normalize(),e[5].setComponents(o+a,g+d,v+_,E+M).normalize(),this}intersectsObject(t){let e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),oh.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(oh)}intersectsSprite(t){return oh.center.set(0,0,0),oh.radius=.7071067811865476,oh.applyMatrix4(t.matrixWorld),this.intersectsSphere(oh)}intersectsSphere(t){let e=this.planes,i=t.center,n=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let n=e[i];if(Sd.x=n.normal.x>0?t.max.x:t.min.x,Sd.y=n.normal.y>0?t.max.y:t.min.y,Sd.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Sd)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function BT(){let r=null,t=!1,e=null,i=null;function n(s,a){e(s,a),i=r.requestAnimationFrame(n)}return{start:function(){t!==!0&&e!==null&&(i=r.requestAnimationFrame(n),t=!0)},stop:function(){r.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){r=s}}}function DL(r,t){let e=t.isWebGL2,i=new WeakMap;function n(u,d){let g=u.array,f=u.usage,m=r.createBuffer();r.bindBuffer(d,m),r.bufferData(d,g,f),u.onUploadCallback();let _;if(g instanceof Float32Array)_=5126;else if(g instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(e)_=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=5123;else if(g instanceof Int16Array)_=5122;else if(g instanceof Uint32Array)_=5125;else if(g instanceof Int32Array)_=5124;else if(g instanceof Int8Array)_=5120;else if(g instanceof Uint8Array)_=5121;else if(g instanceof Uint8ClampedArray)_=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:m,type:_,bytesPerElement:g.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,g){let f=d.array,m=d.updateRange;r.bindBuffer(g,u),m.count===-1?r.bufferSubData(g,0,f):(e?r.bufferSubData(g,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):r.bufferSubData(g,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);let d=i.get(u);d&&(r.deleteBuffer(d.buffer),i.delete(u))}function h(u,d){if(u.isGLBufferAttribute){let f=i.get(u);(!f||f.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let g=i.get(u);g===void 0?i.set(u,n(u,d)):g.version<u.version&&(s(g.buffer,u,d),g.version=u.version)}return{get:a,remove:o,update:h}}var lh=class extends ya{constructor(t=1,e=1,i=1,n=1){super();this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};let s=t/2,a=e/2,o=Math.floor(i),h=Math.floor(n),u=o+1,d=h+1,g=t/o,f=e/h,m=[],_=[],v=[],b=[];for(let C=0;C<d;C++){let M=C*f-a;for(let E=0;E<u;E++){let w=E*g-s;_.push(w,-M,0),v.push(0,0,1),b.push(E/o),b.push(1-C/h)}}for(let C=0;C<h;C++)for(let M=0;M<o;M++){let E=M+u*C,w=M+u*(C+1),A=M+1+u*(C+1),R=M+1+u*C;m.push(E,w,R),m.push(w,A,R)}this.setIndex(m),this.setAttribute("position",new _a(_,3)),this.setAttribute("normal",new _a(v,3)),this.setAttribute("uv",new _a(b,2))}static fromJSON(t){return new lh(t.width,t.height,t.widthSegments,t.heightSegments)}},LL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,RL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FL=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,kL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,NL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,BL="vec3 transformed = vec3( position );",zL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,VL=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,UL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,GL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,HL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,WL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,XL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,jL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ZL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$L=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,JL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,KL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,QL=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tR=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,eR=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,iR=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rR=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nR="gl_FragColor = linearToOutputTexel( gl_FragColor );",sR=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,aR=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oR=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,lR=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,hR=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uR=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cR=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fR=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dR=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pR=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mR=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gR=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,vR=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_R=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yR=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xR=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bR=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,wR=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,SR=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,TR=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CR=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ER=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,MR=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,PR=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,AR=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,IR=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,DR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,LR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,RR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,FR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kR=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,OR=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,NR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zR=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,VR=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,UR=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,GR=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,HR=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,WR=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,XR=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,qR=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,YR=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jR=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZR=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$R=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,JR=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,KR=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,QR=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,tF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,eF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,rF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,nF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,sF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,hF=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,uF=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,cF=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,fF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,dF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,mF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,gF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_F=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,wF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,SF=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,TF=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,CF=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,EF=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,MF=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,PF=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,AF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,IF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,DF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,LF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,RF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,FF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,OF=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,NF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,BF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,VF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WF=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,XF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qF=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YF=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ZF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$F=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,JF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,KF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tk=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ek=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ik=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rk=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nk=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,sk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ak=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ok=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,lk=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ie={alphamap_fragment:LL,alphamap_pars_fragment:RL,alphatest_fragment:FL,alphatest_pars_fragment:kL,aomap_fragment:OL,aomap_pars_fragment:NL,begin_vertex:BL,beginnormal_vertex:zL,bsdfs:VL,iridescence_fragment:UL,bumpmap_pars_fragment:GL,clipping_planes_fragment:HL,clipping_planes_pars_fragment:WL,clipping_planes_pars_vertex:XL,clipping_planes_vertex:qL,color_fragment:YL,color_pars_fragment:jL,color_pars_vertex:ZL,color_vertex:$L,common:JL,cube_uv_reflection_fragment:KL,defaultnormal_vertex:QL,displacementmap_pars_vertex:tR,displacementmap_vertex:eR,emissivemap_fragment:iR,emissivemap_pars_fragment:rR,encodings_fragment:nR,encodings_pars_fragment:sR,envmap_fragment:aR,envmap_common_pars_fragment:oR,envmap_pars_fragment:lR,envmap_pars_vertex:hR,envmap_physical_pars_fragment:bR,envmap_vertex:uR,fog_vertex:cR,fog_pars_vertex:fR,fog_fragment:dR,fog_pars_fragment:pR,gradientmap_pars_fragment:mR,lightmap_fragment:gR,lightmap_pars_fragment:vR,lights_lambert_fragment:_R,lights_lambert_pars_fragment:yR,lights_pars_begin:xR,lights_toon_fragment:wR,lights_toon_pars_fragment:SR,lights_phong_fragment:TR,lights_phong_pars_fragment:CR,lights_physical_fragment:ER,lights_physical_pars_fragment:MR,lights_fragment_begin:PR,lights_fragment_maps:AR,lights_fragment_end:IR,logdepthbuf_fragment:DR,logdepthbuf_pars_fragment:LR,logdepthbuf_pars_vertex:RR,logdepthbuf_vertex:FR,map_fragment:kR,map_pars_fragment:OR,map_particle_fragment:NR,map_particle_pars_fragment:BR,metalnessmap_fragment:zR,metalnessmap_pars_fragment:VR,morphcolor_vertex:UR,morphnormal_vertex:GR,morphtarget_pars_vertex:HR,morphtarget_vertex:WR,normal_fragment_begin:XR,normal_fragment_maps:qR,normal_pars_fragment:YR,normal_pars_vertex:jR,normal_vertex:ZR,normalmap_pars_fragment:$R,clearcoat_normal_fragment_begin:JR,clearcoat_normal_fragment_maps:KR,clearcoat_pars_fragment:QR,iridescence_pars_fragment:tF,output_fragment:eF,packing:iF,premultiplied_alpha_fragment:rF,project_vertex:nF,dithering_fragment:sF,dithering_pars_fragment:aF,roughnessmap_fragment:oF,roughnessmap_pars_fragment:lF,shadowmap_pars_fragment:hF,shadowmap_pars_vertex:uF,shadowmap_vertex:cF,shadowmask_pars_fragment:fF,skinbase_vertex:dF,skinning_pars_vertex:pF,skinning_vertex:mF,skinnormal_vertex:gF,specularmap_fragment:vF,specularmap_pars_fragment:_F,tonemapping_fragment:yF,tonemapping_pars_fragment:xF,transmission_fragment:bF,transmission_pars_fragment:wF,uv_pars_fragment:SF,uv_pars_vertex:TF,uv_vertex:CF,uv2_pars_fragment:EF,uv2_pars_vertex:MF,uv2_vertex:PF,worldpos_vertex:AF,background_vert:IF,background_frag:DF,backgroundCube_vert:LF,backgroundCube_frag:RF,cube_vert:FF,cube_frag:kF,depth_vert:OF,depth_frag:NF,distanceRGBA_vert:BF,distanceRGBA_frag:zF,equirect_vert:VF,equirect_frag:UF,linedashed_vert:GF,linedashed_frag:HF,meshbasic_vert:WF,meshbasic_frag:XF,meshlambert_vert:qF,meshlambert_frag:YF,meshmatcap_vert:jF,meshmatcap_frag:ZF,meshnormal_vert:$F,meshnormal_frag:JF,meshphong_vert:KF,meshphong_frag:QF,meshphysical_vert:tk,meshphysical_frag:ek,meshtoon_vert:ik,meshtoon_frag:rk,points_vert:nk,points_frag:sk,shadow_vert:ak,shadow_frag:ok,sprite_vert:lk,sprite_frag:hk},he={common:{diffuse:{value:new ii(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mr},uv2Transform:{value:new Mr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ii(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ii(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mr}},sprite:{diffuse:{value:new ii(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mr}}},Qn={basic:{uniforms:fr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.fog]),vertexShader:Ie.meshbasic_vert,fragmentShader:Ie.meshbasic_frag},lambert:{uniforms:fr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new ii(0)}}]),vertexShader:Ie.meshlambert_vert,fragmentShader:Ie.meshlambert_frag},phong:{uniforms:fr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new ii(0)},specular:{value:new ii(1118481)},shininess:{value:30}}]),vertexShader:Ie.meshphong_vert,fragmentShader:Ie.meshphong_frag},standard:{uniforms:fr([he.common,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.roughnessmap,he.metalnessmap,he.fog,he.lights,{emissive:{value:new ii(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ie.meshphysical_vert,fragmentShader:Ie.meshphysical_frag},toon:{uniforms:fr([he.common,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.gradientmap,he.fog,he.lights,{emissive:{value:new ii(0)}}]),vertexShader:Ie.meshtoon_vert,fragmentShader:Ie.meshtoon_frag},matcap:{uniforms:fr([he.common,he.bumpmap,he.normalmap,he.displacementmap,he.fog,{matcap:{value:null}}]),vertexShader:Ie.meshmatcap_vert,fragmentShader:Ie.meshmatcap_frag},points:{uniforms:fr([he.points,he.fog]),vertexShader:Ie.points_vert,fragmentShader:Ie.points_frag},dashed:{uniforms:fr([he.common,he.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ie.linedashed_vert,fragmentShader:Ie.linedashed_frag},depth:{uniforms:fr([he.common,he.displacementmap]),vertexShader:Ie.depth_vert,fragmentShader:Ie.depth_frag},normal:{uniforms:fr([he.common,he.bumpmap,he.normalmap,he.displacementmap,{opacity:{value:1}}]),vertexShader:Ie.meshnormal_vert,fragmentShader:Ie.meshnormal_frag},sprite:{uniforms:fr([he.sprite,he.fog]),vertexShader:Ie.sprite_vert,fragmentShader:Ie.sprite_frag},background:{uniforms:{uvTransform:{value:new Mr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ie.background_vert,fragmentShader:Ie.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ie.backgroundCube_vert,fragmentShader:Ie.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ie.cube_vert,fragmentShader:Ie.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ie.equirect_vert,fragmentShader:Ie.equirect_frag},distanceRGBA:{uniforms:fr([he.common,he.displacementmap,{referencePosition:{value:new $t},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ie.distanceRGBA_vert,fragmentShader:Ie.distanceRGBA_frag},shadow:{uniforms:fr([he.lights,he.fog,{color:{value:new ii(0)},opacity:{value:1}}]),vertexShader:Ie.shadow_vert,fragmentShader:Ie.shadow_frag}};Qn.physical={uniforms:fr([Qn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ii(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ii(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ii(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Ie.meshphysical_vert,fragmentShader:Ie.meshphysical_frag};var Td={r:0,b:0,g:0};function uk(r,t,e,i,n,s,a){let o=new ii(0),h=s===!0?0:1,u,d,g=null,f=0,m=null;function _(b,C){let M=!1,E=C.isScene===!0?C.background:null;E&&E.isTexture&&(E=(C.backgroundBlurriness>0?e:t).get(E));let w=r.xr,A=w.getSession&&w.getSession();A&&A.environmentBlendMode==="additive"&&(E=null),E===null?v(o,h):E&&E.isColor&&(v(E,1),M=!0),(r.autoClear||M)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),E&&(E.isCubeTexture||E.mapping===Kf)?(d===void 0&&(d=new In(new rh(1,1,1),new Kn({name:"BackgroundCubeMaterial",uniforms:nh(Qn.backgroundCube.uniforms),vertexShader:Qn.backgroundCube.vertexShader,fragmentShader:Qn.backgroundCube.fragmentShader,side:sn,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(R,N,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(d)),d.material.uniforms.envMap.value=E,d.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,(g!==E||f!==E.version||m!==r.toneMapping)&&(d.material.needsUpdate=!0,g=E,f=E.version,m=r.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new In(new lh(2,2),new Kn({name:"BackgroundMaterial",uniforms:nh(Qn.background.uniforms),vertexShader:Qn.background.vertexShader,fragmentShader:Qn.background.fragmentShader,side:Bl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(g!==E||f!==E.version||m!==r.toneMapping)&&(u.material.needsUpdate=!0,g=E,f=E.version,m=r.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function v(b,C){b.getRGB(Td,kT(r)),i.buffers.color.setClear(Td.r,Td.g,Td.b,C,a)}return{getClearColor:function(){return o},setClearColor:function(b,C=1){o.set(b),h=C,v(o,h)},getClearAlpha:function(){return h},setClearAlpha:function(b){h=b,v(o,h)},render:_}}function ck(r,t,e,i){let n=r.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},h=b(null),u=h,d=!1;function g(xt,nt,it,tt,W){let Q=!1;if(a){let ot=v(tt,it,nt);u!==ot&&(u=ot,m(u.object)),Q=C(xt,tt,it,W),Q&&M(xt,tt,it,W)}else{let ot=nt.wireframe===!0;(u.geometry!==tt.id||u.program!==it.id||u.wireframe!==ot)&&(u.geometry=tt.id,u.program=it.id,u.wireframe=ot,Q=!0)}W!==null&&e.update(W,34963),(Q||d)&&(d=!1,D(xt,nt,it,tt),W!==null&&r.bindBuffer(34963,e.get(W).buffer))}function f(){return i.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function m(xt){return i.isWebGL2?r.bindVertexArray(xt):s.bindVertexArrayOES(xt)}function _(xt){return i.isWebGL2?r.deleteVertexArray(xt):s.deleteVertexArrayOES(xt)}function v(xt,nt,it){let tt=it.wireframe===!0,W=o[xt.id];W===void 0&&(W={},o[xt.id]=W);let Q=W[nt.id];Q===void 0&&(Q={},W[nt.id]=Q);let ot=Q[tt];return ot===void 0&&(ot=b(f()),Q[tt]=ot),ot}function b(xt){let nt=[],it=[],tt=[];for(let W=0;W<n;W++)nt[W]=0,it[W]=0,tt[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:nt,enabledAttributes:it,attributeDivisors:tt,object:xt,attributes:{},index:null}}function C(xt,nt,it,tt){let W=u.attributes,Q=nt.attributes,ot=0,ct=it.getAttributes();for(let Tt in ct)if(ct[Tt].location>=0){let Pt=W[Tt],Nt=Q[Tt];if(Nt===void 0&&(Tt==="instanceMatrix"&&xt.instanceMatrix&&(Nt=xt.instanceMatrix),Tt==="instanceColor"&&xt.instanceColor&&(Nt=xt.instanceColor)),Pt===void 0||Pt.attribute!==Nt||Nt&&Pt.data!==Nt.data)return!0;ot++}return u.attributesNum!==ot||u.index!==tt}function M(xt,nt,it,tt){let W={},Q=nt.attributes,ot=0,ct=it.getAttributes();for(let Tt in ct)if(ct[Tt].location>=0){let Pt=Q[Tt];Pt===void 0&&(Tt==="instanceMatrix"&&xt.instanceMatrix&&(Pt=xt.instanceMatrix),Tt==="instanceColor"&&xt.instanceColor&&(Pt=xt.instanceColor));let Nt={};Nt.attribute=Pt,Pt&&Pt.data&&(Nt.data=Pt.data),W[Tt]=Nt,ot++}u.attributes=W,u.attributesNum=ot,u.index=tt}function E(){let xt=u.newAttributes;for(let nt=0,it=xt.length;nt<it;nt++)xt[nt]=0}function w(xt){A(xt,0)}function A(xt,nt){let it=u.newAttributes,tt=u.enabledAttributes,W=u.attributeDivisors;it[xt]=1,tt[xt]===0&&(r.enableVertexAttribArray(xt),tt[xt]=1),W[xt]!==nt&&((i.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](xt,nt),W[xt]=nt)}function R(){let xt=u.newAttributes,nt=u.enabledAttributes;for(let it=0,tt=nt.length;it<tt;it++)nt[it]!==xt[it]&&(r.disableVertexAttribArray(it),nt[it]=0)}function N(xt,nt,it,tt,W,Q){i.isWebGL2===!0&&(it===5124||it===5125)?r.vertexAttribIPointer(xt,nt,it,W,Q):r.vertexAttribPointer(xt,nt,it,tt,W,Q)}function D(xt,nt,it,tt){if(i.isWebGL2===!1&&(xt.isInstancedMesh||tt.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;E();let W=tt.attributes,Q=it.getAttributes(),ot=nt.defaultAttributeValues;for(let ct in Q){let Tt=Q[ct];if(Tt.location>=0){let Rt=W[ct];if(Rt===void 0&&(ct==="instanceMatrix"&&xt.instanceMatrix&&(Rt=xt.instanceMatrix),ct==="instanceColor"&&xt.instanceColor&&(Rt=xt.instanceColor)),Rt!==void 0){let Pt=Rt.normalized,Nt=Rt.itemSize,At=e.get(Rt);if(At===void 0)continue;let Qt=At.buffer,Vt=At.type,Yt=At.bytesPerElement;if(Rt.isInterleavedBufferAttribute){let Xt=Rt.data,re=Xt.stride,qt=Rt.offset;if(Xt.isInstancedInterleavedBuffer){for(let Ut=0;Ut<Tt.locationSize;Ut++)A(Tt.location+Ut,Xt.meshPerAttribute);xt.isInstancedMesh!==!0&&tt._maxInstanceCount===void 0&&(tt._maxInstanceCount=Xt.meshPerAttribute*Xt.count)}else for(let Ut=0;Ut<Tt.locationSize;Ut++)w(Tt.location+Ut);r.bindBuffer(34962,Qt);for(let Ut=0;Ut<Tt.locationSize;Ut++)N(Tt.location+Ut,Nt/Tt.locationSize,Vt,Pt,re*Yt,(qt+Nt/Tt.locationSize*Ut)*Yt)}else{if(Rt.isInstancedBufferAttribute){for(let Xt=0;Xt<Tt.locationSize;Xt++)A(Tt.location+Xt,Rt.meshPerAttribute);xt.isInstancedMesh!==!0&&tt._maxInstanceCount===void 0&&(tt._maxInstanceCount=Rt.meshPerAttribute*Rt.count)}else for(let Xt=0;Xt<Tt.locationSize;Xt++)w(Tt.location+Xt);r.bindBuffer(34962,Qt);for(let Xt=0;Xt<Tt.locationSize;Xt++)N(Tt.location+Xt,Nt/Tt.locationSize,Vt,Pt,Nt*Yt,Nt/Tt.locationSize*Xt*Yt)}}else if(ot!==void 0){let Pt=ot[ct];if(Pt!==void 0)switch(Pt.length){case 2:r.vertexAttrib2fv(Tt.location,Pt);break;case 3:r.vertexAttrib3fv(Tt.location,Pt);break;case 4:r.vertexAttrib4fv(Tt.location,Pt);break;default:r.vertexAttrib1fv(Tt.location,Pt)}}}}R()}function X(){gt();for(let xt in o){let nt=o[xt];for(let it in nt){let tt=nt[it];for(let W in tt)_(tt[W].object),delete tt[W];delete nt[it]}delete o[xt]}}function at(xt){if(o[xt.id]===void 0)return;let nt=o[xt.id];for(let it in nt){let tt=nt[it];for(let W in tt)_(tt[W].object),delete tt[W];delete nt[it]}delete o[xt.id]}function ft(xt){for(let nt in o){let it=o[nt];if(it[xt.id]===void 0)continue;let tt=it[xt.id];for(let W in tt)_(tt[W].object),delete tt[W];delete it[xt.id]}}function gt(){ut(),d=!0,u!==h&&(u=h,m(u.object))}function ut(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:g,reset:gt,resetDefaultState:ut,dispose:X,releaseStatesOfGeometry:at,releaseStatesOfProgram:ft,initAttributes:E,enableAttribute:w,disableUnusedAttributes:R}}function fk(r,t,e,i){let n=i.isWebGL2,s;function a(u){s=u}function o(u,d){r.drawArrays(s,u,d),e.update(d,s,1)}function h(u,d,g){if(g===0)return;let f,m;if(n)f=r,m="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,u,d,g),e.update(d,s,g)}this.setMode=a,this.render=o,this.renderInstances=h}function dk(r,t,e){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let N=t.get("EXT_texture_filter_anisotropic");i=r.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(N){if(N==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return N==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext!="undefined"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&r instanceof WebGL2ComputeRenderingContext,o=e.precision!==void 0?e.precision:"highp",h=s(o);h!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",h,"instead."),o=h);let u=a||t.has("WEBGL_draw_buffers"),d=e.logarithmicDepthBuffer===!0,g=r.getParameter(34930),f=r.getParameter(35660),m=r.getParameter(3379),_=r.getParameter(34076),v=r.getParameter(34921),b=r.getParameter(36347),C=r.getParameter(36348),M=r.getParameter(36349),E=f>0,w=a||t.has("OES_texture_float"),A=E&&w,R=a?r.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:g,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:_,maxAttributes:v,maxVertexUniforms:b,maxVaryings:C,maxFragmentUniforms:M,vertexTextures:E,floatFragmentTextures:w,floatVertexTextures:A,maxSamples:R}}function pk(r){let t=this,e=null,i=0,n=!1,s=!1,a=new Sa,o=new Mr,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(g,f,m){let _=g.length!==0||f||i!==0||n;return n=f,e=d(g,m,0),i=g.length,_},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,u()},this.setState=function(g,f,m){let _=g.clippingPlanes,v=g.clipIntersection,b=g.clipShadows,C=r.get(g);if(!n||_===null||_.length===0||s&&!b)s?d(null):u();else{let M=s?0:i,E=M*4,w=C.clippingState||null;h.value=w,w=d(_,f,E,m);for(let A=0;A!==E;++A)w[A]=e[A];C.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=M}};function u(){h.value!==e&&(h.value=e,h.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(g,f,m,_){let v=g!==null?g.length:0,b=null;if(v!==0){if(b=h.value,_!==!0||b===null){let C=m+v*4,M=f.matrixWorldInverse;o.getNormalMatrix(M),(b===null||b.length<C)&&(b=new Float32Array(C));for(let E=0,w=m;E!==v;++E,w+=4)a.copy(g[E]).applyMatrix4(M,o),a.normal.toArray(b,w),b[w+3]=a.constant}h.value=b,h.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,b}}function mk(r){let t=new WeakMap;function e(a,o){return o===Vv?a.mapping=Ul:o===Uv&&(a.mapping=Gl),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===Vv||o===Uv)if(t.has(a)){let h=t.get(a).texture;return e(h,a.mapping)}else{let h=a.image;if(h&&h.height>0){let u=new NT(h.height/2);return u.fromEquirectangularTexture(r,a),t.set(a,u),a.addEventListener("dispose",n),e(u.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let h=t.get(o);h!==void 0&&(t.delete(o),h.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var zT=class extends P0{constructor(t=-1,e=1,i=1,n=-1,s=.1,a=2e3){super();this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,s=i-t,a=i+t,o=n+e,h=n-e;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=d*this.view.offsetY,h=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},hh=4,VT=[.125,.215,.35,.446,.526,.582],Do=20,L0=new zT,UT=new ii,R0=null,Lo=(1+Math.sqrt(5))/2,uh=1/Lo,GT=[new $t(1,1,1),new $t(-1,1,1),new $t(1,1,-1),new $t(-1,1,-1),new $t(0,Lo,uh),new $t(0,Lo,-uh),new $t(uh,0,Lo),new $t(-uh,0,Lo),new $t(Lo,uh,0),new $t(-Lo,uh,0)],F0=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){R0=this._renderer.getRenderTarget(),this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,i,n,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(R0),t.scissorTest=!1,Cd(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Ul||t.mapping===Gl?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),R0=this._renderer.getRenderTarget();let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,16*7),e=4*this._cubeSize,i={magFilter:Er,minFilter:Er,generateMipmaps:!1,type:Fu,format:Cn,encoding:To,depthBuffer:!1},n=HT(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HT(t,e,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=gk(s)),this._blurMaterial=vk(s,t,e)}return n}_compileMaterial(t){let e=new In(this._lodPlanes[0],t);this._renderer.compile(e,L0)}_sceneToCubeUV(t,e,i,n){let s=90,a=1,o=new Ar(s,a,e,i),h=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,g=d.autoClear,f=d.toneMapping;d.getClearColor(UT),d.toneMapping=Ps,d.autoClear=!1;let m=new y0({name:"PMREM.Background",side:sn,depthWrite:!1,depthTest:!1}),_=new In(new rh,m),v=!1,b=t.background;b?b.isColor&&(m.color.copy(b),t.background=null,v=!0):(m.color.copy(UT),v=!0);for(let C=0;C<6;C++){let M=C%3;M===0?(o.up.set(0,h[C],0),o.lookAt(u[C],0,0)):M===1?(o.up.set(0,0,h[C]),o.lookAt(0,u[C],0)):(o.up.set(0,h[C],0),o.lookAt(0,0,u[C]));let E=this._cubeSize;Cd(n,M*E,C>2?E:0,E,E),d.setRenderTarget(n),v&&d.render(_,o),d.render(t,o)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=f,d.autoClear=g,t.background=b}_textureToCubeUV(t,e){let i=this._renderer,n=t.mapping===Ul||t.mapping===Gl;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=XT()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WT());let s=n?this._cubemapMaterial:this._equirectMaterial,a=new In(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=t;let h=this._cubeSize;Cd(e,0,0,3*h,2*h),i.setRenderTarget(e),i.render(a,L0)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){let s=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),a=GT[(n-1)%GT.length];this._blur(t,n-1,n,s,a)}e.autoClear=i}_blur(t,e,i,n,s){let a=this._pingPongRenderTarget;this._halfBlur(t,a,e,i,n,"latitudinal",s),this._halfBlur(a,t,i,i,n,"longitudinal",s)}_halfBlur(t,e,i,n,s,a,o){let h=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,g=new In(this._lodPlanes[n],u),f=u.uniforms,m=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Do-1),v=s/_,b=isFinite(s)?1+Math.floor(d*v):Do;b>Do&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Do}`);let C=[],M=0;for(let N=0;N<Do;++N){let D=N/v,X=Math.exp(-D*D/2);C.push(X),N===0?M+=X:N<b&&(M+=2*X)}for(let N=0;N<C.length;N++)C[N]=C[N]/M;f.envMap.value=t.texture,f.samples.value=b,f.weights.value=C,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);let{_lodMax:E}=this;f.dTheta.value=_,f.mipInt.value=E-i;let w=this._sizeLods[n],A=3*w*(n>E-hh?n-E+hh:0),R=4*(this._cubeSize-w);Cd(e,A,R,3*w,2*w),h.setRenderTarget(e),h.render(g,L0)}};function gk(r){let t=[],e=[],i=[],n=r,s=r-hh+1+VT.length;for(let a=0;a<s;a++){let o=Math.pow(2,n);e.push(o);let h=1/o;a>r-hh?h=VT[a-r+hh-1]:a===0&&(h=0),i.push(h);let u=1/(o-2),d=-u,g=1+u,f=[d,d,g,d,g,g,d,d,g,g,d,g],m=6,_=6,v=3,b=2,C=1,M=new Float32Array(v*_*m),E=new Float32Array(b*_*m),w=new Float32Array(C*_*m);for(let R=0;R<m;R++){let N=R%3*2/3-1,D=R>2?0:-1,X=[N,D,0,N+2/3,D,0,N+2/3,D+1,0,N,D,0,N+2/3,D+1,0,N,D+1,0];M.set(X,v*_*R),E.set(f,b*_*R);let at=[R,R,R,R,R,R];w.set(at,C*_*R)}let A=new ya;A.setAttribute("position",new An(M,v)),A.setAttribute("uv",new An(E,b)),A.setAttribute("faceIndex",new An(w,C)),t.push(A),n>hh&&n--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function HT(r,t,e){let i=new da(r,t,e);return i.texture.mapping=Kf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Cd(r,t,e,i,n){r.viewport.set(t,e,i,n),r.scissor.set(t,e,i,n)}function vk(r,t,e){let i=new Float32Array(Do),n=new $t(0,1,0);return new Kn({name:"SphericalGaussianBlur",defines:{n:Do,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:k0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function WT(){return new Kn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:k0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function XT(){return new Kn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:k0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fa,depthTest:!1,depthWrite:!1})}function k0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _k(r){let t=new WeakMap,e=null;function i(o){if(o&&o.isTexture){let h=o.mapping,u=h===Vv||h===Uv,d=h===Ul||h===Gl;if(u||d)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let g=t.get(o);return e===null&&(e=new F0(r)),g=u?e.fromEquirectangular(o,g):e.fromCubemap(o,g),t.set(o,g),g.texture}else{if(t.has(o))return t.get(o).texture;{let g=o.image;if(u&&g&&g.height>0||d&&g&&n(g)){e===null&&(e=new F0(r));let f=u?e.fromEquirectangular(o):e.fromCubemap(o);return t.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function n(o){let h=0,u=6;for(let d=0;d<u;d++)o[d]!==void 0&&h++;return h===u}function s(o){let h=o.target;h.removeEventListener("dispose",s);let u=t.get(h);u!==void 0&&(t.delete(h),u.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:a}}function yk(r){let t={};function e(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=r.getExtension(i)}return t[i]=n,n}return{has:function(i){return e(i)!==null},init:function(i){i.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(i){let n=e(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function xk(r,t,e,i){let n={},s=new WeakMap;function a(g){let f=g.target;f.index!==null&&t.remove(f.index);for(let _ in f.attributes)t.remove(f.attributes[_]);f.removeEventListener("dispose",a),delete n[f.id];let m=s.get(f);m&&(t.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,e.memory.geometries--}function o(g,f){return n[f.id]===!0||(f.addEventListener("dispose",a),n[f.id]=!0,e.memory.geometries++),f}function h(g){let f=g.attributes;for(let _ in f)t.update(f[_],34962);let m=g.morphAttributes;for(let _ in m){let v=m[_];for(let b=0,C=v.length;b<C;b++)t.update(v[b],34962)}}function u(g){let f=[],m=g.index,_=g.attributes.position,v=0;if(m!==null){let M=m.array;v=m.version;for(let E=0,w=M.length;E<w;E+=3){let A=M[E+0],R=M[E+1],N=M[E+2];f.push(A,R,R,N,N,A)}}else{let M=_.array;v=_.version;for(let E=0,w=M.length/3-1;E<w;E+=3){let A=E+0,R=E+1,N=E+2;f.push(A,R,R,N,N,A)}}let b=new(wT(f)?b0:x0)(f,1);b.version=v;let C=s.get(g);C&&t.remove(C),s.set(g,b)}function d(g){let f=s.get(g);if(f){let m=g.index;m!==null&&f.version<m.version&&u(g)}else u(g);return s.get(g)}return{get:o,update:h,getWireframeAttribute:d}}function bk(r,t,e,i){let n=i.isWebGL2,s;function a(f){s=f}let o,h;function u(f){o=f.type,h=f.bytesPerElement}function d(f,m){r.drawElements(s,m,o,f*h),e.update(m,s,1)}function g(f,m,_){if(_===0)return;let v,b;if(n)v=r,b="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),b="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[b](s,m,o,f*h,_),e.update(m,s,_)}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=g}function wk(r){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(e.calls++,a){case 4:e.triangles+=o*(s/3);break;case 1:e.lines+=o*(s/2);break;case 3:e.lines+=o*(s-1);break;case 2:e.lines+=o*s;break;case 0:e.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:n,update:i}}function Sk(r,t){return r[0]-t[0]}function Tk(r,t){return Math.abs(t[1])-Math.abs(r[1])}function Ck(r,t,e){let i={},n=new Float32Array(8),s=new WeakMap,a=new Oi,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function h(u,d,g,f){let m=u.morphTargetInfluences;if(t.isWebGL2===!0){let _=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,v=_!==void 0?_.length:0,b=s.get(d);if(b===void 0||b.count!==v){let nt=function(){ut.dispose(),s.delete(d),d.removeEventListener("dispose",nt)};b!==void 0&&b.texture.dispose();let E=d.morphAttributes.position!==void 0,w=d.morphAttributes.normal!==void 0,A=d.morphAttributes.color!==void 0,R=d.morphAttributes.position||[],N=d.morphAttributes.normal||[],D=d.morphAttributes.color||[],X=0;E===!0&&(X=1),w===!0&&(X=2),A===!0&&(X=3);let at=d.attributes.position.count*X,ft=1;at>t.maxTextureSize&&(ft=Math.ceil(at/t.maxTextureSize),at=t.maxTextureSize);let gt=new Float32Array(at*ft*4*v),ut=new a0(gt,at,ft,v);ut.type=wo,ut.needsUpdate=!0;let xt=X*4;for(let it=0;it<v;it++){let tt=R[it],W=N[it],Q=D[it],ot=at*ft*4*it;for(let ct=0;ct<tt.count;ct++){let Tt=ct*xt;E===!0&&(a.fromBufferAttribute(tt,ct),gt[ot+Tt+0]=a.x,gt[ot+Tt+1]=a.y,gt[ot+Tt+2]=a.z,gt[ot+Tt+3]=0),w===!0&&(a.fromBufferAttribute(W,ct),gt[ot+Tt+4]=a.x,gt[ot+Tt+5]=a.y,gt[ot+Tt+6]=a.z,gt[ot+Tt+7]=0),A===!0&&(a.fromBufferAttribute(Q,ct),gt[ot+Tt+8]=a.x,gt[ot+Tt+9]=a.y,gt[ot+Tt+10]=a.z,gt[ot+Tt+11]=Q.itemSize===4?a.w:1)}}b={count:v,texture:ut,size:new Ue(at,ft)},s.set(d,b),d.addEventListener("dispose",nt)}let C=0;for(let E=0;E<m.length;E++)C+=m[E];let M=d.morphTargetsRelative?1:1-C;f.getUniforms().setValue(r,"morphTargetBaseInfluence",M),f.getUniforms().setValue(r,"morphTargetInfluences",m),f.getUniforms().setValue(r,"morphTargetsTexture",b.texture,e),f.getUniforms().setValue(r,"morphTargetsTextureSize",b.size)}else{let _=m===void 0?0:m.length,v=i[d.id];if(v===void 0||v.length!==_){v=[];for(let w=0;w<_;w++)v[w]=[w,0];i[d.id]=v}for(let w=0;w<_;w++){let A=v[w];A[0]=w,A[1]=m[w]}v.sort(Tk);for(let w=0;w<8;w++)w<_&&v[w][1]?(o[w][0]=v[w][0],o[w][1]=v[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(Sk);let b=d.morphAttributes.position,C=d.morphAttributes.normal,M=0;for(let w=0;w<8;w++){let A=o[w],R=A[0],N=A[1];R!==Number.MAX_SAFE_INTEGER&&N?(b&&d.getAttribute("morphTarget"+w)!==b[R]&&d.setAttribute("morphTarget"+w,b[R]),C&&d.getAttribute("morphNormal"+w)!==C[R]&&d.setAttribute("morphNormal"+w,C[R]),n[w]=N,M+=N):(b&&d.hasAttribute("morphTarget"+w)===!0&&d.deleteAttribute("morphTarget"+w),C&&d.hasAttribute("morphNormal"+w)===!0&&d.deleteAttribute("morphNormal"+w),n[w]=0)}let E=d.morphTargetsRelative?1:1-M;f.getUniforms().setValue(r,"morphTargetBaseInfluence",E),f.getUniforms().setValue(r,"morphTargetInfluences",n)}}return{update:h}}function Ek(r,t,e,i){let n=new WeakMap;function s(h){let u=i.render.frame,d=h.geometry,g=t.get(h,d);return n.get(g)!==u&&(t.update(g),n.set(g,u)),h.isInstancedMesh&&(h.hasEventListener("dispose",o)===!1&&h.addEventListener("dispose",o),e.update(h.instanceMatrix,34962),h.instanceColor!==null&&e.update(h.instanceColor,34962)),g}function a(){n=new WeakMap}function o(h){let u=h.target;u.removeEventListener("dispose",o),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:s,dispose:a}}var qT=new cr,YT=new a0,jT=new TT,ZT=new A0,$T=[],JT=[],KT=new Float32Array(16),QT=new Float32Array(9),tC=new Float32Array(4);function ch(r,t,e){let i=r[0];if(i<=0||i>0)return r;let n=t*e,s=$T[n];if(s===void 0&&(s=new Float32Array(n),$T[n]=s),t!==0){i.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=e,r[a].toArray(s,o)}return s}function Di(r,t){if(r.length!==t.length)return!1;for(let e=0,i=r.length;e<i;e++)if(r[e]!==t[e])return!1;return!0}function Li(r,t){for(let e=0,i=t.length;e<i;e++)r[e]=t[e]}function Ed(r,t){let e=JT[t];e===void 0&&(e=new Int32Array(t),JT[t]=e);for(let i=0;i!==t;++i)e[i]=r.allocateTextureUnit();return e}function Mk(r,t){let e=this.cache;e[0]!==t&&(r.uniform1f(this.addr,t),e[0]=t)}function Pk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Di(e,t))return;r.uniform2fv(this.addr,t),Li(e,t)}}function Ak(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Di(e,t))return;r.uniform3fv(this.addr,t),Li(e,t)}}function Ik(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Di(e,t))return;r.uniform4fv(this.addr,t),Li(e,t)}}function Dk(r,t){let e=this.cache,i=t.elements;if(i===void 0){if(Di(e,t))return;r.uniformMatrix2fv(this.addr,!1,t),Li(e,t)}else{if(Di(e,i))return;tC.set(i),r.uniformMatrix2fv(this.addr,!1,tC),Li(e,i)}}function Lk(r,t){let e=this.cache,i=t.elements;if(i===void 0){if(Di(e,t))return;r.uniformMatrix3fv(this.addr,!1,t),Li(e,t)}else{if(Di(e,i))return;QT.set(i),r.uniformMatrix3fv(this.addr,!1,QT),Li(e,i)}}function Rk(r,t){let e=this.cache,i=t.elements;if(i===void 0){if(Di(e,t))return;r.uniformMatrix4fv(this.addr,!1,t),Li(e,t)}else{if(Di(e,i))return;KT.set(i),r.uniformMatrix4fv(this.addr,!1,KT),Li(e,i)}}function Fk(r,t){let e=this.cache;e[0]!==t&&(r.uniform1i(this.addr,t),e[0]=t)}function kk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Di(e,t))return;r.uniform2iv(this.addr,t),Li(e,t)}}function Ok(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Di(e,t))return;r.uniform3iv(this.addr,t),Li(e,t)}}function Nk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Di(e,t))return;r.uniform4iv(this.addr,t),Li(e,t)}}function Bk(r,t){let e=this.cache;e[0]!==t&&(r.uniform1ui(this.addr,t),e[0]=t)}function zk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Di(e,t))return;r.uniform2uiv(this.addr,t),Li(e,t)}}function Vk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Di(e,t))return;r.uniform3uiv(this.addr,t),Li(e,t)}}function Uk(r,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Di(e,t))return;r.uniform4uiv(this.addr,t),Li(e,t)}}function Gk(r,t,e){let i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture2D(t||qT,n)}function Hk(r,t,e){let i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture3D(t||jT,n)}function Wk(r,t,e){let i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTextureCube(t||ZT,n)}function Xk(r,t,e){let i=this.cache,n=e.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),e.setTexture2DArray(t||YT,n)}function qk(r){switch(r){case 5126:return Mk;case 35664:return Pk;case 35665:return Ak;case 35666:return Ik;case 35674:return Dk;case 35675:return Lk;case 35676:return Rk;case 5124:case 35670:return Fk;case 35667:case 35671:return kk;case 35668:case 35672:return Ok;case 35669:case 35673:return Nk;case 5125:return Bk;case 36294:return zk;case 36295:return Vk;case 36296:return Uk;case 35678:case 36198:case 36298:case 36306:case 35682:return Gk;case 35679:case 36299:case 36307:return Hk;case 35680:case 36300:case 36308:case 36293:return Wk;case 36289:case 36303:case 36311:case 36292:return Xk}}function Yk(r,t){r.uniform1fv(this.addr,t)}function jk(r,t){let e=ch(t,this.size,2);r.uniform2fv(this.addr,e)}function Zk(r,t){let e=ch(t,this.size,3);r.uniform3fv(this.addr,e)}function $k(r,t){let e=ch(t,this.size,4);r.uniform4fv(this.addr,e)}function Jk(r,t){let e=ch(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,e)}function Kk(r,t){let e=ch(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,e)}function Qk(r,t){let e=ch(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,e)}function tO(r,t){r.uniform1iv(this.addr,t)}function eO(r,t){r.uniform2iv(this.addr,t)}function iO(r,t){r.uniform3iv(this.addr,t)}function rO(r,t){r.uniform4iv(this.addr,t)}function nO(r,t){r.uniform1uiv(this.addr,t)}function sO(r,t){r.uniform2uiv(this.addr,t)}function aO(r,t){r.uniform3uiv(this.addr,t)}function oO(r,t){r.uniform4uiv(this.addr,t)}function lO(r,t,e){let i=this.cache,n=t.length,s=Ed(e,n);Di(i,s)||(r.uniform1iv(this.addr,s),Li(i,s));for(let a=0;a!==n;++a)e.setTexture2D(t[a]||qT,s[a])}function hO(r,t,e){let i=this.cache,n=t.length,s=Ed(e,n);Di(i,s)||(r.uniform1iv(this.addr,s),Li(i,s));for(let a=0;a!==n;++a)e.setTexture3D(t[a]||jT,s[a])}function uO(r,t,e){let i=this.cache,n=t.length,s=Ed(e,n);Di(i,s)||(r.uniform1iv(this.addr,s),Li(i,s));for(let a=0;a!==n;++a)e.setTextureCube(t[a]||ZT,s[a])}function cO(r,t,e){let i=this.cache,n=t.length,s=Ed(e,n);Di(i,s)||(r.uniform1iv(this.addr,s),Li(i,s));for(let a=0;a!==n;++a)e.setTexture2DArray(t[a]||YT,s[a])}function fO(r){switch(r){case 5126:return Yk;case 35664:return jk;case 35665:return Zk;case 35666:return $k;case 35674:return Jk;case 35675:return Kk;case 35676:return Qk;case 5124:case 35670:return tO;case 35667:case 35671:return eO;case 35668:case 35672:return iO;case 35669:case 35673:return rO;case 5125:return nO;case 36294:return sO;case 36295:return aO;case 36296:return oO;case 35678:case 36198:case 36298:case 36306:case 35682:return lO;case 35679:case 36299:case 36307:return hO;case 35680:case 36300:case 36308:case 36293:return uO;case 36289:case 36303:case 36311:case 36292:return cO}}var eC=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=qk(e.type)}},iC=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=fO(e.type)}},rC=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let n=this.seq;for(let s=0,a=n.length;s!==a;++s){let o=n[s];o.setValue(t,e[o.id],i)}}},O0=/(\w+)(\])?(\[|\.)?/g;function nC(r,t){r.seq.push(t),r.map[t.id]=t}function dO(r,t,e){let i=r.name,n=i.length;for(O0.lastIndex=0;;){let s=O0.exec(i),a=O0.lastIndex,o=s[1],h=s[2]==="]",u=s[3];if(h&&(o=o|0),u===void 0||u==="["&&a+2===n){nC(e,u===void 0?new eC(o,r,t):new iC(o,r,t));break}else{let g=e.map[o];g===void 0&&(g=new rC(o),nC(e,g)),e=g}}}var Hu=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){let s=t.getActiveUniform(e,n),a=t.getUniformLocation(e,s.name);dO(s,a,this)}}setValue(t,e,i,n){let s=this.map[e];s!==void 0&&s.setValue(t,i,n)}setOptional(t,e,i){let n=e[i];n!==void 0&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let s=0,a=e.length;s!==a;++s){let o=e[s],h=i[o.id];h.needsUpdate!==!1&&o.setValue(t,h.value,n)}}static seqWithValue(t,e){let i=[];for(let n=0,s=t.length;n!==s;++n){let a=t[n];a.id in e&&i.push(a)}return i}};function sC(r,t,e){let i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}var pO=0;function mO(r,t){let e=r.split(`
`),i=[],n=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let a=n;a<s;a++){let o=a+1;i.push(`${o===t?">":" "} ${o}: ${e[a]}`)}return i.join(`
`)}function gO(r){switch(r){case To:return["Linear","( value )"];case li:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function aC(r,t,e){let i=r.getShaderParameter(t,35713),n=r.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let a=parseInt(s[1]);return e.toUpperCase()+`

`+n+`

`+mO(r.getShaderSource(t),a)}else return n}function vO(r,t){let e=gO(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function _O(r,t){let e;switch(t){case UD:e="Linear";break;case GD:e="Reinhard";break;case HD:e="OptimizedCineon";break;case WD:e="ACESFilmic";break;case XD:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+r+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function yO(r){return[r.extensionDerivatives||!!r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wu).join(`
`)}function xO(r){let t=[];for(let e in r){let i=r[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function bO(r,t){let e={},i=r.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=r.getActiveAttrib(t,n),a=s.name,o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),e[a]={type:s.type,location:r.getAttribLocation(t,a),locationSize:o}}return e}function Wu(r){return r!==""}function oC(r,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function lC(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var wO=/^[ \t]*#include +<([\w\d./]+)>/gm;function N0(r){return r.replace(wO,SO)}function SO(r,t){let e=Ie[t];if(e===void 0)throw new Error("Can not resolve #include <"+t+">");return N0(e)}var TO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hC(r){return r.replace(TO,CO)}function CO(r,t,e,i){let n="";for(let s=parseInt(t);s<parseInt(e);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function uC(r){let t="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function EO(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===kS?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===yD?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ru&&(t="SHADOWMAP_TYPE_VSM"),t}function MO(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ul:case Gl:t="ENVMAP_TYPE_CUBE";break;case Kf:t="ENVMAP_TYPE_CUBE_UV";break}return t}function PO(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Gl:t="ENVMAP_MODE_REFRACTION";break}return t}function AO(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case HS:t="ENVMAP_BLENDING_MULTIPLY";break;case zD:t="ENVMAP_BLENDING_MIX";break;case VD:t="ENVMAP_BLENDING_ADD";break}return t}function IO(r){let t=r.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function DO(r,t,e,i){let n=r.getContext(),s=e.defines,a=e.vertexShader,o=e.fragmentShader,h=EO(e),u=MO(e),d=PO(e),g=AO(e),f=IO(e),m=e.isWebGL2?"":yO(e),_=xO(s),v=n.createProgram(),b,C,M=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(b=[_].filter(Wu).join(`
`),b.length>0&&(b+=`
`),C=[m,_].filter(Wu).join(`
`),C.length>0&&(C+=`
`)):(b=[uC(e),"#define SHADER_NAME "+e.shaderName,_,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+h:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Wu).join(`
`),C=[m,uC(e),"#define SHADER_NAME "+e.shaderName,_,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+d:"",e.envMap?"#define "+g:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+h:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Ps?"#define TONE_MAPPING":"",e.toneMapping!==Ps?Ie.tonemapping_pars_fragment:"",e.toneMapping!==Ps?_O("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ie.encodings_pars_fragment,vO("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Wu).join(`
`)),a=N0(a),a=oC(a,e),a=lC(a,e),o=N0(o),o=oC(o,e),o=lC(o,e),a=hC(a),o=hC(o),e.isWebGL2&&e.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,C=["#define varying in",e.glslVersion===yT?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===yT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);let E=M+b+a,w=M+C+o,A=sC(n,35633,E),R=sC(n,35632,w);if(n.attachShader(v,A),n.attachShader(v,R),e.index0AttributeName!==void 0?n.bindAttribLocation(v,0,e.index0AttributeName):e.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),r.debug.checkShaderErrors){let X=n.getProgramInfoLog(v).trim(),at=n.getShaderInfoLog(A).trim(),ft=n.getShaderInfoLog(R).trim(),gt=!0,ut=!0;if(n.getProgramParameter(v,35714)===!1){gt=!1;let xt=aC(n,A,"vertex"),nt=aC(n,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+X+`
`+xt+`
`+nt)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(at===""||ft==="")&&(ut=!1);ut&&(this.diagnostics={runnable:gt,programLog:X,vertexShader:{log:at,prefix:b},fragmentShader:{log:ft,prefix:C}})}n.deleteShader(A),n.deleteShader(R);let N;this.getUniforms=function(){return N===void 0&&(N=new Hu(n,v)),N};let D;return this.getAttributes=function(){return D===void 0&&(D=bO(n,v)),D},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=e.shaderName,this.id=pO++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=R,this}var LO=0,cC=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(t);return a.has(n)===!1&&(a.add(n),n.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new fC(t),e.set(t,i)),i}},fC=class{constructor(t){this.id=LO++,this.code=t,this.usedTimes=0}};function RO(r,t,e,i,n,s,a){let o=new fd,h=new cC,u=[],d=n.isWebGL2,g=n.logarithmicDepthBuffer,f=n.vertexTextures,m=n.precision,_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(D,X,at,ft,gt){let ut=ft.fog,xt=gt.geometry,nt=D.isMeshStandardMaterial?ft.environment:null,it=(D.isMeshStandardMaterial?e:t).get(D.envMap||nt),tt=!!it&&it.mapping===Kf?it.image.height:null,W=_[D.type];D.precision!==null&&(m=n.getMaxPrecision(D.precision),m!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",m,"instead."));let Q=xt.morphAttributes.position||xt.morphAttributes.normal||xt.morphAttributes.color,ot=Q!==void 0?Q.length:0,ct=0;xt.morphAttributes.position!==void 0&&(ct=1),xt.morphAttributes.normal!==void 0&&(ct=2),xt.morphAttributes.color!==void 0&&(ct=3);let Tt,Rt,Pt,Nt;if(W){let re=Qn[W];Tt=re.vertexShader,Rt=re.fragmentShader}else Tt=D.vertexShader,Rt=D.fragmentShader,h.update(D),Pt=h.getVertexShaderID(D),Nt=h.getFragmentShaderID(D);let At=r.getRenderTarget(),Qt=D.alphaTest>0,Vt=D.clearcoat>0,Yt=D.iridescence>0;return{isWebGL2:d,shaderID:W,shaderName:D.type,vertexShader:Tt,fragmentShader:Rt,defines:D.defines,customVertexShaderID:Pt,customFragmentShaderID:Nt,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:m,instancing:gt.isInstancedMesh===!0,instancingColor:gt.isInstancedMesh===!0&&gt.instanceColor!==null,supportsVertexTextures:f,outputEncoding:At===null?r.outputEncoding:At.isXRRenderTarget===!0?At.texture.encoding:To,map:!!D.map,matcap:!!D.matcap,envMap:!!it,envMapMode:it&&it.mapping,envMapCubeUVHeight:tt,lightMap:!!D.lightMap,aoMap:!!D.aoMap,emissiveMap:!!D.emissiveMap,bumpMap:!!D.bumpMap,normalMap:!!D.normalMap,objectSpaceNormalMap:D.normalMapType===cL,tangentSpaceNormalMap:D.normalMapType===uL,decodeVideoTexture:!!D.map&&D.map.isVideoTexture===!0&&D.map.encoding===li,clearcoat:Vt,clearcoatMap:Vt&&!!D.clearcoatMap,clearcoatRoughnessMap:Vt&&!!D.clearcoatRoughnessMap,clearcoatNormalMap:Vt&&!!D.clearcoatNormalMap,iridescence:Yt,iridescenceMap:Yt&&!!D.iridescenceMap,iridescenceThicknessMap:Yt&&!!D.iridescenceThicknessMap,displacementMap:!!D.displacementMap,roughnessMap:!!D.roughnessMap,metalnessMap:!!D.metalnessMap,specularMap:!!D.specularMap,specularIntensityMap:!!D.specularIntensityMap,specularColorMap:!!D.specularColorMap,opaque:D.transparent===!1&&D.blending===zl,alphaMap:!!D.alphaMap,alphaTest:Qt,gradientMap:!!D.gradientMap,sheen:D.sheen>0,sheenColorMap:!!D.sheenColorMap,sheenRoughnessMap:!!D.sheenRoughnessMap,transmission:D.transmission>0,transmissionMap:!!D.transmissionMap,thicknessMap:!!D.thicknessMap,combine:D.combine,vertexTangents:!!D.normalMap&&!!xt.attributes.tangent,vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!xt.attributes.color&&xt.attributes.color.itemSize===4,vertexUvs:!!D.map||!!D.bumpMap||!!D.normalMap||!!D.specularMap||!!D.alphaMap||!!D.emissiveMap||!!D.roughnessMap||!!D.metalnessMap||!!D.clearcoatMap||!!D.clearcoatRoughnessMap||!!D.clearcoatNormalMap||!!D.iridescenceMap||!!D.iridescenceThicknessMap||!!D.displacementMap||!!D.transmissionMap||!!D.thicknessMap||!!D.specularIntensityMap||!!D.specularColorMap||!!D.sheenColorMap||!!D.sheenRoughnessMap,uvsVertexOnly:!(!!D.map||!!D.bumpMap||!!D.normalMap||!!D.specularMap||!!D.alphaMap||!!D.emissiveMap||!!D.roughnessMap||!!D.metalnessMap||!!D.clearcoatNormalMap||!!D.iridescenceMap||!!D.iridescenceThicknessMap||D.transmission>0||!!D.transmissionMap||!!D.thicknessMap||!!D.specularIntensityMap||!!D.specularColorMap||D.sheen>0||!!D.sheenColorMap||!!D.sheenRoughnessMap)&&!!D.displacementMap,fog:!!ut,useFog:D.fog===!0,fogExp2:ut&&ut.isFogExp2,flatShading:!!D.flatShading,sizeAttenuation:D.sizeAttenuation,logarithmicDepthBuffer:g,skinning:gt.isSkinnedMesh===!0,morphTargets:xt.morphAttributes.position!==void 0,morphNormals:xt.morphAttributes.normal!==void 0,morphColors:xt.morphAttributes.color!==void 0,morphTargetsCount:ot,morphTextureStride:ct,numDirLights:X.directional.length,numPointLights:X.point.length,numSpotLights:X.spot.length,numSpotLightMaps:X.spotLightMap.length,numRectAreaLights:X.rectArea.length,numHemiLights:X.hemi.length,numDirLightShadows:X.directionalShadowMap.length,numPointLightShadows:X.pointShadowMap.length,numSpotLightShadows:X.spotShadowMap.length,numSpotLightShadowsWithMaps:X.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering,shadowMapEnabled:r.shadowMap.enabled&&at.length>0,shadowMapType:r.shadowMap.type,toneMapping:D.toneMapped?r.toneMapping:Ps,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===Zn,flipSided:D.side===sn,useDepthPacking:!!D.depthPacking,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionDerivatives:D.extensions&&D.extensions.derivatives,extensionFragDepth:D.extensions&&D.extensions.fragDepth,extensionDrawBuffers:D.extensions&&D.extensions.drawBuffers,extensionShaderTextureLOD:D.extensions&&D.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:D.customProgramCacheKey()}}function b(D){let X=[];if(D.shaderID?X.push(D.shaderID):(X.push(D.customVertexShaderID),X.push(D.customFragmentShaderID)),D.defines!==void 0)for(let at in D.defines)X.push(at),X.push(D.defines[at]);return D.isRawShaderMaterial===!1&&(C(X,D),M(X,D),X.push(r.outputEncoding)),X.push(D.customProgramCacheKey),X.join()}function C(D,X){D.push(X.precision),D.push(X.outputEncoding),D.push(X.envMapMode),D.push(X.envMapCubeUVHeight),D.push(X.combine),D.push(X.vertexUvs),D.push(X.fogExp2),D.push(X.sizeAttenuation),D.push(X.morphTargetsCount),D.push(X.morphAttributeCount),D.push(X.numDirLights),D.push(X.numPointLights),D.push(X.numSpotLights),D.push(X.numSpotLightMaps),D.push(X.numHemiLights),D.push(X.numRectAreaLights),D.push(X.numDirLightShadows),D.push(X.numPointLightShadows),D.push(X.numSpotLightShadows),D.push(X.numSpotLightShadowsWithMaps),D.push(X.shadowMapType),D.push(X.toneMapping),D.push(X.numClippingPlanes),D.push(X.numClipIntersection),D.push(X.depthPacking)}function M(D,X){o.disableAll(),X.isWebGL2&&o.enable(0),X.supportsVertexTextures&&o.enable(1),X.instancing&&o.enable(2),X.instancingColor&&o.enable(3),X.map&&o.enable(4),X.matcap&&o.enable(5),X.envMap&&o.enable(6),X.lightMap&&o.enable(7),X.aoMap&&o.enable(8),X.emissiveMap&&o.enable(9),X.bumpMap&&o.enable(10),X.normalMap&&o.enable(11),X.objectSpaceNormalMap&&o.enable(12),X.tangentSpaceNormalMap&&o.enable(13),X.clearcoat&&o.enable(14),X.clearcoatMap&&o.enable(15),X.clearcoatRoughnessMap&&o.enable(16),X.clearcoatNormalMap&&o.enable(17),X.iridescence&&o.enable(18),X.iridescenceMap&&o.enable(19),X.iridescenceThicknessMap&&o.enable(20),X.displacementMap&&o.enable(21),X.specularMap&&o.enable(22),X.roughnessMap&&o.enable(23),X.metalnessMap&&o.enable(24),X.gradientMap&&o.enable(25),X.alphaMap&&o.enable(26),X.alphaTest&&o.enable(27),X.vertexColors&&o.enable(28),X.vertexAlphas&&o.enable(29),X.vertexUvs&&o.enable(30),X.vertexTangents&&o.enable(31),X.uvsVertexOnly&&o.enable(32),D.push(o.mask),o.disableAll(),X.fog&&o.enable(0),X.useFog&&o.enable(1),X.flatShading&&o.enable(2),X.logarithmicDepthBuffer&&o.enable(3),X.skinning&&o.enable(4),X.morphTargets&&o.enable(5),X.morphNormals&&o.enable(6),X.morphColors&&o.enable(7),X.premultipliedAlpha&&o.enable(8),X.shadowMapEnabled&&o.enable(9),X.physicallyCorrectLights&&o.enable(10),X.doubleSided&&o.enable(11),X.flipSided&&o.enable(12),X.useDepthPacking&&o.enable(13),X.dithering&&o.enable(14),X.specularIntensityMap&&o.enable(15),X.specularColorMap&&o.enable(16),X.transmission&&o.enable(17),X.transmissionMap&&o.enable(18),X.thicknessMap&&o.enable(19),X.sheen&&o.enable(20),X.sheenColorMap&&o.enable(21),X.sheenRoughnessMap&&o.enable(22),X.decodeVideoTexture&&o.enable(23),X.opaque&&o.enable(24),D.push(o.mask)}function E(D){let X=_[D.type],at;if(X){let ft=Qn[X];at=EL.clone(ft.uniforms)}else at=D.uniforms;return at}function w(D,X){let at;for(let ft=0,gt=u.length;ft<gt;ft++){let ut=u[ft];if(ut.cacheKey===X){at=ut,++at.usedTimes;break}}return at===void 0&&(at=new DO(r,X,D,s),u.push(at)),at}function A(D){if(--D.usedTimes==0){let X=u.indexOf(D);u[X]=u[u.length-1],u.pop(),D.destroy()}}function R(D){h.remove(D)}function N(){h.dispose()}return{getParameters:v,getProgramCacheKey:b,getUniforms:E,acquireProgram:w,releaseProgram:A,releaseShaderCache:R,programs:u,dispose:N}}function FO(){let r=new WeakMap;function t(s){let a=r.get(s);return a===void 0&&(a={},r.set(s,a)),a}function e(s){r.delete(s)}function i(s,a,o){r.get(s)[a]=o}function n(){r=new WeakMap}return{get:t,remove:e,update:i,dispose:n}}function kO(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function dC(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function pC(){let r=[],t=0,e=[],i=[],n=[];function s(){t=0,e.length=0,i.length=0,n.length=0}function a(g,f,m,_,v,b){let C=r[t];return C===void 0?(C={id:g.id,object:g,geometry:f,material:m,groupOrder:_,renderOrder:g.renderOrder,z:v,group:b},r[t]=C):(C.id=g.id,C.object=g,C.geometry=f,C.material=m,C.groupOrder=_,C.renderOrder=g.renderOrder,C.z=v,C.group=b),t++,C}function o(g,f,m,_,v,b){let C=a(g,f,m,_,v,b);m.transmission>0?i.push(C):m.transparent===!0?n.push(C):e.push(C)}function h(g,f,m,_,v,b){let C=a(g,f,m,_,v,b);m.transmission>0?i.unshift(C):m.transparent===!0?n.unshift(C):e.unshift(C)}function u(g,f){e.length>1&&e.sort(g||kO),i.length>1&&i.sort(f||dC),n.length>1&&n.sort(f||dC)}function d(){for(let g=t,f=r.length;g<f;g++){let m=r[g];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:e,transmissive:i,transparent:n,init:s,push:o,unshift:h,finish:d,sort:u}}function OO(){let r=new WeakMap;function t(i,n){let s=r.get(i),a;return s===void 0?(a=new pC,r.set(i,[a])):n>=s.length?(a=new pC,s.push(a)):a=s[n],a}function e(){r=new WeakMap}return{get:t,dispose:e}}function NO(){let r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new $t,color:new ii};break;case"SpotLight":e={position:new $t,direction:new $t,color:new ii,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new $t,color:new ii,distance:0,decay:0};break;case"HemisphereLight":e={direction:new $t,skyColor:new ii,groundColor:new ii};break;case"RectAreaLight":e={color:new ii,position:new $t,halfWidth:new $t,halfHeight:new $t};break}return r[t.id]=e,e}}}function BO(){let r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=e,e}}}var zO=0;function VO(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function UO(r,t){let e=new NO,i=BO(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)n.probe.push(new $t);let s=new $t,a=new Ni,o=new Ni;function h(d,g){let f=0,m=0,_=0;for(let ft=0;ft<9;ft++)n.probe[ft].set(0,0,0);let v=0,b=0,C=0,M=0,E=0,w=0,A=0,R=0,N=0,D=0;d.sort(VO);let X=g!==!0?Math.PI:1;for(let ft=0,gt=d.length;ft<gt;ft++){let ut=d[ft],xt=ut.color,nt=ut.intensity,it=ut.distance,tt=ut.shadow&&ut.shadow.map?ut.shadow.map.texture:null;if(ut.isAmbientLight)f+=xt.r*nt*X,m+=xt.g*nt*X,_+=xt.b*nt*X;else if(ut.isLightProbe)for(let W=0;W<9;W++)n.probe[W].addScaledVector(ut.sh.coefficients[W],nt);else if(ut.isDirectionalLight){let W=e.get(ut);if(W.color.copy(ut.color).multiplyScalar(ut.intensity*X),ut.castShadow){let Q=ut.shadow,ot=i.get(ut);ot.shadowBias=Q.bias,ot.shadowNormalBias=Q.normalBias,ot.shadowRadius=Q.radius,ot.shadowMapSize=Q.mapSize,n.directionalShadow[v]=ot,n.directionalShadowMap[v]=tt,n.directionalShadowMatrix[v]=ut.shadow.matrix,w++}n.directional[v]=W,v++}else if(ut.isSpotLight){let W=e.get(ut);W.position.setFromMatrixPosition(ut.matrixWorld),W.color.copy(xt).multiplyScalar(nt*X),W.distance=it,W.coneCos=Math.cos(ut.angle),W.penumbraCos=Math.cos(ut.angle*(1-ut.penumbra)),W.decay=ut.decay,n.spot[C]=W;let Q=ut.shadow;if(ut.map&&(n.spotLightMap[N]=ut.map,N++,Q.updateMatrices(ut),ut.castShadow&&D++),n.spotLightMatrix[C]=Q.matrix,ut.castShadow){let ot=i.get(ut);ot.shadowBias=Q.bias,ot.shadowNormalBias=Q.normalBias,ot.shadowRadius=Q.radius,ot.shadowMapSize=Q.mapSize,n.spotShadow[C]=ot,n.spotShadowMap[C]=tt,R++}C++}else if(ut.isRectAreaLight){let W=e.get(ut);W.color.copy(xt).multiplyScalar(nt),W.halfWidth.set(ut.width*.5,0,0),W.halfHeight.set(0,ut.height*.5,0),n.rectArea[M]=W,M++}else if(ut.isPointLight){let W=e.get(ut);if(W.color.copy(ut.color).multiplyScalar(ut.intensity*X),W.distance=ut.distance,W.decay=ut.decay,ut.castShadow){let Q=ut.shadow,ot=i.get(ut);ot.shadowBias=Q.bias,ot.shadowNormalBias=Q.normalBias,ot.shadowRadius=Q.radius,ot.shadowMapSize=Q.mapSize,ot.shadowCameraNear=Q.camera.near,ot.shadowCameraFar=Q.camera.far,n.pointShadow[b]=ot,n.pointShadowMap[b]=tt,n.pointShadowMatrix[b]=ut.shadow.matrix,A++}n.point[b]=W,b++}else if(ut.isHemisphereLight){let W=e.get(ut);W.skyColor.copy(ut.color).multiplyScalar(nt*X),W.groundColor.copy(ut.groundColor).multiplyScalar(nt*X),n.hemi[E]=W,E++}}M>0&&(t.isWebGL2||r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=he.LTC_FLOAT_1,n.rectAreaLTC2=he.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=he.LTC_HALF_1,n.rectAreaLTC2=he.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=f,n.ambient[1]=m,n.ambient[2]=_;let at=n.hash;(at.directionalLength!==v||at.pointLength!==b||at.spotLength!==C||at.rectAreaLength!==M||at.hemiLength!==E||at.numDirectionalShadows!==w||at.numPointShadows!==A||at.numSpotShadows!==R||at.numSpotMaps!==N)&&(n.directional.length=v,n.spot.length=C,n.rectArea.length=M,n.point.length=b,n.hemi.length=E,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=A,n.pointShadowMap.length=A,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=A,n.spotLightMatrix.length=R+N-D,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=D,at.directionalLength=v,at.pointLength=b,at.spotLength=C,at.rectAreaLength=M,at.hemiLength=E,at.numDirectionalShadows=w,at.numPointShadows=A,at.numSpotShadows=R,at.numSpotMaps=N,n.version=zO++)}function u(d,g){let f=0,m=0,_=0,v=0,b=0,C=g.matrixWorldInverse;for(let M=0,E=d.length;M<E;M++){let w=d[M];if(w.isDirectionalLight){let A=n.directional[f];A.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(C),f++}else if(w.isSpotLight){let A=n.spot[_];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(C),A.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(C),_++}else if(w.isRectAreaLight){let A=n.rectArea[v];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(C),o.identity(),a.copy(w.matrixWorld),a.premultiply(C),o.extractRotation(a),A.halfWidth.set(w.width*.5,0,0),A.halfHeight.set(0,w.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){let A=n.point[m];A.position.setFromMatrixPosition(w.matrixWorld),A.position.applyMatrix4(C),m++}else if(w.isHemisphereLight){let A=n.hemi[b];A.direction.setFromMatrixPosition(w.matrixWorld),A.direction.transformDirection(C),b++}}}return{setup:h,setupView:u,state:n}}function mC(r,t){let e=new UO(r,t),i=[],n=[];function s(){i.length=0,n.length=0}function a(g){i.push(g)}function o(g){n.push(g)}function h(g){e.setup(i,g)}function u(g){e.setupView(i,g)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:e},setupLights:h,setupLightsView:u,pushLight:a,pushShadow:o}}function GO(r,t){let e=new WeakMap;function i(s,a=0){let o=e.get(s),h;return o===void 0?(h=new mC(r,t),e.set(s,[h])):a>=o.length?(h=new mC(r,t),o.push(h)):h=o[a],h}function n(){e=new WeakMap}return{get:i,dispose:n}}var gC=class extends Uu{constructor(t){super();this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},vC=class extends Uu{constructor(t){super();this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $t,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},HO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,WO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function XO(r,t,e){let i=new D0,n=new Ue,s=new Ue,a=new Oi,o=new gC({depthPacking:hL}),h=new vC,u={},d=e.maxTextureSize,g={0:sn,1:Bl,2:Zn},f=new Kn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:HO,fragmentShader:WO}),m=f.clone();m.defines.HORIZONTAL_PASS=1;let _=new ya;_.setAttribute("position",new An(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new In(_,f),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kS,this.render=function(w,A,R){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||w.length===0)return;let N=r.getRenderTarget(),D=r.getActiveCubeFace(),X=r.getActiveMipmapLevel(),at=r.state;at.setBlending(fa),at.buffers.color.setClear(1,1,1,1),at.buffers.depth.setTest(!0),at.setScissorTest(!1);for(let ft=0,gt=w.length;ft<gt;ft++){let ut=w[ft],xt=ut.shadow;if(xt===void 0){console.warn("THREE.WebGLShadowMap:",ut,"has no shadow.");continue}if(xt.autoUpdate===!1&&xt.needsUpdate===!1)continue;n.copy(xt.mapSize);let nt=xt.getFrameExtents();if(n.multiply(nt),s.copy(xt.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(s.x=Math.floor(d/nt.x),n.x=s.x*nt.x,xt.mapSize.x=s.x),n.y>d&&(s.y=Math.floor(d/nt.y),n.y=s.y*nt.y,xt.mapSize.y=s.y)),xt.map===null){let tt=this.type!==Ru?{minFilter:Cr,magFilter:Cr}:{};xt.map=new da(n.x,n.y,tt),xt.map.texture.name=ut.name+".shadowMap",xt.camera.updateProjectionMatrix()}r.setRenderTarget(xt.map),r.clear();let it=xt.getViewportCount();for(let tt=0;tt<it;tt++){let W=xt.getViewport(tt);a.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),at.viewport(a),xt.updateMatrices(ut,tt),i=xt.getFrustum(),E(A,R,xt.camera,ut,this.type)}xt.isPointLightShadow!==!0&&this.type===Ru&&C(xt,R),xt.needsUpdate=!1}b.needsUpdate=!1,r.setRenderTarget(N,D,X)};function C(w,A){let R=t.update(v);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,m.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new da(n.x,n.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,r.setRenderTarget(w.mapPass),r.clear(),r.renderBufferDirect(A,null,R,f,v,null),m.uniforms.shadow_pass.value=w.mapPass.texture,m.uniforms.resolution.value=w.mapSize,m.uniforms.radius.value=w.radius,r.setRenderTarget(w.map),r.clear(),r.renderBufferDirect(A,null,R,m,v,null)}function M(w,A,R,N,D,X){let at=null,ft=R.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(ft!==void 0?at=ft:at=R.isPointLight===!0?h:o,r.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){let gt=at.uuid,ut=A.uuid,xt=u[gt];xt===void 0&&(xt={},u[gt]=xt);let nt=xt[ut];nt===void 0&&(nt=at.clone(),xt[ut]=nt),at=nt}return at.visible=A.visible,at.wireframe=A.wireframe,X===Ru?at.side=A.shadowSide!==null?A.shadowSide:A.side:at.side=A.shadowSide!==null?A.shadowSide:g[A.side],at.alphaMap=A.alphaMap,at.alphaTest=A.alphaTest,at.map=A.map,at.clipShadows=A.clipShadows,at.clippingPlanes=A.clippingPlanes,at.clipIntersection=A.clipIntersection,at.displacementMap=A.displacementMap,at.displacementScale=A.displacementScale,at.displacementBias=A.displacementBias,at.wireframeLinewidth=A.wireframeLinewidth,at.linewidth=A.linewidth,R.isPointLight===!0&&at.isMeshDistanceMaterial===!0&&(at.referencePosition.setFromMatrixPosition(R.matrixWorld),at.nearDistance=N,at.farDistance=D),at}function E(w,A,R,N,D){if(w.visible===!1)return;if(w.layers.test(A.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&D===Ru)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,w.matrixWorld);let ft=t.update(w),gt=w.material;if(Array.isArray(gt)){let ut=ft.groups;for(let xt=0,nt=ut.length;xt<nt;xt++){let it=ut[xt],tt=gt[it.materialIndex];if(tt&&tt.visible){let W=M(w,tt,N,R.near,R.far,D);r.renderBufferDirect(R,null,ft,W,w,it)}}}else if(gt.visible){let ut=M(w,gt,N,R.near,R.far,D);r.renderBufferDirect(R,null,ft,ut,w,null)}}let at=w.children;for(let ft=0,gt=at.length;ft<gt;ft++)E(at[ft],A,R,N,D)}}function qO(r,t,e){let i=e.isWebGL2;function n(){let B=!1,z=new Oi,$=null,j=new Oi(0,0,0,0);return{setMask:function(et){$!==et&&!B&&(r.colorMask(et,et,et,et),$=et)},setLocked:function(et){B=et},setClear:function(et,q,J,U,K){K===!0&&(et*=U,q*=U,J*=U),z.set(et,q,J,U),j.equals(z)===!1&&(r.clearColor(et,q,J,U),j.copy(z))},reset:function(){B=!1,$=null,j.set(-1,0,0,0)}}}function s(){let B=!1,z=null,$=null,j=null;return{setTest:function(et){et?Qt(2929):Vt(2929)},setMask:function(et){z!==et&&!B&&(r.depthMask(et),z=et)},setFunc:function(et){if($!==et){switch(et){case LD:r.depthFunc(512);break;case RD:r.depthFunc(519);break;case FD:r.depthFunc(513);break;case zv:r.depthFunc(515);break;case kD:r.depthFunc(514);break;case OD:r.depthFunc(518);break;case ND:r.depthFunc(516);break;case BD:r.depthFunc(517);break;default:r.depthFunc(515)}$=et}},setLocked:function(et){B=et},setClear:function(et){j!==et&&(r.clearDepth(et),j=et)},reset:function(){B=!1,z=null,$=null,j=null}}}function a(){let B=!1,z=null,$=null,j=null,et=null,q=null,J=null,U=null,K=null;return{setTest:function(O){B||(O?Qt(2960):Vt(2960))},setMask:function(O){z!==O&&!B&&(r.stencilMask(O),z=O)},setFunc:function(O,rt,lt){($!==O||j!==rt||et!==lt)&&(r.stencilFunc(O,rt,lt),$=O,j=rt,et=lt)},setOp:function(O,rt,lt){(q!==O||J!==rt||U!==lt)&&(r.stencilOp(O,rt,lt),q=O,J=rt,U=lt)},setLocked:function(O){B=O},setClear:function(O){K!==O&&(r.clearStencil(O),K=O)},reset:function(){B=!1,z=null,$=null,j=null,et=null,q=null,J=null,U=null,K=null}}}let o=new n,h=new s,u=new a,d=new WeakMap,g=new WeakMap,f={},m={},_=new WeakMap,v=[],b=null,C=!1,M=null,E=null,w=null,A=null,R=null,N=null,D=null,X=!1,at=null,ft=null,gt=null,ut=null,xt=null,nt=r.getParameter(35661),it=!1,tt=0,W=r.getParameter(7938);W.indexOf("WebGL")!==-1?(tt=parseFloat(/^WebGL (\d)/.exec(W)[1]),it=tt>=1):W.indexOf("OpenGL ES")!==-1&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),it=tt>=2);let Q=null,ot={},ct=r.getParameter(3088),Tt=r.getParameter(2978),Rt=new Oi().fromArray(ct),Pt=new Oi().fromArray(Tt);function Nt(B,z,$){let j=new Uint8Array(4),et=r.createTexture();r.bindTexture(B,et),r.texParameteri(B,10241,9728),r.texParameteri(B,10240,9728);for(let q=0;q<$;q++)r.texImage2D(z+q,0,6408,1,1,0,6408,5121,j);return et}let At={};At[3553]=Nt(3553,3553,1),At[34067]=Nt(34067,34069,6),o.setClear(0,0,0,1),h.setClear(1),u.setClear(0),Qt(2929),h.setFunc(zv),ge(!1),Bt(FS),Qt(2884),Lt(fa);function Qt(B){f[B]!==!0&&(r.enable(B),f[B]=!0)}function Vt(B){f[B]!==!1&&(r.disable(B),f[B]=!1)}function Yt(B,z){return m[B]!==z?(r.bindFramebuffer(B,z),m[B]=z,i&&(B===36009&&(m[36160]=z),B===36160&&(m[36009]=z)),!0):!1}function Xt(B,z){let $=v,j=!1;if(B)if($=_.get(z),$===void 0&&($=[],_.set(z,$)),B.isWebGLMultipleRenderTargets){let et=B.texture;if($.length!==et.length||$[0]!==36064){for(let q=0,J=et.length;q<J;q++)$[q]=36064+q;$.length=et.length,j=!0}}else $[0]!==36064&&($[0]=36064,j=!0);else $[0]!==1029&&($[0]=1029,j=!0);j&&(e.isWebGL2?r.drawBuffers($):t.get("WEBGL_draw_buffers").drawBuffersWEBGL($))}function re(B){return b!==B?(r.useProgram(B),b=B,!0):!1}let qt={[Vl]:32774,[bD]:32778,[wD]:32779};if(i)qt[zS]=32775,qt[VS]=32776;else{let B=t.get("EXT_blend_minmax");B!==null&&(qt[zS]=B.MIN_EXT,qt[VS]=B.MAX_EXT)}let Ut={[SD]:0,[TD]:1,[CD]:768,[US]:770,[DD]:776,[AD]:774,[MD]:772,[ED]:769,[GS]:771,[ID]:775,[PD]:773};function Lt(B,z,$,j,et,q,J,U){if(B===fa){C===!0&&(Vt(3042),C=!1);return}if(C===!1&&(Qt(3042),C=!0),B!==xD){if(B!==M||U!==X){if((E!==Vl||R!==Vl)&&(r.blendEquation(32774),E=Vl,R=Vl),U)switch(B){case zl:r.blendFuncSeparate(1,771,1,771);break;case OS:r.blendFunc(1,1);break;case NS:r.blendFuncSeparate(0,769,0,1);break;case BS:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}else switch(B){case zl:r.blendFuncSeparate(770,771,1,771);break;case OS:r.blendFunc(770,1);break;case NS:r.blendFuncSeparate(0,769,0,1);break;case BS:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}w=null,A=null,N=null,D=null,M=B,X=U}return}et=et||z,q=q||$,J=J||j,(z!==E||et!==R)&&(r.blendEquationSeparate(qt[z],qt[et]),E=z,R=et),($!==w||j!==A||q!==N||J!==D)&&(r.blendFuncSeparate(Ut[$],Ut[j],Ut[q],Ut[J]),w=$,A=j,N=q,D=J),M=B,X=!1}function te(B,z){B.side===Zn?Vt(2884):Qt(2884);let $=B.side===sn;z&&($=!$),ge($),B.blending===zl&&B.transparent===!1?Lt(fa):Lt(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.premultipliedAlpha),h.setFunc(B.depthFunc),h.setTest(B.depthTest),h.setMask(B.depthWrite),o.setMask(B.colorWrite);let j=B.stencilWrite;u.setTest(j),j&&(u.setMask(B.stencilWriteMask),u.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),u.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),le(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),B.alphaToCoverage===!0?Qt(32926):Vt(32926)}function ge(B){at!==B&&(B?r.frontFace(2304):r.frontFace(2305),at=B)}function Bt(B){B!==vD?(Qt(2884),B!==ft&&(B===FS?r.cullFace(1029):B===_D?r.cullFace(1028):r.cullFace(1032))):Vt(2884),ft=B}function oe(B){B!==gt&&(it&&r.lineWidth(B),gt=B)}function le(B,z,$){B?(Qt(32823),(ut!==z||xt!==$)&&(r.polygonOffset(z,$),ut=z,xt=$)):Vt(32823)}function de(B){B?Qt(3089):Vt(3089)}function Se(B){B===void 0&&(B=33984+nt-1),Q!==B&&(r.activeTexture(B),Q=B)}function wt(B,z,$){$===void 0&&(Q===null?$=33984+nt-1:$=Q);let j=ot[$];j===void 0&&(j={type:void 0,texture:void 0},ot[$]=j),(j.type!==B||j.texture!==z)&&(Q!==$&&(r.activeTexture($),Q=$),r.bindTexture(B,z||At[B]),j.type=B,j.texture=z)}function mt(){let B=ot[Q];B!==void 0&&B.type!==void 0&&(r.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)}function Ft(){try{r.compressedTexImage2D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function l(){try{r.compressedTexImage3D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function c(){try{r.texSubImage2D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function p(){try{r.texSubImage3D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function x(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function y(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function T(){try{r.texStorage2D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function P(){try{r.texStorage3D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function I(){try{r.texImage2D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function L(){try{r.texImage3D.apply(r,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function k(B){Rt.equals(B)===!1&&(r.scissor(B.x,B.y,B.z,B.w),Rt.copy(B))}function G(B){Pt.equals(B)===!1&&(r.viewport(B.x,B.y,B.z,B.w),Pt.copy(B))}function V(B,z){let $=g.get(z);$===void 0&&($=new WeakMap,g.set(z,$));let j=$.get(B);j===void 0&&(j=r.getUniformBlockIndex(z,B.name),$.set(B,j))}function H(B,z){let j=g.get(z).get(B);d.get(B)!==j&&(r.uniformBlockBinding(z,j,B.__bindingPointIndex),d.set(B,j))}function Y(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),i===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),f={},Q=null,ot={},m={},_=new WeakMap,v=[],b=null,C=!1,M=null,E=null,w=null,A=null,R=null,N=null,D=null,X=!1,at=null,ft=null,gt=null,ut=null,xt=null,Rt.set(0,0,r.canvas.width,r.canvas.height),Pt.set(0,0,r.canvas.width,r.canvas.height),o.reset(),h.reset(),u.reset()}return{buffers:{color:o,depth:h,stencil:u},enable:Qt,disable:Vt,bindFramebuffer:Yt,drawBuffers:Xt,useProgram:re,setBlending:Lt,setMaterial:te,setFlipSided:ge,setCullFace:Bt,setLineWidth:oe,setPolygonOffset:le,setScissorTest:de,activeTexture:Se,bindTexture:wt,unbindTexture:mt,compressedTexImage2D:Ft,compressedTexImage3D:l,texImage2D:I,texImage3D:L,updateUBOMapping:V,uniformBlockBinding:H,texStorage2D:T,texStorage3D:P,texSubImage2D:c,texSubImage3D:p,compressedTexSubImage2D:x,compressedTexSubImage3D:y,scissor:k,viewport:G,reset:Y}}function YO(r,t,e,i,n,s,a){let o=n.isWebGL2,h=n.maxTextures,u=n.maxCubemapSize,d=n.maxTextureSize,g=n.maxSamples,f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap,v,b=new WeakMap,C=!1;try{C=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(wt,mt){return C?new OffscreenCanvas(wt,mt):Nu("canvas")}function E(wt,mt,Ft,l){let c=1;if((wt.width>l||wt.height>l)&&(c=l/Math.max(wt.width,wt.height)),c<1||mt===!0)if(typeof HTMLImageElement!="undefined"&&wt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&wt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&wt instanceof ImageBitmap){let p=mt?Qv:Math.floor,x=p(c*wt.width),y=p(c*wt.height);v===void 0&&(v=M(x,y));let T=Ft?M(x,y):v;return T.width=x,T.height=y,T.getContext("2d").drawImage(wt,0,0,x,y),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+wt.width+"x"+wt.height+") to ("+x+"x"+y+")."),T}else return"data"in wt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+wt.width+"x"+wt.height+")."),wt;return wt}function w(wt){return bT(wt.width)&&bT(wt.height)}function A(wt){return o?!1:wt.wrapS!==Tn||wt.wrapT!==Tn||wt.minFilter!==Cr&&wt.minFilter!==Er}function R(wt,mt){return wt.generateMipmaps&&mt&&wt.minFilter!==Cr&&wt.minFilter!==Er}function N(wt){r.generateMipmap(wt)}function D(wt,mt,Ft,l,c=!1){if(o===!1)return mt;if(wt!==null){if(r[wt]!==void 0)return r[wt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+wt+"'")}let p=mt;return mt===6403&&(Ft===5126&&(p=33326),Ft===5131&&(p=33325),Ft===5121&&(p=33321)),mt===33319&&(Ft===5126&&(p=33328),Ft===5131&&(p=33327),Ft===5121&&(p=33323)),mt===6408&&(Ft===5126&&(p=34836),Ft===5131&&(p=34842),Ft===5121&&(p=l===li&&c===!1?35907:32856),Ft===32819&&(p=32854),Ft===32820&&(p=32855)),(p===33325||p===33326||p===33327||p===33328||p===34842||p===34836)&&t.get("EXT_color_buffer_float"),p}function X(wt,mt,Ft){return R(wt,Ft)===!0||wt.isFramebufferTexture&&wt.minFilter!==Cr&&wt.minFilter!==Er?Math.log2(Math.max(mt.width,mt.height))+1:wt.mipmaps!==void 0&&wt.mipmaps.length>0?wt.mipmaps.length:wt.isCompressedTexture&&Array.isArray(wt.image)?mt.mipmaps.length:1}function at(wt){return wt===Cr||wt===XS||wt===qS?9728:9729}function ft(wt){let mt=wt.target;mt.removeEventListener("dispose",ft),ut(mt),mt.isVideoTexture&&_.delete(mt)}function gt(wt){let mt=wt.target;mt.removeEventListener("dispose",gt),nt(mt)}function ut(wt){let mt=i.get(wt);if(mt.__webglInit===void 0)return;let Ft=wt.source,l=b.get(Ft);if(l){let c=l[mt.__cacheKey];c.usedTimes--,c.usedTimes===0&&xt(wt),Object.keys(l).length===0&&b.delete(Ft)}i.remove(wt)}function xt(wt){let mt=i.get(wt);r.deleteTexture(mt.__webglTexture);let Ft=wt.source,l=b.get(Ft);delete l[mt.__cacheKey],a.memory.textures--}function nt(wt){let mt=wt.texture,Ft=i.get(wt),l=i.get(mt);if(l.__webglTexture!==void 0&&(r.deleteTexture(l.__webglTexture),a.memory.textures--),wt.depthTexture&&wt.depthTexture.dispose(),wt.isWebGLCubeRenderTarget)for(let c=0;c<6;c++)r.deleteFramebuffer(Ft.__webglFramebuffer[c]),Ft.__webglDepthbuffer&&r.deleteRenderbuffer(Ft.__webglDepthbuffer[c]);else{if(r.deleteFramebuffer(Ft.__webglFramebuffer),Ft.__webglDepthbuffer&&r.deleteRenderbuffer(Ft.__webglDepthbuffer),Ft.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Ft.__webglMultisampledFramebuffer),Ft.__webglColorRenderbuffer)for(let c=0;c<Ft.__webglColorRenderbuffer.length;c++)Ft.__webglColorRenderbuffer[c]&&r.deleteRenderbuffer(Ft.__webglColorRenderbuffer[c]);Ft.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Ft.__webglDepthRenderbuffer)}if(wt.isWebGLMultipleRenderTargets)for(let c=0,p=mt.length;c<p;c++){let x=i.get(mt[c]);x.__webglTexture&&(r.deleteTexture(x.__webglTexture),a.memory.textures--),i.remove(mt[c])}i.remove(mt),i.remove(wt)}let it=0;function tt(){it=0}function W(){let wt=it;return wt>=h&&console.warn("THREE.WebGLTextures: Trying to use "+wt+" texture units while this GPU supports only "+h),it+=1,wt}function Q(wt){let mt=[];return mt.push(wt.wrapS),mt.push(wt.wrapT),mt.push(wt.wrapR||0),mt.push(wt.magFilter),mt.push(wt.minFilter),mt.push(wt.anisotropy),mt.push(wt.internalFormat),mt.push(wt.format),mt.push(wt.type),mt.push(wt.generateMipmaps),mt.push(wt.premultiplyAlpha),mt.push(wt.flipY),mt.push(wt.unpackAlignment),mt.push(wt.encoding),mt.join()}function ot(wt,mt){let Ft=i.get(wt);if(wt.isVideoTexture&&de(wt),wt.isRenderTargetTexture===!1&&wt.version>0&&Ft.__version!==wt.version){let l=wt.image;if(l===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(l.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Vt(Ft,wt,mt);return}}e.bindTexture(3553,Ft.__webglTexture,33984+mt)}function ct(wt,mt){let Ft=i.get(wt);if(wt.version>0&&Ft.__version!==wt.version){Vt(Ft,wt,mt);return}e.bindTexture(35866,Ft.__webglTexture,33984+mt)}function Tt(wt,mt){let Ft=i.get(wt);if(wt.version>0&&Ft.__version!==wt.version){Vt(Ft,wt,mt);return}e.bindTexture(32879,Ft.__webglTexture,33984+mt)}function Rt(wt,mt){let Ft=i.get(wt);if(wt.version>0&&Ft.__version!==wt.version){Yt(Ft,wt,mt);return}e.bindTexture(34067,Ft.__webglTexture,33984+mt)}let Pt={[Gv]:10497,[Tn]:33071,[Hv]:33648},Nt={[Cr]:9728,[XS]:9984,[qS]:9986,[Er]:9729,[qD]:9985,[Qf]:9987};function At(wt,mt,Ft){if(Ft?(r.texParameteri(wt,10242,Pt[mt.wrapS]),r.texParameteri(wt,10243,Pt[mt.wrapT]),(wt===32879||wt===35866)&&r.texParameteri(wt,32882,Pt[mt.wrapR]),r.texParameteri(wt,10240,Nt[mt.magFilter]),r.texParameteri(wt,10241,Nt[mt.minFilter])):(r.texParameteri(wt,10242,33071),r.texParameteri(wt,10243,33071),(wt===32879||wt===35866)&&r.texParameteri(wt,32882,33071),(mt.wrapS!==Tn||mt.wrapT!==Tn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(wt,10240,at(mt.magFilter)),r.texParameteri(wt,10241,at(mt.minFilter)),mt.minFilter!==Cr&&mt.minFilter!==Er&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let l=t.get("EXT_texture_filter_anisotropic");if(mt.type===wo&&t.has("OES_texture_float_linear")===!1||o===!1&&mt.type===Fu&&t.has("OES_texture_half_float_linear")===!1)return;(mt.anisotropy>1||i.get(mt).__currentAnisotropy)&&(r.texParameterf(wt,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(mt.anisotropy,n.getMaxAnisotropy())),i.get(mt).__currentAnisotropy=mt.anisotropy)}}function Qt(wt,mt){let Ft=!1;wt.__webglInit===void 0&&(wt.__webglInit=!0,mt.addEventListener("dispose",ft));let l=mt.source,c=b.get(l);c===void 0&&(c={},b.set(l,c));let p=Q(mt);if(p!==wt.__cacheKey){c[p]===void 0&&(c[p]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,Ft=!0),c[p].usedTimes++;let x=c[wt.__cacheKey];x!==void 0&&(c[wt.__cacheKey].usedTimes--,x.usedTimes===0&&xt(mt)),wt.__cacheKey=p,wt.__webglTexture=c[p].texture}return Ft}function Vt(wt,mt,Ft){let l=3553;(mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(l=35866),mt.isData3DTexture&&(l=32879);let c=Qt(wt,mt),p=mt.source;e.bindTexture(l,wt.__webglTexture,33984+Ft);let x=i.get(p);if(p.version!==x.__version||c===!0){e.activeTexture(33984+Ft),r.pixelStorei(37440,mt.flipY),r.pixelStorei(37441,mt.premultiplyAlpha),r.pixelStorei(3317,mt.unpackAlignment),r.pixelStorei(37443,0);let y=A(mt)&&w(mt.image)===!1,T=E(mt.image,y,!1,d);T=Se(mt,T);let P=w(T)||o,I=s.convert(mt.format,mt.encoding),L=s.convert(mt.type),k=D(mt.internalFormat,I,L,mt.encoding,mt.isVideoTexture);At(l,mt,P);let G,V=mt.mipmaps,H=o&&mt.isVideoTexture!==!0,Y=x.__version===void 0||c===!0,B=X(mt,T,P);if(mt.isDepthTexture)k=6402,o?mt.type===wo?k=36012:mt.type===bo?k=33190:mt.type===Hl?k=35056:k=33189:mt.type===wo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),mt.format===So&&k===6402&&mt.type!==YS&&mt.type!==bo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),mt.type=bo,L=s.convert(mt.type)),mt.format===Wl&&k===6402&&(k=34041,mt.type!==Hl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),mt.type=Hl,L=s.convert(mt.type))),Y&&(H?e.texStorage2D(3553,1,k,T.width,T.height):e.texImage2D(3553,0,k,T.width,T.height,0,I,L,null));else if(mt.isDataTexture)if(V.length>0&&P){H&&Y&&e.texStorage2D(3553,B,k,V[0].width,V[0].height);for(let z=0,$=V.length;z<$;z++)G=V[z],H?e.texSubImage2D(3553,z,0,0,G.width,G.height,I,L,G.data):e.texImage2D(3553,z,k,G.width,G.height,0,I,L,G.data);mt.generateMipmaps=!1}else H?(Y&&e.texStorage2D(3553,B,k,T.width,T.height),e.texSubImage2D(3553,0,0,0,T.width,T.height,I,L,T.data)):e.texImage2D(3553,0,k,T.width,T.height,0,I,L,T.data);else if(mt.isCompressedTexture)if(mt.isCompressedArrayTexture){H&&Y&&e.texStorage3D(35866,B,k,V[0].width,V[0].height,T.depth);for(let z=0,$=V.length;z<$;z++)G=V[z],mt.format!==Cn?I!==null?H?e.compressedTexSubImage3D(35866,z,0,0,0,G.width,G.height,T.depth,I,G.data,0,0):e.compressedTexImage3D(35866,z,k,G.width,G.height,T.depth,0,G.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):H?e.texSubImage3D(35866,z,0,0,0,G.width,G.height,T.depth,I,L,G.data):e.texImage3D(35866,z,k,G.width,G.height,T.depth,0,I,L,G.data)}else{H&&Y&&e.texStorage2D(3553,B,k,V[0].width,V[0].height);for(let z=0,$=V.length;z<$;z++)G=V[z],mt.format!==Cn?I!==null?H?e.compressedTexSubImage2D(3553,z,0,0,G.width,G.height,I,G.data):e.compressedTexImage2D(3553,z,k,G.width,G.height,0,G.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):H?e.texSubImage2D(3553,z,0,0,G.width,G.height,I,L,G.data):e.texImage2D(3553,z,k,G.width,G.height,0,I,L,G.data)}else if(mt.isDataArrayTexture)H?(Y&&e.texStorage3D(35866,B,k,T.width,T.height,T.depth),e.texSubImage3D(35866,0,0,0,0,T.width,T.height,T.depth,I,L,T.data)):e.texImage3D(35866,0,k,T.width,T.height,T.depth,0,I,L,T.data);else if(mt.isData3DTexture)H?(Y&&e.texStorage3D(32879,B,k,T.width,T.height,T.depth),e.texSubImage3D(32879,0,0,0,0,T.width,T.height,T.depth,I,L,T.data)):e.texImage3D(32879,0,k,T.width,T.height,T.depth,0,I,L,T.data);else if(mt.isFramebufferTexture){if(Y)if(H)e.texStorage2D(3553,B,k,T.width,T.height);else{let z=T.width,$=T.height;for(let j=0;j<B;j++)e.texImage2D(3553,j,k,z,$,0,I,L,null),z>>=1,$>>=1}}else if(V.length>0&&P){H&&Y&&e.texStorage2D(3553,B,k,V[0].width,V[0].height);for(let z=0,$=V.length;z<$;z++)G=V[z],H?e.texSubImage2D(3553,z,0,0,I,L,G):e.texImage2D(3553,z,k,I,L,G);mt.generateMipmaps=!1}else H?(Y&&e.texStorage2D(3553,B,k,T.width,T.height),e.texSubImage2D(3553,0,0,0,I,L,T)):e.texImage2D(3553,0,k,I,L,T);R(mt,P)&&N(l),x.__version=p.version,mt.onUpdate&&mt.onUpdate(mt)}wt.__version=mt.version}function Yt(wt,mt,Ft){if(mt.image.length!==6)return;let l=Qt(wt,mt),c=mt.source;e.bindTexture(34067,wt.__webglTexture,33984+Ft);let p=i.get(c);if(c.version!==p.__version||l===!0){e.activeTexture(33984+Ft),r.pixelStorei(37440,mt.flipY),r.pixelStorei(37441,mt.premultiplyAlpha),r.pixelStorei(3317,mt.unpackAlignment),r.pixelStorei(37443,0);let x=mt.isCompressedTexture||mt.image[0].isCompressedTexture,y=mt.image[0]&&mt.image[0].isDataTexture,T=[];for(let z=0;z<6;z++)!x&&!y?T[z]=E(mt.image[z],!1,!0,u):T[z]=y?mt.image[z].image:mt.image[z],T[z]=Se(mt,T[z]);let P=T[0],I=w(P)||o,L=s.convert(mt.format,mt.encoding),k=s.convert(mt.type),G=D(mt.internalFormat,L,k,mt.encoding),V=o&&mt.isVideoTexture!==!0,H=p.__version===void 0||l===!0,Y=X(mt,P,I);At(34067,mt,I);let B;if(x){V&&H&&e.texStorage2D(34067,Y,G,P.width,P.height);for(let z=0;z<6;z++){B=T[z].mipmaps;for(let $=0;$<B.length;$++){let j=B[$];mt.format!==Cn?L!==null?V?e.compressedTexSubImage2D(34069+z,$,0,0,j.width,j.height,L,j.data):e.compressedTexImage2D(34069+z,$,G,j.width,j.height,0,j.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):V?e.texSubImage2D(34069+z,$,0,0,j.width,j.height,L,k,j.data):e.texImage2D(34069+z,$,G,j.width,j.height,0,L,k,j.data)}}}else{B=mt.mipmaps,V&&H&&(B.length>0&&Y++,e.texStorage2D(34067,Y,G,T[0].width,T[0].height));for(let z=0;z<6;z++)if(y){V?e.texSubImage2D(34069+z,0,0,0,T[z].width,T[z].height,L,k,T[z].data):e.texImage2D(34069+z,0,G,T[z].width,T[z].height,0,L,k,T[z].data);for(let $=0;$<B.length;$++){let et=B[$].image[z].image;V?e.texSubImage2D(34069+z,$+1,0,0,et.width,et.height,L,k,et.data):e.texImage2D(34069+z,$+1,G,et.width,et.height,0,L,k,et.data)}}else{V?e.texSubImage2D(34069+z,0,0,0,L,k,T[z]):e.texImage2D(34069+z,0,G,L,k,T[z]);for(let $=0;$<B.length;$++){let j=B[$];V?e.texSubImage2D(34069+z,$+1,0,0,L,k,j.image[z]):e.texImage2D(34069+z,$+1,G,L,k,j.image[z])}}}R(mt,I)&&N(34067),p.__version=c.version,mt.onUpdate&&mt.onUpdate(mt)}wt.__version=mt.version}function Xt(wt,mt,Ft,l,c){let p=s.convert(Ft.format,Ft.encoding),x=s.convert(Ft.type),y=D(Ft.internalFormat,p,x,Ft.encoding);i.get(mt).__hasExternalTextures||(c===32879||c===35866?e.texImage3D(c,0,y,mt.width,mt.height,mt.depth,0,p,x,null):e.texImage2D(c,0,y,mt.width,mt.height,0,p,x,null)),e.bindFramebuffer(36160,wt),le(mt)?f.framebufferTexture2DMultisampleEXT(36160,l,c,i.get(Ft).__webglTexture,0,oe(mt)):(c===3553||c>=34069&&c<=34074)&&r.framebufferTexture2D(36160,l,c,i.get(Ft).__webglTexture,0),e.bindFramebuffer(36160,null)}function re(wt,mt,Ft){if(r.bindRenderbuffer(36161,wt),mt.depthBuffer&&!mt.stencilBuffer){let l=33189;if(Ft||le(mt)){let c=mt.depthTexture;c&&c.isDepthTexture&&(c.type===wo?l=36012:c.type===bo&&(l=33190));let p=oe(mt);le(mt)?f.renderbufferStorageMultisampleEXT(36161,p,l,mt.width,mt.height):r.renderbufferStorageMultisample(36161,p,l,mt.width,mt.height)}else r.renderbufferStorage(36161,l,mt.width,mt.height);r.framebufferRenderbuffer(36160,36096,36161,wt)}else if(mt.depthBuffer&&mt.stencilBuffer){let l=oe(mt);Ft&&le(mt)===!1?r.renderbufferStorageMultisample(36161,l,35056,mt.width,mt.height):le(mt)?f.renderbufferStorageMultisampleEXT(36161,l,35056,mt.width,mt.height):r.renderbufferStorage(36161,34041,mt.width,mt.height),r.framebufferRenderbuffer(36160,33306,36161,wt)}else{let l=mt.isWebGLMultipleRenderTargets===!0?mt.texture:[mt.texture];for(let c=0;c<l.length;c++){let p=l[c],x=s.convert(p.format,p.encoding),y=s.convert(p.type),T=D(p.internalFormat,x,y,p.encoding),P=oe(mt);Ft&&le(mt)===!1?r.renderbufferStorageMultisample(36161,P,T,mt.width,mt.height):le(mt)?f.renderbufferStorageMultisampleEXT(36161,P,T,mt.width,mt.height):r.renderbufferStorage(36161,T,mt.width,mt.height)}}r.bindRenderbuffer(36161,null)}function qt(wt,mt){if(mt&&mt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,wt),!(mt.depthTexture&&mt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(mt.depthTexture).__webglTexture||mt.depthTexture.image.width!==mt.width||mt.depthTexture.image.height!==mt.height)&&(mt.depthTexture.image.width=mt.width,mt.depthTexture.image.height=mt.height,mt.depthTexture.needsUpdate=!0),ot(mt.depthTexture,0);let l=i.get(mt.depthTexture).__webglTexture,c=oe(mt);if(mt.depthTexture.format===So)le(mt)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,l,0,c):r.framebufferTexture2D(36160,36096,3553,l,0);else if(mt.depthTexture.format===Wl)le(mt)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,l,0,c):r.framebufferTexture2D(36160,33306,3553,l,0);else throw new Error("Unknown depthTexture format")}function Ut(wt){let mt=i.get(wt),Ft=wt.isWebGLCubeRenderTarget===!0;if(wt.depthTexture&&!mt.__autoAllocateDepthBuffer){if(Ft)throw new Error("target.depthTexture not supported in Cube render targets");qt(mt.__webglFramebuffer,wt)}else if(Ft){mt.__webglDepthbuffer=[];for(let l=0;l<6;l++)e.bindFramebuffer(36160,mt.__webglFramebuffer[l]),mt.__webglDepthbuffer[l]=r.createRenderbuffer(),re(mt.__webglDepthbuffer[l],wt,!1)}else e.bindFramebuffer(36160,mt.__webglFramebuffer),mt.__webglDepthbuffer=r.createRenderbuffer(),re(mt.__webglDepthbuffer,wt,!1);e.bindFramebuffer(36160,null)}function Lt(wt,mt,Ft){let l=i.get(wt);mt!==void 0&&Xt(l.__webglFramebuffer,wt,wt.texture,36064,3553),Ft!==void 0&&Ut(wt)}function te(wt){let mt=wt.texture,Ft=i.get(wt),l=i.get(mt);wt.addEventListener("dispose",gt),wt.isWebGLMultipleRenderTargets!==!0&&(l.__webglTexture===void 0&&(l.__webglTexture=r.createTexture()),l.__version=mt.version,a.memory.textures++);let c=wt.isWebGLCubeRenderTarget===!0,p=wt.isWebGLMultipleRenderTargets===!0,x=w(wt)||o;if(c){Ft.__webglFramebuffer=[];for(let y=0;y<6;y++)Ft.__webglFramebuffer[y]=r.createFramebuffer()}else{if(Ft.__webglFramebuffer=r.createFramebuffer(),p)if(n.drawBuffers){let y=wt.texture;for(let T=0,P=y.length;T<P;T++){let I=i.get(y[T]);I.__webglTexture===void 0&&(I.__webglTexture=r.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&wt.samples>0&&le(wt)===!1){let y=p?mt:[mt];Ft.__webglMultisampledFramebuffer=r.createFramebuffer(),Ft.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,Ft.__webglMultisampledFramebuffer);for(let T=0;T<y.length;T++){let P=y[T];Ft.__webglColorRenderbuffer[T]=r.createRenderbuffer(),r.bindRenderbuffer(36161,Ft.__webglColorRenderbuffer[T]);let I=s.convert(P.format,P.encoding),L=s.convert(P.type),k=D(P.internalFormat,I,L,P.encoding,wt.isXRRenderTarget===!0),G=oe(wt);r.renderbufferStorageMultisample(36161,G,k,wt.width,wt.height),r.framebufferRenderbuffer(36160,36064+T,36161,Ft.__webglColorRenderbuffer[T])}r.bindRenderbuffer(36161,null),wt.depthBuffer&&(Ft.__webglDepthRenderbuffer=r.createRenderbuffer(),re(Ft.__webglDepthRenderbuffer,wt,!0)),e.bindFramebuffer(36160,null)}}if(c){e.bindTexture(34067,l.__webglTexture),At(34067,mt,x);for(let y=0;y<6;y++)Xt(Ft.__webglFramebuffer[y],wt,mt,36064,34069+y);R(mt,x)&&N(34067),e.unbindTexture()}else if(p){let y=wt.texture;for(let T=0,P=y.length;T<P;T++){let I=y[T],L=i.get(I);e.bindTexture(3553,L.__webglTexture),At(3553,I,x),Xt(Ft.__webglFramebuffer,wt,I,36064+T,3553),R(I,x)&&N(3553)}e.unbindTexture()}else{let y=3553;(wt.isWebGL3DRenderTarget||wt.isWebGLArrayRenderTarget)&&(o?y=wt.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(y,l.__webglTexture),At(y,mt,x),Xt(Ft.__webglFramebuffer,wt,mt,36064,y),R(mt,x)&&N(y),e.unbindTexture()}wt.depthBuffer&&Ut(wt)}function ge(wt){let mt=w(wt)||o,Ft=wt.isWebGLMultipleRenderTargets===!0?wt.texture:[wt.texture];for(let l=0,c=Ft.length;l<c;l++){let p=Ft[l];if(R(p,mt)){let x=wt.isWebGLCubeRenderTarget?34067:3553,y=i.get(p).__webglTexture;e.bindTexture(x,y),N(x),e.unbindTexture()}}}function Bt(wt){if(o&&wt.samples>0&&le(wt)===!1){let mt=wt.isWebGLMultipleRenderTargets?wt.texture:[wt.texture],Ft=wt.width,l=wt.height,c=16384,p=[],x=wt.stencilBuffer?33306:36096,y=i.get(wt),T=wt.isWebGLMultipleRenderTargets===!0;if(T)for(let P=0;P<mt.length;P++)e.bindFramebuffer(36160,y.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+P,36161,null),e.bindFramebuffer(36160,y.__webglFramebuffer),r.framebufferTexture2D(36009,36064+P,3553,null,0);e.bindFramebuffer(36008,y.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,y.__webglFramebuffer);for(let P=0;P<mt.length;P++){p.push(36064+P),wt.depthBuffer&&p.push(x);let I=y.__ignoreDepthValues!==void 0?y.__ignoreDepthValues:!1;if(I===!1&&(wt.depthBuffer&&(c|=256),wt.stencilBuffer&&(c|=1024)),T&&r.framebufferRenderbuffer(36008,36064,36161,y.__webglColorRenderbuffer[P]),I===!0&&(r.invalidateFramebuffer(36008,[x]),r.invalidateFramebuffer(36009,[x])),T){let L=i.get(mt[P]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,L,0)}r.blitFramebuffer(0,0,Ft,l,0,0,Ft,l,c,9728),m&&r.invalidateFramebuffer(36008,p)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),T)for(let P=0;P<mt.length;P++){e.bindFramebuffer(36160,y.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+P,36161,y.__webglColorRenderbuffer[P]);let I=i.get(mt[P]).__webglTexture;e.bindFramebuffer(36160,y.__webglFramebuffer),r.framebufferTexture2D(36009,36064+P,3553,I,0)}e.bindFramebuffer(36009,y.__webglMultisampledFramebuffer)}}function oe(wt){return Math.min(g,wt.samples)}function le(wt){let mt=i.get(wt);return o&&wt.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&mt.__useRenderToTexture!==!1}function de(wt){let mt=a.render.frame;_.get(wt)!==mt&&(_.set(wt,mt),wt.update())}function Se(wt,mt){let Ft=wt.encoding,l=wt.format,c=wt.type;return wt.isCompressedTexture===!0||wt.isVideoTexture===!0||wt.format===$v||Ft!==To&&(Ft===li?o===!1?t.has("EXT_sRGB")===!0&&l===Cn?(wt.format=$v,wt.minFilter=Er,wt.generateMipmaps=!1):mt=r0.sRGBToLinear(mt):(l!==Cn||c!==xo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ft)),mt}this.allocateTextureUnit=W,this.resetTextureUnits=tt,this.setTexture2D=ot,this.setTexture2DArray=ct,this.setTexture3D=Tt,this.setTextureCube=Rt,this.rebindTextures=Lt,this.setupRenderTarget=te,this.updateRenderTargetMipmap=ge,this.updateMultisampleRenderTarget=Bt,this.setupDepthRenderbuffer=Ut,this.setupFrameBufferTexture=Xt,this.useMultisampledRTT=le}function jO(r,t,e){let i=e.isWebGL2;function n(s,a=null){let o;if(s===xo)return 5121;if(s===$D)return 32819;if(s===JD)return 32820;if(s===YD)return 5120;if(s===jD)return 5122;if(s===YS)return 5123;if(s===ZD)return 5124;if(s===bo)return 5125;if(s===wo)return 5126;if(s===Fu)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===KD)return 6406;if(s===Cn)return 6408;if(s===tL)return 6409;if(s===eL)return 6410;if(s===So)return 6402;if(s===Wl)return 34041;if(s===QD)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===$v)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===iL)return 6403;if(s===rL)return 36244;if(s===nL)return 33319;if(s===sL)return 33320;if(s===aL)return 36249;if(s===Wv||s===Xv||s===qv||s===Yv)if(a===li)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Wv)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Xv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===qv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Yv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Wv)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Xv)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===qv)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Yv)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===jS||s===ZS||s===$S||s===JS)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===jS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ZS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$S)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===JS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===oL)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===KS||s===QS)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(s===KS)return a===li?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===QS)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===tT||s===eT||s===iT||s===rT||s===nT||s===sT||s===aT||s===oT||s===lT||s===hT||s===uT||s===cT||s===fT||s===dT)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(s===tT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===eT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===iT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===rT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===nT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===sT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===aT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===oT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===lT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===hT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===uT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===fT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===dT)return a===li?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===pT)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(s===pT)return a===li?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Hl?i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:n}}var _C=class extends Ar{constructor(t=[]){super();this.isArrayCamera=!0,this.cameras=t}},Xu=class extends Pr{constructor(){super();this.isGroup=!0,this.type="Group"}},ZO={type:"move"},Md=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $t,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $t),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $t,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $t),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let n=null,s=null,a=null,o=this._targetRay,h=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){a=!0;for(let v of t.hand.values()){let b=e.getJointPose(v,i),C=this._getHandJoint(u,v);b!==null&&(C.matrix.fromArray(b.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=b.radius),C.visible=b!==null}let d=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],f=d.position.distanceTo(g.position),m=.02,_=.005;u.inputState.pinching&&f>m+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&f<=m-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else h!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1));o!==null&&(n=e.getPose(t.targetRaySpace,i),n===null&&s!==null&&(n=s),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ZO)))}return o!==null&&(o.visible=n!==null),h!==null&&(h.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Xu;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},yC=class extends cr{constructor(t,e,i,n,s,a,o,h,u,d){if(d=d!==void 0?d:So,d!==So&&d!==Wl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===So&&(i=bo),i===void 0&&d===Wl&&(i=Hl);super(null,n,s,a,o,h,d,i,u);this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=o!==void 0?o:Cr,this.minFilter=h!==void 0?h:Cr,this.flipY=!1,this.generateMipmaps=!1}},xC=class extends Co{constructor(t,e){super();let i=this,n=null,s=1,a=null,o="local-floor",h=null,u=null,d=null,g=null,f=null,m=null,_=e.getContextAttributes(),v=null,b=null,C=[],M=[],E=new Set,w=new Map,A=new Ar;A.layers.enable(1),A.viewport=new Oi;let R=new Ar;R.layers.enable(2),R.viewport=new Oi;let N=[A,R],D=new _C;D.layers.enable(1),D.layers.enable(2);let X=null,at=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ct){let Tt=C[ct];return Tt===void 0&&(Tt=new Md,C[ct]=Tt),Tt.getTargetRaySpace()},this.getControllerGrip=function(ct){let Tt=C[ct];return Tt===void 0&&(Tt=new Md,C[ct]=Tt),Tt.getGripSpace()},this.getHand=function(ct){let Tt=C[ct];return Tt===void 0&&(Tt=new Md,C[ct]=Tt),Tt.getHandSpace()};function ft(ct){let Tt=M.indexOf(ct.inputSource);if(Tt===-1)return;let Rt=C[Tt];Rt!==void 0&&Rt.dispatchEvent({type:ct.type,data:ct.inputSource})}function gt(){n.removeEventListener("select",ft),n.removeEventListener("selectstart",ft),n.removeEventListener("selectend",ft),n.removeEventListener("squeeze",ft),n.removeEventListener("squeezestart",ft),n.removeEventListener("squeezeend",ft),n.removeEventListener("end",gt),n.removeEventListener("inputsourceschange",ut);for(let ct=0;ct<C.length;ct++){let Tt=M[ct];Tt!==null&&(M[ct]=null,C[ct].disconnect(Tt))}X=null,at=null,t.setRenderTarget(v),f=null,g=null,d=null,n=null,b=null,ot.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ct){s=ct,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ct){o=ct,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(ct){h=ct},this.getBaseLayer=function(){return g!==null?g:f},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return n},this.setSession=async function(ct){if(n=ct,n!==null){if(v=t.getRenderTarget(),n.addEventListener("select",ft),n.addEventListener("selectstart",ft),n.addEventListener("selectend",ft),n.addEventListener("squeeze",ft),n.addEventListener("squeezestart",ft),n.addEventListener("squeezeend",ft),n.addEventListener("end",gt),n.addEventListener("inputsourceschange",ut),_.xrCompatible!==!0&&await e.makeXRCompatible(),n.renderState.layers===void 0||t.capabilities.isWebGL2===!1){let Tt={antialias:n.renderState.layers===void 0?_.antialias:!0,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,e,Tt),n.updateRenderState({baseLayer:f}),b=new da(f.framebufferWidth,f.framebufferHeight,{format:Cn,type:xo,encoding:t.outputEncoding,stencilBuffer:_.stencil})}else{let Tt=null,Rt=null,Pt=null;_.depth&&(Pt=_.stencil?35056:33190,Tt=_.stencil?Wl:So,Rt=_.stencil?Hl:bo);let Nt={colorFormat:32856,depthFormat:Pt,scaleFactor:s};d=new XRWebGLBinding(n,e),g=d.createProjectionLayer(Nt),n.updateRenderState({layers:[g]}),b=new da(g.textureWidth,g.textureHeight,{format:Cn,type:xo,depthTexture:new yC(g.textureWidth,g.textureHeight,Rt,void 0,void 0,void 0,void 0,void 0,void 0,Tt),stencilBuffer:_.stencil,encoding:t.outputEncoding,samples:_.antialias?4:0});let At=t.properties.get(b);At.__ignoreDepthValues=g.ignoreDepthValues}b.isXRRenderTarget=!0,this.setFoveation(1),h=null,a=await n.requestReferenceSpace(o),ot.setContext(n),ot.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function ut(ct){for(let Tt=0;Tt<ct.removed.length;Tt++){let Rt=ct.removed[Tt],Pt=M.indexOf(Rt);Pt>=0&&(M[Pt]=null,C[Pt].disconnect(Rt))}for(let Tt=0;Tt<ct.added.length;Tt++){let Rt=ct.added[Tt],Pt=M.indexOf(Rt);if(Pt===-1){for(let At=0;At<C.length;At++)if(At>=M.length){M.push(Rt),Pt=At;break}else if(M[At]===null){M[At]=Rt,Pt=At;break}if(Pt===-1)break}let Nt=C[Pt];Nt&&Nt.connect(Rt)}}let xt=new $t,nt=new $t;function it(ct,Tt,Rt){xt.setFromMatrixPosition(Tt.matrixWorld),nt.setFromMatrixPosition(Rt.matrixWorld);let Pt=xt.distanceTo(nt),Nt=Tt.projectionMatrix.elements,At=Rt.projectionMatrix.elements,Qt=Nt[14]/(Nt[10]-1),Vt=Nt[14]/(Nt[10]+1),Yt=(Nt[9]+1)/Nt[5],Xt=(Nt[9]-1)/Nt[5],re=(Nt[8]-1)/Nt[0],qt=(At[8]+1)/At[0],Ut=Qt*re,Lt=Qt*qt,te=Pt/(-re+qt),ge=te*-re;Tt.matrixWorld.decompose(ct.position,ct.quaternion,ct.scale),ct.translateX(ge),ct.translateZ(te),ct.matrixWorld.compose(ct.position,ct.quaternion,ct.scale),ct.matrixWorldInverse.copy(ct.matrixWorld).invert();let Bt=Qt+te,oe=Vt+te,le=Ut-ge,de=Lt+(Pt-ge),Se=Yt*Vt/oe*Bt,wt=Xt*Vt/oe*Bt;ct.projectionMatrix.makePerspective(le,de,Se,wt,Bt,oe)}function tt(ct,Tt){Tt===null?ct.matrixWorld.copy(ct.matrix):ct.matrixWorld.multiplyMatrices(Tt.matrixWorld,ct.matrix),ct.matrixWorldInverse.copy(ct.matrixWorld).invert()}this.updateCamera=function(ct){if(n===null)return;D.near=R.near=A.near=ct.near,D.far=R.far=A.far=ct.far,(X!==D.near||at!==D.far)&&(n.updateRenderState({depthNear:D.near,depthFar:D.far}),X=D.near,at=D.far);let Tt=ct.parent,Rt=D.cameras;tt(D,Tt);for(let Nt=0;Nt<Rt.length;Nt++)tt(Rt[Nt],Tt);D.matrixWorld.decompose(D.position,D.quaternion,D.scale),ct.matrix.copy(D.matrix),ct.matrix.decompose(ct.position,ct.quaternion,ct.scale);let Pt=ct.children;for(let Nt=0,At=Pt.length;Nt<At;Nt++)Pt[Nt].updateMatrixWorld(!0);Rt.length===2?it(D,A,R):D.projectionMatrix.copy(A.projectionMatrix)},this.getCamera=function(){return D},this.getFoveation=function(){if(g!==null)return g.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(ct){g!==null&&(g.fixedFoveation=ct),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ct)},this.getPlanes=function(){return E};let W=null;function Q(ct,Tt){if(u=Tt.getViewerPose(h||a),m=Tt,u!==null){let Rt=u.views;f!==null&&(t.setRenderTargetFramebuffer(b,f.framebuffer),t.setRenderTarget(b));let Pt=!1;Rt.length!==D.cameras.length&&(D.cameras.length=0,Pt=!0);for(let Nt=0;Nt<Rt.length;Nt++){let At=Rt[Nt],Qt=null;if(f!==null)Qt=f.getViewport(At);else{let Yt=d.getViewSubImage(g,At);Qt=Yt.viewport,Nt===0&&(t.setRenderTargetTextures(b,Yt.colorTexture,g.ignoreDepthValues?void 0:Yt.depthStencilTexture),t.setRenderTarget(b))}let Vt=N[Nt];Vt===void 0&&(Vt=new Ar,Vt.layers.enable(Nt),Vt.viewport=new Oi,N[Nt]=Vt),Vt.matrix.fromArray(At.transform.matrix),Vt.projectionMatrix.fromArray(At.projectionMatrix),Vt.viewport.set(Qt.x,Qt.y,Qt.width,Qt.height),Nt===0&&D.matrix.copy(Vt.matrix),Pt===!0&&D.cameras.push(Vt)}}for(let Rt=0;Rt<C.length;Rt++){let Pt=M[Rt],Nt=C[Rt];Pt!==null&&Nt!==void 0&&Nt.update(Pt,Tt,h||a)}if(W&&W(ct,Tt),Tt.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Tt.detectedPlanes});let Rt=null;for(let Pt of E)Tt.detectedPlanes.has(Pt)||(Rt===null&&(Rt=[]),Rt.push(Pt));if(Rt!==null)for(let Pt of Rt)E.delete(Pt),w.delete(Pt),i.dispatchEvent({type:"planeremoved",data:Pt});for(let Pt of Tt.detectedPlanes)if(!E.has(Pt))E.add(Pt),w.set(Pt,Tt.lastChangedTime),i.dispatchEvent({type:"planeadded",data:Pt});else{let Nt=w.get(Pt);Pt.lastChangedTime>Nt&&(w.set(Pt,Pt.lastChangedTime),i.dispatchEvent({type:"planechanged",data:Pt}))}}m=null}let ot=new BT;ot.setAnimationLoop(Q),this.setAnimationLoop=function(ct){W=ct},this.dispose=function(){}}};function $O(r,t){function e(v,b){b.color.getRGB(v.fogColor.value,kT(r)),b.isFog?(v.fogNear.value=b.near,v.fogFar.value=b.far):b.isFogExp2&&(v.fogDensity.value=b.density)}function i(v,b,C,M,E){b.isMeshBasicMaterial||b.isMeshLambertMaterial?n(v,b):b.isMeshToonMaterial?(n(v,b),d(v,b)):b.isMeshPhongMaterial?(n(v,b),u(v,b)):b.isMeshStandardMaterial?(n(v,b),g(v,b),b.isMeshPhysicalMaterial&&f(v,b,E)):b.isMeshMatcapMaterial?(n(v,b),m(v,b)):b.isMeshDepthMaterial?n(v,b):b.isMeshDistanceMaterial?(n(v,b),_(v,b)):b.isMeshNormalMaterial?n(v,b):b.isLineBasicMaterial?(s(v,b),b.isLineDashedMaterial&&a(v,b)):b.isPointsMaterial?o(v,b,C,M):b.isSpriteMaterial?h(v,b):b.isShadowMaterial?(v.color.value.copy(b.color),v.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function n(v,b){v.opacity.value=b.opacity,b.color&&v.diffuse.value.copy(b.color),b.emissive&&v.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(v.map.value=b.map),b.alphaMap&&(v.alphaMap.value=b.alphaMap),b.bumpMap&&(v.bumpMap.value=b.bumpMap,v.bumpScale.value=b.bumpScale,b.side===sn&&(v.bumpScale.value*=-1)),b.displacementMap&&(v.displacementMap.value=b.displacementMap,v.displacementScale.value=b.displacementScale,v.displacementBias.value=b.displacementBias),b.emissiveMap&&(v.emissiveMap.value=b.emissiveMap),b.normalMap&&(v.normalMap.value=b.normalMap,v.normalScale.value.copy(b.normalScale),b.side===sn&&v.normalScale.value.negate()),b.specularMap&&(v.specularMap.value=b.specularMap),b.alphaTest>0&&(v.alphaTest.value=b.alphaTest);let C=t.get(b).envMap;if(C&&(v.envMap.value=C,v.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=b.reflectivity,v.ior.value=b.ior,v.refractionRatio.value=b.refractionRatio),b.lightMap){v.lightMap.value=b.lightMap;let w=r.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=b.lightMapIntensity*w}b.aoMap&&(v.aoMap.value=b.aoMap,v.aoMapIntensity.value=b.aoMapIntensity);let M;b.map?M=b.map:b.specularMap?M=b.specularMap:b.displacementMap?M=b.displacementMap:b.normalMap?M=b.normalMap:b.bumpMap?M=b.bumpMap:b.roughnessMap?M=b.roughnessMap:b.metalnessMap?M=b.metalnessMap:b.alphaMap?M=b.alphaMap:b.emissiveMap?M=b.emissiveMap:b.clearcoatMap?M=b.clearcoatMap:b.clearcoatNormalMap?M=b.clearcoatNormalMap:b.clearcoatRoughnessMap?M=b.clearcoatRoughnessMap:b.iridescenceMap?M=b.iridescenceMap:b.iridescenceThicknessMap?M=b.iridescenceThicknessMap:b.specularIntensityMap?M=b.specularIntensityMap:b.specularColorMap?M=b.specularColorMap:b.transmissionMap?M=b.transmissionMap:b.thicknessMap?M=b.thicknessMap:b.sheenColorMap?M=b.sheenColorMap:b.sheenRoughnessMap&&(M=b.sheenRoughnessMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),v.uvTransform.value.copy(M.matrix));let E;b.aoMap?E=b.aoMap:b.lightMap&&(E=b.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),v.uv2Transform.value.copy(E.matrix))}function s(v,b){v.diffuse.value.copy(b.color),v.opacity.value=b.opacity}function a(v,b){v.dashSize.value=b.dashSize,v.totalSize.value=b.dashSize+b.gapSize,v.scale.value=b.scale}function o(v,b,C,M){v.diffuse.value.copy(b.color),v.opacity.value=b.opacity,v.size.value=b.size*C,v.scale.value=M*.5,b.map&&(v.map.value=b.map),b.alphaMap&&(v.alphaMap.value=b.alphaMap),b.alphaTest>0&&(v.alphaTest.value=b.alphaTest);let E;b.map?E=b.map:b.alphaMap&&(E=b.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),v.uvTransform.value.copy(E.matrix))}function h(v,b){v.diffuse.value.copy(b.color),v.opacity.value=b.opacity,v.rotation.value=b.rotation,b.map&&(v.map.value=b.map),b.alphaMap&&(v.alphaMap.value=b.alphaMap),b.alphaTest>0&&(v.alphaTest.value=b.alphaTest);let C;b.map?C=b.map:b.alphaMap&&(C=b.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),v.uvTransform.value.copy(C.matrix))}function u(v,b){v.specular.value.copy(b.specular),v.shininess.value=Math.max(b.shininess,1e-4)}function d(v,b){b.gradientMap&&(v.gradientMap.value=b.gradientMap)}function g(v,b){v.roughness.value=b.roughness,v.metalness.value=b.metalness,b.roughnessMap&&(v.roughnessMap.value=b.roughnessMap),b.metalnessMap&&(v.metalnessMap.value=b.metalnessMap),t.get(b).envMap&&(v.envMapIntensity.value=b.envMapIntensity)}function f(v,b,C){v.ior.value=b.ior,b.sheen>0&&(v.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),v.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(v.sheenColorMap.value=b.sheenColorMap),b.sheenRoughnessMap&&(v.sheenRoughnessMap.value=b.sheenRoughnessMap)),b.clearcoat>0&&(v.clearcoat.value=b.clearcoat,v.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(v.clearcoatMap.value=b.clearcoatMap),b.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap),b.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),v.clearcoatNormalMap.value=b.clearcoatNormalMap,b.side===sn&&v.clearcoatNormalScale.value.negate())),b.iridescence>0&&(v.iridescence.value=b.iridescence,v.iridescenceIOR.value=b.iridescenceIOR,v.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(v.iridescenceMap.value=b.iridescenceMap),b.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=b.iridescenceThicknessMap)),b.transmission>0&&(v.transmission.value=b.transmission,v.transmissionSamplerMap.value=C.texture,v.transmissionSamplerSize.value.set(C.width,C.height),b.transmissionMap&&(v.transmissionMap.value=b.transmissionMap),v.thickness.value=b.thickness,b.thicknessMap&&(v.thicknessMap.value=b.thicknessMap),v.attenuationDistance.value=b.attenuationDistance,v.attenuationColor.value.copy(b.attenuationColor)),v.specularIntensity.value=b.specularIntensity,v.specularColor.value.copy(b.specularColor),b.specularIntensityMap&&(v.specularIntensityMap.value=b.specularIntensityMap),b.specularColorMap&&(v.specularColorMap.value=b.specularColorMap)}function m(v,b){b.matcap&&(v.matcap.value=b.matcap)}function _(v,b){v.referencePosition.value.copy(b.referencePosition),v.nearDistance.value=b.nearDistance,v.farDistance.value=b.farDistance}return{refreshFogUniforms:e,refreshMaterialUniforms:i}}function JO(r,t,e,i){let n={},s={},a=[],o=e.isWebGL2?r.getParameter(35375):0;function h(M,E){let w=E.program;i.uniformBlockBinding(M,w)}function u(M,E){let w=n[M.id];w===void 0&&(_(M),w=d(M),n[M.id]=w,M.addEventListener("dispose",b));let A=E.program;i.updateUBOMapping(M,A);let R=t.render.frame;s[M.id]!==R&&(f(M),s[M.id]=R)}function d(M){let E=g();M.__bindingPointIndex=E;let w=r.createBuffer(),A=M.__size,R=M.usage;return r.bindBuffer(35345,w),r.bufferData(35345,A,R),r.bindBuffer(35345,null),r.bindBufferBase(35345,E,w),w}function g(){for(let M=0;M<o;M++)if(a.indexOf(M)===-1)return a.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(M){let E=n[M.id],w=M.uniforms,A=M.__cache;r.bindBuffer(35345,E);for(let R=0,N=w.length;R<N;R++){let D=w[R];if(m(D,R,A)===!0){let X=D.value,at=D.__offset;typeof X=="number"?(D.__data[0]=X,r.bufferSubData(35345,at,D.__data)):(D.value.isMatrix3?(D.__data[0]=D.value.elements[0],D.__data[1]=D.value.elements[1],D.__data[2]=D.value.elements[2],D.__data[3]=D.value.elements[0],D.__data[4]=D.value.elements[3],D.__data[5]=D.value.elements[4],D.__data[6]=D.value.elements[5],D.__data[7]=D.value.elements[0],D.__data[8]=D.value.elements[6],D.__data[9]=D.value.elements[7],D.__data[10]=D.value.elements[8],D.__data[11]=D.value.elements[0]):X.toArray(D.__data),r.bufferSubData(35345,at,D.__data))}}r.bindBuffer(35345,null)}function m(M,E,w){let A=M.value;if(w[E]===void 0)return typeof A=="number"?w[E]=A:w[E]=A.clone(),!0;if(typeof A=="number"){if(w[E]!==A)return w[E]=A,!0}else{let R=w[E];if(R.equals(A)===!1)return R.copy(A),!0}return!1}function _(M){let E=M.uniforms,w=0,A=16,R=0;for(let N=0,D=E.length;N<D;N++){let X=E[N],at=v(X);if(X.__data=new Float32Array(at.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=w,N>0){R=w%A;let ft=A-R;R!==0&&ft-at.boundary<0&&(w+=A-R,X.__offset=w)}w+=at.storage}return R=w%A,R>0&&(w+=A-R),M.__size=w,M.__cache={},this}function v(M){let E=M.value,w={boundary:0,storage:0};return typeof E=="number"?(w.boundary=4,w.storage=4):E.isVector2?(w.boundary=8,w.storage=8):E.isVector3||E.isColor?(w.boundary=16,w.storage=12):E.isVector4?(w.boundary=16,w.storage=16):E.isMatrix3?(w.boundary=48,w.storage=48):E.isMatrix4?(w.boundary=64,w.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),w}function b(M){let E=M.target;E.removeEventListener("dispose",b);let w=a.indexOf(E.__bindingPointIndex);a.splice(w,1),r.deleteBuffer(n[E.id]),delete n[E.id],delete s[E.id]}function C(){for(let M in n)r.deleteBuffer(n[M]);a=[],n={},s={}}return{bind:h,update:u,dispose:C}}function KO(){let r=Nu("canvas");return r.style.display="block",r}function B0(r={}){this.isWebGLRenderer=!0;let t=r.canvas!==void 0?r.canvas:KO(),e=r.context!==void 0?r.context:null,i=r.depth!==void 0?r.depth:!0,n=r.stencil!==void 0?r.stencil:!0,s=r.antialias!==void 0?r.antialias:!1,a=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,o=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.powerPreference!==void 0?r.powerPreference:"default",u=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1,d;e!==null?d=e.getContextAttributes().alpha:d=r.alpha!==void 0?r.alpha:!1;let g=null,f=null,m=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=To,this.physicallyCorrectLights=!1,this.toneMapping=Ps,this.toneMappingExposure=1;let v=this,b=!1,C=0,M=0,E=null,w=-1,A=null,R=new Oi,N=new Oi,D=null,X=t.width,at=t.height,ft=1,gt=null,ut=null,xt=new Oi(0,0,X,at),nt=new Oi(0,0,X,at),it=!1,tt=new D0,W=!1,Q=!1,ot=null,ct=new Ni,Tt=new Ue,Rt=new $t,Pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Nt(){return E===null?ft:1}let At=e;function Qt(Z,ht){for(let vt=0;vt<Z.length;vt++){let _t=Z[vt],Mt=t.getContext(_t,ht);if(Mt!==null)return Mt}return null}try{let Z={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Bv}`),t.addEventListener("webglcontextlost",k,!1),t.addEventListener("webglcontextrestored",G,!1),t.addEventListener("webglcontextcreationerror",V,!1),At===null){let ht=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ht.shift(),At=Qt(ht,Z),At===null)throw Qt(ht)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}At.getShaderPrecisionFormat===void 0&&(At.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let Vt,Yt,Xt,re,qt,Ut,Lt,te,ge,Bt,oe,le,de,Se,wt,mt,Ft,l,c,p,x,y,T,P;function I(){Vt=new yk(At),Yt=new dk(At,Vt,r),Vt.init(Yt),y=new jO(At,Vt,Yt),Xt=new qO(At,Vt,Yt),re=new wk,qt=new FO,Ut=new YO(At,Vt,Xt,qt,Yt,y,re),Lt=new mk(v),te=new _k(v),ge=new DL(At,Yt),T=new ck(At,Vt,ge,Yt),Bt=new xk(At,ge,re,T),oe=new Ek(At,Bt,ge,re),c=new Ck(At,Yt,Ut),mt=new pk(qt),le=new RO(v,Lt,te,Vt,Yt,T,mt),de=new $O(v,qt),Se=new OO,wt=new GO(Vt,Yt),l=new uk(v,Lt,te,Xt,oe,d,a),Ft=new XO(v,oe,Yt),P=new JO(At,re,Yt,Xt),p=new fk(At,Vt,re,Yt),x=new bk(At,Vt,re,Yt),re.programs=le.programs,v.capabilities=Yt,v.extensions=Vt,v.properties=qt,v.renderLists=Se,v.shadowMap=Ft,v.state=Xt,v.info=re}I();let L=new xC(v,At);this.xr=L,this.getContext=function(){return At},this.getContextAttributes=function(){return At.getContextAttributes()},this.forceContextLoss=function(){let Z=Vt.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){let Z=Vt.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return ft},this.setPixelRatio=function(Z){Z!==void 0&&(ft=Z,this.setSize(X,at,!1))},this.getSize=function(Z){return Z.set(X,at)},this.setSize=function(Z,ht,vt){if(L.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=Z,at=ht,t.width=Math.floor(Z*ft),t.height=Math.floor(ht*ft),vt!==!1&&(t.style.width=Z+"px",t.style.height=ht+"px"),this.setViewport(0,0,Z,ht)},this.getDrawingBufferSize=function(Z){return Z.set(X*ft,at*ft).floor()},this.setDrawingBufferSize=function(Z,ht,vt){X=Z,at=ht,ft=vt,t.width=Math.floor(Z*vt),t.height=Math.floor(ht*vt),this.setViewport(0,0,Z,ht)},this.getCurrentViewport=function(Z){return Z.copy(R)},this.getViewport=function(Z){return Z.copy(xt)},this.setViewport=function(Z,ht,vt,_t){Z.isVector4?xt.set(Z.x,Z.y,Z.z,Z.w):xt.set(Z,ht,vt,_t),Xt.viewport(R.copy(xt).multiplyScalar(ft).floor())},this.getScissor=function(Z){return Z.copy(nt)},this.setScissor=function(Z,ht,vt,_t){Z.isVector4?nt.set(Z.x,Z.y,Z.z,Z.w):nt.set(Z,ht,vt,_t),Xt.scissor(N.copy(nt).multiplyScalar(ft).floor())},this.getScissorTest=function(){return it},this.setScissorTest=function(Z){Xt.setScissorTest(it=Z)},this.setOpaqueSort=function(Z){gt=Z},this.setTransparentSort=function(Z){ut=Z},this.getClearColor=function(Z){return Z.copy(l.getClearColor())},this.setClearColor=function(){l.setClearColor.apply(l,arguments)},this.getClearAlpha=function(){return l.getClearAlpha()},this.setClearAlpha=function(){l.setClearAlpha.apply(l,arguments)},this.clear=function(Z=!0,ht=!0,vt=!0){let _t=0;Z&&(_t|=16384),ht&&(_t|=256),vt&&(_t|=1024),At.clear(_t)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",k,!1),t.removeEventListener("webglcontextrestored",G,!1),t.removeEventListener("webglcontextcreationerror",V,!1),Se.dispose(),wt.dispose(),qt.dispose(),Lt.dispose(),te.dispose(),oe.dispose(),T.dispose(),P.dispose(),le.dispose(),L.dispose(),L.removeEventListener("sessionstart",j),L.removeEventListener("sessionend",et),ot&&(ot.dispose(),ot=null),q.stop()};function k(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function G(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;let Z=re.autoReset,ht=Ft.enabled,vt=Ft.autoUpdate,_t=Ft.needsUpdate,Mt=Ft.type;I(),re.autoReset=Z,Ft.enabled=ht,Ft.autoUpdate=vt,Ft.needsUpdate=_t,Ft.type=Mt}function V(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function H(Z){let ht=Z.target;ht.removeEventListener("dispose",H),Y(ht)}function Y(Z){B(Z),qt.remove(Z)}function B(Z){let ht=qt.get(Z).programs;ht!==void 0&&(ht.forEach(function(vt){le.releaseProgram(vt)}),Z.isShaderMaterial&&le.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,ht,vt,_t,Mt,kt){ht===null&&(ht=Pt);let Gt=Mt.isMesh&&Mt.matrixWorld.determinant()<0,Ht=bt(Z,ht,vt,_t,Mt);Xt.setMaterial(_t,Gt);let Dt=vt.index,Wt=1;_t.wireframe===!0&&(Dt=Bt.getWireframeAttribute(vt),Wt=2);let zt=vt.drawRange,Kt=vt.attributes.position,ee=zt.start*Wt,ue=(zt.start+zt.count)*Wt;kt!==null&&(ee=Math.max(ee,kt.start*Wt),ue=Math.min(ue,(kt.start+kt.count)*Wt)),Dt!==null?(ee=Math.max(ee,0),ue=Math.min(ue,Dt.count)):Kt!=null&&(ee=Math.max(ee,0),ue=Math.min(ue,Kt.count));let ne=ue-ee;if(ne<0||ne===1/0)return;T.setup(Mt,_t,Ht,vt,Dt);let me,ce=p;if(Dt!==null&&(me=ge.get(Dt),ce=x,ce.setIndex(me)),Mt.isMesh)_t.wireframe===!0?(Xt.setLineWidth(_t.wireframeLinewidth*Nt()),ce.setMode(1)):ce.setMode(4);else if(Mt.isLine){let ae=_t.linewidth;ae===void 0&&(ae=1),Xt.setLineWidth(ae*Nt()),Mt.isLineSegments?ce.setMode(1):Mt.isLineLoop?ce.setMode(2):ce.setMode(3)}else Mt.isPoints?ce.setMode(0):Mt.isSprite&&ce.setMode(4);if(Mt.isInstancedMesh)ce.renderInstances(ee,ne,Mt.count);else if(vt.isInstancedBufferGeometry){let ae=vt._maxInstanceCount!==void 0?vt._maxInstanceCount:1/0,Ze=Math.min(vt.instanceCount,ae);ce.renderInstances(ee,ne,Ze)}else ce.render(ee,ne)},this.compile=function(Z,ht){function vt(_t,Mt,kt){_t.transparent===!0&&_t.side===Zn?(_t.side=sn,_t.needsUpdate=!0,lt(_t,Mt,kt),_t.side=Bl,_t.needsUpdate=!0,lt(_t,Mt,kt),_t.side=Zn):lt(_t,Mt,kt)}f=wt.get(Z),f.init(),_.push(f),Z.traverseVisible(function(_t){_t.isLight&&_t.layers.test(ht.layers)&&(f.pushLight(_t),_t.castShadow&&f.pushShadow(_t))}),f.setupLights(v.physicallyCorrectLights),Z.traverse(function(_t){let Mt=_t.material;if(Mt)if(Array.isArray(Mt))for(let kt=0;kt<Mt.length;kt++){let Gt=Mt[kt];vt(Gt,Z,_t)}else vt(Mt,Z,_t)}),_.pop(),f=null};let z=null;function $(Z){z&&z(Z)}function j(){q.stop()}function et(){q.start()}let q=new BT;q.setAnimationLoop($),typeof self!="undefined"&&q.setContext(self),this.setAnimationLoop=function(Z){z=Z,L.setAnimationLoop(Z),Z===null?q.stop():q.start()},L.addEventListener("sessionstart",j),L.addEventListener("sessionend",et),this.render=function(Z,ht){if(ht!==void 0&&ht.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),ht.parent===null&&ht.matrixWorldAutoUpdate===!0&&ht.updateMatrixWorld(),L.enabled===!0&&L.isPresenting===!0&&(L.cameraAutoUpdate===!0&&L.updateCamera(ht),ht=L.getCamera()),Z.isScene===!0&&Z.onBeforeRender(v,Z,ht,E),f=wt.get(Z,_.length),f.init(),_.push(f),ct.multiplyMatrices(ht.projectionMatrix,ht.matrixWorldInverse),tt.setFromProjectionMatrix(ct),Q=this.localClippingEnabled,W=mt.init(this.clippingPlanes,Q,ht),g=Se.get(Z,m.length),g.init(),m.push(g),J(Z,ht,0,v.sortObjects),g.finish(),v.sortObjects===!0&&g.sort(gt,ut),W===!0&&mt.beginShadows();let vt=f.state.shadowsArray;if(Ft.render(vt,Z,ht),W===!0&&mt.endShadows(),this.info.autoReset===!0&&this.info.reset(),l.render(g,Z),f.setupLights(v.physicallyCorrectLights),ht.isArrayCamera){let _t=ht.cameras;for(let Mt=0,kt=_t.length;Mt<kt;Mt++){let Gt=_t[Mt];U(g,Z,Gt,Gt.viewport)}}else U(g,Z,ht);E!==null&&(Ut.updateMultisampleRenderTarget(E),Ut.updateRenderTargetMipmap(E)),Z.isScene===!0&&Z.onAfterRender(v,Z,ht),T.resetDefaultState(),w=-1,A=null,_.pop(),_.length>0?f=_[_.length-1]:f=null,m.pop(),m.length>0?g=m[m.length-1]:g=null};function J(Z,ht,vt,_t){if(Z.visible===!1)return;if(Z.layers.test(ht.layers)){if(Z.isGroup)vt=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ht);else if(Z.isLight)f.pushLight(Z),Z.castShadow&&f.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||tt.intersectsSprite(Z)){_t&&Rt.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(ct);let Gt=oe.update(Z),Ht=Z.material;Ht.visible&&g.push(Z,Gt,Ht,vt,Rt.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==re.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=re.render.frame),!Z.frustumCulled||tt.intersectsObject(Z))){_t&&Rt.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(ct);let Gt=oe.update(Z),Ht=Z.material;if(Array.isArray(Ht)){let Dt=Gt.groups;for(let Wt=0,zt=Dt.length;Wt<zt;Wt++){let Kt=Dt[Wt],ee=Ht[Kt.materialIndex];ee&&ee.visible&&g.push(Z,Gt,ee,vt,Rt.z,Kt)}}else Ht.visible&&g.push(Z,Gt,Ht,vt,Rt.z,null)}}let kt=Z.children;for(let Gt=0,Ht=kt.length;Gt<Ht;Gt++)J(kt[Gt],ht,vt,_t)}function U(Z,ht,vt,_t){let Mt=Z.opaque,kt=Z.transmissive,Gt=Z.transparent;f.setupLightsView(vt),kt.length>0&&K(Mt,ht,vt),_t&&Xt.viewport(R.copy(_t)),Mt.length>0&&O(Mt,ht,vt),kt.length>0&&O(kt,ht,vt),Gt.length>0&&O(Gt,ht,vt),Xt.buffers.depth.setTest(!0),Xt.buffers.depth.setMask(!0),Xt.buffers.color.setMask(!0),Xt.setPolygonOffset(!1)}function K(Z,ht,vt){let _t=Yt.isWebGL2;ot===null&&(ot=new da(1,1,{generateMipmaps:!0,type:Vt.has("EXT_color_buffer_half_float")?Fu:xo,minFilter:Qf,samples:_t&&s===!0?4:0})),v.getDrawingBufferSize(Tt),_t?ot.setSize(Tt.x,Tt.y):ot.setSize(Qv(Tt.x),Qv(Tt.y));let Mt=v.getRenderTarget();v.setRenderTarget(ot),v.clear();let kt=v.toneMapping;v.toneMapping=Ps,O(Z,ht,vt),v.toneMapping=kt,Ut.updateMultisampleRenderTarget(ot),Ut.updateRenderTargetMipmap(ot),v.setRenderTarget(Mt)}function O(Z,ht,vt){let _t=ht.isScene===!0?ht.overrideMaterial:null;for(let Mt=0,kt=Z.length;Mt<kt;Mt++){let Gt=Z[Mt],Ht=Gt.object,Dt=Gt.geometry,Wt=_t===null?Gt.material:_t,zt=Gt.group;Ht.layers.test(vt.layers)&&rt(Ht,ht,vt,Dt,Wt,zt)}}function rt(Z,ht,vt,_t,Mt,kt){Z.onBeforeRender(v,ht,vt,_t,Mt,kt),Z.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Mt.onBeforeRender(v,ht,vt,_t,Z,kt),Mt.transparent===!0&&Mt.side===Zn?(Mt.side=sn,Mt.needsUpdate=!0,v.renderBufferDirect(vt,ht,_t,Mt,Z,kt),Mt.side=Bl,Mt.needsUpdate=!0,v.renderBufferDirect(vt,ht,_t,Mt,Z,kt),Mt.side=Zn):v.renderBufferDirect(vt,ht,_t,Mt,Z,kt),Z.onAfterRender(v,ht,vt,_t,Mt,kt)}function lt(Z,ht,vt){ht.isScene!==!0&&(ht=Pt);let _t=qt.get(Z),Mt=f.state.lights,kt=f.state.shadowsArray,Gt=Mt.state.version,Ht=le.getParameters(Z,Mt.state,kt,ht,vt),Dt=le.getProgramCacheKey(Ht),Wt=_t.programs;_t.environment=Z.isMeshStandardMaterial?ht.environment:null,_t.fog=ht.fog,_t.envMap=(Z.isMeshStandardMaterial?te:Lt).get(Z.envMap||_t.environment),Wt===void 0&&(Z.addEventListener("dispose",H),Wt=new Map,_t.programs=Wt);let zt=Wt.get(Dt);if(zt!==void 0){if(_t.currentProgram===zt&&_t.lightsStateVersion===Gt)return pt(Z,Ht),zt}else Ht.uniforms=le.getUniforms(Z),Z.onBuild(vt,Ht,v),Z.onBeforeCompile(Ht,v),zt=le.acquireProgram(Ht,Dt),Wt.set(Dt,zt),_t.uniforms=Ht.uniforms;let Kt=_t.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(Kt.clippingPlanes=mt.uniform),pt(Z,Ht),_t.needsLights=St(Z),_t.lightsStateVersion=Gt,_t.needsLights&&(Kt.ambientLightColor.value=Mt.state.ambient,Kt.lightProbe.value=Mt.state.probe,Kt.directionalLights.value=Mt.state.directional,Kt.directionalLightShadows.value=Mt.state.directionalShadow,Kt.spotLights.value=Mt.state.spot,Kt.spotLightShadows.value=Mt.state.spotShadow,Kt.rectAreaLights.value=Mt.state.rectArea,Kt.ltc_1.value=Mt.state.rectAreaLTC1,Kt.ltc_2.value=Mt.state.rectAreaLTC2,Kt.pointLights.value=Mt.state.point,Kt.pointLightShadows.value=Mt.state.pointShadow,Kt.hemisphereLights.value=Mt.state.hemi,Kt.directionalShadowMap.value=Mt.state.directionalShadowMap,Kt.directionalShadowMatrix.value=Mt.state.directionalShadowMatrix,Kt.spotShadowMap.value=Mt.state.spotShadowMap,Kt.spotLightMatrix.value=Mt.state.spotLightMatrix,Kt.spotLightMap.value=Mt.state.spotLightMap,Kt.pointShadowMap.value=Mt.state.pointShadowMap,Kt.pointShadowMatrix.value=Mt.state.pointShadowMatrix);let ee=zt.getUniforms(),ue=Hu.seqWithValue(ee.seq,Kt);return _t.currentProgram=zt,_t.uniformsList=ue,zt}function pt(Z,ht){let vt=qt.get(Z);vt.outputEncoding=ht.outputEncoding,vt.instancing=ht.instancing,vt.skinning=ht.skinning,vt.morphTargets=ht.morphTargets,vt.morphNormals=ht.morphNormals,vt.morphColors=ht.morphColors,vt.morphTargetsCount=ht.morphTargetsCount,vt.numClippingPlanes=ht.numClippingPlanes,vt.numIntersection=ht.numClipIntersection,vt.vertexAlphas=ht.vertexAlphas,vt.vertexTangents=ht.vertexTangents,vt.toneMapping=ht.toneMapping}function bt(Z,ht,vt,_t,Mt){ht.isScene!==!0&&(ht=Pt),Ut.resetTextureUnits();let kt=ht.fog,Gt=_t.isMeshStandardMaterial?ht.environment:null,Ht=E===null?v.outputEncoding:E.isXRRenderTarget===!0?E.texture.encoding:To,Dt=(_t.isMeshStandardMaterial?te:Lt).get(_t.envMap||Gt),Wt=_t.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,zt=!!_t.normalMap&&!!vt.attributes.tangent,Kt=!!vt.morphAttributes.position,ee=!!vt.morphAttributes.normal,ue=!!vt.morphAttributes.color,ne=_t.toneMapped?v.toneMapping:Ps,me=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,ce=me!==void 0?me.length:0,ae=qt.get(_t),Ze=f.state.lights;if(W===!0&&(Q===!0||Z!==A)){let Ct=Z===A&&_t.id===w;mt.setState(_t,Z,Ct)}let Ee=!1;_t.version===ae.__version?(ae.needsLights&&ae.lightsStateVersion!==Ze.state.version||ae.outputEncoding!==Ht||Mt.isInstancedMesh&&ae.instancing===!1||!Mt.isInstancedMesh&&ae.instancing===!0||Mt.isSkinnedMesh&&ae.skinning===!1||!Mt.isSkinnedMesh&&ae.skinning===!0||ae.envMap!==Dt||_t.fog===!0&&ae.fog!==kt||ae.numClippingPlanes!==void 0&&(ae.numClippingPlanes!==mt.numPlanes||ae.numIntersection!==mt.numIntersection)||ae.vertexAlphas!==Wt||ae.vertexTangents!==zt||ae.morphTargets!==Kt||ae.morphNormals!==ee||ae.morphColors!==ue||ae.toneMapping!==ne||Yt.isWebGL2===!0&&ae.morphTargetsCount!==ce)&&(Ee=!0):(Ee=!0,ae.__version=_t.version);let qe=ae.currentProgram;Ee===!0&&(qe=lt(_t,ht,Mt));let $e=!1,Re=!1,S=!1,F=qe.getUniforms(),st=ae.uniforms;if(Xt.useProgram(qe.program)&&($e=!0,Re=!0,S=!0),_t.id!==w&&(w=_t.id,Re=!0),$e||A!==Z){if(F.setValue(At,"projectionMatrix",Z.projectionMatrix),Yt.logarithmicDepthBuffer&&F.setValue(At,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),A!==Z&&(A=Z,Re=!0,S=!0),_t.isShaderMaterial||_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshStandardMaterial||_t.envMap){let Ct=F.map.cameraPosition;Ct!==void 0&&Ct.setValue(At,Rt.setFromMatrixPosition(Z.matrixWorld))}(_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshLambertMaterial||_t.isMeshBasicMaterial||_t.isMeshStandardMaterial||_t.isShaderMaterial)&&F.setValue(At,"isOrthographic",Z.isOrthographicCamera===!0),(_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshLambertMaterial||_t.isMeshBasicMaterial||_t.isMeshStandardMaterial||_t.isShaderMaterial||_t.isShadowMaterial||Mt.isSkinnedMesh)&&F.setValue(At,"viewMatrix",Z.matrixWorldInverse)}if(Mt.isSkinnedMesh){F.setOptional(At,Mt,"bindMatrix"),F.setOptional(At,Mt,"bindMatrixInverse");let Ct=Mt.skeleton;Ct&&(Yt.floatVertexTextures?(Ct.boneTexture===null&&Ct.computeBoneTexture(),F.setValue(At,"boneTexture",Ct.boneTexture,Ut),F.setValue(At,"boneTextureSize",Ct.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let yt=vt.morphAttributes;if((yt.position!==void 0||yt.normal!==void 0||yt.color!==void 0&&Yt.isWebGL2===!0)&&c.update(Mt,vt,_t,qe),(Re||ae.receiveShadow!==Mt.receiveShadow)&&(ae.receiveShadow=Mt.receiveShadow,F.setValue(At,"receiveShadow",Mt.receiveShadow)),_t.isMeshGouraudMaterial&&_t.envMap!==null&&(st.envMap.value=Dt,st.flipEnvMap.value=Dt.isCubeTexture&&Dt.isRenderTargetTexture===!1?-1:1),Re&&(F.setValue(At,"toneMappingExposure",v.toneMappingExposure),ae.needsLights&&dt(st,S),kt&&_t.fog===!0&&de.refreshFogUniforms(st,kt),de.refreshMaterialUniforms(st,_t,ft,at,ot),Hu.upload(At,ae.uniformsList,st,Ut)),_t.isShaderMaterial&&_t.uniformsNeedUpdate===!0&&(Hu.upload(At,ae.uniformsList,st,Ut),_t.uniformsNeedUpdate=!1),_t.isSpriteMaterial&&F.setValue(At,"center",Mt.center),F.setValue(At,"modelViewMatrix",Mt.modelViewMatrix),F.setValue(At,"normalMatrix",Mt.normalMatrix),F.setValue(At,"modelMatrix",Mt.matrixWorld),_t.isShaderMaterial||_t.isRawShaderMaterial){let Ct=_t.uniformsGroups;for(let Ot=0,jt=Ct.length;Ot<jt;Ot++)if(Yt.isWebGL2){let se=Ct[Ot];P.update(se,qe),P.bind(se,qe)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qe}function dt(Z,ht){Z.ambientLightColor.needsUpdate=ht,Z.lightProbe.needsUpdate=ht,Z.directionalLights.needsUpdate=ht,Z.directionalLightShadows.needsUpdate=ht,Z.pointLights.needsUpdate=ht,Z.pointLightShadows.needsUpdate=ht,Z.spotLights.needsUpdate=ht,Z.spotLightShadows.needsUpdate=ht,Z.rectAreaLights.needsUpdate=ht,Z.hemisphereLights.needsUpdate=ht}function St(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(Z,ht,vt){qt.get(Z.texture).__webglTexture=ht,qt.get(Z.depthTexture).__webglTexture=vt;let _t=qt.get(Z);_t.__hasExternalTextures=!0,_t.__hasExternalTextures&&(_t.__autoAllocateDepthBuffer=vt===void 0,_t.__autoAllocateDepthBuffer||Vt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_t.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Z,ht){let vt=qt.get(Z);vt.__webglFramebuffer=ht,vt.__useDefaultFramebuffer=ht===void 0},this.setRenderTarget=function(Z,ht=0,vt=0){E=Z,C=ht,M=vt;let _t=!0,Mt=null,kt=!1,Gt=!1;if(Z){let Dt=qt.get(Z);Dt.__useDefaultFramebuffer!==void 0?(Xt.bindFramebuffer(36160,null),_t=!1):Dt.__webglFramebuffer===void 0?Ut.setupRenderTarget(Z):Dt.__hasExternalTextures&&Ut.rebindTextures(Z,qt.get(Z.texture).__webglTexture,qt.get(Z.depthTexture).__webglTexture);let Wt=Z.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(Gt=!0);let zt=qt.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Mt=zt[ht],kt=!0):Yt.isWebGL2&&Z.samples>0&&Ut.useMultisampledRTT(Z)===!1?Mt=qt.get(Z).__webglMultisampledFramebuffer:Mt=zt,R.copy(Z.viewport),N.copy(Z.scissor),D=Z.scissorTest}else R.copy(xt).multiplyScalar(ft).floor(),N.copy(nt).multiplyScalar(ft).floor(),D=it;if(Xt.bindFramebuffer(36160,Mt)&&Yt.drawBuffers&&_t&&Xt.drawBuffers(Z,Mt),Xt.viewport(R),Xt.scissor(N),Xt.setScissorTest(D),kt){let Dt=qt.get(Z.texture);At.framebufferTexture2D(36160,36064,34069+ht,Dt.__webglTexture,vt)}else if(Gt){let Dt=qt.get(Z.texture),Wt=ht||0;At.framebufferTextureLayer(36160,36064,Dt.__webglTexture,vt||0,Wt)}w=-1},this.readRenderTargetPixels=function(Z,ht,vt,_t,Mt,kt,Gt){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ht=qt.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&Gt!==void 0&&(Ht=Ht[Gt]),Ht){Xt.bindFramebuffer(36160,Ht);try{let Dt=Z.texture,Wt=Dt.format,zt=Dt.type;if(Wt!==Cn&&y.convert(Wt)!==At.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Kt=zt===Fu&&(Vt.has("EXT_color_buffer_half_float")||Yt.isWebGL2&&Vt.has("EXT_color_buffer_float"));if(zt!==xo&&y.convert(zt)!==At.getParameter(35738)&&!(zt===wo&&(Yt.isWebGL2||Vt.has("OES_texture_float")||Vt.has("WEBGL_color_buffer_float")))&&!Kt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ht>=0&&ht<=Z.width-_t&&vt>=0&&vt<=Z.height-Mt&&At.readPixels(ht,vt,_t,Mt,y.convert(Wt),y.convert(zt),kt)}finally{let Dt=E!==null?qt.get(E).__webglFramebuffer:null;Xt.bindFramebuffer(36160,Dt)}}},this.copyFramebufferToTexture=function(Z,ht,vt=0){let _t=Math.pow(2,-vt),Mt=Math.floor(ht.image.width*_t),kt=Math.floor(ht.image.height*_t);Ut.setTexture2D(ht,0),At.copyTexSubImage2D(3553,vt,0,0,Z.x,Z.y,Mt,kt),Xt.unbindTexture()},this.copyTextureToTexture=function(Z,ht,vt,_t=0){let Mt=ht.image.width,kt=ht.image.height,Gt=y.convert(vt.format),Ht=y.convert(vt.type);Ut.setTexture2D(vt,0),At.pixelStorei(37440,vt.flipY),At.pixelStorei(37441,vt.premultiplyAlpha),At.pixelStorei(3317,vt.unpackAlignment),ht.isDataTexture?At.texSubImage2D(3553,_t,Z.x,Z.y,Mt,kt,Gt,Ht,ht.image.data):ht.isCompressedTexture?At.compressedTexSubImage2D(3553,_t,Z.x,Z.y,ht.mipmaps[0].width,ht.mipmaps[0].height,Gt,ht.mipmaps[0].data):At.texSubImage2D(3553,_t,Z.x,Z.y,Gt,Ht,ht.image),_t===0&&vt.generateMipmaps&&At.generateMipmap(3553),Xt.unbindTexture()},this.copyTextureToTexture3D=function(Z,ht,vt,_t,Mt=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let kt=Z.max.x-Z.min.x+1,Gt=Z.max.y-Z.min.y+1,Ht=Z.max.z-Z.min.z+1,Dt=y.convert(_t.format),Wt=y.convert(_t.type),zt;if(_t.isData3DTexture)Ut.setTexture3D(_t,0),zt=32879;else if(_t.isDataArrayTexture)Ut.setTexture2DArray(_t,0),zt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}At.pixelStorei(37440,_t.flipY),At.pixelStorei(37441,_t.premultiplyAlpha),At.pixelStorei(3317,_t.unpackAlignment);let Kt=At.getParameter(3314),ee=At.getParameter(32878),ue=At.getParameter(3316),ne=At.getParameter(3315),me=At.getParameter(32877),ce=vt.isCompressedTexture?vt.mipmaps[0]:vt.image;At.pixelStorei(3314,ce.width),At.pixelStorei(32878,ce.height),At.pixelStorei(3316,Z.min.x),At.pixelStorei(3315,Z.min.y),At.pixelStorei(32877,Z.min.z),vt.isDataTexture||vt.isData3DTexture?At.texSubImage3D(zt,Mt,ht.x,ht.y,ht.z,kt,Gt,Ht,Dt,Wt,ce.data):vt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),At.compressedTexSubImage3D(zt,Mt,ht.x,ht.y,ht.z,kt,Gt,Ht,Dt,ce.data)):At.texSubImage3D(zt,Mt,ht.x,ht.y,ht.z,kt,Gt,Ht,Dt,Wt,ce),At.pixelStorei(3314,Kt),At.pixelStorei(32878,ee),At.pixelStorei(3316,ue),At.pixelStorei(3315,ne),At.pixelStorei(32877,me),Mt===0&&_t.generateMipmaps&&At.generateMipmap(zt),Xt.unbindTexture()},this.initTexture=function(Z){Z.isCubeTexture?Ut.setTextureCube(Z,0):Z.isData3DTexture?Ut.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?Ut.setTexture2DArray(Z,0):Ut.setTexture2D(Z,0),Xt.unbindTexture()},this.resetState=function(){C=0,M=0,E=null,Xt.reset(),T.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var bC=class extends B0{};bC.prototype.isWebGL1Renderer=!0;var z0=class extends Pr{constructor(){super();this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}};function Ta(r,t,e){return wC(r)?new r.constructor(r.subarray(t,e!==void 0?e:r.length)):r.slice(t,e)}function Pd(r,t,e){return!r||!e&&r.constructor===t?r:typeof t.BYTES_PER_ELEMENT=="number"?new t(r):Array.prototype.slice.call(r)}function wC(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}var qu=class{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,n=e[i],s=e[i-1];t:{e:{let a;i:{r:if(!(t<n)){for(let o=i+2;;){if(n===void 0){if(t<s)break r;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=n,n=e[++i],t<n)break e}a=e.length;break i}if(!(t>=s)){let o=e[1];t<o&&(i=2,s=o);for(let h=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(n=s,s=e[--i-1],t>=s)break e}a=i,i=0;break i}break t}for(;i<a;){let o=i+a>>>1;t<e[o]?a=o:i=o+1}if(n=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=t*n;for(let a=0;a!==n;++a)e[a]=i[s+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},SC=class extends qu{constructor(t,e,i,n){super(t,e,i,n);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mT,endingEnd:mT}}intervalChanged_(t,e,i){let n=this.parameterPositions,s=t-2,a=t+1,o=n[s],h=n[a];if(o===void 0)switch(this.getSettings_().endingStart){case gT:s=t,o=2*e-i;break;case vT:s=n.length-2,o=e+n[s]-n[s+1];break;default:s=t,o=i}if(h===void 0)switch(this.getSettings_().endingEnd){case gT:a=t,h=2*i-e;break;case vT:a=1,h=i+n[1]-n[0];break;default:a=t-1,h=e}let u=(i-e)*.5,d=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(h-i),this._offsetPrev=s*d,this._offsetNext=a*d}interpolate_(t,e,i,n){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,h=t*o,u=h-o,d=this._offsetPrev,g=this._offsetNext,f=this._weightPrev,m=this._weightNext,_=(i-e)/(n-e),v=_*_,b=v*_,C=-f*b+2*f*v-f*_,M=(1+f)*b+(-1.5-2*f)*v+(-.5+f)*_+1,E=(-1-m)*b+(1.5+m)*v+.5*_,w=m*b-m*v;for(let A=0;A!==o;++A)s[A]=C*a[d+A]+M*a[u+A]+E*a[h+A]+w*a[g+A];return s}},TC=class extends qu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,h=t*o,u=h-o,d=(i-e)/(n-e),g=1-d;for(let f=0;f!==o;++f)s[f]=a[u+f]*g+a[h+f]*d;return s}},CC=class extends qu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}},ts=class{constructor(t,e,i,n){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Pd(e,this.TimeBufferType),this.values=Pd(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Pd(t.times,Array),values:Pd(t.values,Array)};let n=t.getInterpolation();n!==t.DefaultInterpolation&&(i.interpolation=n)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new CC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new TC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new SC(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case td:e=this.InterpolantFactoryMethodDiscrete;break;case ed:e=this.InterpolantFactoryMethodLinear;break;case jv:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return td;case this.InterpolantFactoryMethodLinear:return ed;case this.InterpolantFactoryMethodSmooth:return jv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){let i=this.times,n=i.length,s=0,a=n-1;for(;s!==n&&i[s]<t;)++s;for(;a!==-1&&i[a]>e;)--a;if(++a,s!==0||a!==n){s>=a&&(a=Math.max(a,1),s=a-1);let o=this.getValueSize();this.times=Ta(i,s,a),this.values=Ta(this.values,s*o,a*o)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,n=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let o=0;o!==s;o++){let h=i[o];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,h),t=!1;break}if(a!==null&&a>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,h,a),t=!1;break}a=h}if(n!==void 0&&wC(n))for(let o=0,h=n.length;o!==h;++o){let u=n[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),t=!1;break}}return t}optimize(){let t=Ta(this.times),e=Ta(this.values),i=this.getValueSize(),n=this.getInterpolation()===jv,s=t.length-1,a=1;for(let o=1;o<s;++o){let h=!1,u=t[o],d=t[o+1];if(u!==d&&(o!==1||u!==t[0]))if(n)h=!0;else{let g=o*i,f=g-i,m=g+i;for(let _=0;_!==i;++_){let v=e[g+_];if(v!==e[f+_]||v!==e[m+_]){h=!0;break}}}if(h){if(o!==a){t[a]=t[o];let g=o*i,f=a*i;for(let m=0;m!==i;++m)e[f+m]=e[g+m]}++a}}if(s>0){t[a]=t[s];for(let o=s*i,h=a*i,u=0;u!==i;++u)e[h+u]=e[o+u];++a}return a!==t.length?(this.times=Ta(t,0,a),this.values=Ta(e,0,a*i)):(this.times=t,this.values=e),this}clone(){let t=Ta(this.times,0),e=Ta(this.values,0),i=this.constructor,n=new i(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}};ts.prototype.TimeBufferType=Float32Array;ts.prototype.ValueBufferType=Float32Array;ts.prototype.DefaultInterpolation=ed;var fh=class extends ts{};fh.prototype.ValueTypeName="bool";fh.prototype.ValueBufferType=Array;fh.prototype.DefaultInterpolation=td;fh.prototype.InterpolantFactoryMethodLinear=void 0;fh.prototype.InterpolantFactoryMethodSmooth=void 0;var EC=class extends ts{};EC.prototype.ValueTypeName="color";var MC=class extends ts{};MC.prototype.ValueTypeName="number";var PC=class extends qu{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,h=(i-e)/(n-e),u=t*o;for(let d=u+o;u!==d;u+=4)Mo.slerpFlat(s,0,a,u-o,a,u,h);return s}},Ad=class extends ts{InterpolantFactoryMethodLinear(t){return new PC(this.times,this.values,this.getValueSize(),t)}};Ad.prototype.ValueTypeName="quaternion";Ad.prototype.DefaultInterpolation=ed;Ad.prototype.InterpolantFactoryMethodSmooth=void 0;var dh=class extends ts{};dh.prototype.ValueTypeName="string";dh.prototype.ValueBufferType=Array;dh.prototype.DefaultInterpolation=td;dh.prototype.InterpolantFactoryMethodLinear=void 0;dh.prototype.InterpolantFactoryMethodSmooth=void 0;var AC=class extends ts{};AC.prototype.ValueTypeName="vector";var IC={enabled:!1,files:{},add:function(r,t){this.enabled!==!1&&(this.files[r]=t)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}},DC=class{constructor(t,e,i){let n=this,s=!1,a=0,o=0,h,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(d){o++,s===!1&&n.onStart!==void 0&&n.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,n.onProgress!==void 0&&n.onProgress(d,a,o),a===o&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(d){n.onError!==void 0&&n.onError(d)},this.resolveURL=function(d){return h?h(d):d},this.setURLModifier=function(d){return h=d,this},this.addHandler=function(d,g){return u.push(d,g),this},this.removeHandler=function(d){let g=u.indexOf(d);return g!==-1&&u.splice(g,2),this},this.getHandler=function(d){for(let g=0,f=u.length;g<f;g+=2){let m=u[g],_=u[g+1];if(m.global&&(m.lastIndex=0),m.test(d))return _}return null}}},QO=new DC,V0=class{constructor(t){this.manager=t!==void 0?t:QO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let i=this;return new Promise(function(n,s){i.load(t,n,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};var LC=class extends V0{constructor(t){super(t)}load(t,e,i,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let s=this,a=IC.get(t);if(a!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(a),s.manager.itemEnd(t)},0),a;let o=Nu("img");function h(){d(),IC.add(t,this),e&&e(this),s.manager.itemEnd(t)}function u(g){d(),n&&n(g),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){o.removeEventListener("load",h,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",h,!1),o.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(t),o.src=t,o}};var U0=class extends V0{constructor(t){super(t)}load(t,e,i,n){let s=new cr,a=new LC(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(o){s.image=o,s.needsUpdate=!0,e!==void 0&&e(s)},i,n),s}};var G0="\\[\\]\\.:\\/",tN=new RegExp("["+G0+"]","g"),H0="[^"+G0+"]",eN="[^"+G0.replace("\\.","")+"]",iN=/((?:WC+[\/:])*)/.source.replace("WC",H0),rN=/(WCOD+)?/.source.replace("WCOD",eN),nN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",H0),sN=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",H0),aN=new RegExp("^"+iN+rN+nN+sN+"$"),oN=["material","materials","bones","map"],RC=class{constructor(t,e,i){let n=i||We.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,n=this._bindings[i];n!==void 0&&n.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},We=class{constructor(t,e,i){this.path=e,this.parsedPath=i||We.parseTrackName(e),this.node=We.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new We.Composite(t,e,i):new We(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(tN,"")}static parseTrackName(t){let e=aN.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){let s=i.nodeName.substring(n+1);oN.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){let i=function(s){for(let a=0;a<s.length;a++){let o=s[a];if(o.name===e||o.uuid===e)return o;let h=i(o.children);if(h)return h}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){let i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){let i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,s=e.propertyIndex;if(t||(t=We.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[n];if(a===void 0){let u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};We.Composite=RC;We.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};We.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};We.prototype.GetterByBindingType=[We.prototype._getValue_direct,We.prototype._getValue_array,We.prototype._getValue_arrayElement,We.prototype._getValue_toArray];We.prototype.SetterByBindingTypeAndVersioning=[[We.prototype._setValue_direct,We.prototype._setValue_direct_setNeedsUpdate,We.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[We.prototype._setValue_array,We.prototype._setValue_array_setNeedsUpdate,We.prototype._setValue_array_setMatrixWorldNeedsUpdate],[We.prototype._setValue_arrayElement,We.prototype._setValue_arrayElement_setNeedsUpdate,We.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[We.prototype._setValue_fromArray,We.prototype._setValue_fromArray_setNeedsUpdate,We.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var HV=new Float32Array(1);var W0=class{constructor(t,e,i=0,n=1/0){this.ray=new p0(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new fd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return X0(t,this,i,e),i.sort(FC),i}intersectObjects(t,e=!0,i=[]){for(let n=0,s=t.length;n<s;n++)X0(t[n],this,i,e);return i.sort(FC),i}};function FC(r,t){return r.distance-t.distance}function X0(r,t,e,i){if(r.layers.test(t.layers)&&r.raycast(t,e),i===!0){let n=r.children;for(let s=0,a=n.length;s<a;s++)X0(n[s],t,e,!0)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Bv}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Bv);var kC="uniform float uTime;uniform vec2 uMousePos;uniform float uMouseOver;varying vec2 vUv;varying float vNoise;void main(){vUv=uv;vec3 newPosition=position;float dist=distance(vUv,uMousePos);gl_Position=projectionMatrix*modelViewMatrix*vec4(newPosition,1.0);}";var OC="varying vec2 vUv;varying float vNoise;uniform sampler2D uTexture;uniform vec2 uMousePos;uniform float uMouseOver;uniform float uTime;uniform vec2 uTextureSize;uniform vec2 uPlaneSize;uniform float uAlpha;float circle(in vec2 _uv,in float _radius,in float blurriness){vec2 dist=_uv;return 1.0-smoothstep(_radius-(_radius*blurriness),_radius+(_radius*blurriness),dot(dist,dist)*4.0);}vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise3(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3  ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}void main(){vec2 uv=vUv;vec2 dotUv=vUv;vec2 mouse=uMousePos;float planeAspectRatio=uTextureSize.x/uTextureSize.y;float textureAspectRatio=uPlaneSize.x/uPlaneSize.y;if(planeAspectRatio>textureAspectRatio){float planeWidth=uTextureSize.x*(uPlaneSize.y/uTextureSize.y);float difference=planeWidth-uPlaneSize.x;float halfDifference=difference/2.0;uv.x=(vUv.x*uPlaneSize.x+halfDifference)/planeWidth;dotUv.y*=planeAspectRatio;mouse.y*=planeAspectRatio;}if(planeAspectRatio<textureAspectRatio){float planeHeight=uTextureSize.y*(uPlaneSize.x/uTextureSize.x);float difference=planeHeight-uPlaneSize.y;float halfDifference=difference/2.0;uv.y=(vUv.y*uPlaneSize.y+halfDifference)/planeHeight;dotUv.x*=planeAspectRatio;mouse.x*=planeAspectRatio;}float c=circle(dotUv-mouse,1.0,10.5);float offx=uv.x+sin(uv.y+uTime*.1);float offy=uv.y-uTime*0.01-cos(uTime*.001)*.1;float n=snoise3(vec3(offx,offy,uTime*0.05)*5.0)*0.1;float finalMask=smoothstep(0.4,0.8,c-n);vec2 surface=vec2(mix(-0.1,0.1,finalMask),mix(-0.1,0.1,finalMask));gl_FragColor=vec4(texture2D(uTexture,uv+finalMask*0.03*uMouseOver).rgb,uAlpha);gl_FragColor.rgb-=uMouseOver*0.01*vec3(finalMask);}";var NC=class{constructor(){this.container=document.querySelector("#effects"),this.canvas=this.container.querySelector("canvas"),this.currentScroll=0,this.images=[],this.elements=[],this.mouse=new Ue(.5,.5),this.loader=new U0,this.init(),MONO.Ticker.add(this.onFrame,0),MONO.Scroll.add(this.onScroll),MONO.Mouse.add(this.onMouseMove),MONO.View.add(this.onResize)}loadTexture=t=>new Promise((e,i)=>{this.loader.load(t,e,void 0,i)});async mount(){this.images=document.querySelectorAll("[data-effect]"),await this.addImages()}start(){this.updateElements(),this.updateCanvasAndCamera()}stop(){for(let t of this.elements)this.scene.remove(t.mesh);this.elements=[]}init(){this.camera=new Ar(70,this.container.offsetWidth/this.container.offsetHeight,300,1e3),this.camera.position.z=400,this.camera.fov=2*Math.atan(this.container.offsetHeight/2/400)*(180/Math.PI),this.scene=new z0,this.raycaster=new W0,this.renderer=new B0({canvas:this.canvas,antialias:!0,alpha:!0}),this.renderer.setPixelRatio(2),this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.material=new Kn({uniforms:{uTexture:{value:""},uTextureSize:{value:new Ue(1,1)},uTime:{value:0},uMouseOver:{value:0},uMousePos:{value:new Ue(.5,.5)},uPlaneSize:{value:new Ue(1,1)}},defines:{PR:window.devicePixelRatio.toFixed(1)},side:Zn,vertexShader:kC,fragmentShader:OC,transparent:!0})}async addImages(){this.materials=[];for(let[t,e]of this.images.entries()){let i=e.tagName==="PICTURE"?e.querySelector("img").currentSrc:e.currentSrc,n=e.getBoundingClientRect(),s=new lh(n.width,n.height,20,20),a=await this.loadTexture(i),o=a.image;e.dataset.eid=t,a.generateMipmaps=!1,a.minFilter=Er,a.needsUpdate=!0;let h=this.material.clone();e.addEventListener("mouseenter",()=>{Zt.to(h.uniforms.uMouseOver,{value:1,duration:.5,ease:"power2.inOut"})}),e.addEventListener("mouseleave",()=>{Zt.to(h.uniforms.uMouseOver,{value:0,duration:.5,ease:"power2.inOut"})}),h.uniforms.uTexture.value=a,h.uniforms.uTextureSize.value.x=o.width,h.uniforms.uTextureSize.value.y=o.height,h.uniforms.uPlaneSize.value.x=n.width,h.uniforms.uPlaneSize.value.y=n.height,h.uniforms.uAlpha={value:1},this.materials.push(h);let u=new In(s,h);u.position.x=n.left-this.container.offsetWidth/2+n.width/2,u.position.y=-n.top+this.container.offsetHeight/2-n.height/2,this.scene.add(u),this.elements[t]={el:e,mesh:u,top:n.top,left:n.left,width:n.width,height:n.height}}}updatePositions=()=>{for(let t of this.elements){let e=t.el.getBoundingClientRect();t.mesh.position.x=e.left-this.container.offsetWidth/2+e.width/2,t.mesh.position.y=this.currentScroll-e.top+this.container.offsetHeight/2-e.height/2}};updateSizes=()=>{for(let t of this.elements){let e=t.el.getBoundingClientRect(),i={width:t.width,height:t.height};t.mesh.material.uniforms.uPlaneSize.value.x=e.width,t.mesh.material.uniforms.uPlaneSize.value.y=e.height,t.mesh.scale.set(e.width/i.width,e.height/i.height,1)}};updateElements=()=>{this.updatePositions(),this.updateSizes()};updateCanvasAndCamera=()=>{this.renderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.fov=2*Math.atan(this.container.offsetHeight/2/400)*(180/Math.PI),this.camera.updateProjectionMatrix()};onScroll=()=>{this.currentScroll=-MONO.Scroll.instance.scroll,this.camera.position.y=this.currentScroll};onResize=()=>{this.updateElements(),this.updateCanvasAndCamera()};onMouseMove=()=>{};onFrame=t=>{this.raycaster.setFromCamera(MONO.Mouse.mousePosNormalized,this.camera);let e=this.raycaster.intersectObjects(this.scene.children);for(let i of e)this.mouse.x+=(i.uv.x-this.mouse.x)*.05,this.mouse.y+=(i.uv.y-this.mouse.y)*.05,i.object.material.uniforms.uMousePos.value=this.mouse;this.renderer&&this.renderer.render(this.scene,this.camera),this.materials&&this.materials.forEach(i=>{i.uniforms.uTime.value+=.05})}},BC=NC;var VC=Vi(zC()),UC=class{constructor(){this.items=[],this.promises=[]}getItems(){this.items=document.querySelectorAll("[data-preload]")}async waitForSource(t){return new Promise((e,i)=>{(function n(){t.currentSrc?e():setTimeout(n,100)})()})}async loadFonts(t){if(t.length>0)await Promise.all(t.map(e=>new VC.default(e).load()));else return Promise.resolve()}async loadImages(){if(this.getItems(),this.items.length>0){for(let t of this.items)if(t.tagName==="IMG"||t.tagName==="PICTURE"){let e=t;t.tagName==="PICTURE"&&(e=t.querySelector("img")),e.currentSrc||await this.waitForSource(e),this.promises.push(new Promise((i,n)=>{let s=new Image;s.onload=i,s.onerror=n,s.src=e.currentSrc}))}}await Promise.all(this.promises)}},GC=UC;"use strict";Zt.registerPlugin(Fe);var HC=class{constructor(){this.State={firstLoad:!0,debug:!1},this.Assets=document.querySelector("meta[name=monotwo-assets]").getAttribute("content"),this.Routes={views:[jw,Zw,$w,Kw,Qw,tS,eS,iS],transitions:[aS],debug:this.State.debug,timeout:5e3}}};document.addEventListener("DOMContentLoaded",function(r){window.MONO=new HC,MONO.Ticker=new hS,MONO.Trigger=Fe,MONO.Reveal=new RS,MONO.Router=new fS,MONO.Loader=new GC,MONO.View=new mS,MONO.LazyLoad=new vS,MONO.Lottie=new AS,MONO.Mouse=new DS,MONO.Scroll=new CS,MONO.TouchState=new MS,MONO.Effects=new BC});})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 * @pixi/accessibility - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/app - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/core - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/display - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/extract - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-alpha - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-blur - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-color-matrix - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-displacement - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-fxaa - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-noise - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/graphics - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/interaction - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/loaders - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/math - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh-extras - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-child-by-name - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-global-position - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/particles - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/polyfill - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/prepare - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/runner - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/settings - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-animated - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-tiling - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/spritesheet - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text-bitmap - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/ticker - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/utils - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * CSSPlugin 3.11.3
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * Draggable 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */
/*!
 * GSAP 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * InertiaPlugin 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * Observer 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */
/*!
 * ScrollTrigger 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * SplitText: 3.11.3
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * VelocityTracker: 3.11.3
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * matrix 3.11.3
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 * pixi.js - v5.3.9
 * Compiled Wed, 24 Mar 2021 19:54:16 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * strings: 3.11.3
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! https://mths.be/punycode v1.3.2 by @mathias */
/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
